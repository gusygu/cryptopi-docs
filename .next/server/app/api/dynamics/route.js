/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/dynamics/route";
exports.ids = ["app/api/dynamics/route"];
exports.modules = {

/***/ "(rsc)/./lab/legacy/auxiliary/mea_aux/tiers.ts":
/*!***********************************************!*\
  !*** ./lab/legacy/auxiliary/mea_aux/tiers.ts ***!
  \***********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   DEFAULT_TIER_RULES: () => (/* binding */ DEFAULT_TIER_RULES),\n/* harmony export */   getTierWeighting: () => (/* binding */ getTierWeighting)\n/* harmony export */ });\n/* harmony import */ var _lib_tiers_meaAux__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @/lib/tiers/meaAux */ \"(rsc)/./src/lib/tiers/meaAux.ts\");\n// src/auxiliary/mea_aux/tiers.ts\n\n// A default array if callers still want to inspect bins (optional usage)\nconst DEFAULT_TIER_RULES = [\n    {\n        key: \"alpha\",\n        name: \"Alpha\",\n        minAbs: 0.00016,\n        maxAbs: 0.00032,\n        weight: 0.15\n    },\n    {\n        key: \"beta\",\n        name: \"Beta\",\n        minAbs: 0.00033,\n        maxAbs: 0.00045,\n        weight: 0.55\n    },\n    {\n        key: \"gamma\",\n        name: \"Gamma\",\n        minAbs: 0.00046,\n        maxAbs: 0.00076,\n        weight: 1.15\n    },\n    {\n        key: \"delta\",\n        name: \"Delta\",\n        minAbs: 0.00077,\n        maxAbs: 0.00120,\n        weight: 0.65\n    },\n    {\n        key: \"epsilon\",\n        name: \"Epsilon\",\n        minAbs: 0.00121,\n        maxAbs: null,\n        weight: 0.50\n    }\n];\n// The only number buildMeaAux actually needs:\nfunction getTierWeighting(id_pct, _rules = DEFAULT_TIER_RULES) {\n    return (0,_lib_tiers_meaAux__WEBPACK_IMPORTED_MODULE_0__.computeMeaAux)(Number(id_pct || 0)).weight;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9sYWIvbGVnYWN5L2F1eGlsaWFyeS9tZWFfYXV4L3RpZXJzLnRzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUFBLGlDQUFpQztBQUNrQjtBQVduRCx5RUFBeUU7QUFDbEUsTUFBTUMscUJBQWlDO0lBQzVDO1FBQUVDLEtBQUs7UUFBV0MsTUFBTTtRQUFXQyxRQUFRO1FBQVNDLFFBQVE7UUFBU0MsUUFBUTtJQUFLO0lBQ2xGO1FBQUVKLEtBQUs7UUFBV0MsTUFBTTtRQUFXQyxRQUFRO1FBQVNDLFFBQVE7UUFBU0MsUUFBUTtJQUFLO0lBQ2xGO1FBQUVKLEtBQUs7UUFBV0MsTUFBTTtRQUFXQyxRQUFRO1FBQVNDLFFBQVE7UUFBU0MsUUFBUTtJQUFLO0lBQ2xGO1FBQUVKLEtBQUs7UUFBV0MsTUFBTTtRQUFXQyxRQUFRO1FBQVNDLFFBQVE7UUFBU0MsUUFBUTtJQUFLO0lBQ2xGO1FBQUVKLEtBQUs7UUFBV0MsTUFBTTtRQUFXQyxRQUFRO1FBQVNDLFFBQVE7UUFBVUMsUUFBUTtJQUFLO0NBQ3BGLENBQUM7QUFFRiw4Q0FBOEM7QUFDdkMsU0FBU0MsaUJBQWlCQyxNQUFjLEVBQUVDLFNBQXFCUixrQkFBa0I7SUFDdEYsT0FBT0QsZ0VBQWFBLENBQUNVLE9BQU9GLFVBQVUsSUFBSUYsTUFBTTtBQUNsRCIsInNvdXJjZXMiOlsiSDpcXFVzZXJzXFxHdXNcXHNvdXJjZVxccmVwb1xcZHluYW1pY3NcXGR5bmFtaWNzLWJcXGNyeXB0b3BpLWR5bmFtaWNzXFxsYWJcXGxlZ2FjeVxcYXV4aWxpYXJ5XFxtZWFfYXV4XFx0aWVycy50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBzcmMvYXV4aWxpYXJ5L21lYV9hdXgvdGllcnMudHNcbmltcG9ydCB7IGNvbXB1dGVNZWFBdXggfSBmcm9tIFwiQC9saWIvdGllcnMvbWVhQXV4XCI7XG5cbi8vIEtlcHQgdHlwZSBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIGV4aXN0aW5nIGNvZGVcbmV4cG9ydCB0eXBlIFRpZXJSdWxlID0ge1xuICBtaW5BYnM6IG51bWJlcjsgICAgIC8vIGluY2x1c2l2ZVxuICBtYXhBYnM6IG51bWJlcnxudWxsOy8vIGluY2x1c2l2ZSB3aGVuIG51bWJlciwgbnVsbCA9PiAr4oieXG4gIHdlaWdodDogbnVtYmVyOyAgICAgLy8gdW5zaWduZWQgYmluIHdlaWdodFxuICBuYW1lOiBzdHJpbmc7ICAgICAgIC8vIEdyZWVrIHdyaXR0ZW4gbmFtZVxuICBrZXk6IFwiYWxwaGFcInxcImJldGFcInxcImdhbW1hXCJ8XCJkZWx0YVwifFwiZXBzaWxvblwiO1xufTtcblxuLy8gQSBkZWZhdWx0IGFycmF5IGlmIGNhbGxlcnMgc3RpbGwgd2FudCB0byBpbnNwZWN0IGJpbnMgKG9wdGlvbmFsIHVzYWdlKVxuZXhwb3J0IGNvbnN0IERFRkFVTFRfVElFUl9SVUxFUzogVGllclJ1bGVbXSA9IFtcbiAgeyBrZXk6IFwiYWxwaGFcIiwgICBuYW1lOiBcIkFscGhhXCIsICAgbWluQWJzOiAwLjAwMDE2LCBtYXhBYnM6IDAuMDAwMzIsIHdlaWdodDogMC4xNSB9LFxuICB7IGtleTogXCJiZXRhXCIsICAgIG5hbWU6IFwiQmV0YVwiLCAgICBtaW5BYnM6IDAuMDAwMzMsIG1heEFiczogMC4wMDA0NSwgd2VpZ2h0OiAwLjU1IH0sXG4gIHsga2V5OiBcImdhbW1hXCIsICAgbmFtZTogXCJHYW1tYVwiLCAgIG1pbkFiczogMC4wMDA0NiwgbWF4QWJzOiAwLjAwMDc2LCB3ZWlnaHQ6IDEuMTUgfSxcbiAgeyBrZXk6IFwiZGVsdGFcIiwgICBuYW1lOiBcIkRlbHRhXCIsICAgbWluQWJzOiAwLjAwMDc3LCBtYXhBYnM6IDAuMDAxMjAsIHdlaWdodDogMC42NSB9LFxuICB7IGtleTogXCJlcHNpbG9uXCIsIG5hbWU6IFwiRXBzaWxvblwiLCBtaW5BYnM6IDAuMDAxMjEsIG1heEFiczogbnVsbCwgICAgIHdlaWdodDogMC41MCB9LFxuXTtcblxuLy8gVGhlIG9ubHkgbnVtYmVyIGJ1aWxkTWVhQXV4IGFjdHVhbGx5IG5lZWRzOlxuZXhwb3J0IGZ1bmN0aW9uIGdldFRpZXJXZWlnaHRpbmcoaWRfcGN0OiBudW1iZXIsIF9ydWxlczogVGllclJ1bGVbXSA9IERFRkFVTFRfVElFUl9SVUxFUyk6IG51bWJlciB7XG4gIHJldHVybiBjb21wdXRlTWVhQXV4KE51bWJlcihpZF9wY3QgfHwgMCkpLndlaWdodDtcbn1cbiJdLCJuYW1lcyI6WyJjb21wdXRlTWVhQXV4IiwiREVGQVVMVF9USUVSX1JVTEVTIiwia2V5IiwibmFtZSIsIm1pbkFicyIsIm1heEFicyIsIndlaWdodCIsImdldFRpZXJXZWlnaHRpbmciLCJpZF9wY3QiLCJfcnVsZXMiLCJOdW1iZXIiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./lab/legacy/auxiliary/mea_aux/tiers.ts\n");

/***/ }),

/***/ "(rsc)/./node_modules/.pnpm/next@15.5.2_@playwright+tes_b7e6c280e9a1b4309347c0bf0ab476d5/node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fdynamics%2Froute&page=%2Fapi%2Fdynamics%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fdynamics%2Froute.ts&appDir=H%3A%5CUsers%5CGus%5Csource%5Crepo%5Cdynamics%5Cdynamics-b%5Ccryptopi-dynamics%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=H%3A%5CUsers%5CGus%5Csource%5Crepo%5Cdynamics%5Cdynamics-b%5Ccryptopi-dynamics&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=!":
/*!*************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/next@15.5.2_@playwright+tes_b7e6c280e9a1b4309347c0bf0ab476d5/node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fdynamics%2Froute&page=%2Fapi%2Fdynamics%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fdynamics%2Froute.ts&appDir=H%3A%5CUsers%5CGus%5Csource%5Crepo%5Cdynamics%5Cdynamics-b%5Ccryptopi-dynamics%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=H%3A%5CUsers%5CGus%5Csource%5Crepo%5Cdynamics%5Cdynamics-b%5Ccryptopi-dynamics&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=! ***!
  \*************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   handler: () => (/* binding */ handler),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   workAsyncStorage: () => (/* binding */ workAsyncStorage),\n/* harmony export */   workUnitAsyncStorage: () => (/* binding */ workUnitAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/.pnpm/next@15.5.2_@playwright+tes_b7e6c280e9a1b4309347c0bf0ab476d5/node_modules/next/dist/server/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/route-kind */ \"(rsc)/./node_modules/.pnpm/next@15.5.2_@playwright+tes_b7e6c280e9a1b4309347c0bf0ab476d5/node_modules/next/dist/server/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/.pnpm/next@15.5.2_@playwright+tes_b7e6c280e9a1b4309347c0bf0ab476d5/node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var next_dist_server_request_meta__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! next/dist/server/request-meta */ \"(rsc)/./node_modules/.pnpm/next@15.5.2_@playwright+tes_b7e6c280e9a1b4309347c0bf0ab476d5/node_modules/next/dist/server/request-meta.js\");\n/* harmony import */ var next_dist_server_request_meta__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_request_meta__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var next_dist_server_lib_trace_tracer__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! next/dist/server/lib/trace/tracer */ \"(rsc)/./node_modules/.pnpm/next@15.5.2_@playwright+tes_b7e6c280e9a1b4309347c0bf0ab476d5/node_modules/next/dist/server/lib/trace/tracer.js\");\n/* harmony import */ var next_dist_server_lib_trace_tracer__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_trace_tracer__WEBPACK_IMPORTED_MODULE_4__);\n/* harmony import */ var next_dist_shared_lib_router_utils_app_paths__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! next/dist/shared/lib/router/utils/app-paths */ \"next/dist/shared/lib/router/utils/app-paths\");\n/* harmony import */ var next_dist_shared_lib_router_utils_app_paths__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(next_dist_shared_lib_router_utils_app_paths__WEBPACK_IMPORTED_MODULE_5__);\n/* harmony import */ var next_dist_server_base_http_node__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! next/dist/server/base-http/node */ \"(rsc)/./node_modules/.pnpm/next@15.5.2_@playwright+tes_b7e6c280e9a1b4309347c0bf0ab476d5/node_modules/next/dist/server/base-http/node.js\");\n/* harmony import */ var next_dist_server_base_http_node__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_base_http_node__WEBPACK_IMPORTED_MODULE_6__);\n/* harmony import */ var next_dist_server_web_spec_extension_adapters_next_request__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! next/dist/server/web/spec-extension/adapters/next-request */ \"(rsc)/./node_modules/.pnpm/next@15.5.2_@playwright+tes_b7e6c280e9a1b4309347c0bf0ab476d5/node_modules/next/dist/server/web/spec-extension/adapters/next-request.js\");\n/* harmony import */ var next_dist_server_web_spec_extension_adapters_next_request__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_web_spec_extension_adapters_next_request__WEBPACK_IMPORTED_MODULE_7__);\n/* harmony import */ var next_dist_server_lib_trace_constants__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! next/dist/server/lib/trace/constants */ \"(rsc)/./node_modules/.pnpm/next@15.5.2_@playwright+tes_b7e6c280e9a1b4309347c0bf0ab476d5/node_modules/next/dist/server/lib/trace/constants.js\");\n/* harmony import */ var next_dist_server_lib_trace_constants__WEBPACK_IMPORTED_MODULE_8___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_trace_constants__WEBPACK_IMPORTED_MODULE_8__);\n/* harmony import */ var next_dist_server_instrumentation_utils__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! next/dist/server/instrumentation/utils */ \"(rsc)/./node_modules/.pnpm/next@15.5.2_@playwright+tes_b7e6c280e9a1b4309347c0bf0ab476d5/node_modules/next/dist/server/instrumentation/utils.js\");\n/* harmony import */ var next_dist_server_send_response__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! next/dist/server/send-response */ \"(rsc)/./node_modules/.pnpm/next@15.5.2_@playwright+tes_b7e6c280e9a1b4309347c0bf0ab476d5/node_modules/next/dist/server/send-response.js\");\n/* harmony import */ var next_dist_server_web_utils__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! next/dist/server/web/utils */ \"(rsc)/./node_modules/.pnpm/next@15.5.2_@playwright+tes_b7e6c280e9a1b4309347c0bf0ab476d5/node_modules/next/dist/server/web/utils.js\");\n/* harmony import */ var next_dist_server_web_utils__WEBPACK_IMPORTED_MODULE_11___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_web_utils__WEBPACK_IMPORTED_MODULE_11__);\n/* harmony import */ var next_dist_server_lib_cache_control__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! next/dist/server/lib/cache-control */ \"(rsc)/./node_modules/.pnpm/next@15.5.2_@playwright+tes_b7e6c280e9a1b4309347c0bf0ab476d5/node_modules/next/dist/server/lib/cache-control.js\");\n/* harmony import */ var next_dist_lib_constants__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! next/dist/lib/constants */ \"(rsc)/./node_modules/.pnpm/next@15.5.2_@playwright+tes_b7e6c280e9a1b4309347c0bf0ab476d5/node_modules/next/dist/lib/constants.js\");\n/* harmony import */ var next_dist_lib_constants__WEBPACK_IMPORTED_MODULE_13___default = /*#__PURE__*/__webpack_require__.n(next_dist_lib_constants__WEBPACK_IMPORTED_MODULE_13__);\n/* harmony import */ var next_dist_shared_lib_no_fallback_error_external__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! next/dist/shared/lib/no-fallback-error.external */ \"next/dist/shared/lib/no-fallback-error.external\");\n/* harmony import */ var next_dist_shared_lib_no_fallback_error_external__WEBPACK_IMPORTED_MODULE_14___default = /*#__PURE__*/__webpack_require__.n(next_dist_shared_lib_no_fallback_error_external__WEBPACK_IMPORTED_MODULE_14__);\n/* harmony import */ var next_dist_server_response_cache__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! next/dist/server/response-cache */ \"(rsc)/./node_modules/.pnpm/next@15.5.2_@playwright+tes_b7e6c280e9a1b4309347c0bf0ab476d5/node_modules/next/dist/server/response-cache/index.js\");\n/* harmony import */ var next_dist_server_response_cache__WEBPACK_IMPORTED_MODULE_15___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_response_cache__WEBPACK_IMPORTED_MODULE_15__);\n/* harmony import */ var H_Users_Gus_source_repo_dynamics_dynamics_b_cryptopi_dynamics_src_app_api_dynamics_route_ts__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ./src/app/api/dynamics/route.ts */ \"(rsc)/./src/app/api/dynamics/route.ts\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([H_Users_Gus_source_repo_dynamics_dynamics_b_cryptopi_dynamics_src_app_api_dynamics_route_ts__WEBPACK_IMPORTED_MODULE_16__]);\nH_Users_Gus_source_repo_dynamics_dynamics_b_cryptopi_dynamics_src_app_api_dynamics_route_ts__WEBPACK_IMPORTED_MODULE_16__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/dynamics/route\",\n        pathname: \"/api/dynamics\",\n        filename: \"route\",\n        bundlePath: \"app/api/dynamics/route\"\n    },\n    distDir: \".next\" || 0,\n    relativeProjectDir:  false || '',\n    resolvedPagePath: \"H:\\\\Users\\\\Gus\\\\source\\\\repo\\\\dynamics\\\\dynamics-b\\\\cryptopi-dynamics\\\\src\\\\app\\\\api\\\\dynamics\\\\route.ts\",\n    nextConfigOutput,\n    userland: H_Users_Gus_source_repo_dynamics_dynamics_b_cryptopi_dynamics_src_app_api_dynamics_route_ts__WEBPACK_IMPORTED_MODULE_16__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { workAsyncStorage, workUnitAsyncStorage, serverHooks } = routeModule;\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        workAsyncStorage,\n        workUnitAsyncStorage\n    });\n}\n\nasync function handler(req, res, ctx) {\n    var _nextConfig_experimental;\n    let srcPage = \"/api/dynamics/route\";\n    // turbopack doesn't normalize `/index` in the page name\n    // so we need to to process dynamic routes properly\n    // TODO: fix turbopack providing differing value from webpack\n    if (false) {} else if (srcPage === '/index') {\n        // we always normalize /index specifically\n        srcPage = '/';\n    }\n    const multiZoneDraftMode = false;\n    const prepareResult = await routeModule.prepare(req, res, {\n        srcPage,\n        multiZoneDraftMode\n    });\n    if (!prepareResult) {\n        res.statusCode = 400;\n        res.end('Bad Request');\n        ctx.waitUntil == null ? void 0 : ctx.waitUntil.call(ctx, Promise.resolve());\n        return null;\n    }\n    const { buildId, params, nextConfig, isDraftMode, prerenderManifest, routerServerContext, isOnDemandRevalidate, revalidateOnlyGenerated, resolvedPathname } = prepareResult;\n    const normalizedSrcPage = (0,next_dist_shared_lib_router_utils_app_paths__WEBPACK_IMPORTED_MODULE_5__.normalizeAppPath)(srcPage);\n    let isIsr = Boolean(prerenderManifest.dynamicRoutes[normalizedSrcPage] || prerenderManifest.routes[resolvedPathname]);\n    if (isIsr && !isDraftMode) {\n        const isPrerendered = Boolean(prerenderManifest.routes[resolvedPathname]);\n        const prerenderInfo = prerenderManifest.dynamicRoutes[normalizedSrcPage];\n        if (prerenderInfo) {\n            if (prerenderInfo.fallback === false && !isPrerendered) {\n                throw new next_dist_shared_lib_no_fallback_error_external__WEBPACK_IMPORTED_MODULE_14__.NoFallbackError();\n            }\n        }\n    }\n    let cacheKey = null;\n    if (isIsr && !routeModule.isDev && !isDraftMode) {\n        cacheKey = resolvedPathname;\n        // ensure /index and / is normalized to one key\n        cacheKey = cacheKey === '/index' ? '/' : cacheKey;\n    }\n    const supportsDynamicResponse = // If we're in development, we always support dynamic HTML\n    routeModule.isDev === true || // If this is not SSG or does not have static paths, then it supports\n    // dynamic HTML.\n    !isIsr;\n    // This is a revalidation request if the request is for a static\n    // page and it is not being resumed from a postponed render and\n    // it is not a dynamic RSC request then it is a revalidation\n    // request.\n    const isRevalidate = isIsr && !supportsDynamicResponse;\n    const method = req.method || 'GET';\n    const tracer = (0,next_dist_server_lib_trace_tracer__WEBPACK_IMPORTED_MODULE_4__.getTracer)();\n    const activeSpan = tracer.getActiveScopeSpan();\n    const context = {\n        params,\n        prerenderManifest,\n        renderOpts: {\n            experimental: {\n                cacheComponents: Boolean(nextConfig.experimental.cacheComponents),\n                authInterrupts: Boolean(nextConfig.experimental.authInterrupts)\n            },\n            supportsDynamicResponse,\n            incrementalCache: (0,next_dist_server_request_meta__WEBPACK_IMPORTED_MODULE_3__.getRequestMeta)(req, 'incrementalCache'),\n            cacheLifeProfiles: (_nextConfig_experimental = nextConfig.experimental) == null ? void 0 : _nextConfig_experimental.cacheLife,\n            isRevalidate,\n            waitUntil: ctx.waitUntil,\n            onClose: (cb)=>{\n                res.on('close', cb);\n            },\n            onAfterTaskError: undefined,\n            onInstrumentationRequestError: (error, _request, errorContext)=>routeModule.onRequestError(req, error, errorContext, routerServerContext)\n        },\n        sharedContext: {\n            buildId\n        }\n    };\n    const nodeNextReq = new next_dist_server_base_http_node__WEBPACK_IMPORTED_MODULE_6__.NodeNextRequest(req);\n    const nodeNextRes = new next_dist_server_base_http_node__WEBPACK_IMPORTED_MODULE_6__.NodeNextResponse(res);\n    const nextReq = next_dist_server_web_spec_extension_adapters_next_request__WEBPACK_IMPORTED_MODULE_7__.NextRequestAdapter.fromNodeNextRequest(nodeNextReq, (0,next_dist_server_web_spec_extension_adapters_next_request__WEBPACK_IMPORTED_MODULE_7__.signalFromNodeResponse)(res));\n    try {\n        const invokeRouteModule = async (span)=>{\n            return routeModule.handle(nextReq, context).finally(()=>{\n                if (!span) return;\n                span.setAttributes({\n                    'http.status_code': res.statusCode,\n                    'next.rsc': false\n                });\n                const rootSpanAttributes = tracer.getRootSpanAttributes();\n                // We were unable to get attributes, probably OTEL is not enabled\n                if (!rootSpanAttributes) {\n                    return;\n                }\n                if (rootSpanAttributes.get('next.span_type') !== next_dist_server_lib_trace_constants__WEBPACK_IMPORTED_MODULE_8__.BaseServerSpan.handleRequest) {\n                    console.warn(`Unexpected root span type '${rootSpanAttributes.get('next.span_type')}'. Please report this Next.js issue https://github.com/vercel/next.js`);\n                    return;\n                }\n                const route = rootSpanAttributes.get('next.route');\n                if (route) {\n                    const name = `${method} ${route}`;\n                    span.setAttributes({\n                        'next.route': route,\n                        'http.route': route,\n                        'next.span_name': name\n                    });\n                    span.updateName(name);\n                } else {\n                    span.updateName(`${method} ${req.url}`);\n                }\n            });\n        };\n        const handleResponse = async (currentSpan)=>{\n            var _cacheEntry_value;\n            const responseGenerator = async ({ previousCacheEntry })=>{\n                try {\n                    if (!(0,next_dist_server_request_meta__WEBPACK_IMPORTED_MODULE_3__.getRequestMeta)(req, 'minimalMode') && isOnDemandRevalidate && revalidateOnlyGenerated && !previousCacheEntry) {\n                        res.statusCode = 404;\n                        // on-demand revalidate always sets this header\n                        res.setHeader('x-nextjs-cache', 'REVALIDATED');\n                        res.end('This page could not be found');\n                        return null;\n                    }\n                    const response = await invokeRouteModule(currentSpan);\n                    req.fetchMetrics = context.renderOpts.fetchMetrics;\n                    let pendingWaitUntil = context.renderOpts.pendingWaitUntil;\n                    // Attempt using provided waitUntil if available\n                    // if it's not we fallback to sendResponse's handling\n                    if (pendingWaitUntil) {\n                        if (ctx.waitUntil) {\n                            ctx.waitUntil(pendingWaitUntil);\n                            pendingWaitUntil = undefined;\n                        }\n                    }\n                    const cacheTags = context.renderOpts.collectedTags;\n                    // If the request is for a static response, we can cache it so long\n                    // as it's not edge.\n                    if (isIsr) {\n                        const blob = await response.blob();\n                        // Copy the headers from the response.\n                        const headers = (0,next_dist_server_web_utils__WEBPACK_IMPORTED_MODULE_11__.toNodeOutgoingHttpHeaders)(response.headers);\n                        if (cacheTags) {\n                            headers[next_dist_lib_constants__WEBPACK_IMPORTED_MODULE_13__.NEXT_CACHE_TAGS_HEADER] = cacheTags;\n                        }\n                        if (!headers['content-type'] && blob.type) {\n                            headers['content-type'] = blob.type;\n                        }\n                        const revalidate = typeof context.renderOpts.collectedRevalidate === 'undefined' || context.renderOpts.collectedRevalidate >= next_dist_lib_constants__WEBPACK_IMPORTED_MODULE_13__.INFINITE_CACHE ? false : context.renderOpts.collectedRevalidate;\n                        const expire = typeof context.renderOpts.collectedExpire === 'undefined' || context.renderOpts.collectedExpire >= next_dist_lib_constants__WEBPACK_IMPORTED_MODULE_13__.INFINITE_CACHE ? undefined : context.renderOpts.collectedExpire;\n                        // Create the cache entry for the response.\n                        const cacheEntry = {\n                            value: {\n                                kind: next_dist_server_response_cache__WEBPACK_IMPORTED_MODULE_15__.CachedRouteKind.APP_ROUTE,\n                                status: response.status,\n                                body: Buffer.from(await blob.arrayBuffer()),\n                                headers\n                            },\n                            cacheControl: {\n                                revalidate,\n                                expire\n                            }\n                        };\n                        return cacheEntry;\n                    } else {\n                        // send response without caching if not ISR\n                        await (0,next_dist_server_send_response__WEBPACK_IMPORTED_MODULE_10__.sendResponse)(nodeNextReq, nodeNextRes, response, context.renderOpts.pendingWaitUntil);\n                        return null;\n                    }\n                } catch (err) {\n                    // if this is a background revalidate we need to report\n                    // the request error here as it won't be bubbled\n                    if (previousCacheEntry == null ? void 0 : previousCacheEntry.isStale) {\n                        await routeModule.onRequestError(req, err, {\n                            routerKind: 'App Router',\n                            routePath: srcPage,\n                            routeType: 'route',\n                            revalidateReason: (0,next_dist_server_instrumentation_utils__WEBPACK_IMPORTED_MODULE_9__.getRevalidateReason)({\n                                isRevalidate,\n                                isOnDemandRevalidate\n                            })\n                        }, routerServerContext);\n                    }\n                    throw err;\n                }\n            };\n            const cacheEntry = await routeModule.handleResponse({\n                req,\n                nextConfig,\n                cacheKey,\n                routeKind: next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n                isFallback: false,\n                prerenderManifest,\n                isRoutePPREnabled: false,\n                isOnDemandRevalidate,\n                revalidateOnlyGenerated,\n                responseGenerator,\n                waitUntil: ctx.waitUntil\n            });\n            // we don't create a cacheEntry for ISR\n            if (!isIsr) {\n                return null;\n            }\n            if ((cacheEntry == null ? void 0 : (_cacheEntry_value = cacheEntry.value) == null ? void 0 : _cacheEntry_value.kind) !== next_dist_server_response_cache__WEBPACK_IMPORTED_MODULE_15__.CachedRouteKind.APP_ROUTE) {\n                var _cacheEntry_value1;\n                throw Object.defineProperty(new Error(`Invariant: app-route received invalid cache entry ${cacheEntry == null ? void 0 : (_cacheEntry_value1 = cacheEntry.value) == null ? void 0 : _cacheEntry_value1.kind}`), \"__NEXT_ERROR_CODE\", {\n                    value: \"E701\",\n                    enumerable: false,\n                    configurable: true\n                });\n            }\n            if (!(0,next_dist_server_request_meta__WEBPACK_IMPORTED_MODULE_3__.getRequestMeta)(req, 'minimalMode')) {\n                res.setHeader('x-nextjs-cache', isOnDemandRevalidate ? 'REVALIDATED' : cacheEntry.isMiss ? 'MISS' : cacheEntry.isStale ? 'STALE' : 'HIT');\n            }\n            // Draft mode should never be cached\n            if (isDraftMode) {\n                res.setHeader('Cache-Control', 'private, no-cache, no-store, max-age=0, must-revalidate');\n            }\n            const headers = (0,next_dist_server_web_utils__WEBPACK_IMPORTED_MODULE_11__.fromNodeOutgoingHttpHeaders)(cacheEntry.value.headers);\n            if (!((0,next_dist_server_request_meta__WEBPACK_IMPORTED_MODULE_3__.getRequestMeta)(req, 'minimalMode') && isIsr)) {\n                headers.delete(next_dist_lib_constants__WEBPACK_IMPORTED_MODULE_13__.NEXT_CACHE_TAGS_HEADER);\n            }\n            // If cache control is already set on the response we don't\n            // override it to allow users to customize it via next.config\n            if (cacheEntry.cacheControl && !res.getHeader('Cache-Control') && !headers.get('Cache-Control')) {\n                headers.set('Cache-Control', (0,next_dist_server_lib_cache_control__WEBPACK_IMPORTED_MODULE_12__.getCacheControlHeader)(cacheEntry.cacheControl));\n            }\n            await (0,next_dist_server_send_response__WEBPACK_IMPORTED_MODULE_10__.sendResponse)(nodeNextReq, nodeNextRes, new Response(cacheEntry.value.body, {\n                headers,\n                status: cacheEntry.value.status || 200\n            }));\n            return null;\n        };\n        // TODO: activeSpan code path is for when wrapped by\n        // next-server can be removed when this is no longer used\n        if (activeSpan) {\n            await handleResponse(activeSpan);\n        } else {\n            await tracer.withPropagatedContext(req.headers, ()=>tracer.trace(next_dist_server_lib_trace_constants__WEBPACK_IMPORTED_MODULE_8__.BaseServerSpan.handleRequest, {\n                    spanName: `${method} ${req.url}`,\n                    kind: next_dist_server_lib_trace_tracer__WEBPACK_IMPORTED_MODULE_4__.SpanKind.SERVER,\n                    attributes: {\n                        'http.method': method,\n                        'http.target': req.url\n                    }\n                }, handleResponse));\n        }\n    } catch (err) {\n        // if we aren't wrapped by base-server handle here\n        if (!activeSpan && !(err instanceof next_dist_shared_lib_no_fallback_error_external__WEBPACK_IMPORTED_MODULE_14__.NoFallbackError)) {\n            await routeModule.onRequestError(req, err, {\n                routerKind: 'App Router',\n                routePath: normalizedSrcPage,\n                routeType: 'route',\n                revalidateReason: (0,next_dist_server_instrumentation_utils__WEBPACK_IMPORTED_MODULE_9__.getRevalidateReason)({\n                    isRevalidate,\n                    isOnDemandRevalidate\n                })\n            });\n        }\n        // rethrow so that we can handle serving error page\n        // If this is during static generation, throw the error again.\n        if (isIsr) throw err;\n        // Otherwise, send a 500 response.\n        await (0,next_dist_server_send_response__WEBPACK_IMPORTED_MODULE_10__.sendResponse)(nodeNextReq, nodeNextRes, new Response(null, {\n            status: 500\n        }));\n        return null;\n    }\n}\n\n//# sourceMappingURL=app-route.js.map\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvLnBucG0vbmV4dEAxNS41LjJfQHBsYXl3cmlnaHQrdGVzX2I3ZTZjMjgwZTlhMWI0MzA5MzQ3YzBiZjBhYjQ3NmQ1L25vZGVfbW9kdWxlcy9uZXh0L2Rpc3QvYnVpbGQvd2VicGFjay9sb2FkZXJzL25leHQtYXBwLWxvYWRlci9pbmRleC5qcz9uYW1lPWFwcCUyRmFwaSUyRmR5bmFtaWNzJTJGcm91dGUmcGFnZT0lMkZhcGklMkZkeW5hbWljcyUyRnJvdXRlJmFwcFBhdGhzPSZwYWdlUGF0aD1wcml2YXRlLW5leHQtYXBwLWRpciUyRmFwaSUyRmR5bmFtaWNzJTJGcm91dGUudHMmYXBwRGlyPUglM0ElNUNVc2VycyU1Q0d1cyU1Q3NvdXJjZSU1Q3JlcG8lNUNkeW5hbWljcyU1Q2R5bmFtaWNzLWIlNUNjcnlwdG9waS1keW5hbWljcyU1Q3NyYyU1Q2FwcCZwYWdlRXh0ZW5zaW9ucz10c3gmcGFnZUV4dGVuc2lvbnM9dHMmcGFnZUV4dGVuc2lvbnM9anN4JnBhZ2VFeHRlbnNpb25zPWpzJnJvb3REaXI9SCUzQSU1Q1VzZXJzJTVDR3VzJTVDc291cmNlJTVDcmVwbyU1Q2R5bmFtaWNzJTVDZHluYW1pY3MtYiU1Q2NyeXB0b3BpLWR5bmFtaWNzJmlzRGV2PXRydWUmdHNjb25maWdQYXRoPXRzY29uZmlnLmpzb24mYmFzZVBhdGg9JmFzc2V0UHJlZml4PSZuZXh0Q29uZmlnT3V0cHV0PSZwcmVmZXJyZWRSZWdpb249Jm1pZGRsZXdhcmVDb25maWc9ZTMwJTNEJmlzR2xvYmFsTm90Rm91bmRFbmFibGVkPSEiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBK0Y7QUFDdkM7QUFDcUI7QUFDZDtBQUNTO0FBQ087QUFDSztBQUNtQztBQUNqRDtBQUNPO0FBQ2Y7QUFDc0M7QUFDekI7QUFDTTtBQUNDO0FBQ2hCO0FBQ21FO0FBQ3JJO0FBQ0E7QUFDQTtBQUNBLHdCQUF3Qix5R0FBbUI7QUFDM0M7QUFDQSxjQUFjLGtFQUFTO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLGFBQWEsT0FBb0MsSUFBSSxDQUFFO0FBQ3ZELHdCQUF3QixNQUF1QztBQUMvRDtBQUNBO0FBQ0EsWUFBWTtBQUNaLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQSxRQUFRLHNEQUFzRDtBQUM5RDtBQUNBLFdBQVcsNEVBQVc7QUFDdEI7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUMwRjtBQUNuRjtBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRLEtBQXFCLEVBQUUsRUFFMUIsQ0FBQztBQUNOO0FBQ0E7QUFDQTtBQUNBLCtCQUErQixLQUF3QztBQUN2RTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWSxvSkFBb0o7QUFDaEssOEJBQThCLDZGQUFnQjtBQUM5QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwwQkFBMEIsNkZBQWU7QUFDekM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtQkFBbUIsNEVBQVM7QUFDNUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBLDhCQUE4Qiw2RUFBYztBQUM1QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0QkFBNEIsNEVBQWU7QUFDM0MsNEJBQTRCLDZFQUFnQjtBQUM1QyxvQkFBb0IseUdBQWtCLGtDQUFrQyxpSEFBc0I7QUFDOUY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlFQUFpRSxnRkFBYztBQUMvRSwrREFBK0QseUNBQXlDO0FBQ3hHO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0NBQW9DLFFBQVEsRUFBRSxNQUFNO0FBQ3BEO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUJBQXFCO0FBQ3JCO0FBQ0Esa0JBQWtCO0FBQ2xCLHVDQUF1QyxRQUFRLEVBQUUsUUFBUTtBQUN6RDtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQSwrQ0FBK0Msb0JBQW9CO0FBQ25FO0FBQ0EseUJBQXlCLDZFQUFjO0FBQ3ZDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3Q0FBd0Msc0ZBQXlCO0FBQ2pFO0FBQ0Esb0NBQW9DLDRFQUFzQjtBQUMxRDtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNKQUFzSixvRUFBYztBQUNwSywwSUFBMEksb0VBQWM7QUFDeEo7QUFDQTtBQUNBO0FBQ0Esc0NBQXNDLDZFQUFlO0FBQ3JEO0FBQ0E7QUFDQTtBQUNBLDZCQUE2QjtBQUM3QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzQkFBc0I7QUFDdEI7QUFDQSw4QkFBOEIsNkVBQVk7QUFDMUM7QUFDQTtBQUNBLGtCQUFrQjtBQUNsQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDhDQUE4QywyRkFBbUI7QUFDakU7QUFDQTtBQUNBLDZCQUE2QjtBQUM3Qix5QkFBeUI7QUFDekI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDJCQUEyQixrRUFBUztBQUNwQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFJQUFxSSw2RUFBZTtBQUNwSjtBQUNBLDJHQUEyRyxpSEFBaUg7QUFDNU47QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0EsaUJBQWlCLDZFQUFjO0FBQy9CO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDRCQUE0Qix3RkFBMkI7QUFDdkQsa0JBQWtCLDZFQUFjO0FBQ2hDLCtCQUErQiw0RUFBc0I7QUFDckQ7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2Q0FBNkMsMEZBQXFCO0FBQ2xFO0FBQ0Esa0JBQWtCLDZFQUFZO0FBQzlCO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVTtBQUNWLDZFQUE2RSxnRkFBYztBQUMzRixpQ0FBaUMsUUFBUSxFQUFFLFFBQVE7QUFDbkQsMEJBQTBCLHVFQUFRO0FBQ2xDO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0EsTUFBTTtBQUNOO0FBQ0EsNENBQTRDLDZGQUFlO0FBQzNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0NBQWtDLDJGQUFtQjtBQUNyRDtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsY0FBYyw2RUFBWTtBQUMxQjtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7O0FBRUEiLCJzb3VyY2VzIjpbIiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBBcHBSb3V0ZVJvdXRlTW9kdWxlIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvcm91dGUtbW9kdWxlcy9hcHAtcm91dGUvbW9kdWxlLmNvbXBpbGVkXCI7XG5pbXBvcnQgeyBSb3V0ZUtpbmQgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9yb3V0ZS1raW5kXCI7XG5pbXBvcnQgeyBwYXRjaEZldGNoIGFzIF9wYXRjaEZldGNoIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvbGliL3BhdGNoLWZldGNoXCI7XG5pbXBvcnQgeyBnZXRSZXF1ZXN0TWV0YSB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL3JlcXVlc3QtbWV0YVwiO1xuaW1wb3J0IHsgZ2V0VHJhY2VyLCBTcGFuS2luZCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2xpYi90cmFjZS90cmFjZXJcIjtcbmltcG9ydCB7IG5vcm1hbGl6ZUFwcFBhdGggfSBmcm9tIFwibmV4dC9kaXN0L3NoYXJlZC9saWIvcm91dGVyL3V0aWxzL2FwcC1wYXRoc1wiO1xuaW1wb3J0IHsgTm9kZU5leHRSZXF1ZXN0LCBOb2RlTmV4dFJlc3BvbnNlIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvYmFzZS1odHRwL25vZGVcIjtcbmltcG9ydCB7IE5leHRSZXF1ZXN0QWRhcHRlciwgc2lnbmFsRnJvbU5vZGVSZXNwb25zZSB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL3dlYi9zcGVjLWV4dGVuc2lvbi9hZGFwdGVycy9uZXh0LXJlcXVlc3RcIjtcbmltcG9ydCB7IEJhc2VTZXJ2ZXJTcGFuIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvbGliL3RyYWNlL2NvbnN0YW50c1wiO1xuaW1wb3J0IHsgZ2V0UmV2YWxpZGF0ZVJlYXNvbiB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2luc3RydW1lbnRhdGlvbi91dGlsc1wiO1xuaW1wb3J0IHsgc2VuZFJlc3BvbnNlIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvc2VuZC1yZXNwb25zZVwiO1xuaW1wb3J0IHsgZnJvbU5vZGVPdXRnb2luZ0h0dHBIZWFkZXJzLCB0b05vZGVPdXRnb2luZ0h0dHBIZWFkZXJzIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvd2ViL3V0aWxzXCI7XG5pbXBvcnQgeyBnZXRDYWNoZUNvbnRyb2xIZWFkZXIgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9saWIvY2FjaGUtY29udHJvbFwiO1xuaW1wb3J0IHsgSU5GSU5JVEVfQ0FDSEUsIE5FWFRfQ0FDSEVfVEFHU19IRUFERVIgfSBmcm9tIFwibmV4dC9kaXN0L2xpYi9jb25zdGFudHNcIjtcbmltcG9ydCB7IE5vRmFsbGJhY2tFcnJvciB9IGZyb20gXCJuZXh0L2Rpc3Qvc2hhcmVkL2xpYi9uby1mYWxsYmFjay1lcnJvci5leHRlcm5hbFwiO1xuaW1wb3J0IHsgQ2FjaGVkUm91dGVLaW5kIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvcmVzcG9uc2UtY2FjaGVcIjtcbmltcG9ydCAqIGFzIHVzZXJsYW5kIGZyb20gXCJIOlxcXFxVc2Vyc1xcXFxHdXNcXFxcc291cmNlXFxcXHJlcG9cXFxcZHluYW1pY3NcXFxcZHluYW1pY3MtYlxcXFxjcnlwdG9waS1keW5hbWljc1xcXFxzcmNcXFxcYXBwXFxcXGFwaVxcXFxkeW5hbWljc1xcXFxyb3V0ZS50c1wiO1xuLy8gV2UgaW5qZWN0IHRoZSBuZXh0Q29uZmlnT3V0cHV0IGhlcmUgc28gdGhhdCB3ZSBjYW4gdXNlIHRoZW0gaW4gdGhlIHJvdXRlXG4vLyBtb2R1bGUuXG5jb25zdCBuZXh0Q29uZmlnT3V0cHV0ID0gXCJcIlxuY29uc3Qgcm91dGVNb2R1bGUgPSBuZXcgQXBwUm91dGVSb3V0ZU1vZHVsZSh7XG4gICAgZGVmaW5pdGlvbjoge1xuICAgICAgICBraW5kOiBSb3V0ZUtpbmQuQVBQX1JPVVRFLFxuICAgICAgICBwYWdlOiBcIi9hcGkvZHluYW1pY3Mvcm91dGVcIixcbiAgICAgICAgcGF0aG5hbWU6IFwiL2FwaS9keW5hbWljc1wiLFxuICAgICAgICBmaWxlbmFtZTogXCJyb3V0ZVwiLFxuICAgICAgICBidW5kbGVQYXRoOiBcImFwcC9hcGkvZHluYW1pY3Mvcm91dGVcIlxuICAgIH0sXG4gICAgZGlzdERpcjogcHJvY2Vzcy5lbnYuX19ORVhUX1JFTEFUSVZFX0RJU1RfRElSIHx8ICcnLFxuICAgIHJlbGF0aXZlUHJvamVjdERpcjogcHJvY2Vzcy5lbnYuX19ORVhUX1JFTEFUSVZFX1BST0pFQ1RfRElSIHx8ICcnLFxuICAgIHJlc29sdmVkUGFnZVBhdGg6IFwiSDpcXFxcVXNlcnNcXFxcR3VzXFxcXHNvdXJjZVxcXFxyZXBvXFxcXGR5bmFtaWNzXFxcXGR5bmFtaWNzLWJcXFxcY3J5cHRvcGktZHluYW1pY3NcXFxcc3JjXFxcXGFwcFxcXFxhcGlcXFxcZHluYW1pY3NcXFxccm91dGUudHNcIixcbiAgICBuZXh0Q29uZmlnT3V0cHV0LFxuICAgIHVzZXJsYW5kXG59KTtcbi8vIFB1bGwgb3V0IHRoZSBleHBvcnRzIHRoYXQgd2UgbmVlZCB0byBleHBvc2UgZnJvbSB0aGUgbW9kdWxlLiBUaGlzIHNob3VsZFxuLy8gYmUgZWxpbWluYXRlZCB3aGVuIHdlJ3ZlIG1vdmVkIHRoZSBvdGhlciByb3V0ZXMgdG8gdGhlIG5ldyBmb3JtYXQuIFRoZXNlXG4vLyBhcmUgdXNlZCB0byBob29rIGludG8gdGhlIHJvdXRlLlxuY29uc3QgeyB3b3JrQXN5bmNTdG9yYWdlLCB3b3JrVW5pdEFzeW5jU3RvcmFnZSwgc2VydmVySG9va3MgfSA9IHJvdXRlTW9kdWxlO1xuZnVuY3Rpb24gcGF0Y2hGZXRjaCgpIHtcbiAgICByZXR1cm4gX3BhdGNoRmV0Y2goe1xuICAgICAgICB3b3JrQXN5bmNTdG9yYWdlLFxuICAgICAgICB3b3JrVW5pdEFzeW5jU3RvcmFnZVxuICAgIH0pO1xufVxuZXhwb3J0IHsgcm91dGVNb2R1bGUsIHdvcmtBc3luY1N0b3JhZ2UsIHdvcmtVbml0QXN5bmNTdG9yYWdlLCBzZXJ2ZXJIb29rcywgcGF0Y2hGZXRjaCwgIH07XG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gaGFuZGxlcihyZXEsIHJlcywgY3R4KSB7XG4gICAgdmFyIF9uZXh0Q29uZmlnX2V4cGVyaW1lbnRhbDtcbiAgICBsZXQgc3JjUGFnZSA9IFwiL2FwaS9keW5hbWljcy9yb3V0ZVwiO1xuICAgIC8vIHR1cmJvcGFjayBkb2Vzbid0IG5vcm1hbGl6ZSBgL2luZGV4YCBpbiB0aGUgcGFnZSBuYW1lXG4gICAgLy8gc28gd2UgbmVlZCB0byB0byBwcm9jZXNzIGR5bmFtaWMgcm91dGVzIHByb3Blcmx5XG4gICAgLy8gVE9ETzogZml4IHR1cmJvcGFjayBwcm92aWRpbmcgZGlmZmVyaW5nIHZhbHVlIGZyb20gd2VicGFja1xuICAgIGlmIChwcm9jZXNzLmVudi5UVVJCT1BBQ0spIHtcbiAgICAgICAgc3JjUGFnZSA9IHNyY1BhZ2UucmVwbGFjZSgvXFwvaW5kZXgkLywgJycpIHx8ICcvJztcbiAgICB9IGVsc2UgaWYgKHNyY1BhZ2UgPT09ICcvaW5kZXgnKSB7XG4gICAgICAgIC8vIHdlIGFsd2F5cyBub3JtYWxpemUgL2luZGV4IHNwZWNpZmljYWxseVxuICAgICAgICBzcmNQYWdlID0gJy8nO1xuICAgIH1cbiAgICBjb25zdCBtdWx0aVpvbmVEcmFmdE1vZGUgPSBwcm9jZXNzLmVudi5fX05FWFRfTVVMVElfWk9ORV9EUkFGVF9NT0RFO1xuICAgIGNvbnN0IHByZXBhcmVSZXN1bHQgPSBhd2FpdCByb3V0ZU1vZHVsZS5wcmVwYXJlKHJlcSwgcmVzLCB7XG4gICAgICAgIHNyY1BhZ2UsXG4gICAgICAgIG11bHRpWm9uZURyYWZ0TW9kZVxuICAgIH0pO1xuICAgIGlmICghcHJlcGFyZVJlc3VsdCkge1xuICAgICAgICByZXMuc3RhdHVzQ29kZSA9IDQwMDtcbiAgICAgICAgcmVzLmVuZCgnQmFkIFJlcXVlc3QnKTtcbiAgICAgICAgY3R4LndhaXRVbnRpbCA9PSBudWxsID8gdm9pZCAwIDogY3R4LndhaXRVbnRpbC5jYWxsKGN0eCwgUHJvbWlzZS5yZXNvbHZlKCkpO1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgY29uc3QgeyBidWlsZElkLCBwYXJhbXMsIG5leHRDb25maWcsIGlzRHJhZnRNb2RlLCBwcmVyZW5kZXJNYW5pZmVzdCwgcm91dGVyU2VydmVyQ29udGV4dCwgaXNPbkRlbWFuZFJldmFsaWRhdGUsIHJldmFsaWRhdGVPbmx5R2VuZXJhdGVkLCByZXNvbHZlZFBhdGhuYW1lIH0gPSBwcmVwYXJlUmVzdWx0O1xuICAgIGNvbnN0IG5vcm1hbGl6ZWRTcmNQYWdlID0gbm9ybWFsaXplQXBwUGF0aChzcmNQYWdlKTtcbiAgICBsZXQgaXNJc3IgPSBCb29sZWFuKHByZXJlbmRlck1hbmlmZXN0LmR5bmFtaWNSb3V0ZXNbbm9ybWFsaXplZFNyY1BhZ2VdIHx8IHByZXJlbmRlck1hbmlmZXN0LnJvdXRlc1tyZXNvbHZlZFBhdGhuYW1lXSk7XG4gICAgaWYgKGlzSXNyICYmICFpc0RyYWZ0TW9kZSkge1xuICAgICAgICBjb25zdCBpc1ByZXJlbmRlcmVkID0gQm9vbGVhbihwcmVyZW5kZXJNYW5pZmVzdC5yb3V0ZXNbcmVzb2x2ZWRQYXRobmFtZV0pO1xuICAgICAgICBjb25zdCBwcmVyZW5kZXJJbmZvID0gcHJlcmVuZGVyTWFuaWZlc3QuZHluYW1pY1JvdXRlc1tub3JtYWxpemVkU3JjUGFnZV07XG4gICAgICAgIGlmIChwcmVyZW5kZXJJbmZvKSB7XG4gICAgICAgICAgICBpZiAocHJlcmVuZGVySW5mby5mYWxsYmFjayA9PT0gZmFsc2UgJiYgIWlzUHJlcmVuZGVyZWQpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgTm9GYWxsYmFja0Vycm9yKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgbGV0IGNhY2hlS2V5ID0gbnVsbDtcbiAgICBpZiAoaXNJc3IgJiYgIXJvdXRlTW9kdWxlLmlzRGV2ICYmICFpc0RyYWZ0TW9kZSkge1xuICAgICAgICBjYWNoZUtleSA9IHJlc29sdmVkUGF0aG5hbWU7XG4gICAgICAgIC8vIGVuc3VyZSAvaW5kZXggYW5kIC8gaXMgbm9ybWFsaXplZCB0byBvbmUga2V5XG4gICAgICAgIGNhY2hlS2V5ID0gY2FjaGVLZXkgPT09ICcvaW5kZXgnID8gJy8nIDogY2FjaGVLZXk7XG4gICAgfVxuICAgIGNvbnN0IHN1cHBvcnRzRHluYW1pY1Jlc3BvbnNlID0gLy8gSWYgd2UncmUgaW4gZGV2ZWxvcG1lbnQsIHdlIGFsd2F5cyBzdXBwb3J0IGR5bmFtaWMgSFRNTFxuICAgIHJvdXRlTW9kdWxlLmlzRGV2ID09PSB0cnVlIHx8IC8vIElmIHRoaXMgaXMgbm90IFNTRyBvciBkb2VzIG5vdCBoYXZlIHN0YXRpYyBwYXRocywgdGhlbiBpdCBzdXBwb3J0c1xuICAgIC8vIGR5bmFtaWMgSFRNTC5cbiAgICAhaXNJc3I7XG4gICAgLy8gVGhpcyBpcyBhIHJldmFsaWRhdGlvbiByZXF1ZXN0IGlmIHRoZSByZXF1ZXN0IGlzIGZvciBhIHN0YXRpY1xuICAgIC8vIHBhZ2UgYW5kIGl0IGlzIG5vdCBiZWluZyByZXN1bWVkIGZyb20gYSBwb3N0cG9uZWQgcmVuZGVyIGFuZFxuICAgIC8vIGl0IGlzIG5vdCBhIGR5bmFtaWMgUlNDIHJlcXVlc3QgdGhlbiBpdCBpcyBhIHJldmFsaWRhdGlvblxuICAgIC8vIHJlcXVlc3QuXG4gICAgY29uc3QgaXNSZXZhbGlkYXRlID0gaXNJc3IgJiYgIXN1cHBvcnRzRHluYW1pY1Jlc3BvbnNlO1xuICAgIGNvbnN0IG1ldGhvZCA9IHJlcS5tZXRob2QgfHwgJ0dFVCc7XG4gICAgY29uc3QgdHJhY2VyID0gZ2V0VHJhY2VyKCk7XG4gICAgY29uc3QgYWN0aXZlU3BhbiA9IHRyYWNlci5nZXRBY3RpdmVTY29wZVNwYW4oKTtcbiAgICBjb25zdCBjb250ZXh0ID0ge1xuICAgICAgICBwYXJhbXMsXG4gICAgICAgIHByZXJlbmRlck1hbmlmZXN0LFxuICAgICAgICByZW5kZXJPcHRzOiB7XG4gICAgICAgICAgICBleHBlcmltZW50YWw6IHtcbiAgICAgICAgICAgICAgICBjYWNoZUNvbXBvbmVudHM6IEJvb2xlYW4obmV4dENvbmZpZy5leHBlcmltZW50YWwuY2FjaGVDb21wb25lbnRzKSxcbiAgICAgICAgICAgICAgICBhdXRoSW50ZXJydXB0czogQm9vbGVhbihuZXh0Q29uZmlnLmV4cGVyaW1lbnRhbC5hdXRoSW50ZXJydXB0cylcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBzdXBwb3J0c0R5bmFtaWNSZXNwb25zZSxcbiAgICAgICAgICAgIGluY3JlbWVudGFsQ2FjaGU6IGdldFJlcXVlc3RNZXRhKHJlcSwgJ2luY3JlbWVudGFsQ2FjaGUnKSxcbiAgICAgICAgICAgIGNhY2hlTGlmZVByb2ZpbGVzOiAoX25leHRDb25maWdfZXhwZXJpbWVudGFsID0gbmV4dENvbmZpZy5leHBlcmltZW50YWwpID09IG51bGwgPyB2b2lkIDAgOiBfbmV4dENvbmZpZ19leHBlcmltZW50YWwuY2FjaGVMaWZlLFxuICAgICAgICAgICAgaXNSZXZhbGlkYXRlLFxuICAgICAgICAgICAgd2FpdFVudGlsOiBjdHgud2FpdFVudGlsLFxuICAgICAgICAgICAgb25DbG9zZTogKGNiKT0+e1xuICAgICAgICAgICAgICAgIHJlcy5vbignY2xvc2UnLCBjYik7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgb25BZnRlclRhc2tFcnJvcjogdW5kZWZpbmVkLFxuICAgICAgICAgICAgb25JbnN0cnVtZW50YXRpb25SZXF1ZXN0RXJyb3I6IChlcnJvciwgX3JlcXVlc3QsIGVycm9yQ29udGV4dCk9PnJvdXRlTW9kdWxlLm9uUmVxdWVzdEVycm9yKHJlcSwgZXJyb3IsIGVycm9yQ29udGV4dCwgcm91dGVyU2VydmVyQ29udGV4dClcbiAgICAgICAgfSxcbiAgICAgICAgc2hhcmVkQ29udGV4dDoge1xuICAgICAgICAgICAgYnVpbGRJZFxuICAgICAgICB9XG4gICAgfTtcbiAgICBjb25zdCBub2RlTmV4dFJlcSA9IG5ldyBOb2RlTmV4dFJlcXVlc3QocmVxKTtcbiAgICBjb25zdCBub2RlTmV4dFJlcyA9IG5ldyBOb2RlTmV4dFJlc3BvbnNlKHJlcyk7XG4gICAgY29uc3QgbmV4dFJlcSA9IE5leHRSZXF1ZXN0QWRhcHRlci5mcm9tTm9kZU5leHRSZXF1ZXN0KG5vZGVOZXh0UmVxLCBzaWduYWxGcm9tTm9kZVJlc3BvbnNlKHJlcykpO1xuICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IGludm9rZVJvdXRlTW9kdWxlID0gYXN5bmMgKHNwYW4pPT57XG4gICAgICAgICAgICByZXR1cm4gcm91dGVNb2R1bGUuaGFuZGxlKG5leHRSZXEsIGNvbnRleHQpLmZpbmFsbHkoKCk9PntcbiAgICAgICAgICAgICAgICBpZiAoIXNwYW4pIHJldHVybjtcbiAgICAgICAgICAgICAgICBzcGFuLnNldEF0dHJpYnV0ZXMoe1xuICAgICAgICAgICAgICAgICAgICAnaHR0cC5zdGF0dXNfY29kZSc6IHJlcy5zdGF0dXNDb2RlLFxuICAgICAgICAgICAgICAgICAgICAnbmV4dC5yc2MnOiBmYWxzZVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGNvbnN0IHJvb3RTcGFuQXR0cmlidXRlcyA9IHRyYWNlci5nZXRSb290U3BhbkF0dHJpYnV0ZXMoKTtcbiAgICAgICAgICAgICAgICAvLyBXZSB3ZXJlIHVuYWJsZSB0byBnZXQgYXR0cmlidXRlcywgcHJvYmFibHkgT1RFTCBpcyBub3QgZW5hYmxlZFxuICAgICAgICAgICAgICAgIGlmICghcm9vdFNwYW5BdHRyaWJ1dGVzKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKHJvb3RTcGFuQXR0cmlidXRlcy5nZXQoJ25leHQuc3Bhbl90eXBlJykgIT09IEJhc2VTZXJ2ZXJTcGFuLmhhbmRsZVJlcXVlc3QpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS53YXJuKGBVbmV4cGVjdGVkIHJvb3Qgc3BhbiB0eXBlICcke3Jvb3RTcGFuQXR0cmlidXRlcy5nZXQoJ25leHQuc3Bhbl90eXBlJyl9Jy4gUGxlYXNlIHJlcG9ydCB0aGlzIE5leHQuanMgaXNzdWUgaHR0cHM6Ly9naXRodWIuY29tL3ZlcmNlbC9uZXh0LmpzYCk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY29uc3Qgcm91dGUgPSByb290U3BhbkF0dHJpYnV0ZXMuZ2V0KCduZXh0LnJvdXRlJyk7XG4gICAgICAgICAgICAgICAgaWYgKHJvdXRlKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IG5hbWUgPSBgJHttZXRob2R9ICR7cm91dGV9YDtcbiAgICAgICAgICAgICAgICAgICAgc3Bhbi5zZXRBdHRyaWJ1dGVzKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICduZXh0LnJvdXRlJzogcm91dGUsXG4gICAgICAgICAgICAgICAgICAgICAgICAnaHR0cC5yb3V0ZSc6IHJvdXRlLFxuICAgICAgICAgICAgICAgICAgICAgICAgJ25leHQuc3Bhbl9uYW1lJzogbmFtZVxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgc3Bhbi51cGRhdGVOYW1lKG5hbWUpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHNwYW4udXBkYXRlTmFtZShgJHttZXRob2R9ICR7cmVxLnVybH1gKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfTtcbiAgICAgICAgY29uc3QgaGFuZGxlUmVzcG9uc2UgPSBhc3luYyAoY3VycmVudFNwYW4pPT57XG4gICAgICAgICAgICB2YXIgX2NhY2hlRW50cnlfdmFsdWU7XG4gICAgICAgICAgICBjb25zdCByZXNwb25zZUdlbmVyYXRvciA9IGFzeW5jICh7IHByZXZpb3VzQ2FjaGVFbnRyeSB9KT0+e1xuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghZ2V0UmVxdWVzdE1ldGEocmVxLCAnbWluaW1hbE1vZGUnKSAmJiBpc09uRGVtYW5kUmV2YWxpZGF0ZSAmJiByZXZhbGlkYXRlT25seUdlbmVyYXRlZCAmJiAhcHJldmlvdXNDYWNoZUVudHJ5KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXMuc3RhdHVzQ29kZSA9IDQwNDtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIG9uLWRlbWFuZCByZXZhbGlkYXRlIGFsd2F5cyBzZXRzIHRoaXMgaGVhZGVyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXMuc2V0SGVhZGVyKCd4LW5leHRqcy1jYWNoZScsICdSRVZBTElEQVRFRCcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVzLmVuZCgnVGhpcyBwYWdlIGNvdWxkIG5vdCBiZSBmb3VuZCcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBpbnZva2VSb3V0ZU1vZHVsZShjdXJyZW50U3Bhbik7XG4gICAgICAgICAgICAgICAgICAgIHJlcS5mZXRjaE1ldHJpY3MgPSBjb250ZXh0LnJlbmRlck9wdHMuZmV0Y2hNZXRyaWNzO1xuICAgICAgICAgICAgICAgICAgICBsZXQgcGVuZGluZ1dhaXRVbnRpbCA9IGNvbnRleHQucmVuZGVyT3B0cy5wZW5kaW5nV2FpdFVudGlsO1xuICAgICAgICAgICAgICAgICAgICAvLyBBdHRlbXB0IHVzaW5nIHByb3ZpZGVkIHdhaXRVbnRpbCBpZiBhdmFpbGFibGVcbiAgICAgICAgICAgICAgICAgICAgLy8gaWYgaXQncyBub3Qgd2UgZmFsbGJhY2sgdG8gc2VuZFJlc3BvbnNlJ3MgaGFuZGxpbmdcbiAgICAgICAgICAgICAgICAgICAgaWYgKHBlbmRpbmdXYWl0VW50aWwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjdHgud2FpdFVudGlsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY3R4LndhaXRVbnRpbChwZW5kaW5nV2FpdFVudGlsKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwZW5kaW5nV2FpdFVudGlsID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGNhY2hlVGFncyA9IGNvbnRleHQucmVuZGVyT3B0cy5jb2xsZWN0ZWRUYWdzO1xuICAgICAgICAgICAgICAgICAgICAvLyBJZiB0aGUgcmVxdWVzdCBpcyBmb3IgYSBzdGF0aWMgcmVzcG9uc2UsIHdlIGNhbiBjYWNoZSBpdCBzbyBsb25nXG4gICAgICAgICAgICAgICAgICAgIC8vIGFzIGl0J3Mgbm90IGVkZ2UuXG4gICAgICAgICAgICAgICAgICAgIGlmIChpc0lzcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgYmxvYiA9IGF3YWl0IHJlc3BvbnNlLmJsb2IoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIENvcHkgdGhlIGhlYWRlcnMgZnJvbSB0aGUgcmVzcG9uc2UuXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBoZWFkZXJzID0gdG9Ob2RlT3V0Z29pbmdIdHRwSGVhZGVycyhyZXNwb25zZS5oZWFkZXJzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjYWNoZVRhZ3MpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBoZWFkZXJzW05FWFRfQ0FDSEVfVEFHU19IRUFERVJdID0gY2FjaGVUYWdzO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFoZWFkZXJzWydjb250ZW50LXR5cGUnXSAmJiBibG9iLnR5cGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBoZWFkZXJzWydjb250ZW50LXR5cGUnXSA9IGJsb2IudHlwZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHJldmFsaWRhdGUgPSB0eXBlb2YgY29udGV4dC5yZW5kZXJPcHRzLmNvbGxlY3RlZFJldmFsaWRhdGUgPT09ICd1bmRlZmluZWQnIHx8IGNvbnRleHQucmVuZGVyT3B0cy5jb2xsZWN0ZWRSZXZhbGlkYXRlID49IElORklOSVRFX0NBQ0hFID8gZmFsc2UgOiBjb250ZXh0LnJlbmRlck9wdHMuY29sbGVjdGVkUmV2YWxpZGF0ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGV4cGlyZSA9IHR5cGVvZiBjb250ZXh0LnJlbmRlck9wdHMuY29sbGVjdGVkRXhwaXJlID09PSAndW5kZWZpbmVkJyB8fCBjb250ZXh0LnJlbmRlck9wdHMuY29sbGVjdGVkRXhwaXJlID49IElORklOSVRFX0NBQ0hFID8gdW5kZWZpbmVkIDogY29udGV4dC5yZW5kZXJPcHRzLmNvbGxlY3RlZEV4cGlyZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIENyZWF0ZSB0aGUgY2FjaGUgZW50cnkgZm9yIHRoZSByZXNwb25zZS5cbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGNhY2hlRW50cnkgPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAga2luZDogQ2FjaGVkUm91dGVLaW5kLkFQUF9ST1VURSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdHVzOiByZXNwb25zZS5zdGF0dXMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJvZHk6IEJ1ZmZlci5mcm9tKGF3YWl0IGJsb2IuYXJyYXlCdWZmZXIoKSksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhlYWRlcnNcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhY2hlQ29udHJvbDoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXZhbGlkYXRlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBleHBpcmVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNhY2hlRW50cnk7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBzZW5kIHJlc3BvbnNlIHdpdGhvdXQgY2FjaGluZyBpZiBub3QgSVNSXG4gICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCBzZW5kUmVzcG9uc2Uobm9kZU5leHRSZXEsIG5vZGVOZXh0UmVzLCByZXNwb25zZSwgY29udGV4dC5yZW5kZXJPcHRzLnBlbmRpbmdXYWl0VW50aWwpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gaWYgdGhpcyBpcyBhIGJhY2tncm91bmQgcmV2YWxpZGF0ZSB3ZSBuZWVkIHRvIHJlcG9ydFxuICAgICAgICAgICAgICAgICAgICAvLyB0aGUgcmVxdWVzdCBlcnJvciBoZXJlIGFzIGl0IHdvbid0IGJlIGJ1YmJsZWRcbiAgICAgICAgICAgICAgICAgICAgaWYgKHByZXZpb3VzQ2FjaGVFbnRyeSA9PSBudWxsID8gdm9pZCAwIDogcHJldmlvdXNDYWNoZUVudHJ5LmlzU3RhbGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHJvdXRlTW9kdWxlLm9uUmVxdWVzdEVycm9yKHJlcSwgZXJyLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcm91dGVyS2luZDogJ0FwcCBSb3V0ZXInLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJvdXRlUGF0aDogc3JjUGFnZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByb3V0ZVR5cGU6ICdyb3V0ZScsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV2YWxpZGF0ZVJlYXNvbjogZ2V0UmV2YWxpZGF0ZVJlYXNvbih7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzUmV2YWxpZGF0ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNPbkRlbWFuZFJldmFsaWRhdGVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICAgICAgfSwgcm91dGVyU2VydmVyQ29udGV4dCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgZXJyO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBjb25zdCBjYWNoZUVudHJ5ID0gYXdhaXQgcm91dGVNb2R1bGUuaGFuZGxlUmVzcG9uc2Uoe1xuICAgICAgICAgICAgICAgIHJlcSxcbiAgICAgICAgICAgICAgICBuZXh0Q29uZmlnLFxuICAgICAgICAgICAgICAgIGNhY2hlS2V5LFxuICAgICAgICAgICAgICAgIHJvdXRlS2luZDogUm91dGVLaW5kLkFQUF9ST1VURSxcbiAgICAgICAgICAgICAgICBpc0ZhbGxiYWNrOiBmYWxzZSxcbiAgICAgICAgICAgICAgICBwcmVyZW5kZXJNYW5pZmVzdCxcbiAgICAgICAgICAgICAgICBpc1JvdXRlUFBSRW5hYmxlZDogZmFsc2UsXG4gICAgICAgICAgICAgICAgaXNPbkRlbWFuZFJldmFsaWRhdGUsXG4gICAgICAgICAgICAgICAgcmV2YWxpZGF0ZU9ubHlHZW5lcmF0ZWQsXG4gICAgICAgICAgICAgICAgcmVzcG9uc2VHZW5lcmF0b3IsXG4gICAgICAgICAgICAgICAgd2FpdFVudGlsOiBjdHgud2FpdFVudGlsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIC8vIHdlIGRvbid0IGNyZWF0ZSBhIGNhY2hlRW50cnkgZm9yIElTUlxuICAgICAgICAgICAgaWYgKCFpc0lzcikge1xuICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKChjYWNoZUVudHJ5ID09IG51bGwgPyB2b2lkIDAgOiAoX2NhY2hlRW50cnlfdmFsdWUgPSBjYWNoZUVudHJ5LnZhbHVlKSA9PSBudWxsID8gdm9pZCAwIDogX2NhY2hlRW50cnlfdmFsdWUua2luZCkgIT09IENhY2hlZFJvdXRlS2luZC5BUFBfUk9VVEUpIHtcbiAgICAgICAgICAgICAgICB2YXIgX2NhY2hlRW50cnlfdmFsdWUxO1xuICAgICAgICAgICAgICAgIHRocm93IE9iamVjdC5kZWZpbmVQcm9wZXJ0eShuZXcgRXJyb3IoYEludmFyaWFudDogYXBwLXJvdXRlIHJlY2VpdmVkIGludmFsaWQgY2FjaGUgZW50cnkgJHtjYWNoZUVudHJ5ID09IG51bGwgPyB2b2lkIDAgOiAoX2NhY2hlRW50cnlfdmFsdWUxID0gY2FjaGVFbnRyeS52YWx1ZSkgPT0gbnVsbCA/IHZvaWQgMCA6IF9jYWNoZUVudHJ5X3ZhbHVlMS5raW5kfWApLCBcIl9fTkVYVF9FUlJPUl9DT0RFXCIsIHtcbiAgICAgICAgICAgICAgICAgICAgdmFsdWU6IFwiRTcwMVwiLFxuICAgICAgICAgICAgICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoIWdldFJlcXVlc3RNZXRhKHJlcSwgJ21pbmltYWxNb2RlJykpIHtcbiAgICAgICAgICAgICAgICByZXMuc2V0SGVhZGVyKCd4LW5leHRqcy1jYWNoZScsIGlzT25EZW1hbmRSZXZhbGlkYXRlID8gJ1JFVkFMSURBVEVEJyA6IGNhY2hlRW50cnkuaXNNaXNzID8gJ01JU1MnIDogY2FjaGVFbnRyeS5pc1N0YWxlID8gJ1NUQUxFJyA6ICdISVQnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIERyYWZ0IG1vZGUgc2hvdWxkIG5ldmVyIGJlIGNhY2hlZFxuICAgICAgICAgICAgaWYgKGlzRHJhZnRNb2RlKSB7XG4gICAgICAgICAgICAgICAgcmVzLnNldEhlYWRlcignQ2FjaGUtQ29udHJvbCcsICdwcml2YXRlLCBuby1jYWNoZSwgbm8tc3RvcmUsIG1heC1hZ2U9MCwgbXVzdC1yZXZhbGlkYXRlJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBoZWFkZXJzID0gZnJvbU5vZGVPdXRnb2luZ0h0dHBIZWFkZXJzKGNhY2hlRW50cnkudmFsdWUuaGVhZGVycyk7XG4gICAgICAgICAgICBpZiAoIShnZXRSZXF1ZXN0TWV0YShyZXEsICdtaW5pbWFsTW9kZScpICYmIGlzSXNyKSkge1xuICAgICAgICAgICAgICAgIGhlYWRlcnMuZGVsZXRlKE5FWFRfQ0FDSEVfVEFHU19IRUFERVIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gSWYgY2FjaGUgY29udHJvbCBpcyBhbHJlYWR5IHNldCBvbiB0aGUgcmVzcG9uc2Ugd2UgZG9uJ3RcbiAgICAgICAgICAgIC8vIG92ZXJyaWRlIGl0IHRvIGFsbG93IHVzZXJzIHRvIGN1c3RvbWl6ZSBpdCB2aWEgbmV4dC5jb25maWdcbiAgICAgICAgICAgIGlmIChjYWNoZUVudHJ5LmNhY2hlQ29udHJvbCAmJiAhcmVzLmdldEhlYWRlcignQ2FjaGUtQ29udHJvbCcpICYmICFoZWFkZXJzLmdldCgnQ2FjaGUtQ29udHJvbCcpKSB7XG4gICAgICAgICAgICAgICAgaGVhZGVycy5zZXQoJ0NhY2hlLUNvbnRyb2wnLCBnZXRDYWNoZUNvbnRyb2xIZWFkZXIoY2FjaGVFbnRyeS5jYWNoZUNvbnRyb2wpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGF3YWl0IHNlbmRSZXNwb25zZShub2RlTmV4dFJlcSwgbm9kZU5leHRSZXMsIG5ldyBSZXNwb25zZShjYWNoZUVudHJ5LnZhbHVlLmJvZHksIHtcbiAgICAgICAgICAgICAgICBoZWFkZXJzLFxuICAgICAgICAgICAgICAgIHN0YXR1czogY2FjaGVFbnRyeS52YWx1ZS5zdGF0dXMgfHwgMjAwXG4gICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfTtcbiAgICAgICAgLy8gVE9ETzogYWN0aXZlU3BhbiBjb2RlIHBhdGggaXMgZm9yIHdoZW4gd3JhcHBlZCBieVxuICAgICAgICAvLyBuZXh0LXNlcnZlciBjYW4gYmUgcmVtb3ZlZCB3aGVuIHRoaXMgaXMgbm8gbG9uZ2VyIHVzZWRcbiAgICAgICAgaWYgKGFjdGl2ZVNwYW4pIHtcbiAgICAgICAgICAgIGF3YWl0IGhhbmRsZVJlc3BvbnNlKGFjdGl2ZVNwYW4pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgYXdhaXQgdHJhY2VyLndpdGhQcm9wYWdhdGVkQ29udGV4dChyZXEuaGVhZGVycywgKCk9PnRyYWNlci50cmFjZShCYXNlU2VydmVyU3Bhbi5oYW5kbGVSZXF1ZXN0LCB7XG4gICAgICAgICAgICAgICAgICAgIHNwYW5OYW1lOiBgJHttZXRob2R9ICR7cmVxLnVybH1gLFxuICAgICAgICAgICAgICAgICAgICBraW5kOiBTcGFuS2luZC5TRVJWRVIsXG4gICAgICAgICAgICAgICAgICAgIGF0dHJpYnV0ZXM6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICdodHRwLm1ldGhvZCc6IG1ldGhvZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICdodHRwLnRhcmdldCc6IHJlcS51cmxcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0sIGhhbmRsZVJlc3BvbnNlKSk7XG4gICAgICAgIH1cbiAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgLy8gaWYgd2UgYXJlbid0IHdyYXBwZWQgYnkgYmFzZS1zZXJ2ZXIgaGFuZGxlIGhlcmVcbiAgICAgICAgaWYgKCFhY3RpdmVTcGFuICYmICEoZXJyIGluc3RhbmNlb2YgTm9GYWxsYmFja0Vycm9yKSkge1xuICAgICAgICAgICAgYXdhaXQgcm91dGVNb2R1bGUub25SZXF1ZXN0RXJyb3IocmVxLCBlcnIsIHtcbiAgICAgICAgICAgICAgICByb3V0ZXJLaW5kOiAnQXBwIFJvdXRlcicsXG4gICAgICAgICAgICAgICAgcm91dGVQYXRoOiBub3JtYWxpemVkU3JjUGFnZSxcbiAgICAgICAgICAgICAgICByb3V0ZVR5cGU6ICdyb3V0ZScsXG4gICAgICAgICAgICAgICAgcmV2YWxpZGF0ZVJlYXNvbjogZ2V0UmV2YWxpZGF0ZVJlYXNvbih7XG4gICAgICAgICAgICAgICAgICAgIGlzUmV2YWxpZGF0ZSxcbiAgICAgICAgICAgICAgICAgICAgaXNPbkRlbWFuZFJldmFsaWRhdGVcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gcmV0aHJvdyBzbyB0aGF0IHdlIGNhbiBoYW5kbGUgc2VydmluZyBlcnJvciBwYWdlXG4gICAgICAgIC8vIElmIHRoaXMgaXMgZHVyaW5nIHN0YXRpYyBnZW5lcmF0aW9uLCB0aHJvdyB0aGUgZXJyb3IgYWdhaW4uXG4gICAgICAgIGlmIChpc0lzcikgdGhyb3cgZXJyO1xuICAgICAgICAvLyBPdGhlcndpc2UsIHNlbmQgYSA1MDAgcmVzcG9uc2UuXG4gICAgICAgIGF3YWl0IHNlbmRSZXNwb25zZShub2RlTmV4dFJlcSwgbm9kZU5leHRSZXMsIG5ldyBSZXNwb25zZShudWxsLCB7XG4gICAgICAgICAgICBzdGF0dXM6IDUwMFxuICAgICAgICB9KSk7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbn1cblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YXBwLXJvdXRlLmpzLm1hcFxuIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/.pnpm/next@15.5.2_@playwright+tes_b7e6c280e9a1b4309347c0bf0ab476d5/node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fdynamics%2Froute&page=%2Fapi%2Fdynamics%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fdynamics%2Froute.ts&appDir=H%3A%5CUsers%5CGus%5Csource%5Crepo%5Cdynamics%5Cdynamics-b%5Ccryptopi-dynamics%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=H%3A%5CUsers%5CGus%5Csource%5Crepo%5Cdynamics%5Cdynamics-b%5Ccryptopi-dynamics&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=!\n");

/***/ }),

/***/ "(rsc)/./node_modules/.pnpm/next@15.5.2_@playwright+tes_b7e6c280e9a1b4309347c0bf0ab476d5/node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true!":
/*!**************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/next@15.5.2_@playwright+tes_b7e6c280e9a1b4309347c0bf0ab476d5/node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true! ***!
  \**************************************************************************************************************************************************************************************/
/***/ (() => {



/***/ }),

/***/ "(rsc)/./src/app/(server)/wire-converter.ts":
/*!********************************************!*\
  !*** ./src/app/(server)/wire-converter.ts ***!
  \********************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _core_converters_Converter_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @/core/converters/Converter.server */ \"(rsc)/./src/core/converters/Converter.server.ts\");\n/* harmony import */ var _core_converters_providers_matrices_http__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/core/converters/providers/matrices.http */ \"(rsc)/./src/core/converters/providers/matrices.http.ts\");\n/* harmony import */ var _core_converters_providers_mooaux_module__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/core/converters/providers/mooaux.module */ \"(rsc)/./src/core/converters/providers/mooaux.module.ts\");\n/* harmony import */ var _core_converters_providers_straux_db__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @/core/converters/providers/straux.db */ \"(rsc)/./src/core/converters/providers/straux.db.ts\");\n/* harmony import */ var _core_converters_providers_cinaux_db__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @/core/converters/providers/cinaux.db */ \"(rsc)/./src/core/converters/providers/cinaux.db.ts\");\n/* harmony import */ var _core_converters_providers_wallet_http__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @/core/converters/providers/wallet.http */ \"(rsc)/./src/core/converters/providers/wallet.http.ts\");\n/* harmony import */ var _lab_legacy_auxiliary_mea_aux_tiers__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../lab/legacy/auxiliary/mea_aux/tiers */ \"(rsc)/./lab/legacy/auxiliary/mea_aux/tiers.ts\");\n/* harmony import */ var _core_db__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @/core/db */ \"(rsc)/./src/core/db/index.ts\");\n/* harmony import */ var _lib_str_aux_db__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @/lib/str-aux/db */ \"(rsc)/./src/lib/str-aux/db.ts\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_core_db__WEBPACK_IMPORTED_MODULE_7__, _lib_str_aux_db__WEBPACK_IMPORTED_MODULE_8__]);\n([_core_db__WEBPACK_IMPORTED_MODULE_7__, _lib_str_aux_db__WEBPACK_IMPORTED_MODULE_8__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);\n// src/app/(server)/wire-converter.ts\n// SERVER-ONLY boot wiring for the Converter providers\n\n //  NEW: HTTP provider\n\n\n\n\n// \nconst APP_SESSION = process.env.NEXT_PUBLIC_APP_SESSION_ID || \"dev-session\";\nconst STR_WINDOW = process.env.NEXT_PUBLIC_STR_WINDOW || \"30m\";\n//  moo-aux (module) \n\n\nasync function moo_getAuxForPair(pair) {\n    const coins = (process.env.COINS ?? \"BTC,ETH,BNB,SOL,ADA,USDT\").split(\",\").map((s)=>s.trim().toUpperCase());\n    const ts = await (0,_core_db__WEBPACK_IMPORTED_MODULE_7__.getLatestTsForType)(\"id_pct\");\n    let idp = 0;\n    if (ts) {\n        const rows = await (0,_core_db__WEBPACK_IMPORTED_MODULE_7__.getSnapshotByType)(\"id_pct\", ts, coins);\n        const hit = rows.find((r)=>r.base === pair.base && r.quote === pair.quote);\n        idp = Number(hit?.value ?? 0);\n    }\n    const fraction = Math.abs(idp) > 1.5 ? idp / 100 : idp;\n    const weight = (0,_lab_legacy_auxiliary_mea_aux_tiers__WEBPACK_IMPORTED_MODULE_6__.getTierWeighting)(fraction);\n    const tier = weight >= 1.1 ? \"-tier\" : weight >= 1.02 ? \"-tier\" : weight > 0.99 ? \"-tier\" : \"-tier\";\n    return {\n        value: weight,\n        tier\n    };\n}\nconst mooProvider = (0,_core_converters_providers_mooaux_module__WEBPACK_IMPORTED_MODULE_2__.makeMooModuleProvider)({\n    getMooForPair: moo_getAuxForPair\n});\n// (optional) attach grid if/when you have a canonical builder:\n// mooProvider.getMeaGrid = (...args) => /* buildMeaAux(...) */;\n//  str-aux (db) \n\n\nasync function str_getIdPctHistory(from, to, lastN = 6) {\n    const q = `\n    select value\n      from dyn_matrix_values\n     where matrix_type='id_pct' and base=$1 and quote=$2\n     order by ts_ms desc\n     limit $3`;\n    const r = await _core_db__WEBPACK_IMPORTED_MODULE_7__.db.query(q, [\n        from,\n        to,\n        lastN\n    ]);\n    return r.rows.map((x)=>Number(x.value ?? 0));\n}\nasync function str_getIdPctHistoryTs(from, to, lastN = 8) {\n    const q = `\n    select ts_ms, value\n      from dyn_matrix_values\n     where matrix_type='id_pct' and base=$1 and quote=$2\n     order by ts_ms desc\n     limit $3`;\n    const r = await _core_db__WEBPACK_IMPORTED_MODULE_7__.db.query(q, [\n        from,\n        to,\n        lastN\n    ]);\n    return r.rows.map((x)=>({\n            ts_ms: Number(x.ts_ms),\n            value: Number(x.value ?? 0)\n        }));\n}\n// Optional: pct derivative history (prefer materialized pct_drv; else derive from id_pct)\nasync function str_getPctDrvHistory(from, to, lastN = 6) {\n    const q = `\n    select value\n      from dyn_matrix_values\n     where matrix_type='pct_drv' and base=$1 and quote=$2\n     order by ts_ms desc\n     limit $3`;\n    const r1 = await _core_db__WEBPACK_IMPORTED_MODULE_7__.db.query(q, [\n        from,\n        to,\n        lastN\n    ]).catch(()=>({\n            rows: []\n        }));\n    if (r1.rows.length) {\n        return r1.rows.map((x)=>Number(x.value ?? 0));\n    }\n    const idHist = await str_getIdPctHistory(from, to, Math.max(lastN + 1, 6));\n    const drv = [];\n    for(let i = 1; i < idHist.length; i++)drv.push((idHist[i] ?? 0) - (idHist[i - 1] ?? 0));\n    return drv.slice(-lastN);\n}\nasync function str_getPctDrvHistoryTs(from, to, lastN = 8) {\n    const q = `\n    select ts_ms, value\n      from dyn_matrix_values\n     where matrix_type='pct_drv' and base=$1 and quote=$2\n     order by ts_ms desc\n     limit $3`;\n    const r1 = await _core_db__WEBPACK_IMPORTED_MODULE_7__.db.query(q, [\n        from,\n        to,\n        lastN\n    ]).catch(()=>({\n            rows: []\n        }));\n    if (r1.rows.length) {\n        return r1.rows.map((x)=>({\n                ts_ms: Number(x.ts_ms),\n                value: Number(x.value ?? 0)\n            }));\n    }\n    const idRows = await str_getIdPctHistoryTs(from, to, Math.max(lastN + 1, 8));\n    const drv = [];\n    for(let i = 1; i < idRows.length; i++){\n        drv.push({\n            ts_ms: idRows[i].ts_ms,\n            value: idRows[i].value - idRows[i - 1].value\n        });\n    }\n    return drv.slice(-lastN);\n}\nasync function str_getGfm() {\n    const doc = await _lib_str_aux_db__WEBPACK_IMPORTED_MODULE_8__.db.getLatest({\n        base: \"BTC\",\n        quote: \"USDT\",\n        window: STR_WINDOW,\n        appSessionId: APP_SESSION\n    });\n    return Number(doc?.stats?.gfm ?? 0);\n}\nasync function str_getShift() {\n    const doc = await _lib_str_aux_db__WEBPACK_IMPORTED_MODULE_8__.db.getLatest({\n        base: \"BTC\",\n        quote: \"USDT\",\n        window: STR_WINDOW,\n        appSessionId: APP_SESSION\n    });\n    return Number(doc?.stats?.deltaGfm ?? 0);\n}\nasync function str_getVTendency(pair) {\n    const doc = await _lib_str_aux_db__WEBPACK_IMPORTED_MODULE_8__.db.getLatest({\n        base: pair.base,\n        quote: pair.quote,\n        window: STR_WINDOW,\n        appSessionId: APP_SESSION\n    });\n    const s = doc?.stats;\n    const v = Number((s?.vOuter ?? 0) - (s?.vInner ?? 0));\n    return Number.isFinite(v) ? v : 0;\n}\nasync function str_getStats(pair) {\n    const doc = await _lib_str_aux_db__WEBPACK_IMPORTED_MODULE_8__.db.getLatest({\n        base: pair.base,\n        quote: pair.quote,\n        window: STR_WINDOW,\n        appSessionId: APP_SESSION\n    });\n    const s = doc?.stats ?? {};\n    return {\n        gfm: Number(s.gfm ?? 0),\n        shift: Number(s.deltaGfm ?? 0),\n        vOuter: Number(s.vOuter ?? 0)\n    };\n}\n//  cin-aux (db) \nasync function cin_getLatestCycleTs(appSessionId) {\n    const r = await _core_db__WEBPACK_IMPORTED_MODULE_7__.db.query(`select max(cycle_ts)::text as ts from cin_aux_cycle where app_session_id=$1`, [\n        appSessionId\n    ]);\n    const ts = Number(r.rows[0]?.ts || 0);\n    return Number.isFinite(ts) && ts > 0 ? ts : null;\n}\nasync function cin_getWallet(symbol, appSessionId = APP_SESSION) {\n    const ts = await cin_getLatestCycleTs(appSessionId);\n    if (!ts) return 0;\n    const r = await _core_db__WEBPACK_IMPORTED_MODULE_7__.db.query(`select qty from wallet_snapshots where app_session_id=$1 and cycle_ts=$2 and symbol=$3`, [\n        appSessionId,\n        ts,\n        symbol\n    ]);\n    const v = Number(r.rows[0]?.qty || 0);\n    return Number.isFinite(v) ? v : 0;\n}\nasync function cin_getCinStats(symbols, appSessionId = APP_SESSION) {\n    const ts = await cin_getLatestCycleTs(appSessionId);\n    if (!ts) return [];\n    const r = await _core_db__WEBPACK_IMPORTED_MODULE_7__.db.query(`select symbol,\n            imprint_cycle_usdt,\n            luggage_cycle_usdt,\n            imprint_app_session_usdt,\n            luggage_app_session_usdt\n       from v_cin_aux\n      where app_session_id=$1 and cycle_ts=$2 and symbol = any($3)\n      order by symbol`, [\n        appSessionId,\n        ts,\n        symbols\n    ]);\n    return r.rows.map((row)=>({\n            symbol: row.symbol,\n            session_imprint: Number(row.imprint_app_session_usdt ?? 0),\n            session_luggage: Number(row.luggage_app_session_usdt ?? 0),\n            cycle_imprint: Number(row.imprint_cycle_usdt ?? 0),\n            cycle_luggage: Number(row.luggage_cycle_usdt ?? 0)\n        }));\n}\n//  wire everything \n// 1) STR provider: pass only known deps, then attach optional method to instance\nconst strDeps = {\n    getIdPctHistory: str_getIdPctHistory,\n    getGfm: str_getGfm,\n    getShift: str_getShift,\n    getVTendency: ({ base, quote })=>str_getVTendency({\n            base,\n            quote\n        })\n};\nconst strProvider = (0,_core_converters_providers_straux_db__WEBPACK_IMPORTED_MODULE_3__.makeStrDbProvider)(strDeps);\nstrProvider.getPctDrvHistory = str_getPctDrvHistory; // existing numeric helper (if you kept it)\nstrProvider.getPctDrvHistoryTs = str_getPctDrvHistoryTs; // timestamped\nstrProvider.getIdPctHistoryTs = str_getIdPctHistoryTs; // timestamped\nstrProvider.getStats = str_getStats;\n// 2) Wire all providers into the Converter\n(0,_core_converters_Converter_server__WEBPACK_IMPORTED_MODULE_0__.wireConverterSources)({\n    // Matrices now come from the HTTP endpoint keyed by the Settings universe\n    matrices: (0,_core_converters_providers_matrices_http__WEBPACK_IMPORTED_MODULE_1__.makeMatricesHttpProvider)(process.env.NEXT_PUBLIC_BASE_URL ?? \"\"),\n    mea: mooProvider,\n    str: strProvider,\n    cin: (0,_core_converters_providers_cinaux_db__WEBPACK_IMPORTED_MODULE_4__.makeCinDbProvider)({\n        getWallet: (s)=>cin_getWallet(s),\n        getCinStats: (syms)=>cin_getCinStats(syms)\n    }),\n    wallet: (0,_core_converters_providers_wallet_http__WEBPACK_IMPORTED_MODULE_5__.makeWalletHttpProvider)()\n});\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvYXBwLyhzZXJ2ZXIpL3dpcmUtY29udmVydGVyLnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7QUFBQSxxQ0FBcUM7QUFDckMsc0RBQXNEO0FBRW9CO0FBQ1csQ0FBQyx1QkFBdUI7QUFDM0I7QUFDUjtBQUNBO0FBQ087QUFFakYsbUZBQW1GO0FBQ25GLE1BQU1NLGNBQWNDLFFBQVFDLEdBQUcsQ0FBQ0MsMEJBQTBCLElBQUk7QUFDOUQsTUFBTUMsYUFDSixRQUFTRixHQUFHLENBQUNHLHNCQUFzQixJQUFZO0FBRWpELG1GQUFtRjtBQUNKO0FBQ2I7QUFFbEUsZUFBZUksa0JBQWtCQyxJQUFxQztJQUNwRSxNQUFNQyxRQUFRLENBQUNWLFFBQVFDLEdBQUcsQ0FBQ1UsS0FBSyxJQUFJLDBCQUF5QixFQUMxREMsS0FBSyxDQUFDLEtBQ05DLEdBQUcsQ0FBQyxDQUFDQyxJQUFNQSxFQUFFQyxJQUFJLEdBQUdDLFdBQVc7SUFFbEMsTUFBTUMsS0FBSyxNQUFNWCw0REFBa0JBLENBQUM7SUFDcEMsSUFBSVksTUFBTTtJQUNWLElBQUlELElBQUk7UUFDTixNQUFNRSxPQUFPLE1BQU1aLDJEQUFpQkEsQ0FBQyxVQUFVVSxJQUFJUDtRQUNuRCxNQUFNVSxNQUFNRCxLQUFLRSxJQUFJLENBQUMsQ0FBQ0MsSUFBV0EsRUFBRUMsSUFBSSxLQUFLZCxLQUFLYyxJQUFJLElBQUlELEVBQUVFLEtBQUssS0FBS2YsS0FBS2UsS0FBSztRQUNoRk4sTUFBTU8sT0FBT0wsS0FBS00sU0FBUztJQUM3QjtJQUNBLE1BQU1DLFdBQVdDLEtBQUtDLEdBQUcsQ0FBQ1gsT0FBTyxNQUFNQSxNQUFNLE1BQU1BO0lBQ25ELE1BQU1ZLFNBQVN6QixxRkFBZ0JBLENBQUNzQjtJQUNoQyxNQUFNSSxPQUNKRCxVQUFVLE1BQU0sV0FDaEJBLFVBQVUsT0FBTyxXQUNqQkEsU0FBUyxPQUFPLFdBQVc7SUFDN0IsT0FBTztRQUFFSixPQUFPSTtRQUFRQztJQUFLO0FBQy9CO0FBRUEs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QVM1QixnQkFBZ0I0QjtJQUN6QztJQUNWQyxRQUFVNUcsOEZBQXNCQTtBQUNsQyIsInNvdXJjZXMiOlsiSDpcXFVzZXJzXFxHdXNcXHNvdXJjZVxccmVwb1xcZHluYW1pY3NcXGR5bmFtaWNzLWJcXGNyeXB0b3BpLWR5bmFtaWNzXFxzcmNcXGFwcFxcKHNlcnZlcilcXHdpcmUtY29udmVydGVyLnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIHNyYy9hcHAvKHNlcnZlcikvd2lyZS1jb252ZXJ0ZXIudHNcclxuLy8gU0VSVkVSLU9OTFkgYm9vdCB3aXJpbmcgZm9yIHRoZSBDb252ZXJ0ZXIgcHJvdmlkZXJzXHJcblxyXG5pbXBvcnQgeyB3aXJlQ29udmVydGVyU291cmNlcyB9IGZyb20gXCJAL2NvcmUvY29udmVydGVycy9Db252ZXJ0ZXIuc2VydmVyXCI7XHJcbmltcG9ydCB7IG1ha2VNYXRyaWNlc0h0dHBQcm92aWRlciB9IGZyb20gXCJAL2NvcmUvY29udmVydGVycy9wcm92aWRlcnMvbWF0cmljZXMuaHR0cFwiOyAvLyDihpAgTkVXOiBIVFRQIHByb3ZpZGVyXHJcbmltcG9ydCB7IG1ha2VNb29Nb2R1bGVQcm92aWRlciB9IGZyb20gXCJAL2NvcmUvY29udmVydGVycy9wcm92aWRlcnMvbW9vYXV4Lm1vZHVsZVwiO1xyXG5pbXBvcnQgeyBtYWtlU3RyRGJQcm92aWRlciB9IGZyb20gXCJAL2NvcmUvY29udmVydGVycy9wcm92aWRlcnMvc3RyYXV4LmRiXCI7XHJcbmltcG9ydCB7IG1ha2VDaW5EYlByb3ZpZGVyIH0gZnJvbSBcIkAvY29yZS9jb252ZXJ0ZXJzL3Byb3ZpZGVycy9jaW5hdXguZGJcIjtcclxuaW1wb3J0IHsgbWFrZVdhbGxldEh0dHBQcm92aWRlciB9IGZyb20gXCJAL2NvcmUvY29udmVydGVycy9wcm92aWRlcnMvd2FsbGV0Lmh0dHBcIjtcclxuXHJcbi8vIOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgFxyXG5jb25zdCBBUFBfU0VTU0lPTiA9IHByb2Nlc3MuZW52Lk5FWFRfUFVCTElDX0FQUF9TRVNTSU9OX0lEIHx8IFwiZGV2LXNlc3Npb25cIjtcclxuY29uc3QgU1RSX1dJTkRPVzogXCIzMG1cIiB8IFwiMWhcIiB8IFwiM2hcIiA9XHJcbiAgKHByb2Nlc3MuZW52Lk5FWFRfUFVCTElDX1NUUl9XSU5ET1cgYXMgYW55KSB8fCBcIjMwbVwiO1xyXG5cclxuLy8g4pSA4pSAIG1vby1hdXggKG1vZHVsZSkg4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSAXHJcbmltcG9ydCB7IGdldFRpZXJXZWlnaHRpbmcgfSBmcm9tIFwiLi4vLi4vLi4vbGFiL2xlZ2FjeS9hdXhpbGlhcnkvbWVhX2F1eC90aWVyc1wiO1xyXG5pbXBvcnQgeyBnZXRMYXRlc3RUc0ZvclR5cGUsIGdldFNuYXBzaG90QnlUeXBlIH0gZnJvbSBcIkAvY29yZS9kYlwiO1xyXG5cclxuYXN5bmMgZnVuY3Rpb24gbW9vX2dldEF1eEZvclBhaXIocGFpcjogeyBiYXNlOiBzdHJpbmc7IHF1b3RlOiBzdHJpbmcgfSkge1xyXG4gIGNvbnN0IGNvaW5zID0gKHByb2Nlc3MuZW52LkNPSU5TID8/IFwiQlRDLEVUSCxCTkIsU09MLEFEQSxVU0RUXCIpXHJcbiAgICAuc3BsaXQoXCIsXCIpXHJcbiAgICAubWFwKChzKSA9PiBzLnRyaW0oKS50b1VwcGVyQ2FzZSgpKTtcclxuXHJcbiAgY29uc3QgdHMgPSBhd2FpdCBnZXRMYXRlc3RUc0ZvclR5cGUoXCJpZF9wY3RcIik7XHJcbiAgbGV0IGlkcCA9IDA7XHJcbiAgaWYgKHRzKSB7XHJcbiAgICBjb25zdCByb3dzID0gYXdhaXQgZ2V0U25hcHNob3RCeVR5cGUoXCJpZF9wY3RcIiwgdHMsIGNvaW5zKTtcclxuICAgIGNvbnN0IGhpdCA9IHJvd3MuZmluZCgocjogYW55KSA9PiByLmJhc2UgPT09IHBhaXIuYmFzZSAmJiByLnF1b3RlID09PSBwYWlyLnF1b3RlKTtcclxuICAgIGlkcCA9IE51bWJlcihoaXQ/LnZhbHVlID8/IDApO1xyXG4gIH1cclxuICBjb25zdCBmcmFjdGlvbiA9IE1hdGguYWJzKGlkcCkgPiAxLjUgPyBpZHAgLyAxMDAgOiBpZHA7XHJcbiAgY29uc3Qgd2VpZ2h0ID0gZ2V0VGllcldlaWdodGluZyhmcmFjdGlvbik7XHJcbiAgY29uc3QgdGllciA9XHJcbiAgICB3ZWlnaHQgPj0gMS4xID8gXCLOsS10aWVyXCIgOlxyXG4gICAgd2VpZ2h0ID49IDEuMDIgPyBcIs6yLXRpZXJcIiA6XHJcbiAgICB3ZWlnaHQgPiAwLjk5ID8gXCLOsy10aWVyXCIgOiBcIs60LXRpZXJcIjtcclxuICByZXR1cm4geyB2YWx1ZTogd2VpZ2h0LCB0aWVyIH07XHJcbn1cclxuXHJcbmNvbnN0IG1vb1Byb3ZpZGVyID0gbWFrZU1vb01vZHVsZVByb3ZpZGVyKHsgZ2V0TW9vRm9yUGFpcjogbW9vX2dldEF1eEZvclBhaXIgfSkgYXMgYW55O1xyXG4vLyAob3B0aW9uYWwpIGF0dGFjaCBncmlkIGlmL3doZW4geW91IGhhdmUgYSBjYW5vbmljYWwgYnVpbGRlcjpcclxuLy8gbW9vUHJvdmlkZXIuZ2V0TWVhR3JpZCA9ICguLi5hcmdzKSA9PiAvKiBidWlsZE1lYUF1eCguLi4pICovO1xyXG5cclxuLy8g4pSA4pSAIHN0ci1hdXggKGRiKSDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIBcclxuaW1wb3J0IHsgZGIgYXMgc3RyQXV4RGIgfSBmcm9tIFwiQC9saWIvc3RyLWF1eC9kYlwiO1xyXG5pbXBvcnQgeyBkYiB9IGZyb20gXCJAL2NvcmUvZGJcIjtcclxuXHJcbmFzeW5jIGZ1bmN0aW9uIHN0cl9nZXRJZFBjdEhpc3RvcnkoZnJvbTogc3RyaW5nLCB0bzogc3RyaW5nLCBsYXN0TiA9IDYpIHtcclxuICBjb25zdCBxID0gYFxyXG4gICAgc2VsZWN0IHZhbHVlXHJcbiAgICAgIGZyb20gZHluX21hdHJpeF92YWx1ZXNcclxuICAgICB3aGVyZSBtYXRyaXhfdHlwZT0naWRfcGN0JyBhbmQgYmFzZT0kMSBhbmQgcXVvdGU9JDJcclxuICAgICBvcmRlciBieSB0c19tcyBkZXNjXHJcbiAgICAgbGltaXQgJDNgO1xyXG4gIGNvbnN0IHIgPSBhd2FpdCBkYi5xdWVyeTx7IHZhbHVlOiBzdHJpbmcgfCBudW1iZXIgfT4ocSwgW2Zyb20sIHRvLCBsYXN0Tl0pO1xyXG4gIHJldHVybiByLnJvd3MubWFwKCh4OiB7IHZhbHVlOiBzdHJpbmcgfCBudW1iZXIgfSkgPT4gTnVtYmVyKHgudmFsdWUgPz8gMCkpO1xyXG59XHJcblxyXG5hc3luYyBmdW5jdGlvbiBzdHJfZ2V0SWRQY3RIaXN0b3J5VHMoZnJvbTogc3RyaW5nLCB0bzogc3RyaW5nLCBsYXN0TiA9IDgpIHtcclxuICBjb25zdCBxID0gYFxyXG4gICAgc2VsZWN0IHRzX21zLCB2YWx1ZVxyXG4gICAgICBmcm9tIGR5bl9tYXRyaXhfdmFsdWVzXHJcbiAgICAgd2hlcmUgbWF0cml4X3R5cGU9J2lkX3BjdCcgYW5kIGJhc2U9JDEgYW5kIHF1b3RlPSQyXHJcbiAgICAgb3JkZXIgYnkgdHNfbXMgZGVzY1xyXG4gICAgIGxpbWl0ICQzYDtcclxuICBjb25zdCByID0gYXdhaXQgZGIucXVlcnk8eyB0c19tczogc3RyaW5nIHwgbnVtYmVyOyB2YWx1ZTogc3RyaW5nIHwgbnVtYmVyIH0+KHEsIFtmcm9tLCB0bywgbGFzdE5dKTtcclxuICByZXR1cm4gci5yb3dzLm1hcCgoeDogeyB0c19tczogc3RyaW5nIHwgbnVtYmVyOyB2YWx1ZTogc3RyaW5nIHwgbnVtYmVyIH0pID0+ICh7XHJcbiAgICB0c19tczogTnVtYmVyKHgudHNfbXMpLFxyXG4gICAgdmFsdWU6IE51bWJlcih4LnZhbHVlID8/IDApLFxyXG4gIH0pKTtcclxufVxyXG5cclxuLy8gT3B0aW9uYWw6IHBjdCBkZXJpdmF0aXZlIGhpc3RvcnkgKHByZWZlciBtYXRlcmlhbGl6ZWQgcGN0X2RydjsgZWxzZSBkZXJpdmUgZnJvbSBpZF9wY3QpXHJcbmFzeW5jIGZ1bmN0aW9uIHN0cl9nZXRQY3REcnZIaXN0b3J5KGZyb206IHN0cmluZywgdG86IHN0cmluZywgbGFzdE4gPSA2KSB7XHJcbiAgY29uc3QgcSA9IGBcclxuICAgIHNlbGVjdCB2YWx1ZVxyXG4gICAgICBmcm9tIGR5bl9tYXRyaXhfdmFsdWVzXHJcbiAgICAgd2hlcmUgbWF0cml4X3R5cGU9J3BjdF9kcnYnIGFuZCBiYXNlPSQxIGFuZCBxdW90ZT0kMlxyXG4gICAgIG9yZGVyIGJ5IHRzX21zIGRlc2NcclxuICAgICBsaW1pdCAkM2A7XHJcbiAgY29uc3QgcjEgPSBhd2FpdCBkYlxyXG4gICAgLnF1ZXJ5PHsgdmFsdWU6IHN0cmluZyB8IG51bWJlciB9PihxLCBbZnJvbSwgdG8sIGxhc3ROXSlcclxuICAgIC5jYXRjaCgoKSA9PiAoeyByb3dzOiBbXSBhcyBBcnJheTx7IHZhbHVlOiBzdHJpbmcgfCBudW1iZXIgfT4gfSkpO1xyXG4gIGlmIChyMS5yb3dzLmxlbmd0aCkge1xyXG4gICAgcmV0dXJuIHIxLnJvd3MubWFwKCh4OiB7IHZhbHVlOiBzdHJpbmcgfCBudW1iZXIgfSkgPT4gTnVtYmVyKHgudmFsdWUgPz8gMCkpO1xyXG4gIH1cclxuICBjb25zdCBpZEhpc3QgPSBhd2FpdCBzdHJfZ2V0SWRQY3RIaXN0b3J5KGZyb20sIHRvLCBNYXRoLm1heChsYXN0TiArIDEsIDYpKTtcclxuICBjb25zdCBkcnY6IG51bWJlcltdID0gW107XHJcbiAgZm9yIChsZXQgaSA9IDE7IGkgPCBpZEhpc3QubGVuZ3RoOyBpKyspIGRydi5wdXNoKChpZEhpc3RbaV0gPz8gMCkgLSAoaWRIaXN0W2kgLSAxXSA/PyAwKSk7XHJcbiAgcmV0dXJuIGRydi5zbGljZSgtbGFzdE4pO1xyXG59XHJcblxyXG5hc3luYyBmdW5jdGlvbiBzdHJfZ2V0UGN0RHJ2SGlzdG9yeVRzKGZyb206IHN0cmluZywgdG86IHN0cmluZywgbGFzdE4gPSA4KSB7XHJcbiAgY29uc3QgcSA9IGBcclxuICAgIHNlbGVjdCB0c19tcywgdmFsdWVcclxuICAgICAgZnJvbSBkeW5fbWF0cml4X3ZhbHVlc1xyXG4gICAgIHdoZXJlIG1hdHJpeF90eXBlPSdwY3RfZHJ2JyBhbmQgYmFzZT0kMSBhbmQgcXVvdGU9JDJcclxuICAgICBvcmRlciBieSB0c19tcyBkZXNjXHJcbiAgICAgbGltaXQgJDNgO1xyXG4gIGNvbnN0IHIxID0gYXdhaXQgZGJcclxuICAgIC5xdWVyeTx7IHRzX21zOiBzdHJpbmcgfCBudW1iZXI7IHZhbHVlOiBzdHJpbmcgfCBudW1iZXIgfT4ocSwgW2Zyb20sIHRvLCBsYXN0Tl0pXHJcbiAgICAuY2F0Y2goKCkgPT4gKHsgcm93czogW10gYXMgQXJyYXk8eyB0c19tczogc3RyaW5nIHwgbnVtYmVyOyB2YWx1ZTogc3RyaW5nIHwgbnVtYmVyIH0+IH0pKTtcclxuICBpZiAocjEucm93cy5sZW5ndGgpIHtcclxuICAgIHJldHVybiByMS5yb3dzLm1hcCgoeDogeyB0c19tczogc3RyaW5nIHwgbnVtYmVyOyB2YWx1ZTogc3RyaW5nIHwgbnVtYmVyIH0pID0+ICh7XHJcbiAgICAgIHRzX21zOiBOdW1iZXIoeC50c19tcyksXHJcbiAgICAgIHZhbHVlOiBOdW1iZXIoeC52YWx1ZSA/PyAwKSxcclxuICAgIH0pKTtcclxuICB9XHJcbiAgY29uc3QgaWRSb3dzID0gYXdhaXQgc3RyX2dldElkUGN0SGlzdG9yeVRzKGZyb20sIHRvLCBNYXRoLm1heChsYXN0TiArIDEsIDgpKTtcclxuICBjb25zdCBkcnY6IEFycmF5PHsgdHNfbXM6IG51bWJlcjsgdmFsdWU6IG51bWJlciB9PiA9IFtdO1xyXG4gIGZvciAobGV0IGkgPSAxOyBpIDwgaWRSb3dzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICBkcnYucHVzaCh7XHJcbiAgICAgIHRzX21zOiBpZFJvd3NbaV0udHNfbXMsXHJcbiAgICAgIHZhbHVlOiBpZFJvd3NbaV0udmFsdWUgLSBpZFJvd3NbaSAtIDFdLnZhbHVlLFxyXG4gICAgfSk7XHJcbiAgfVxyXG4gIHJldHVybiBkcnYuc2xpY2UoLWxhc3ROKTtcclxufVxyXG5cclxuYXN5bmMgZnVuY3Rpb24gc3RyX2dldEdmbSgpIHtcclxuICBjb25zdCBkb2MgPSBhd2FpdCBzdHJBdXhEYi5nZXRMYXRlc3QoeyBiYXNlOiBcIkJUQ1wiLCBxdW90ZTogXCJVU0RUXCIsIHdpbmRvdzogU1RSX1dJTkRPVywgYXBwU2Vzc2lvbklkOiBBUFBfU0VTU0lPTiB9KTtcclxuICByZXR1cm4gTnVtYmVyKChkb2MgYXMgYW55KT8uc3RhdHM/LmdmbSA/PyAwKTtcclxufVxyXG5cclxuYXN5bmMgZnVuY3Rpb24gc3RyX2dldFNoaWZ0KCkge1xyXG4gIGNvbnN0IGRvYyA9IGF3YWl0IHN0ckF1eERiLmdldExhdGVzdCh7IGJhc2U6IFwiQlRDXCIsIHF1b3RlOiBcIlVTRFRcIiwgd2luZG93OiBTVFJfV0lORE9XLCBhcHBTZXNzaW9uSWQ6IEFQUF9TRVNTSU9OIH0pO1xyXG4gIHJldHVybiBOdW1iZXIoKGRvYyBhcyBhbnkpPy5zdGF0cz8uZGVsdGFHZm0gPz8gMCk7XHJcbn1cclxuXHJcbmFzeW5jIGZ1bmN0aW9uIHN0cl9nZXRWVGVuZGVuY3kocGFpcjogeyBiYXNlOiBzdHJpbmc7IHF1b3RlOiBzdHJpbmcgfSkge1xyXG4gIGNvbnN0IGRvYyA9IGF3YWl0IHN0ckF1eERiLmdldExhdGVzdCh7IGJhc2U6IHBhaXIuYmFzZSwgcXVvdGU6IHBhaXIucXVvdGUsIHdpbmRvdzogU1RSX1dJTkRPVywgYXBwU2Vzc2lvbklkOiBBUFBfU0VTU0lPTiB9KTtcclxuICBjb25zdCBzID0gKGRvYyBhcyBhbnkpPy5zdGF0cztcclxuICBjb25zdCB2ID0gTnVtYmVyKChzPy52T3V0ZXIgPz8gMCkgLSAocz8udklubmVyID8/IDApKTtcclxuICByZXR1cm4gTnVtYmVyLmlzRmluaXRlKHYpID8gdiA6IDA7XHJcbn1cclxuXHJcbmFzeW5jIGZ1bmN0aW9uIHN0cl9nZXRTdGF0cyhwYWlyOiB7IGJhc2U6IHN0cmluZzsgcXVvdGU6IHN0cmluZyB9KSB7XHJcbiAgY29uc3QgZG9jID0gYXdhaXQgc3RyQXV4RGIuZ2V0TGF0ZXN0KHtcclxuICAgIGJhc2U6IHBhaXIuYmFzZSxcclxuICAgIHF1b3RlOiBwYWlyLnF1b3RlLFxyXG4gICAgd2luZG93OiBTVFJfV0lORE9XLFxyXG4gICAgYXBwU2Vzc2lvbklkOiBBUFBfU0VTU0lPTixcclxuICB9KTtcclxuICBjb25zdCBzID0gKGRvYyBhcyBhbnkpPy5zdGF0cyA/PyB7fTtcclxuICByZXR1cm4ge1xyXG4gICAgZ2ZtOiBOdW1iZXIocy5nZm0gPz8gMCksXHJcbiAgICBzaGlmdDogTnVtYmVyKHMuZGVsdGFHZm0gPz8gMCksXHJcbiAgICB2T3V0ZXI6IE51bWJlcihzLnZPdXRlciA/PyAwKSxcclxuICB9O1xyXG59XHJcblxyXG4vLyDilIDilIAgY2luLWF1eCAoZGIpIOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgFxyXG5hc3luYyBmdW5jdGlvbiBjaW5fZ2V0TGF0ZXN0Q3ljbGVUcyhhcHBTZXNzaW9uSWQ6IHN0cmluZykge1xyXG4gIGNvbnN0IHIgPSBhd2FpdCBkYi5xdWVyeTx7IHRzOiBzdHJpbmcgfT4oXHJcbiAgICBgc2VsZWN0IG1heChjeWNsZV90cyk6OnRleHQgYXMgdHMgZnJvbSBjaW5fYXV4X2N5Y2xlIHdoZXJlIGFwcF9zZXNzaW9uX2lkPSQxYCxcclxuICAgIFthcHBTZXNzaW9uSWRdXHJcbiAgKTtcclxuICBjb25zdCB0cyA9IE51bWJlcihyLnJvd3NbMF0/LnRzIHx8IDApO1xyXG4gIHJldHVybiBOdW1iZXIuaXNGaW5pdGUodHMpICYmIHRzID4gMCA/IHRzIDogbnVsbDtcclxufVxyXG5cclxuYXN5bmMgZnVuY3Rpb24gY2luX2dldFdhbGxldChzeW1ib2w6IHN0cmluZywgYXBwU2Vzc2lvbklkID0gQVBQX1NFU1NJT04pIHtcclxuICBjb25zdCB0cyA9IGF3YWl0IGNpbl9nZXRMYXRlc3RDeWNsZVRzKGFwcFNlc3Npb25JZCk7XHJcbiAgaWYgKCF0cykgcmV0dXJuIDA7XHJcbiAgY29uc3QgciA9IGF3YWl0IGRiLnF1ZXJ5PHsgcXR5OiBzdHJpbmcgfT4oXHJcbiAgICBgc2VsZWN0IHF0eSBmcm9tIHdhbGxldF9zbmFwc2hvdHMgd2hlcmUgYXBwX3Nlc3Npb25faWQ9JDEgYW5kIGN5Y2xlX3RzPSQyIGFuZCBzeW1ib2w9JDNgLFxyXG4gICAgW2FwcFNlc3Npb25JZCwgdHMsIHN5bWJvbF1cclxuICApO1xyXG4gIGNvbnN0IHYgPSBOdW1iZXIoci5yb3dzWzBdPy5xdHkgfHwgMCk7XHJcbiAgcmV0dXJuIE51bWJlci5pc0Zpbml0ZSh2KSA/IHYgOiAwO1xyXG59XHJcblxyXG5hc3luYyBmdW5jdGlvbiBjaW5fZ2V0Q2luU3RhdHMoXHJcbiAgc3ltYm9sczogc3RyaW5nW10sXHJcbiAgYXBwU2Vzc2lvbklkID0gQVBQX1NFU1NJT05cclxuKTogUHJvbWlzZTxcclxuICBBcnJheTx7XHJcbiAgICBzeW1ib2w6IHN0cmluZztcclxuICAgIHNlc3Npb25faW1wcmludDogbnVtYmVyO1xyXG4gICAgc2Vzc2lvbl9sdWdnYWdlOiBudW1iZXI7XHJcbiAgICBjeWNsZV9pbXByaW50OiBudW1iZXI7XHJcbiAgICBjeWNsZV9sdWdnYWdlOiBudW1iZXI7XHJcbiAgfT5cclxuPiB7XHJcbiAgY29uc3QgdHMgPSBhd2FpdCBjaW5fZ2V0TGF0ZXN0Q3ljbGVUcyhhcHBTZXNzaW9uSWQpO1xyXG4gIGlmICghdHMpIHJldHVybiBbXTtcclxuICB0eXBlIENpblJvdyA9IHtcclxuICAgIHN5bWJvbDogc3RyaW5nO1xyXG4gICAgaW1wcmludF9jeWNsZV91c2R0OiBudW1iZXIgfCBzdHJpbmcgfCBudWxsO1xyXG4gICAgbHVnZ2FnZV9jeWNsZV91c2R0OiBudW1iZXIgfCBzdHJpbmcgfCBudWxsO1xyXG4gICAgaW1wcmludF9hcHBfc2Vzc2lvbl91c2R0OiBudW1iZXIgfCBzdHJpbmcgfCBudWxsO1xyXG4gICAgbHVnZ2FnZV9hcHBfc2Vzc2lvbl91c2R0OiBudW1iZXIgfCBzdHJpbmcgfCBudWxsO1xyXG4gIH07XHJcbiAgY29uc3QgciA9IGF3YWl0IGRiLnF1ZXJ5PENpblJvdz4oXHJcbiAgICBgc2VsZWN0IHN5bWJvbCxcclxuICAgICAgICAgICAgaW1wcmludF9jeWNsZV91c2R0LFxyXG4gICAgICAgICAgICBsdWdnYWdlX2N5Y2xlX3VzZHQsXHJcbiAgICAgICAgICAgIGltcHJpbnRfYXBwX3Nlc3Npb25fdXNkdCxcclxuICAgICAgICAgICAgbHVnZ2FnZV9hcHBfc2Vzc2lvbl91c2R0XHJcbiAgICAgICBmcm9tIHZfY2luX2F1eFxyXG4gICAgICB3aGVyZSBhcHBfc2Vzc2lvbl9pZD0kMSBhbmQgY3ljbGVfdHM9JDIgYW5kIHN5bWJvbCA9IGFueSgkMylcclxuICAgICAgb3JkZXIgYnkgc3ltYm9sYCxcclxuICAgIFthcHBTZXNzaW9uSWQsIHRzLCBzeW1ib2xzXVxyXG4gICk7XHJcbiAgcmV0dXJuIHIucm93cy5tYXAoKHJvdzogQ2luUm93KSA9PiAoe1xyXG4gICAgc3ltYm9sOiByb3cuc3ltYm9sLFxyXG4gICAgc2Vzc2lvbl9pbXByaW50OiBOdW1iZXIocm93LmltcHJpbnRfYXBwX3Nlc3Npb25fdXNkdCA/PyAwKSxcclxuICAgIHNlc3Npb25fbHVnZ2FnZTogTnVtYmVyKHJvdy5sdWdnYWdlX2FwcF9zZXNzaW9uX3VzZHQgPz8gMCksXHJcbiAgICBjeWNsZV9pbXByaW50OiBOdW1iZXIocm93LmltcHJpbnRfY3ljbGVfdXNkdCA/PyAwKSxcclxuICAgIGN5Y2xlX2x1Z2dhZ2U6IE51bWJlcihyb3cubHVnZ2FnZV9jeWNsZV91c2R0ID8/IDApLFxyXG4gIH0pKTtcclxufVxyXG5cclxuLy8g4pSA4pSAIHdpcmUgZXZlcnl0aGluZyDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIBcclxuLy8gMSkgU1RSIHByb3ZpZGVyOiBwYXNzIG9ubHkga25vd24gZGVwcywgdGhlbiBhdHRhY2ggb3B0aW9uYWwgbWV0aG9kIHRvIGluc3RhbmNlXHJcbmNvbnN0IHN0ckRlcHMgPSB7XHJcbiAgZ2V0SWRQY3RIaXN0b3J5OiBzdHJfZ2V0SWRQY3RIaXN0b3J5LFxyXG4gIGdldEdmbTogICAgICAgICAgc3RyX2dldEdmbSxcclxuICBnZXRTaGlmdDogICAgICAgIHN0cl9nZXRTaGlmdCxcclxuICBnZXRWVGVuZGVuY3k6ICAgICh7IGJhc2UsIHF1b3RlIH06IHsgYmFzZTogc3RyaW5nOyBxdW90ZTogc3RyaW5nIH0pID0+IHN0cl9nZXRWVGVuZGVuY3koeyBiYXNlLCBxdW90ZSB9KSxcclxufTtcclxuY29uc3Qgc3RyUHJvdmlkZXIgPSBtYWtlU3RyRGJQcm92aWRlcihzdHJEZXBzKSBhcyBhbnk7XHJcbnN0clByb3ZpZGVyLmdldFBjdERydkhpc3RvcnkgICA9IHN0cl9nZXRQY3REcnZIaXN0b3J5OyAgICAgLy8gZXhpc3RpbmcgbnVtZXJpYyBoZWxwZXIgKGlmIHlvdSBrZXB0IGl0KVxyXG5zdHJQcm92aWRlci5nZXRQY3REcnZIaXN0b3J5VHMgPSBzdHJfZ2V0UGN0RHJ2SGlzdG9yeVRzOyAgIC8vIHRpbWVzdGFtcGVkXHJcbnN0clByb3ZpZGVyLmdldElkUGN0SGlzdG9yeVRzICA9IHN0cl9nZXRJZFBjdEhpc3RvcnlUczsgICAgLy8gdGltZXN0YW1wZWRcclxuc3RyUHJvdmlkZXIuZ2V0U3RhdHMgICAgICAgICAgID0gc3RyX2dldFN0YXRzO1xyXG5cclxuLy8gMikgV2lyZSBhbGwgcHJvdmlkZXJzIGludG8gdGhlIENvbnZlcnRlclxyXG53aXJlQ29udmVydGVyU291cmNlcyh7XHJcbiAgLy8gTWF0cmljZXMgbm93IGNvbWUgZnJvbSB0aGUgSFRUUCBlbmRwb2ludCBrZXllZCBieSB0aGUgU2V0dGluZ3MgdW5pdmVyc2VcclxuICBtYXRyaWNlczogbWFrZU1hdHJpY2VzSHR0cFByb3ZpZGVyKHByb2Nlc3MuZW52Lk5FWFRfUFVCTElDX0JBU0VfVVJMID8/IFwiXCIpLFxyXG4gIG1lYTogICAgICBtb29Qcm92aWRlcixcclxuICBzdHI6ICAgICAgc3RyUHJvdmlkZXIsXHJcbiAgY2luOiAgICAgIG1ha2VDaW5EYlByb3ZpZGVyKHtcclxuICAgICAgICAgICAgICBnZXRXYWxsZXQ6ICAgKHMpID0+IGNpbl9nZXRXYWxsZXQocyksXHJcbiAgICAgICAgICAgICAgZ2V0Q2luU3RhdHM6IChzeW1zKSA9PiBjaW5fZ2V0Q2luU3RhdHMoc3ltcyksXHJcbiAgICAgICAgICAgIH0pLFxyXG4gIHdhbGxldDogICBtYWtlV2FsbGV0SHR0cFByb3ZpZGVyKCksXHJcbn0pO1xyXG5cclxuXHJcblxyXG4iXSwibmFtZXMiOlsid2lyZUNvbnZlcnRlclNvdXJjZXMiLCJtYWtlTWF0cmljZXNIdHRwUHJvdmlkZXIiLCJtYWtlTW9vTW9kdWxlUHJvdmlkZXIiLCJtYWtlU3RyRGJQcm92aWRlciIsIm1ha2VDaW5EYlByb3ZpZGVyIiwibWFrZVdhbGxldEh0dHBQcm92aWRlciIsIkFQUF9TRVNTSU9OIiwicHJvY2VzcyIsImVudiIsIk5FWFRfUFVCTElDX0FQUF9TRVNTSU9OX0lEIiwiU1RSX1dJTkRPVyIsIk5FWFRfUFVCTElDX1NUUl9XSU5ET1ciLCJnZXRUaWVyV2VpZ2h0aW5nIiwiZ2V0TGF0ZXN0VHNGb3JUeXBlIiwiZ2V0U25hcHNob3RCeVR5cGUiLCJtb29fZ2V0QXV4Rm9yUGFpciIsInBhaXIiLCJjb2lucyIsIkNPSU5TIiwic3BsaXQiLCJtYXAiLCJzIiwidHJpbSIsInRvVXBwZXJDYXNlIiwidHMiLCJpZHAiLCJyb3dzIiwiaGl0IiwiZmluZCIsInIiLCJiYXNlIiwicXVvdGUiLCJOdW1iZXIiLCJ2YWx1ZSIsImZyYWN0aW9uIiwiTWF0aCIsImFicyIsIndlaWdodCIsInRpZXIiLCJtb29Qcm92aWRlciIsImdldE1vb0ZvclBhaXIiLCJkYiIsInN0ckF1eERiIiwic3RyX2dldElkUGN0SGlzdG9yeSIsImZyb20iLCJ0byIsImxhc3ROIiwicSIsInF1ZXJ5IiwieCIsInN0cl9nZXRJZFBjdEhpc3RvcnlUcyIsInRzX21zIiwic3RyX2dldFBjdERydkhpc3RvcnkiLCJyMSIsImNhdGNoIiwibGVuZ3RoIiwiaWRIaXN0IiwibWF4IiwiZHJ2IiwiaSIsInB1c2giLCJzbGljZSIsInN0cl9nZXRQY3REcnZIaXN0b3J5VHMiLCJpZFJvd3MiLCJzdHJfZ2V0R2ZtIiwiZG9jIiwiZ2V0TGF0ZXN0Iiwid2luZG93IiwiYXBwU2Vzc2lvbklkIiwic3RhdHMiLCJnZm0iLCJzdHJfZ2V0U2hpZnQiLCJkZWx0YUdmbSIsInN0cl9nZXRWVGVuZGVuY3kiLCJ2Iiwidk91dGVyIiwidklubmVyIiwiaXNGaW5pdGUiLCJzdHJfZ2V0U3RhdHMiLCJzaGlmdCIsImNpbl9nZXRMYXRlc3RDeWNsZVRzIiwiY2luX2dldFdhbGxldCIsInN5bWJvbCIsInF0eSIsImNpbl9nZXRDaW5TdGF0cyIsInN5bWJvbHMiLCJyb3ciLCJzZXNzaW9uX2ltcHJpbnQiLCJpbXByaW50X2FwcF9zZXNzaW9uX3VzZHQiLCJzZXNzaW9uX2x1Z2dhZ2UiLCJsdWdnYWdlX2FwcF9zZXNzaW9uX3VzZHQiLCJjeWNsZV9pbXByaW50IiwiaW1wcmludF9jeWNsZV91c2R0IiwiY3ljbGVfbHVnZ2FnZSIsImx1Z2dhZ2VfY3ljbGVfdXNkdCIsInN0ckRlcHMiLCJnZXRJZFBjdEhpc3RvcnkiLCJnZXRHZm0iLCJnZXRTaGlmdCIsImdldFZUZW5kZW5jeSIsInN0clByb3ZpZGVyIiwiZ2V0UGN0RHJ2SGlzdG9yeSIsImdldFBjdERydkhpc3RvcnlUcyIsImdldElkUGN0SGlzdG9yeVRzIiwiZ2V0U3RhdHMiLCJtYXRyaWNlcyIsIk5FWFRfUFVCTElDX0JBU0VfVVJMIiwibWVhIiwic3RyIiwiY2luIiwiZ2V0V2FsbGV0IiwiZ2V0Q2luU3RhdHMiLCJzeW1zIiwid2FsbGV0Il0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./src/app/(server)/wire-converter.ts\n");

/***/ }),

/***/ "(rsc)/./src/app/api/dynamics/route.ts":
/*!***************************************!*\
  !*** ./src/app/api/dynamics/route.ts ***!
  \***************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   GET: () => (/* binding */ GET)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(rsc)/./node_modules/.pnpm/next@15.5.2_@playwright+tes_b7e6c280e9a1b4309347c0bf0ab476d5/node_modules/next/dist/api/server.js\");\n/* harmony import */ var _app_server_wire_converter__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/app/(server)/wire-converter */ \"(rsc)/./src/app/(server)/wire-converter.ts\");\n/* harmony import */ var _core_converters_Converter_server__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/core/converters/Converter.server */ \"(rsc)/./src/core/converters/Converter.server.ts\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_app_server_wire_converter__WEBPACK_IMPORTED_MODULE_1__]);\n_app_server_wire_converter__WEBPACK_IMPORTED_MODULE_1__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n\n\nconst ensureUpper = (value)=>String(value ?? \"\").trim().toUpperCase();\nconst parseCsv = (value)=>{\n    if (!value) return [];\n    return value.split(\",\").map((s)=>ensureUpper(s)).filter(Boolean);\n};\nconst dedupe = (values)=>Array.from(new Set(values));\nconst defaultCoins = ()=>(process.env.NEXT_PUBLIC_COINS ?? \"BTC,ETH,BNB,SOL,ADA,XRP,USDT\").split(\",\").map((s)=>ensureUpper(s)).filter(Boolean);\nasync function GET(req) {\n    const url = req.nextUrl;\n    const base = ensureUpper(url.searchParams.get(\"base\") ?? url.searchParams.get(\"Ca\"));\n    const quote = ensureUpper(url.searchParams.get(\"quote\") ?? url.searchParams.get(\"Cb\"));\n    if (!base || !quote) {\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            ok: false,\n            error: \"missing_base_or_quote\"\n        }, {\n            status: 400,\n            headers: {\n                \"Cache-Control\": \"no-store\"\n            }\n        });\n    }\n    const coinsParam = parseCsv(url.searchParams.get(\"coins\"));\n    const coins = dedupe(coinsParam.length ? coinsParam : defaultCoins());\n    const candidatesParam = parseCsv(url.searchParams.get(\"candidates\"));\n    const candidates = dedupe(candidatesParam.length ? candidatesParam : coins.filter((c)=>c !== base && c !== quote));\n    const histLen = Number(url.searchParams.get(\"histLen\"));\n    const bins = Number(url.searchParams.get(\"bins\"));\n    try {\n        const snapshot = await (0,_core_converters_Converter_server__WEBPACK_IMPORTED_MODULE_2__.buildDynamicsSnapshot)({\n            base,\n            quote,\n            Ca: base,\n            Cb: quote,\n            coinsUniverse: coins,\n            candidates,\n            histLen: Number.isFinite(histLen) ? histLen : undefined,\n            histogramBins: Number.isFinite(bins) ? bins : undefined\n        });\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            ok: true,\n            snapshot\n        }, {\n            headers: {\n                \"Cache-Control\": \"no-store\"\n            }\n        });\n    } catch (err) {\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            ok: false,\n            error: err?.message ?? String(err)\n        }, {\n            status: 500,\n            headers: {\n                \"Cache-Control\": \"no-store\"\n            }\n        });\n    }\n}\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvYXBwL2FwaS9keW5hbWljcy9yb3V0ZS50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7O0FBQXdEO0FBQ2pCO0FBQ29DO0FBRTNFLE1BQU1FLGNBQWMsQ0FBQ0MsUUFBcUNDLE9BQU9ELFNBQVMsSUFBSUUsSUFBSSxHQUFHQyxXQUFXO0FBRWhHLE1BQU1DLFdBQVcsQ0FBQ0o7SUFDaEIsSUFBSSxDQUFDQSxPQUFPLE9BQU8sRUFBRTtJQUNyQixPQUFPQSxNQUNKSyxLQUFLLENBQUMsS0FDTkMsR0FBRyxDQUFDLENBQUNDLElBQU1SLFlBQVlRLElBQ3ZCQyxNQUFNLENBQUNDO0FBQ1o7QUFFQSxNQUFNQyxTQUFTLENBQUNDLFNBQXFCQyxNQUFNQyxJQUFJLENBQUMsSUFBSUMsSUFBSUg7QUFFeEQsTUFBTUksZUFBZSxJQUNuQixDQUFDQyxRQUFRQyxHQUFHLENBQUNDLGlCQUFpQixJQUFJLDhCQUE2QixFQUM1RGIsS0FBSyxDQUFDLEtBQ05DLEdBQUcsQ0FBQyxDQUFDQyxJQUFNUixZQUFZUSxJQUN2QkMsTUFBTSxDQUFDQztBQUVMLGVBQWVVLElBQUlDLEdBQWdCO0lBQ3hDLE1BQU1DLE1BQU1ELElBQUlFLE9BQU87SUFDdkIsTUFBTUMsT0FBT3hCLFlBQVlzQixJQUFJRyxZQUFZLENBQUNDLEdBQUcsQ0FBQyxXQUFXSixJQUFJRyxZQUFZLENBQUNDLEdBQUcsQ0FBQztJQUM5RSxNQUFNQyxRQUFRM0IsWUFBWXNCLElBQUlHLFlBQVksQ0FBQ0MsR0FBRyxDQUFDLFlBQVlKLElBQUlHLFlBQVksQ0FBQ0MsR0FBRyxDQUFDO0lBRWhGLElBQUksQ0FBQ0YsUUFBUSxDQUFDRyxPQUFPO1FBQ25CLE9BQU83QixxREFBWUEsQ0FBQzhCLElBQUksQ0FDdEI7WUFBRUMsSUFBSTtZQUFPQyxPQUFPO1FBQXdCLEdBQzVDO1lBQUVDLFFBQVE7WUFBS0MsU0FBUztnQkFBRSxpQkFBaUI7WUFBVztRQUFFO0lBRTVEO0lBRUEsTUFBTUMsYUFBYTVCLFNBQVNpQixJQUFJRyxZQUFZLENBQUNDLEdBQUcsQ0FBQztJQUNqRCxNQUFNUSxRQUFRdkIsT0FBT3NCLFdBQVdFLE1BQU0sR0FBR0YsYUFBYWpCO0lBRXRELE1BQU1vQixrQkFBa0IvQixTQUFTaUIsSUFBSUcsWUFBWSxDQUFDQyxHQUFHLENBQUM7SUFDdEQsTUFBTVcsYUFBYTFCLE9BQ2pCeUIsZ0JBQWdCRCxNQUFNLEdBQUdDLGtCQUFrQkYsTUFBTXpCLE1BQU0sQ0FBQyxDQUFDNkIsSUFBTUEsTUFBTWQsUUFBUWMsTUFBTVg7SUFHckYsTUFBTVksVUFBVUMsT0FBT2xCLElBQUlHLFlBQVksQ0FBQ0MsR0FBRyxDQUFDO0lBQzVDLE1BQU1lLE9BQU9ELE9BQU9sQixJQUFJRyxZQUFZLENBQUNDLEdBQUcsQ0FBQztJQUV6QyxJQUFJO1FBQ0YsTUFBTWdCLFdBQVcsTUFBTTNDLHdGQUFxQkEsQ0FBQztZQUMzQ3lCO1lBQ0FHO1lBQ0FnQixJQUFJbkI7WUFDSm9CLElBQUlqQjtZQUNKa0IsZUFBZVg7WUFDZkc7WUFDQUUsU0FBU0MsT0FBT00sUUFBUSxDQUFDUCxXQUFXQSxVQUFVUTtZQUM5Q0MsZUFBZVIsT0FBT00sUUFBUSxDQUFDTCxRQUFRQSxPQUFPTTtRQUNoRDtRQUVBLE9BQU9qRCxxREFBWUEsQ0FBQzhCLElBQUksQ0FDdEI7WUFBRUMsSUFBSTtZQUFNYTtRQUFTLEdBQ3JCO1lBQUVWLFNBQVM7Z0JBQUUsaUJBQWlCO1lBQVc7UUFBRTtJQUUvQyxFQUFFLE9BQU9pQixLQUFVO1FBQ2pCLE9BQU9uRCxxREFBWUEsQ0FBQzhCLElBQUksQ0FDdEI7WUFBRUMsSUFBSTtZQUFPQyxPQUFPbUIsS0FBS0MsV0FBV2hELE9BQU8rQztRQUFLLEdBQ2hEO1lBQUVsQixRQUFRO1lBQUtDLFNBQVM7Z0JBQUUsaUJBQWlCO1lBQVc7UUFBRTtJQUU1RDtBQUNGIiwic291cmNlcyI6WyJIOlxcVXNlcnNcXEd1c1xcc291cmNlXFxyZXBvXFxkeW5hbWljc1xcZHluYW1pY3MtYlxcY3J5cHRvcGktZHluYW1pY3NcXHNyY1xcYXBwXFxhcGlcXGR5bmFtaWNzXFxyb3V0ZS50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBOZXh0UmVxdWVzdCwgTmV4dFJlc3BvbnNlIH0gZnJvbSBcIm5leHQvc2VydmVyXCI7XG5pbXBvcnQgXCJAL2FwcC8oc2VydmVyKS93aXJlLWNvbnZlcnRlclwiO1xuaW1wb3J0IHsgYnVpbGREeW5hbWljc1NuYXBzaG90IH0gZnJvbSBcIkAvY29yZS9jb252ZXJ0ZXJzL0NvbnZlcnRlci5zZXJ2ZXJcIjtcblxuY29uc3QgZW5zdXJlVXBwZXIgPSAodmFsdWU6IHN0cmluZyB8IG51bGwgfCB1bmRlZmluZWQpID0+IFN0cmluZyh2YWx1ZSA/PyBcIlwiKS50cmltKCkudG9VcHBlckNhc2UoKTtcblxuY29uc3QgcGFyc2VDc3YgPSAodmFsdWU6IHN0cmluZyB8IG51bGwgfCB1bmRlZmluZWQpID0+IHtcbiAgaWYgKCF2YWx1ZSkgcmV0dXJuIFtdO1xuICByZXR1cm4gdmFsdWVcbiAgICAuc3BsaXQoXCIsXCIpXG4gICAgLm1hcCgocykgPT4gZW5zdXJlVXBwZXIocykpXG4gICAgLmZpbHRlcihCb29sZWFuKTtcbn07XG5cbmNvbnN0IGRlZHVwZSA9ICh2YWx1ZXM6IHN0cmluZ1tdKSA9PiBBcnJheS5mcm9tKG5ldyBTZXQodmFsdWVzKSk7XG5cbmNvbnN0IGRlZmF1bHRDb2lucyA9ICgpID0+XG4gIChwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19DT0lOUyA/PyBcIkJUQyxFVEgsQk5CLFNPTCxBREEsWFJQLFVTRFRcIilcbiAgICAuc3BsaXQoXCIsXCIpXG4gICAgLm1hcCgocykgPT4gZW5zdXJlVXBwZXIocykpXG4gICAgLmZpbHRlcihCb29sZWFuKTtcblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIEdFVChyZXE6IE5leHRSZXF1ZXN0KSB7XG4gIGNvbnN0IHVybCA9IHJlcS5uZXh0VXJsO1xuICBjb25zdCBiYXNlID0gZW5zdXJlVXBwZXIodXJsLnNlYXJjaFBhcmFtcy5nZXQoXCJiYXNlXCIpID8/IHVybC5zZWFyY2hQYXJhbXMuZ2V0KFwiQ2FcIikpO1xuICBjb25zdCBxdW90ZSA9IGVuc3VyZVVwcGVyKHVybC5zZWFyY2hQYXJhbXMuZ2V0KFwicXVvdGVcIikgPz8gdXJsLnNlYXJjaFBhcmFtcy5nZXQoXCJDYlwiKSk7XG5cbiAgaWYgKCFiYXNlIHx8ICFxdW90ZSkge1xuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcbiAgICAgIHsgb2s6IGZhbHNlLCBlcnJvcjogXCJtaXNzaW5nX2Jhc2Vfb3JfcXVvdGVcIiB9LFxuICAgICAgeyBzdGF0dXM6IDQwMCwgaGVhZGVyczogeyBcIkNhY2hlLUNvbnRyb2xcIjogXCJuby1zdG9yZVwiIH0gfVxuICAgICk7XG4gIH1cblxuICBjb25zdCBjb2luc1BhcmFtID0gcGFyc2VDc3YodXJsLnNlYXJjaFBhcmFtcy5nZXQoXCJjb2luc1wiKSk7XG4gIGNvbnN0IGNvaW5zID0gZGVkdXBlKGNvaW5zUGFyYW0ubGVuZ3RoID8gY29pbnNQYXJhbSA6IGRlZmF1bHRDb2lucygpKTtcblxuICBjb25zdCBjYW5kaWRhdGVzUGFyYW0gPSBwYXJzZUNzdih1cmwuc2VhcmNoUGFyYW1zLmdldChcImNhbmRpZGF0ZXNcIikpO1xuICBjb25zdCBjYW5kaWRhdGVzID0gZGVkdXBlKFxuICAgIGNhbmRpZGF0ZXNQYXJhbS5sZW5ndGggPyBjYW5kaWRhdGVzUGFyYW0gOiBjb2lucy5maWx0ZXIoKGMpID0+IGMgIT09IGJhc2UgJiYgYyAhPT0gcXVvdGUpXG4gICk7XG5cbiAgY29uc3QgaGlzdExlbiA9IE51bWJlcih1cmwuc2VhcmNoUGFyYW1zLmdldChcImhpc3RMZW5cIikpO1xuICBjb25zdCBiaW5zID0gTnVtYmVyKHVybC5zZWFyY2hQYXJhbXMuZ2V0KFwiYmluc1wiKSk7XG5cbiAgdHJ5IHtcbiAgICBjb25zdCBzbmFwc2hvdCA9IGF3YWl0IGJ1aWxkRHluYW1pY3NTbmFwc2hvdCh7XG4gICAgICBiYXNlLFxuICAgICAgcXVvdGUsXG4gICAgICBDYTogYmFzZSxcbiAgICAgIENiOiBxdW90ZSxcbiAgICAgIGNvaW5zVW5pdmVyc2U6IGNvaW5zLFxuICAgICAgY2FuZGlkYXRlcyxcbiAgICAgIGhpc3RMZW46IE51bWJlci5pc0Zpbml0ZShoaXN0TGVuKSA/IGhpc3RMZW4gOiB1bmRlZmluZWQsXG4gICAgICBoaXN0b2dyYW1CaW5zOiBOdW1iZXIuaXNGaW5pdGUoYmlucykgPyBiaW5zIDogdW5kZWZpbmVkLFxuICAgIH0pO1xuXG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxuICAgICAgeyBvazogdHJ1ZSwgc25hcHNob3QgfSxcbiAgICAgIHsgaGVhZGVyczogeyBcIkNhY2hlLUNvbnRyb2xcIjogXCJuby1zdG9yZVwiIH0gfVxuICAgICk7XG4gIH0gY2F0Y2ggKGVycjogYW55KSB7XG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxuICAgICAgeyBvazogZmFsc2UsIGVycm9yOiBlcnI/Lm1lc3NhZ2UgPz8gU3RyaW5nKGVycikgfSxcbiAgICAgIHsgc3RhdHVzOiA1MDAsIGhlYWRlcnM6IHsgXCJDYWNoZS1Db250cm9sXCI6IFwibm8tc3RvcmVcIiB9IH1cbiAgICApO1xuICB9XG59XG4iXSwibmFtZXMiOlsiTmV4dFJlc3BvbnNlIiwiYnVpbGREeW5hbWljc1NuYXBzaG90IiwiZW5zdXJlVXBwZXIiLCJ2YWx1ZSIsIlN0cmluZyIsInRyaW0iLCJ0b1VwcGVyQ2FzZSIsInBhcnNlQ3N2Iiwic3BsaXQiLCJtYXAiLCJzIiwiZmlsdGVyIiwiQm9vbGVhbiIsImRlZHVwZSIsInZhbHVlcyIsIkFycmF5IiwiZnJvbSIsIlNldCIsImRlZmF1bHRDb2lucyIsInByb2Nlc3MiLCJlbnYiLCJORVhUX1BVQkxJQ19DT0lOUyIsIkdFVCIsInJlcSIsInVybCIsIm5leHRVcmwiLCJiYXNlIiwic2VhcmNoUGFyYW1zIiwiZ2V0IiwicXVvdGUiLCJqc29uIiwib2siLCJlcnJvciIsInN0YXR1cyIsImhlYWRlcnMiLCJjb2luc1BhcmFtIiwiY29pbnMiLCJsZW5ndGgiLCJjYW5kaWRhdGVzUGFyYW0iLCJjYW5kaWRhdGVzIiwiYyIsImhpc3RMZW4iLCJOdW1iZXIiLCJiaW5zIiwic25hcHNob3QiLCJDYSIsIkNiIiwiY29pbnNVbml2ZXJzZSIsImlzRmluaXRlIiwidW5kZWZpbmVkIiwiaGlzdG9ncmFtQmlucyIsImVyciIsIm1lc3NhZ2UiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./src/app/api/dynamics/route.ts\n");

/***/ }),

/***/ "(rsc)/./src/core/converters/Converter.server.ts":
/*!*************************************************!*\
  !*** ./src/core/converters/Converter.server.ts ***!
  \*************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   buildDomainVM: () => (/* binding */ buildDomainVM),\n/* harmony export */   buildDynamicsSnapshot: () => (/* binding */ buildDynamicsSnapshot),\n/* harmony export */   wireConverterSources: () => (/* binding */ wireConverterSources)\n/* harmony export */ });\n/* harmony import */ var _core_features_moo_aux_grid__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @/core/features/moo-aux/grid */ \"(rsc)/./src/core/features/moo-aux/grid.ts\");\n// src/core/converters/Converter.server.ts\n// Server-side wiring + domain builders used by the Dynamics workspace.\n\nlet sourcesRef = null;\nfunction wireConverterSources(sources) {\n    sourcesRef = sources;\n}\nfunction getSources() {\n    if (!sourcesRef) {\n        throw new Error(\"Converter sources not wired - call wireConverterSources() on the server.\");\n    }\n    return sourcesRef;\n}\nconst ensureUpper = (s)=>String(s ?? \"\").trim().toUpperCase();\nconst numberOr = (value, fallback = 0)=>{\n    const n = Number(value);\n    return Number.isFinite(n) ? n : fallback;\n};\nasync function tryCall(fn) {\n    try {\n        return await fn();\n    } catch  {\n        return undefined;\n    }\n}\nasync function tryCallOr(fn, fallback) {\n    try {\n        const v = await Promise.resolve(fn());\n        return v ?? fallback;\n    } catch  {\n        return fallback;\n    }\n}\nfunction normalizeGrid(coins, grid) {\n    if (!grid) return undefined;\n    const n = coins.length;\n    const out = Array.from({\n        length: n\n    }, ()=>Array.from({\n            length: n\n        }, ()=>0));\n    for(let i = 0; i < n; i++){\n        for(let j = 0; j < n; j++){\n            if (i === j) continue;\n            const v = grid?.[i]?.[j];\n            out[i][j] = numberOr(v);\n        }\n    }\n    return out;\n}\nfunction gridToRecord(coins, grid) {\n    const out = {};\n    for(let i = 0; i < coins.length; i++){\n        const base = coins[i];\n        const row = {};\n        for(let j = 0; j < coins.length; j++){\n            const quote = coins[j];\n            if (i === j) {\n                row[quote] = null;\n                continue;\n            }\n            const v = grid?.[i]?.[j];\n            row[quote] = Number.isFinite(Number(v)) ? Number(v) : null;\n        }\n        out[base] = row;\n    }\n    return out;\n}\nfunction recordToGrid(coins, rec) {\n    const n = coins.length;\n    const out = Array.from({\n        length: n\n    }, ()=>Array.from({\n            length: n\n        }, ()=>0));\n    for(let i = 0; i < n; i++){\n        const base = coins[i];\n        const row = rec[base] ?? {};\n        for(let j = 0; j < n; j++){\n            if (i === j) continue;\n            const quote = coins[j];\n            const v = row[quote];\n            out[i][j] = Number.isFinite(Number(v)) ? Number(v) : 0;\n        }\n    }\n    return out;\n}\nfunction swapTagFromDerivatives(series) {\n    if (!series || series.length === 0) return {\n        count: 0,\n        direction: \"frozen\"\n    };\n    let prev = 0;\n    let flips = 0;\n    for (const value of series){\n        const sign = Math.sign(value);\n        if (sign !== 0 && prev !== 0 && sign !== prev) flips++;\n        if (sign !== 0) prev = sign;\n    }\n    const last = series.at(-1) ?? 0;\n    const direction = last > 0 ? \"up\" : last < 0 ? \"down\" : \"frozen\";\n    const frozen = series.slice(-5).every((v)=>Math.sign(v) === 0);\n    return {\n        count: frozen ? 0 : flips,\n        direction: frozen ? \"frozen\" : direction\n    };\n}\nasync function resolveMatrices(sources, coins) {\n    const snapshot = await tryCall(()=>sources.matrices.getSnapshot?.({\n            coins,\n            keys: [\n                \"benchmark\",\n                \"id_pct\",\n                \"pct_drv\",\n                \"ref\"\n            ]\n        }));\n    let orderedCoins = snapshot?.coins?.map(ensureUpper) ?? coins.slice();\n    if (!orderedCoins.length) orderedCoins = coins.slice();\n    let benchmark = normalizeGrid(orderedCoins, snapshot?.grids?.benchmark);\n    if (!benchmark) {\n        const fallback = await tryCall(()=>sources.matrices.getBenchmarkGrid(orderedCoins));\n        benchmark = normalizeGrid(orderedCoins, fallback);\n    }\n    let idPct = normalizeGrid(orderedCoins, snapshot?.grids?.id_pct);\n    if (!idPct) {\n        const fallback = await tryCall(()=>sources.matrices.getIdPctGrid(orderedCoins));\n        idPct = normalizeGrid(orderedCoins, fallback);\n    }\n    let pctDrv = normalizeGrid(orderedCoins, snapshot?.grids?.pct_drv);\n    if (!pctDrv && typeof sources.matrices.getPctDrvGrid === \"function\") {\n        const fallback = await tryCall(()=>sources.matrices.getPctDrvGrid?.(orderedCoins));\n        pctDrv = normalizeGrid(orderedCoins, fallback);\n    }\n    const ref = normalizeGrid(orderedCoins, snapshot?.grids?.ref);\n    return {\n        coins: orderedCoins,\n        benchmark,\n        id_pct: idPct,\n        pct_drv: pctDrv,\n        ref,\n        snapshot: snapshot ?? undefined\n    };\n}\nfunction buildHistogram(series, bins) {\n    const values = series.filter((v)=>Number.isFinite(v));\n    if (!values.length) return undefined;\n    let min = values[0];\n    let max = values[0];\n    for (const v of values){\n        if (v < min) min = v;\n        if (v > max) max = v;\n    }\n    if (min === max) {\n        return {\n            buckets: [\n                min\n            ],\n            counts: [\n                values.length\n            ],\n            min,\n            max\n        };\n    }\n    const safeBins = Math.max(4, Math.min(512, Math.floor(bins)));\n    const step = (max - min) / safeBins || 1;\n    const buckets = Array.from({\n        length: safeBins\n    }, (_, i)=>min + step * i);\n    const counts = Array.from({\n        length: safeBins\n    }, ()=>0);\n    for (const v of values){\n        const idx = Math.min(safeBins - 1, Math.floor((v - min) / step));\n        counts[idx] += 1;\n    }\n    return {\n        buckets,\n        counts,\n        min,\n        max\n    };\n}\nasync function buildDomainVM(rawOpts) {\n    const sources = getSources();\n    const Ca = ensureUpper(rawOpts.Ca ?? rawOpts.base);\n    const Cb = ensureUpper(rawOpts.Cb ?? rawOpts.quote);\n    if (!Ca || !Cb) {\n        throw new Error(\"buildDomainVM requires both Ca/base and Cb/quote symbols.\");\n    }\n    const histLen = Math.max(16, Number(rawOpts.histLen ?? 64));\n    const baseCoins = Array.isArray(rawOpts.coinsUniverse) ? rawOpts.coinsUniverse.map(ensureUpper) : [];\n    const coinsSet = new Set();\n    for (const c of baseCoins)coinsSet.add(c);\n    coinsSet.add(Ca);\n    coinsSet.add(Cb);\n    for (const cand of rawOpts.candidates ?? [])coinsSet.add(ensureUpper(cand));\n    const coinsUniverse = Array.from(coinsSet);\n    const matrices = await resolveMatrices(sources, coinsUniverse);\n    const coins = matrices.coins;\n    if (!coins.includes(Ca)) coins.push(Ca);\n    if (!coins.includes(Cb)) coins.push(Cb);\n    const benchmark = matrices.benchmark ?? normalizeGrid(coins, undefined);\n    const idPct = matrices.id_pct ?? normalizeGrid(coins, undefined);\n    const pctDrvMatrix = matrices.pct_drv;\n    const refMatrix = matrices.ref;\n    const balancesAll = {};\n    for (const sym of coins){\n        const cinWallet = await tryCall(()=>sources.cin.getWallet(sym));\n        const httpWallet = cinWallet ?? await tryCall(()=>sources.wallet?.getWallet(sym));\n        balancesAll[sym] = numberOr(httpWallet);\n    }\n    const cinStats = await tryCall(()=>sources.cin.getCinForCoins(coins)) ?? {};\n    const meaPair = await tryCallOr(()=>sources.mea.getMea({\n            base: Ca,\n            quote: Cb\n        }), {\n        value: 0,\n        tier: \"?-tier\"\n    });\n    const pairStats = await tryCall(()=>sources.str.getStats?.({\n            base: Ca,\n            quote: Cb\n        })) ?? undefined;\n    const gfm = numberOr(pairStats?.gfm, await tryCallOr(()=>sources.str.getGfm(), 0));\n    const shift = numberOr(pairStats?.shift, await tryCallOr(()=>sources.str.getShift(), 0));\n    const vTendencyPair = numberOr(pairStats?.vOuter, await tryCallOr(()=>sources.str.getVTendency({\n            base: Ca,\n            quote: Cb\n        }), 0));\n    const idHistPair = await tryCall(()=>sources.str.getIdPctHistory?.(Ca, Cb, histLen)) ?? [];\n    const pctDrvPair = await tryCall(()=>sources.str.getPctDrvHistory?.(Ca, Cb, histLen)) ?? idHistPair.map((v, idx)=>idx === 0 ? 0 : numberOr(v) - numberOr(idHistPair[idx - 1]));\n    const idHistPairTs = await tryCall(()=>sources.str.getIdPctHistoryTs?.(Ca, Cb, histLen)) ?? undefined;\n    const pctDrvPairTs = await tryCall(()=>sources.str.getPctDrvHistoryTs?.(Ca, Cb, histLen)) ?? undefined;\n    const cell = (grid, from, to)=>{\n        if (!grid) return undefined;\n        const i = coins.indexOf(from);\n        const j = coins.indexOf(to);\n        if (i < 0 || j < 0) return undefined;\n        return grid[i]?.[j];\n    };\n    async function edgeMetrics(from, to) {\n        const bm = cell(benchmark, from, to);\n        const idp = cell(idPct, from, to);\n        const vt = await tryCallOr(()=>sources.str.getVTendency({\n                base: from,\n                quote: to\n            }), 0);\n        const drvTs = await tryCall(()=>sources.str.getPctDrvHistoryTs?.(from, to, 16)) ?? (await tryCall(()=>sources.str.getIdPctHistoryTs?.(from, to, 17)))?.map((pt, idx, arr)=>{\n            if (idx === 0) return {\n                ts_ms: pt.ts_ms,\n                value: 0\n            };\n            const prev = arr[idx - 1];\n            return {\n                ts_ms: pt.ts_ms,\n                value: Number(pt.value ?? 0) - Number(prev.value ?? 0)\n            };\n        });\n        const derivs = Array.isArray(drvTs) ? drvTs.map((pt)=>numberOr(pt.value)) : [];\n        const swapTag = swapTagFromDerivatives(derivs);\n        return {\n            benchmark: numberOr(bm),\n            id_pct: numberOr(idp),\n            vTendency: vt,\n            swapTag\n        };\n    }\n    const candidates = Array.from(new Set((rawOpts.candidates ?? []).map(ensureUpper).filter((c)=>c && c !== Ca && c !== Cb && coins.includes(c))));\n    const rows = [];\n    for (const Ci of candidates){\n        const [cb_ci, ci_ca, ca_ci] = await Promise.all([\n            edgeMetrics(Cb, Ci),\n            edgeMetrics(Ci, Ca),\n            edgeMetrics(Ca, Ci)\n        ]);\n        rows.push({\n            ci: Ci,\n            cols: {\n                cb_ci,\n                ci_ca,\n                ca_ci\n            }\n        });\n    }\n    const subsetWallets = {};\n    for (const sym of new Set([\n        Ca,\n        Cb,\n        ...candidates\n    ])){\n        subsetWallets[sym] = balancesAll[sym] ?? 0;\n    }\n    let meaMatrix;\n    if (typeof sources.mea.getMeaGrid === \"function\" && idPct) {\n        const grid = await tryCall(()=>sources.mea.getMeaGrid?.({\n                coins,\n                idPct,\n                balances: balancesAll,\n                k: rawOpts.k\n            }));\n        meaMatrix = grid ? normalizeGrid(coins, grid) : undefined;\n    }\n    if (!meaMatrix && idPct) {\n        try {\n            const rec = (0,_core_features_moo_aux_grid__WEBPACK_IMPORTED_MODULE_0__.buildMeaAux)({\n                coins,\n                idPct: gridToRecord(coins, idPct),\n                balances: balancesAll,\n                k: rawOpts.k\n            });\n            meaMatrix = recordToGrid(coins, rec);\n        } catch  {\n            meaMatrix = undefined;\n        }\n    }\n    const vm = {\n        coins,\n        matrix: {\n            benchmark: benchmark,\n            id_pct: idPct,\n            pct_drv: pctDrvMatrix,\n            mea: meaMatrix,\n            ref: refMatrix\n        },\n        arb: {\n            rows,\n            wallets: subsetWallets\n        },\n        metricsPanel: {\n            mea: meaPair,\n            str: {\n                gfm,\n                shift,\n                vTendency: vTendencyPair\n            },\n            cin: cinStats\n        },\n        series: {\n            id_pct: idHistPair.map(numberOr),\n            pct_drv: pctDrvPair.map(numberOr),\n            id_pct_ts: idHistPairTs?.map((pt)=>({\n                    ts_ms: Number(pt.ts_ms),\n                    value: numberOr(pt.value)\n                })),\n            pct_drv_ts: pctDrvPairTs?.map((pt)=>({\n                    ts_ms: Number(pt.ts_ms),\n                    value: numberOr(pt.value)\n                }))\n        },\n        context: {\n            base: Ca,\n            quote: Cb,\n            candidates,\n            balances: balancesAll,\n            histLen\n        }\n    };\n    return vm;\n}\nasync function buildDynamicsSnapshot(opts) {\n    const vm = await buildDomainVM(opts);\n    const { context, matrix, arb, metricsPanel, series } = vm;\n    const bins = opts.histogramBins ?? context.histLen;\n    const histogram = buildHistogram(series.pct_drv, bins);\n    const focusWallets = {};\n    const focusSet = new Set([\n        context.base,\n        context.quote,\n        \"USDT\",\n        ...context.candidates\n    ]);\n    for (const sym of focusSet)focusWallets[sym] = context.balances[sym] ?? 0;\n    return {\n        builtAt: Date.now(),\n        coins: vm.coins,\n        base: context.base,\n        quote: context.quote,\n        candidates: context.candidates,\n        matrix,\n        arb,\n        metrics: metricsPanel,\n        series,\n        histogram,\n        wallets: focusWallets,\n        walletsAll: context.balances,\n        cin: metricsPanel.cin\n    };\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvY29yZS9jb252ZXJ0ZXJzL0NvbnZlcnRlci5zZXJ2ZXIudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFBLDBDQUEwQztBQUMxQyx1RUFBdUU7QUFFWjtBQWMzRCxJQUFJQyxhQUFzQztBQUVuQyxTQUFTQyxxQkFBcUJDLE9BQXlCO0lBQzVERixhQUFhRTtBQUNmO0FBRUEsU0FBU0M7SUFDUCxJQUFJLENBQUNILFlBQVk7UUFDZixNQUFNLElBQUlJLE1BQU07SUFDbEI7SUFDQSxPQUFPSjtBQUNUO0FBRUEsTUFBTUssY0FBYyxDQUFDQyxJQUFrQ0MsT0FBT0QsS0FBSyxJQUFJRSxJQUFJLEdBQUdDLFdBQVc7QUFDekYsTUFBTUMsV0FBVyxDQUFDQyxPQUFnQkMsV0FBVyxDQUFDO0lBQzVDLE1BQU1DLElBQUlDLE9BQU9IO0lBQ2pCLE9BQU9HLE9BQU9DLFFBQVEsQ0FBQ0YsS0FBS0EsSUFBSUQ7QUFDbEM7QUFFQSxlQUFlSSxRQUFXQyxFQUF3QjtJQUNoRCxJQUFJO1FBQ0YsT0FBTyxNQUFNQTtJQUNmLEVBQUUsT0FBTTtRQUNOLE9BQU9DO0lBQ1Q7QUFDRjtBQUVBLGVBQWVDLFVBQWFGLEVBQXdCLEVBQUVMLFFBQVc7SUFDL0QsSUFBSTtRQUNGLE1BQU1RLElBQUksTUFBTUMsUUFBUUMsT0FBTyxDQUFDTDtRQUNoQyxPQUFPLEtBQVlMO0lBQ3JCLEVBQUUsT0FBTTtRQUNOLE9BQU9BO0lBQ1Q7QUFDRjtBQUVBLFNBQVNXLGNBQWNDLEtBQWUsRUFBRUMsSUFBd0I7SUFDOUQsSUFBSSxDQUFDQSxNQUFNLE9BQU9QO0lBQ2xCLE1BQU1MLElBQUlXLE1BQU1FLE1BQU07SUFDdEIsTUFBTUMsTUFBa0JDLE1BQU1DLElBQUksQ0FBQztRQUFFSCxRQUFRYjtJQUFFLEdBQUcsSUFBTWUsTUFBTUMsSUFBSSxDQUFDO1lBQUVILFFBQVFiO1FBQUUsR0FBRyxJQUFNO0lBQ3hGLElBQUssSUFBSWlCLElBQUksR0FBR0EsSUFBSWpCLEdBQUdpQixJQUFLO1FB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SSxHQUFHZ0UsUUFBUVQsUUFBUSxDQUFDdkQsSUFBSSxJQUFJO0lBRXpFLE9BQU87UUFDTHVFLFNBQVNDLEtBQUtDLEdBQUc7UUFDakJySixPQUFPcUksR0FBR3JJLEtBQUs7UUFDZlMsTUFBTW1JLFFBQVFuSSxJQUFJO1FBQ2xCRSxPQUFPaUksUUFBUWpJLEtBQUs7UUFDcEIyRCxZQUFZc0UsUUFBUXRFLFVBQVU7UUFDOUJnRTtRQUNBQztRQUNBZSxTQUFTYjtRQUNUMUg7UUFDQWlJO1FBQ0FSLFNBQVNTO1FBQ1RNLFlBQVlYLFFBQVFULFFBQVE7UUFDNUJyRCxLQUFLMkQsYUFBYTNELEdBQUc7SUFDdkI7QUFDRiIsInNvdXJjZXMiOlsiSDpcXFVzZXJzXFxHdXNcXHNvdXJjZVxccmVwb1xcZHluYW1pY3NcXGR5bmFtaWNzLWJcXGNyeXB0b3BpLWR5bmFtaWNzXFxzcmNcXGNvcmVcXGNvbnZlcnRlcnNcXENvbnZlcnRlci5zZXJ2ZXIudHMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gc3JjL2NvcmUvY29udmVydGVycy9Db252ZXJ0ZXIuc2VydmVyLnRzXG4vLyBTZXJ2ZXItc2lkZSB3aXJpbmcgKyBkb21haW4gYnVpbGRlcnMgdXNlZCBieSB0aGUgRHluYW1pY3Mgd29ya3NwYWNlLlxuXG5pbXBvcnQgeyBidWlsZE1lYUF1eCB9IGZyb20gXCJAL2NvcmUvZmVhdHVyZXMvbW9vLWF1eC9ncmlkXCI7XG5pbXBvcnQgdHlwZSB7XG4gIENvbnZlcnRlclNvdXJjZXMsXG4gIERvbWFpbkFyYlJvdyxcbiAgRG9tYWluRWRnZU1ldHJpY3MsXG4gIERvbWFpblZNLFxuICBEeW5hbWljc1NuYXBzaG90LFxuICBIaXN0b2dyYW1TbmFwc2hvdCxcbiAgTWF0cml4U25hcHNob3QsXG4gIFN3YXBEaXJlY3Rpb24sXG4gIFN3YXBUYWcsXG4gIFRpbWVkUG9pbnQsXG59IGZyb20gXCJAL2NvcmUvY29udmVydGVycy9wcm92aWRlci50eXBlc1wiO1xuXG5sZXQgc291cmNlc1JlZjogQ29udmVydGVyU291cmNlcyB8IG51bGwgPSBudWxsO1xuXG5leHBvcnQgZnVuY3Rpb24gd2lyZUNvbnZlcnRlclNvdXJjZXMoc291cmNlczogQ29udmVydGVyU291cmNlcykge1xuICBzb3VyY2VzUmVmID0gc291cmNlcztcbn1cblxuZnVuY3Rpb24gZ2V0U291cmNlcygpOiBDb252ZXJ0ZXJTb3VyY2VzIHtcbiAgaWYgKCFzb3VyY2VzUmVmKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFwiQ29udmVydGVyIHNvdXJjZXMgbm90IHdpcmVkIC0gY2FsbCB3aXJlQ29udmVydGVyU291cmNlcygpIG9uIHRoZSBzZXJ2ZXIuXCIpO1xuICB9XG4gIHJldHVybiBzb3VyY2VzUmVmO1xufVxuXG5jb25zdCBlbnN1cmVVcHBlciA9IChzOiBzdHJpbmcgfCB1bmRlZmluZWQpOiBzdHJpbmcgPT4gU3RyaW5nKHMgPz8gXCJcIikudHJpbSgpLnRvVXBwZXJDYXNlKCk7XG5jb25zdCBudW1iZXJPciA9ICh2YWx1ZTogdW5rbm93biwgZmFsbGJhY2sgPSAwKTogbnVtYmVyID0+IHtcbiAgY29uc3QgbiA9IE51bWJlcih2YWx1ZSk7XG4gIHJldHVybiBOdW1iZXIuaXNGaW5pdGUobikgPyBuIDogZmFsbGJhY2s7XG59O1xuXG5hc3luYyBmdW5jdGlvbiB0cnlDYWxsPFQ+KGZuOiAoKSA9PiBQcm9taXNlPFQ+IHwgVCk6IFByb21pc2U8VCB8IHVuZGVmaW5lZD4ge1xuICB0cnkge1xuICAgIHJldHVybiBhd2FpdCBmbigpO1xuICB9IGNhdGNoIHtcbiAgICByZXR1cm4gdW5kZWZpbmVkO1xuICB9XG59XG5cbmFzeW5jIGZ1bmN0aW9uIHRyeUNhbGxPcjxUPihmbjogKCkgPT4gUHJvbWlzZTxUPiB8IFQsIGZhbGxiYWNrOiBUKTogUHJvbWlzZTxUPiB7XG4gIHRyeSB7XG4gICAgY29uc3QgdiA9IGF3YWl0IFByb21pc2UucmVzb2x2ZShmbigpKTtcbiAgICByZXR1cm4gKHYgYXMgVCkgPz8gZmFsbGJhY2s7XG4gIH0gY2F0Y2gge1xuICAgIHJldHVybiBmYWxsYmFjaztcbiAgfVxufVxuXG5mdW5jdGlvbiBub3JtYWxpemVHcmlkKGNvaW5zOiBzdHJpbmdbXSwgZ3JpZD86IG51bWJlcltdW10gfCBudWxsKTogbnVtYmVyW11bXSB8IHVuZGVmaW5lZCB7XG4gIGlmICghZ3JpZCkgcmV0dXJuIHVuZGVmaW5lZDtcbiAgY29uc3QgbiA9IGNvaW5zLmxlbmd0aDtcbiAgY29uc3Qgb3V0OiBudW1iZXJbXVtdID0gQXJyYXkuZnJvbSh7IGxlbmd0aDogbiB9LCAoKSA9PiBBcnJheS5mcm9tKHsgbGVuZ3RoOiBuIH0sICgpID0+IDApKTtcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBuOyBpKyspIHtcbiAgICBmb3IgKGxldCBqID0gMDsgaiA8IG47IGorKykge1xuICAgICAgaWYgKGkgPT09IGopIGNvbnRpbnVlO1xuICAgICAgY29uc3QgdiA9IGdyaWQ/LltpXT8uW2pdO1xuICAgICAgb3V0W2ldW2pdID0gbnVtYmVyT3Iodik7XG4gICAgfVxuICB9XG4gIHJldHVybiBvdXQ7XG59XG5cbmZ1bmN0aW9uIGdyaWRUb1JlY29yZChjb2luczogc3RyaW5nW10sIGdyaWQ/OiBudW1iZXJbXVtdIHwgbnVsbCk6IFJlY29yZDxzdHJpbmcsIFJlY29yZDxzdHJpbmcsIG51bWJlciB8IG51bGw+PiB7XG4gIGNvbnN0IG91dDogUmVjb3JkPHN0cmluZywgUmVjb3JkPHN0cmluZywgbnVtYmVyIHwgbnVsbD4+ID0ge307XG4gIGZvciAobGV0IGkgPSAwOyBpIDwgY29pbnMubGVuZ3RoOyBpKyspIHtcbiAgICBjb25zdCBiYXNlID0gY29pbnNbaV0hO1xuICAgIGNvbnN0IHJvdzogUmVjb3JkPHN0cmluZywgbnVtYmVyIHwgbnVsbD4gPSB7fTtcbiAgICBmb3IgKGxldCBqID0gMDsgaiA8IGNvaW5zLmxlbmd0aDsgaisrKSB7XG4gICAgICBjb25zdCBxdW90ZSA9IGNvaW5zW2pdITtcbiAgICAgIGlmIChpID09PSBqKSB7XG4gICAgICAgIHJvd1txdW90ZV0gPSBudWxsO1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cbiAgICAgIGNvbnN0IHYgPSBncmlkPy5baV0/LltqXTtcbiAgICAgIHJvd1txdW90ZV0gPSBOdW1iZXIuaXNGaW5pdGUoTnVtYmVyKHYpKSA/IE51bWJlcih2KSA6IG51bGw7XG4gICAgfVxuICAgIG91dFtiYXNlXSA9IHJvdztcbiAgfVxuICByZXR1cm4gb3V0O1xufVxuXG5mdW5jdGlvbiByZWNvcmRUb0dyaWQoY29pbnM6IHN0cmluZ1tdLCByZWM6IFJlY29yZDxzdHJpbmcsIFJlY29yZDxzdHJpbmcsIG51bWJlciB8IG51bGw+Pik6IG51bWJlcltdW10ge1xuICBjb25zdCBuID0gY29pbnMubGVuZ3RoO1xuICBjb25zdCBvdXQ6IG51bWJlcltdW10gPSBBcnJheS5mcm9tKHsgbGVuZ3RoOiBuIH0sICgpID0+IEFycmF5LmZyb20oeyBsZW5ndGg6IG4gfSwgKCkgPT4gMCkpO1xuICBmb3IgKGxldCBpID0gMDsgaSA8IG47IGkrKykge1xuICAgIGNvbnN0IGJhc2UgPSBjb2luc1tpXSE7XG4gICAgY29uc3Qgcm93ID0gcmVjW2Jhc2VdID8/IHt9O1xuICAgIGZvciAobGV0IGogPSAwOyBqIDwgbjsgaisrKSB7XG4gICAgICBpZiAoaSA9PT0gaikgY29udGludWU7XG4gICAgICBjb25zdCBxdW90ZSA9IGNvaW5zW2pdITtcbiAgICAgIGNvbnN0IHYgPSByb3dbcXVvdGVdO1xuICAgICAgb3V0W2ldW2pdID0gTnVtYmVyLmlzRmluaXRlKE51bWJlcih2KSkgPyBOdW1iZXIodikgOiAwO1xuICAgIH1cbiAgfVxuICByZXR1cm4gb3V0O1xufVxuXG5mdW5jdGlvbiBzd2FwVGFnRnJvbURlcml2YXRpdmVzKHNlcmllczogbnVtYmVyW10gfCB1bmRlZmluZWQpOiBTd2FwVGFnIHtcbiAgaWYgKCFzZXJpZXMgfHwgc2VyaWVzLmxlbmd0aCA9PT0gMCkgcmV0dXJuIHsgY291bnQ6IDAsIGRpcmVjdGlvbjogXCJmcm96ZW5cIiB9O1xuICBsZXQgcHJldiA9IDA7XG4gIGxldCBmbGlwcyA9IDA7XG4gIGZvciAoY29uc3QgdmFsdWUgb2Ygc2VyaWVzKSB7XG4gICAgY29uc3Qgc2lnbiA9IE1hdGguc2lnbih2YWx1ZSk7XG4gICAgaWYgKHNpZ24gIT09IDAgJiYgcHJldiAhPT0gMCAmJiBzaWduICE9PSBwcmV2KSBmbGlwcysrO1xuICAgIGlmIChzaWduICE9PSAwKSBwcmV2ID0gc2lnbjtcbiAgfVxuICBjb25zdCBsYXN0ID0gc2VyaWVzLmF0KC0xKSA/PyAwO1xuICBjb25zdCBkaXJlY3Rpb246IFN3YXBEaXJlY3Rpb24gPSBsYXN0ID4gMCA/IFwidXBcIiA6IGxhc3QgPCAwID8gXCJkb3duXCIgOiBcImZyb3plblwiO1xuICBjb25zdCBmcm96ZW4gPSBzZXJpZXMuc2xpY2UoLTUpLmV2ZXJ5KCh2KSA9PiBNYXRoLnNpZ24odikgPT09IDApO1xuICByZXR1cm4geyBjb3VudDogZnJvemVuID8gMCA6IGZsaXBzLCBkaXJlY3Rpb246IGZyb3plbiA/IFwiZnJvemVuXCIgOiBkaXJlY3Rpb24gfTtcbn1cblxuYXN5bmMgZnVuY3Rpb24gcmVzb2x2ZU1hdHJpY2VzKFxuICBzb3VyY2VzOiBDb252ZXJ0ZXJTb3VyY2VzLFxuICBjb2luczogc3RyaW5nW11cbik6IFByb21pc2U8e1xuICBjb2luczogc3RyaW5nW107XG4gIGJlbmNobWFyaz86IG51bWJlcltdW107XG4gIGlkX3BjdD86IG51bWJlcltdW107XG4gIHBjdF9kcnY/OiBudW1iZXJbXVtdO1xuICByZWY/OiBudW1iZXJbXVtdO1xuICBzbmFwc2hvdD86IE1hdHJpeFNuYXBzaG90O1xufT4ge1xuICBjb25zdCBzbmFwc2hvdCA9IGF3YWl0IHRyeUNhbGwoKCkgPT5cbiAgICBzb3VyY2VzLm1hdHJpY2VzLmdldFNuYXBzaG90Py4oeyBjb2lucywga2V5czogW1wiYmVuY2htYXJrXCIsIFwiaWRfcGN0XCIsIFwicGN0X2RydlwiLCBcInJlZlwiXSB9KVxuICApO1xuICBsZXQgb3JkZXJlZENvaW5zID0gc25hcHNob3Q/LmNvaW5zPy5tYXAoZW5zdXJlVXBwZXIpID8/IGNvaW5zLnNsaWNlKCk7XG4gIGlmICghb3JkZXJlZENvaW5zLmxlbmd0aCkgb3JkZXJlZENvaW5zID0gY29pbnMuc2xpY2UoKTtcblxuICBsZXQgYmVuY2htYXJrID0gbm9ybWFsaXplR3JpZChvcmRlcmVkQ29pbnMsIHNuYXBzaG90Py5ncmlkcz8uYmVuY2htYXJrKTtcbiAgaWYgKCFiZW5jaG1hcmspIHtcbiAgICBjb25zdCBmYWxsYmFjayA9IGF3YWl0IHRyeUNhbGwoKCkgPT4gc291cmNlcy5tYXRyaWNlcy5nZXRCZW5jaG1hcmtHcmlkKG9yZGVyZWRDb2lucykpO1xuICAgIGJlbmNobWFyayA9IG5vcm1hbGl6ZUdyaWQob3JkZXJlZENvaW5zLCBmYWxsYmFjayk7XG4gIH1cblxuICBsZXQgaWRQY3QgPSBub3JtYWxpemVHcmlkKG9yZGVyZWRDb2lucywgc25hcHNob3Q/LmdyaWRzPy5pZF9wY3QpO1xuICBpZiAoIWlkUGN0KSB7XG4gICAgY29uc3QgZmFsbGJhY2sgPSBhd2FpdCB0cnlDYWxsKCgpID0+IHNvdXJjZXMubWF0cmljZXMuZ2V0SWRQY3RHcmlkKG9yZGVyZWRDb2lucykpO1xuICAgIGlkUGN0ID0gbm9ybWFsaXplR3JpZChvcmRlcmVkQ29pbnMsIGZhbGxiYWNrKTtcbiAgfVxuXG4gIGxldCBwY3REcnYgPSBub3JtYWxpemVHcmlkKG9yZGVyZWRDb2lucywgc25hcHNob3Q/LmdyaWRzPy5wY3RfZHJ2KTtcbiAgaWYgKCFwY3REcnYgJiYgdHlwZW9mIHNvdXJjZXMubWF0cmljZXMuZ2V0UGN0RHJ2R3JpZCA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgY29uc3QgZmFsbGJhY2sgPSBhd2FpdCB0cnlDYWxsKCgpID0+IHNvdXJjZXMubWF0cmljZXMuZ2V0UGN0RHJ2R3JpZD8uKG9yZGVyZWRDb2lucykpO1xuICAgIHBjdERydiA9IG5vcm1hbGl6ZUdyaWQob3JkZXJlZENvaW5zLCBmYWxsYmFjayk7XG4gIH1cblxuICBjb25zdCByZWYgPSBub3JtYWxpemVHcmlkKG9yZGVyZWRDb2lucywgc25hcHNob3Q/LmdyaWRzPy5yZWYpO1xuXG4gIHJldHVybiB7XG4gICAgY29pbnM6IG9yZGVyZWRDb2lucyxcbiAgICBiZW5jaG1hcmssXG4gICAgaWRfcGN0OiBpZFBjdCxcbiAgICBwY3RfZHJ2OiBwY3REcnYsXG4gICAgcmVmLFxuICAgIHNuYXBzaG90OiBzbmFwc2hvdCA/PyB1bmRlZmluZWQsXG4gIH07XG59XG5cbmZ1bmN0aW9uIGJ1aWxkSGlzdG9ncmFtKHNlcmllczogbnVtYmVyW10sIGJpbnM6IG51bWJlcik6IEhpc3RvZ3JhbVNuYXBzaG90IHwgdW5kZWZpbmVkIHtcbiAgY29uc3QgdmFsdWVzID0gc2VyaWVzLmZpbHRlcigodikgPT4gTnVtYmVyLmlzRmluaXRlKHYpKTtcbiAgaWYgKCF2YWx1ZXMubGVuZ3RoKSByZXR1cm4gdW5kZWZpbmVkO1xuXG4gIGxldCBtaW4gPSB2YWx1ZXNbMF0hO1xuICBsZXQgbWF4ID0gdmFsdWVzWzBdITtcbiAgZm9yIChjb25zdCB2IG9mIHZhbHVlcykge1xuICAgIGlmICh2IDwgbWluKSBtaW4gPSB2O1xuICAgIGlmICh2ID4gbWF4KSBtYXggPSB2O1xuICB9XG5cbiAgaWYgKG1pbiA9PT0gbWF4KSB7XG4gICAgcmV0dXJuIHsgYnVja2V0czogW21pbl0sIGNvdW50czogW3ZhbHVlcy5sZW5ndGhdLCBtaW4sIG1heCB9O1xuICB9XG5cbiAgY29uc3Qgc2FmZUJpbnMgPSBNYXRoLm1heCg0LCBNYXRoLm1pbig1MTIsIE1hdGguZmxvb3IoYmlucykpKTtcbiAgY29uc3Qgc3RlcCA9IChtYXggLSBtaW4pIC8gc2FmZUJpbnMgfHwgMTtcbiAgY29uc3QgYnVja2V0cyA9IEFycmF5LmZyb20oeyBsZW5ndGg6IHNhZmVCaW5zIH0sIChfLCBpKSA9PiBtaW4gKyBzdGVwICogaSk7XG4gIGNvbnN0IGNvdW50cyA9IEFycmF5LmZyb20oeyBsZW5ndGg6IHNhZmVCaW5zIH0sICgpID0+IDApO1xuXG4gIGZvciAoY29uc3QgdiBvZiB2YWx1ZXMpIHtcbiAgICBjb25zdCBpZHggPSBNYXRoLm1pbihzYWZlQmlucyAtIDEsIE1hdGguZmxvb3IoKHYgLSBtaW4pIC8gc3RlcCkpO1xuICAgIGNvdW50c1tpZHhdICs9IDE7XG4gIH1cblxuICByZXR1cm4geyBidWNrZXRzLCBjb3VudHMsIG1pbiwgbWF4IH07XG59XG5cbmV4cG9ydCB0eXBlIEJ1aWxkVk1PcHRzID0ge1xuICBDYT86IHN0cmluZztcbiAgQ2I/OiBzdHJpbmc7XG4gIGJhc2U/OiBzdHJpbmc7XG4gIHF1b3RlPzogc3RyaW5nO1xuICBjYW5kaWRhdGVzOiBzdHJpbmdbXTtcbiAgY29pbnNVbml2ZXJzZTogc3RyaW5nW107XG4gIGhpc3RMZW4/OiBudW1iZXI7XG4gIGs/OiBudW1iZXI7XG59O1xuXG5leHBvcnQgdHlwZSBCdWlsZER5bmFtaWNzU25hcHNob3RPcHRzID0gQnVpbGRWTU9wdHMgJiB7XG4gIGhpc3RvZ3JhbUJpbnM/OiBudW1iZXI7XG59O1xuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gYnVpbGREb21haW5WTShyYXdPcHRzOiBCdWlsZFZNT3B0cyk6IFByb21pc2U8RG9tYWluVk0+IHtcbiAgY29uc3Qgc291cmNlcyA9IGdldFNvdXJjZXMoKTtcblxuICBjb25zdCBDYSA9IGVuc3VyZVVwcGVyKHJhd09wdHMuQ2EgPz8gcmF3T3B0cy5iYXNlKTtcbiAgY29uc3QgQ2IgPSBlbnN1cmVVcHBlcihyYXdPcHRzLkNiID8/IHJhd09wdHMucXVvdGUpO1xuICBpZiAoIUNhIHx8ICFDYikge1xuICAgIHRocm93IG5ldyBFcnJvcihcImJ1aWxkRG9tYWluVk0gcmVxdWlyZXMgYm90aCBDYS9iYXNlIGFuZCBDYi9xdW90ZSBzeW1ib2xzLlwiKTtcbiAgfVxuXG4gIGNvbnN0IGhpc3RMZW4gPSBNYXRoLm1heCgxNiwgTnVtYmVyKHJhd09wdHMuaGlzdExlbiA/PyA2NCkpO1xuXG4gIGNvbnN0IGJhc2VDb2lucyA9IEFycmF5LmlzQXJyYXkocmF3T3B0cy5jb2luc1VuaXZlcnNlKSA/IHJhd09wdHMuY29pbnNVbml2ZXJzZS5tYXAoZW5zdXJlVXBwZXIpIDogW107XG4gIGNvbnN0IGNvaW5zU2V0ID0gbmV3IFNldDxzdHJpbmc+KCk7XG4gIGZvciAoY29uc3QgYyBvZiBiYXNlQ29pbnMpIGNvaW5zU2V0LmFkZChjKTtcbiAgY29pbnNTZXQuYWRkKENhKTtcbiAgY29pbnNTZXQuYWRkKENiKTtcbiAgZm9yIChjb25zdCBjYW5kIG9mIHJhd09wdHMuY2FuZGlkYXRlcyA/PyBbXSkgY29pbnNTZXQuYWRkKGVuc3VyZVVwcGVyKGNhbmQpKTtcbiAgY29uc3QgY29pbnNVbml2ZXJzZSA9IEFycmF5LmZyb20oY29pbnNTZXQpO1xuXG4gIGNvbnN0IG1hdHJpY2VzID0gYXdhaXQgcmVzb2x2ZU1hdHJpY2VzKHNvdXJjZXMsIGNvaW5zVW5pdmVyc2UpO1xuICBjb25zdCBjb2lucyA9IG1hdHJpY2VzLmNvaW5zO1xuICBpZiAoIWNvaW5zLmluY2x1ZGVzKENhKSkgY29pbnMucHVzaChDYSk7XG4gIGlmICghY29pbnMuaW5jbHVkZXMoQ2IpKSBjb2lucy5wdXNoKENiKTtcblxuICBjb25zdCBiZW5jaG1hcmsgPSBtYXRyaWNlcy5iZW5jaG1hcmsgPz8gbm9ybWFsaXplR3JpZChjb2lucywgdW5kZWZpbmVkKTtcbiAgY29uc3QgaWRQY3QgPSBtYXRyaWNlcy5pZF9wY3QgPz8gbm9ybWFsaXplR3JpZChjb2lucywgdW5kZWZpbmVkKTtcbiAgY29uc3QgcGN0RHJ2TWF0cml4ID0gbWF0cmljZXMucGN0X2RydjtcbiAgY29uc3QgcmVmTWF0cml4ID0gbWF0cmljZXMucmVmO1xuXG4gIGNvbnN0IGJhbGFuY2VzQWxsOiBSZWNvcmQ8c3RyaW5nLCBudW1iZXI+ID0ge307XG4gIGZvciAoY29uc3Qgc3ltIG9mIGNvaW5zKSB7XG4gICAgY29uc3QgY2luV2FsbGV0ID0gYXdhaXQgdHJ5Q2FsbCgoKSA9PiBzb3VyY2VzLmNpbi5nZXRXYWxsZXQoc3ltKSk7XG4gICAgY29uc3QgaHR0cFdhbGxldCA9IGNpbldhbGxldCA/PyAoYXdhaXQgdHJ5Q2FsbCgoKSA9PiBzb3VyY2VzLndhbGxldD8uZ2V0V2FsbGV0KHN5bSkpKTtcbiAgICBiYWxhbmNlc0FsbFtzeW1dID0gbnVtYmVyT3IoaHR0cFdhbGxldCk7XG4gIH1cblxuICBjb25zdCBjaW5TdGF0cyA9XG4gICAgKGF3YWl0IHRyeUNhbGwoKCkgPT4gc291cmNlcy5jaW4uZ2V0Q2luRm9yQ29pbnMoY29pbnMpKSkgPz9cbiAgICAoe30gYXMgRG9tYWluVk1bXCJtZXRyaWNzUGFuZWxcIl1bXCJjaW5cIl0pO1xuXG4gIGNvbnN0IG1lYVBhaXIgPSBhd2FpdCB0cnlDYWxsT3IoXG4gICAgKCkgPT4gc291cmNlcy5tZWEuZ2V0TWVhKHsgYmFzZTogQ2EsIHF1b3RlOiBDYiB9KSxcbiAgICB7IHZhbHVlOiAwLCB0aWVyOiBcIj8tdGllclwiIH1cbiAgKTtcblxuICBjb25zdCBwYWlyU3RhdHMgPVxuICAgIChhd2FpdCB0cnlDYWxsKCgpID0+IHNvdXJjZXMuc3RyLmdldFN0YXRzPy4oeyBiYXNlOiBDYSwgcXVvdGU6IENiIH0pKSkgPz8gdW5kZWZpbmVkO1xuICBjb25zdCBnZm0gPSBudW1iZXJPcihwYWlyU3RhdHM/LmdmbSwgYXdhaXQgdHJ5Q2FsbE9yKCgpID0+IHNvdXJjZXMuc3RyLmdldEdmbSgpLCAwKSk7XG4gIGNvbnN0IHNoaWZ0ID0gbnVtYmVyT3IocGFpclN0YXRzPy5zaGlmdCwgYXdhaXQgdHJ5Q2FsbE9yKCgpID0+IHNvdXJjZXMuc3RyLmdldFNoaWZ0KCksIDApKTtcbiAgY29uc3QgdlRlbmRlbmN5UGFpciA9IG51bWJlck9yKFxuICAgIHBhaXJTdGF0cz8udk91dGVyLFxuICAgIGF3YWl0IHRyeUNhbGxPcigoKSA9PiBzb3VyY2VzLnN0ci5nZXRWVGVuZGVuY3koeyBiYXNlOiBDYSwgcXVvdGU6IENiIH0pLCAwKVxuICApO1xuXG4gIGNvbnN0IGlkSGlzdFBhaXIgPVxuICAgIChhd2FpdCB0cnlDYWxsKCgpID0+IHNvdXJjZXMuc3RyLmdldElkUGN0SGlzdG9yeT8uKENhLCBDYiwgaGlzdExlbikpKSA/PyBbXTtcbiAgY29uc3QgcGN0RHJ2UGFpciA9XG4gICAgKGF3YWl0IHRyeUNhbGwoKCkgPT4gc291cmNlcy5zdHIuZ2V0UGN0RHJ2SGlzdG9yeT8uKENhLCBDYiwgaGlzdExlbikpKSA/P1xuICAgIGlkSGlzdFBhaXIubWFwKCh2LCBpZHgpID0+IChpZHggPT09IDAgPyAwIDogbnVtYmVyT3IodikgLSBudW1iZXJPcihpZEhpc3RQYWlyW2lkeCAtIDFdKSkpO1xuXG4gIGNvbnN0IGlkSGlzdFBhaXJUcyA9XG4gICAgKGF3YWl0IHRyeUNhbGwoKCkgPT4gc291cmNlcy5zdHIuZ2V0SWRQY3RIaXN0b3J5VHM/LihDYSwgQ2IsIGhpc3RMZW4pKSkgPz8gdW5kZWZpbmVkO1xuICBjb25zdCBwY3REcnZQYWlyVHMgPVxuICAgIChhd2FpdCB0cnlDYWxsKCgpID0+IHNvdXJjZXMuc3RyLmdldFBjdERydkhpc3RvcnlUcz8uKENhLCBDYiwgaGlzdExlbikpKSA/PyB1bmRlZmluZWQ7XG5cbiAgY29uc3QgY2VsbCA9IChncmlkOiBudW1iZXJbXVtdIHwgdW5kZWZpbmVkLCBmcm9tOiBzdHJpbmcsIHRvOiBzdHJpbmcpID0+IHtcbiAgICBpZiAoIWdyaWQpIHJldHVybiB1bmRlZmluZWQ7XG4gICAgY29uc3QgaSA9IGNvaW5zLmluZGV4T2YoZnJvbSk7XG4gICAgY29uc3QgaiA9IGNvaW5zLmluZGV4T2YodG8pO1xuICAgIGlmIChpIDwgMCB8fCBqIDwgMCkgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICByZXR1cm4gZ3JpZFtpXT8uW2pdO1xuICB9O1xuXG4gIGFzeW5jIGZ1bmN0aW9uIGVkZ2VNZXRyaWNzKGZyb206IHN0cmluZywgdG86IHN0cmluZyk6IFByb21pc2U8RG9tYWluRWRnZU1ldHJpY3M+IHtcbiAgICBjb25zdCBibSA9IGNlbGwoYmVuY2htYXJrLCBmcm9tLCB0byk7XG4gICAgY29uc3QgaWRwID0gY2VsbChpZFBjdCwgZnJvbSwgdG8pO1xuICAgIGNvbnN0IHZ0ID0gYXdhaXQgdHJ5Q2FsbE9yKCgpID0+IHNvdXJjZXMuc3RyLmdldFZUZW5kZW5jeSh7IGJhc2U6IGZyb20sIHF1b3RlOiB0byB9KSwgMCk7XG5cbiAgICBjb25zdCBkcnZUcyA9XG4gICAgICAoYXdhaXQgdHJ5Q2FsbCgoKSA9PiBzb3VyY2VzLnN0ci5nZXRQY3REcnZIaXN0b3J5VHM/Lihmcm9tLCB0bywgMTYpKSkgPz9cbiAgICAgIChhd2FpdCB0cnlDYWxsKCgpID0+IHNvdXJjZXMuc3RyLmdldElkUGN0SGlzdG9yeVRzPy4oZnJvbSwgdG8sIDE3KSkpPy5tYXAoKHB0LCBpZHgsIGFycikgPT4ge1xuICAgICAgICBpZiAoaWR4ID09PSAwKSByZXR1cm4geyB0c19tczogcHQudHNfbXMsIHZhbHVlOiAwIH07XG4gICAgICAgIGNvbnN0IHByZXYgPSBhcnJbaWR4IC0gMV0hO1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIHRzX21zOiBwdC50c19tcyxcbiAgICAgICAgICB2YWx1ZTogTnVtYmVyKHB0LnZhbHVlID8/IDApIC0gTnVtYmVyKHByZXYudmFsdWUgPz8gMCksXG4gICAgICAgIH07XG4gICAgICB9KTtcblxuICAgIGNvbnN0IGRlcml2cyA9IEFycmF5LmlzQXJyYXkoZHJ2VHMpID8gZHJ2VHMubWFwKChwdCkgPT4gbnVtYmVyT3IocHQudmFsdWUpKSA6IFtdO1xuICAgIGNvbnN0IHN3YXBUYWcgPSBzd2FwVGFnRnJvbURlcml2YXRpdmVzKGRlcml2cyk7XG5cbiAgICByZXR1cm4ge1xuICAgICAgYmVuY2htYXJrOiBudW1iZXJPcihibSksXG4gICAgICBpZF9wY3Q6IG51bWJlck9yKGlkcCksXG4gICAgICB2VGVuZGVuY3k6IHZ0LFxuICAgICAgc3dhcFRhZyxcbiAgICB9O1xuICB9XG5cbiAgY29uc3QgY2FuZGlkYXRlcyA9IEFycmF5LmZyb20oXG4gICAgbmV3IFNldChcbiAgICAgIChyYXdPcHRzLmNhbmRpZGF0ZXMgPz8gW10pXG4gICAgICAgIC5tYXAoZW5zdXJlVXBwZXIpXG4gICAgICAgIC5maWx0ZXIoKGMpID0+IGMgJiYgYyAhPT0gQ2EgJiYgYyAhPT0gQ2IgJiYgY29pbnMuaW5jbHVkZXMoYykpXG4gICAgKVxuICApO1xuXG4gIGNvbnN0IHJvd3M6IERvbWFpbkFyYlJvd1tdID0gW107XG4gIGZvciAoY29uc3QgQ2kgb2YgY2FuZGlkYXRlcykge1xuICAgIGNvbnN0IFtjYl9jaSwgY2lfY2EsIGNhX2NpXSA9IGF3YWl0IFByb21pc2UuYWxsKFtcbiAgICAgIGVkZ2VNZXRyaWNzKENiLCBDaSksXG4gICAgICBlZGdlTWV0cmljcyhDaSwgQ2EpLFxuICAgICAgZWRnZU1ldHJpY3MoQ2EsIENpKSxcbiAgICBdKTtcbiAgICByb3dzLnB1c2goeyBjaTogQ2ksIGNvbHM6IHsgY2JfY2ksIGNpX2NhLCBjYV9jaSB9IH0pO1xuICB9XG5cbiAgY29uc3Qgc3Vic2V0V2FsbGV0czogUmVjb3JkPHN0cmluZywgbnVtYmVyPiA9IHt9O1xuICBmb3IgKGNvbnN0IHN5bSBvZiBuZXcgU2V0KFtDYSwgQ2IsIC4uLmNhbmRpZGF0ZXNdKSkge1xuICAgIHN1YnNldFdhbGxldHNbc3ltXSA9IGJhbGFuY2VzQWxsW3N5bV0gPz8gMDtcbiAgfVxuXG4gIGxldCBtZWFNYXRyaXg6IG51bWJlcltdW10gfCB1bmRlZmluZWQ7XG4gIGlmICh0eXBlb2Ygc291cmNlcy5tZWEuZ2V0TWVhR3JpZCA9PT0gXCJmdW5jdGlvblwiICYmIGlkUGN0KSB7XG4gICAgY29uc3QgZ3JpZCA9IGF3YWl0IHRyeUNhbGwoKCkgPT5cbiAgICAgIHNvdXJjZXMubWVhLmdldE1lYUdyaWQ/Lih7IGNvaW5zLCBpZFBjdCwgYmFsYW5jZXM6IGJhbGFuY2VzQWxsLCBrOiByYXdPcHRzLmsgfSlcbiAgICApO1xuICAgIG1lYU1hdHJpeCA9IGdyaWQgPyBub3JtYWxpemVHcmlkKGNvaW5zLCBncmlkKSA6IHVuZGVmaW5lZDtcbiAgfVxuICBpZiAoIW1lYU1hdHJpeCAmJiBpZFBjdCkge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCByZWMgPSBidWlsZE1lYUF1eCh7XG4gICAgICAgIGNvaW5zLFxuICAgICAgICBpZFBjdDogZ3JpZFRvUmVjb3JkKGNvaW5zLCBpZFBjdCksXG4gICAgICAgIGJhbGFuY2VzOiBiYWxhbmNlc0FsbCxcbiAgICAgICAgazogcmF3T3B0cy5rLFxuICAgICAgfSk7XG4gICAgICBtZWFNYXRyaXggPSByZWNvcmRUb0dyaWQoY29pbnMsIHJlYyk7XG4gICAgfSBjYXRjaCB7XG4gICAgICBtZWFNYXRyaXggPSB1bmRlZmluZWQ7XG4gICAgfVxuICB9XG5cbiAgY29uc3Qgdm06IERvbWFpblZNID0ge1xuICAgIGNvaW5zLFxuICAgIG1hdHJpeDoge1xuICAgICAgYmVuY2htYXJrOiBiZW5jaG1hcmssXG4gICAgICBpZF9wY3Q6IGlkUGN0LFxuICAgICAgcGN0X2RydjogcGN0RHJ2TWF0cml4LFxuICAgICAgbWVhOiBtZWFNYXRyaXgsXG4gICAgICByZWY6IHJlZk1hdHJpeCxcbiAgICB9LFxuICAgIGFyYjoge1xuICAgICAgcm93cyxcbiAgICAgIHdhbGxldHM6IHN1YnNldFdhbGxldHMsXG4gICAgfSxcbiAgICBtZXRyaWNzUGFuZWw6IHtcbiAgICAgIG1lYTogbWVhUGFpcixcbiAgICAgIHN0cjogeyBnZm0sIHNoaWZ0LCB2VGVuZGVuY3k6IHZUZW5kZW5jeVBhaXIgfSxcbiAgICAgIGNpbjogY2luU3RhdHMsXG4gICAgfSxcbiAgICBzZXJpZXM6IHtcbiAgICAgIGlkX3BjdDogaWRIaXN0UGFpci5tYXAobnVtYmVyT3IpLFxuICAgICAgcGN0X2RydjogcGN0RHJ2UGFpci5tYXAobnVtYmVyT3IpLFxuICAgICAgaWRfcGN0X3RzOiBpZEhpc3RQYWlyVHM/Lm1hcCgocHQpID0+ICh7IHRzX21zOiBOdW1iZXIocHQudHNfbXMpLCB2YWx1ZTogbnVtYmVyT3IocHQudmFsdWUpIH0pKSxcbiAgICAgIHBjdF9kcnZfdHM6IHBjdERydlBhaXJUcz8ubWFwKChwdCkgPT4gKHsgdHNfbXM6IE51bWJlcihwdC50c19tcyksIHZhbHVlOiBudW1iZXJPcihwdC52YWx1ZSkgfSkpLFxuICAgIH0sXG4gICAgY29udGV4dDoge1xuICAgICAgYmFzZTogQ2EsXG4gICAgICBxdW90ZTogQ2IsXG4gICAgICBjYW5kaWRhdGVzLFxuICAgICAgYmFsYW5jZXM6IGJhbGFuY2VzQWxsLFxuICAgICAgaGlzdExlbixcbiAgICB9LFxuICB9O1xuXG4gIHJldHVybiB2bTtcbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGJ1aWxkRHluYW1pY3NTbmFwc2hvdChvcHRzOiBCdWlsZER5bmFtaWNzU25hcHNob3RPcHRzKTogUHJvbWlzZTxEeW5hbWljc1NuYXBzaG90PiB7XG4gIGNvbnN0IHZtID0gYXdhaXQgYnVpbGREb21haW5WTShvcHRzKTtcbiAgY29uc3QgeyBjb250ZXh0LCBtYXRyaXgsIGFyYiwgbWV0cmljc1BhbmVsLCBzZXJpZXMgfSA9IHZtO1xuICBjb25zdCBiaW5zID0gb3B0cy5oaXN0b2dyYW1CaW5zID8/IGNvbnRleHQuaGlzdExlbjtcbiAgY29uc3QgaGlzdG9ncmFtID0gYnVpbGRIaXN0b2dyYW0oc2VyaWVzLnBjdF9kcnYsIGJpbnMpO1xuXG4gIGNvbnN0IGZvY3VzV2FsbGV0czogUmVjb3JkPHN0cmluZywgbnVtYmVyPiA9IHt9O1xuICBjb25zdCBmb2N1c1NldCA9IG5ldyBTZXQ8c3RyaW5nPihbXG4gICAgY29udGV4dC5iYXNlLFxuICAgIGNvbnRleHQucXVvdGUsXG4gICAgXCJVU0RUXCIsXG4gICAgLi4uY29udGV4dC5jYW5kaWRhdGVzLFxuICBdKTtcbiAgZm9yIChjb25zdCBzeW0gb2YgZm9jdXNTZXQpIGZvY3VzV2FsbGV0c1tzeW1dID0gY29udGV4dC5iYWxhbmNlc1tzeW1dID8/IDA7XG5cbiAgcmV0dXJuIHtcbiAgICBidWlsdEF0OiBEYXRlLm5vdygpLFxuICAgIGNvaW5zOiB2bS5jb2lucyxcbiAgICBiYXNlOiBjb250ZXh0LmJhc2UsXG4gICAgcXVvdGU6IGNvbnRleHQucXVvdGUsXG4gICAgY2FuZGlkYXRlczogY29udGV4dC5jYW5kaWRhdGVzLFxuICAgIG1hdHJpeCxcbiAgICBhcmIsXG4gICAgbWV0cmljczogbWV0cmljc1BhbmVsLFxuICAgIHNlcmllcyxcbiAgICBoaXN0b2dyYW0sXG4gICAgd2FsbGV0czogZm9jdXNXYWxsZXRzLFxuICAgIHdhbGxldHNBbGw6IGNvbnRleHQuYmFsYW5jZXMsXG4gICAgY2luOiBtZXRyaWNzUGFuZWwuY2luLFxuICB9O1xufVxuIl0sIm5hbWVzIjpbImJ1aWxkTWVhQXV4Iiwic291cmNlc1JlZiIsIndpcmVDb252ZXJ0ZXJTb3VyY2VzIiwic291cmNlcyIsImdldFNvdXJjZXMiLCJFcnJvciIsImVuc3VyZVVwcGVyIiwicyIsIlN0cmluZyIsInRyaW0iLCJ0b1VwcGVyQ2FzZSIsIm51bWJlck9yIiwidmFsdWUiLCJmYWxsYmFjayIsIm4iLCJOdW1iZXIiLCJpc0Zpbml0ZSIsInRyeUNhbGwiLCJmbiIsInVuZGVmaW5lZCIsInRyeUNhbGxPciIsInYiLCJQcm9taXNlIiwicmVzb2x2ZSIsIm5vcm1hbGl6ZUdyaWQiLCJjb2lucyIsImdyaWQiLCJsZW5ndGgiLCJvdXQiLCJBcnJheSIsImZyb20iLCJpIiwiaiIsImdyaWRUb1JlY29yZCIsImJhc2UiLCJyb3ciLCJxdW90ZSIsInJlY29yZFRvR3JpZCIsInJlYyIsInN3YXBUYWdGcm9tRGVyaXZhdGl2ZXMiLCJzZXJpZXMiLCJjb3VudCIsImRpcmVjdGlvbiIsInByZXYiLCJmbGlwcyIsInNpZ24iLCJNYXRoIiwibGFzdCIsImF0IiwiZnJvemVuIiwic2xpY2UiLCJldmVyeSIsInJlc29sdmVNYXRyaWNlcyIsInNuYXBzaG90IiwibWF0cmljZXMiLCJnZXRTbmFwc2hvdCIsImtleXMiLCJvcmRlcmVkQ29pbnMiLCJtYXAiLCJiZW5jaG1hcmsiLCJncmlkcyIsImdldEJlbmNobWFya0dyaWQiLCJpZFBjdCIsImlkX3BjdCIsImdldElkUGN0R3JpZCIsInBjdERydiIsInBjdF9kcnYiLCJnZXRQY3REcnZHcmlkIiwicmVmIiwiYnVpbGRIaXN0b2dyYW0iLCJiaW5zIiwidmFsdWVzIiwiZmlsdGVyIiwibWluIiwibWF4IiwiYnVja2V0cyIsImNvdW50cyIsInNhZmVCaW5zIiwiZmxvb3IiLCJzdGVwIiwiXyIsImlkeCIsImJ1aWxkRG9tYWluVk0iLCJyYXdPcHRzIiwiQ2EiLCJDYiIsImhpc3RMZW4iLCJiYXNlQ29pbnMiLCJpc0FycmF5IiwiY29pbnNVbml2ZXJzZSIsImNvaW5zU2V0IiwiU2V0IiwiYyIsImFkZCIsImNhbmQiLCJjYW5kaWRhdGVzIiwiaW5jbHVkZXMiLCJwdXNoIiwicGN0RHJ2TWF0cml4IiwicmVmTWF0cml4IiwiYmFsYW5jZXNBbGwiLCJzeW0iLCJjaW5XYWxsZXQiLCJjaW4iLCJnZXRXYWxsZXQiLCJodHRwV2FsbGV0Iiwid2FsbGV0IiwiY2luU3RhdHMiLCJnZXRDaW5Gb3JDb2lucyIsIm1lYVBhaXIiLCJtZWEiLCJnZXRNZWEiLCJ0aWVyIiwicGFpclN0YXRzIiwic3RyIiwiZ2V0U3RhdHMiLCJnZm0iLCJnZXRHZm0iLCJzaGlmdCIsImdldFNoaWZ0IiwidlRlbmRlbmN5UGFpciIsInZPdXRlciIsImdldFZUZW5kZW5jeSIsImlkSGlzdFBhaXIiLCJnZXRJZFBjdEhpc3RvcnkiLCJwY3REcnZQYWlyIiwiZ2V0UGN0RHJ2SGlzdG9yeSIsImlkSGlzdFBhaXJUcyIsImdldElkUGN0SGlzdG9yeVRzIiwicGN0RHJ2UGFpclRzIiwiZ2V0UGN0RHJ2SGlzdG9yeVRzIiwiY2VsbCIsInRvIiwiaW5kZXhPZiIsImVkZ2VNZXRyaWNzIiwiYm0iLCJpZHAiLCJ2dCIsImRydlRzIiwicHQiLCJhcnIiLCJ0c19tcyIsImRlcml2cyIsInN3YXBUYWciLCJ2VGVuZGVuY3kiLCJyb3dzIiwiQ2kiLCJjYl9jaSIsImNpX2NhIiwiY2FfY2kiLCJhbGwiLCJjaSIsImNvbHMiLCJzdWJzZXRXYWxsZXRzIiwibWVhTWF0cml4IiwiZ2V0TWVhR3JpZCIsImJhbGFuY2VzIiwiayIsInZtIiwibWF0cml4IiwiYXJiIiwid2FsbGV0cyIsIm1ldHJpY3NQYW5lbCIsImlkX3BjdF90cyIsInBjdF9kcnZfdHMiLCJjb250ZXh0IiwiYnVpbGREeW5hbWljc1NuYXBzaG90Iiwib3B0cyIsImhpc3RvZ3JhbUJpbnMiLCJoaXN0b2dyYW0iLCJmb2N1c1dhbGxldHMiLCJmb2N1c1NldCIsImJ1aWx0QXQiLCJEYXRlIiwibm93IiwibWV0cmljcyIsIndhbGxldHNBbGwiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./src/core/converters/Converter.server.ts\n");

/***/ }),

/***/ "(rsc)/./src/core/converters/providers/cinaux.db.ts":
/*!****************************************************!*\
  !*** ./src/core/converters/providers/cinaux.db.ts ***!
  \****************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   makeCinDbProvider: () => (/* binding */ makeCinDbProvider)\n/* harmony export */ });\n/* ----------------------------------------------------------------------------------\r\n* 5) File: src/converters/providers/cinaux.db.ts\r\n* ---------------------------------------------------------------------------------- */ function makeCinDbProvider(db) {\n    return {\n        async getWallet (symbol) {\n            const v = await db.getWallet(symbol);\n            return v ?? 0;\n        },\n        async getCinForCoins (symbols) {\n            const rows = await db.getCinStats(symbols);\n            const out = {};\n            for (const r of rows){\n                out[r.symbol] = {\n                    session: {\n                        imprint: r.session_imprint,\n                        luggage: r.session_luggage\n                    },\n                    cycle: {\n                        imprint: r.cycle_imprint,\n                        luggage: r.cycle_luggage\n                    }\n                };\n            }\n            // default zeros if missing\n            for (const s of symbols)if (!out[s]) out[s] = {\n                session: {\n                    imprint: 0,\n                    luggage: 0\n                },\n                cycle: {\n                    imprint: 0,\n                    luggage: 0\n                }\n            };\n            return out;\n        }\n    };\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvY29yZS9jb252ZXJ0ZXJzL3Byb3ZpZGVycy9jaW5hdXguZGIudHMiLCJtYXBwaW5ncyI6Ijs7OztBQUFBOztxRkFFcUYsR0FZOUUsU0FBU0Esa0JBQWtCQyxFQUFhO0lBQy9DLE9BQU87UUFDUCxNQUFNQyxXQUFVQyxNQUFNO1lBQ3RCLE1BQU1DLElBQUksTUFBTUgsR0FBR0MsU0FBUyxDQUFDQztZQUM3QixPQUFPQyxLQUFLO1FBQ1o7UUFDQSxNQUFNQyxnQkFBZUMsT0FBTztZQUM1QixNQUFNQyxPQUFPLE1BQU1OLEdBQUdPLFdBQVcsQ0FBQ0Y7WUFDbEMsTUFBTUcsTUFBK0IsQ0FBQztZQUN0QyxLQUFLLE1BQU1DLEtBQUtILEtBQU07Z0JBQ3RCRSxHQUFHLENBQUNDLEVBQUVQLE1BQU0sQ0FBQyxHQUFHO29CQUNoQlEsU0FBUzt3QkFBRUMsU0FBU0YsRUFBRUcsZUFBZTt3QkFBRUMsU0FBU0osRUFBRUssZUFBZTtvQkFBQztvQkFDbEVDLE9BQU87d0JBQUVKLFNBQVNGLEVBQUVPLGFBQWE7d0JBQUVILFNBQVNKLEVBQUVRLGFBQWE7b0JBQUM7Z0JBQzVEO1lBQ0E7WUFDQSwyQkFBMkI7WUFDM0IsS0FBSyxNQUFNQyxLQUFLYixRQUFTLElBQUksQ0FBQ0csR0FBRyxDQUFDVSxFQUFFLEVBQUVWLEdBQUcsQ0FBQ1UsRUFBRSxHQUFHO2dCQUFFUixTQUFTO29CQUFFQyxTQUFTO29CQUFHRSxTQUFTO2dCQUFFO2dCQUFHRSxPQUFPO29CQUFFSixTQUFTO29CQUFHRSxTQUFTO2dCQUFFO1lBQUU7WUFDeEgsT0FBT0w7UUFDUDtJQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIkg6XFxVc2Vyc1xcR3VzXFxzb3VyY2VcXHJlcG9cXGR5bmFtaWNzXFxkeW5hbWljcy1iXFxjcnlwdG9waS1keW5hbWljc1xcc3JjXFxjb3JlXFxjb252ZXJ0ZXJzXFxwcm92aWRlcnNcXGNpbmF1eC5kYi50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcbiogNSkgRmlsZTogc3JjL2NvbnZlcnRlcnMvcHJvdmlkZXJzL2NpbmF1eC5kYi50c1xyXG4qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cclxuXHJcblxyXG5pbXBvcnQgdHlwZSB7IENpbkF1eFByb3ZpZGVyLCBDaW5TdGF0IH0gZnJvbSBcIkAvY29yZS9jb252ZXJ0ZXJzL3Byb3ZpZGVyLnR5cGVzXCI7XHJcblxyXG5cclxuZXhwb3J0IHR5cGUgQ2luRGJEZXBzID0ge1xyXG5nZXRXYWxsZXQ6IChzeW1ib2w6IHN0cmluZykgPT4gUHJvbWlzZTxudW1iZXIgfCBudWxsPjtcclxuZ2V0Q2luU3RhdHM6IChzeW1ib2xzOiBzdHJpbmdbXSkgPT4gUHJvbWlzZTxBcnJheTx7IHN5bWJvbDogc3RyaW5nOyBzZXNzaW9uX2ltcHJpbnQ6IG51bWJlcjsgc2Vzc2lvbl9sdWdnYWdlOiBudW1iZXI7IGN5Y2xlX2ltcHJpbnQ6IG51bWJlcjsgY3ljbGVfbHVnZ2FnZTogbnVtYmVyIH0+PjtcclxufTtcclxuXHJcblxyXG5leHBvcnQgZnVuY3Rpb24gbWFrZUNpbkRiUHJvdmlkZXIoZGI6IENpbkRiRGVwcyk6IENpbkF1eFByb3ZpZGVyIHtcclxucmV0dXJuIHtcclxuYXN5bmMgZ2V0V2FsbGV0KHN5bWJvbCkge1xyXG5jb25zdCB2ID0gYXdhaXQgZGIuZ2V0V2FsbGV0KHN5bWJvbCk7XHJcbnJldHVybiB2ID8/IDA7XHJcbn0sXHJcbmFzeW5jIGdldENpbkZvckNvaW5zKHN5bWJvbHMpIHtcclxuY29uc3Qgcm93cyA9IGF3YWl0IGRiLmdldENpblN0YXRzKHN5bWJvbHMpO1xyXG5jb25zdCBvdXQ6IFJlY29yZDxzdHJpbmcsIENpblN0YXQ+ID0ge307XHJcbmZvciAoY29uc3QgciBvZiByb3dzKSB7XHJcbm91dFtyLnN5bWJvbF0gPSB7XHJcbnNlc3Npb246IHsgaW1wcmludDogci5zZXNzaW9uX2ltcHJpbnQsIGx1Z2dhZ2U6IHIuc2Vzc2lvbl9sdWdnYWdlIH0sXHJcbmN5Y2xlOiB7IGltcHJpbnQ6IHIuY3ljbGVfaW1wcmludCwgbHVnZ2FnZTogci5jeWNsZV9sdWdnYWdlIH0sXHJcbn07XHJcbn1cclxuLy8gZGVmYXVsdCB6ZXJvcyBpZiBtaXNzaW5nXHJcbmZvciAoY29uc3QgcyBvZiBzeW1ib2xzKSBpZiAoIW91dFtzXSkgb3V0W3NdID0geyBzZXNzaW9uOiB7IGltcHJpbnQ6IDAsIGx1Z2dhZ2U6IDAgfSwgY3ljbGU6IHsgaW1wcmludDogMCwgbHVnZ2FnZTogMCB9IH07XHJcbnJldHVybiBvdXQ7XHJcbn0sXHJcbn0gc2F0aXNmaWVzIENpbkF1eFByb3ZpZGVyO1xyXG59Il0sIm5hbWVzIjpbIm1ha2VDaW5EYlByb3ZpZGVyIiwiZGIiLCJnZXRXYWxsZXQiLCJzeW1ib2wiLCJ2IiwiZ2V0Q2luRm9yQ29pbnMiLCJzeW1ib2xzIiwicm93cyIsImdldENpblN0YXRzIiwib3V0IiwiciIsInNlc3Npb24iLCJpbXByaW50Iiwic2Vzc2lvbl9pbXByaW50IiwibHVnZ2FnZSIsInNlc3Npb25fbHVnZ2FnZSIsImN5Y2xlIiwiY3ljbGVfaW1wcmludCIsImN5Y2xlX2x1Z2dhZ2UiLCJzIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./src/core/converters/providers/cinaux.db.ts\n");

/***/ }),

/***/ "(rsc)/./src/core/converters/providers/matrices.http.ts":
/*!********************************************************!*\
  !*** ./src/core/converters/providers/matrices.http.ts ***!
  \********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   makeMatricesHttpProvider: () => (/* binding */ makeMatricesHttpProvider)\n/* harmony export */ });\n/* ----------------------------------------------------------------------------------\n * File: src/core/converters/providers/matrices.http.ts\n * Purpose: Fetch matrices from /api/matrices/latest keyed by coins (no-store).\n * ---------------------------------------------------------------------------------- */ const ensureUpper = (s)=>String(s ?? \"\").trim().toUpperCase();\nfunction valuesToGrid(coins, values) {\n    if (!values) return undefined;\n    const n = coins.length;\n    const out = Array.from({\n        length: n\n    }, ()=>Array.from({\n            length: n\n        }, ()=>0));\n    for(let i = 0; i < n; i++){\n        const base = coins[i];\n        const row = values[base] ?? {};\n        for(let j = 0; j < n; j++){\n            if (i === j) continue;\n            const quote = coins[j];\n            const v = row[quote];\n            const num = Number(v);\n            out[i][j] = Number.isFinite(num) ? num : 0;\n        }\n    }\n    return out;\n}\nfunction makeMatricesHttpProvider(base = \"\") {\n    const origin = base.replace(/\\/$/, \"\");\n    async function fetchLatest(coins) {\n        const qs = new URLSearchParams({\n            t: String(Date.now())\n        });\n        if (coins && coins.length) qs.set(\"coins\", coins.join(\",\"));\n        const res = await fetch(`${origin}/api/matrices/latest?${qs}`, {\n            cache: \"no-store\",\n            next: {\n                revalidate: 0\n            }\n        });\n        if (!res.ok) {\n            throw new Error(`matrices http ${res.status}`);\n        }\n        const data = await res.json();\n        if (!data.ok) {\n            throw new Error(data.error || \"matrices latest error\");\n        }\n        return data;\n    }\n    async function getSnapshotInternal(coins, keys) {\n        const payload = await fetchLatest(coins);\n        const universeSrc = payload.meta?.universe ?? payload.coins ?? coins;\n        const universe = universeSrc.map(ensureUpper);\n        const selected = keys ? new Set(keys) : null;\n        const add = (key, values)=>{\n            if (!values) return undefined;\n            if (selected && !selected.has(key)) return undefined;\n            return valuesToGrid(universe, values);\n        };\n        const grids = {};\n        const maybeBenchmark = add(\"benchmark\", payload.matrices.benchmark.values);\n        if (maybeBenchmark) grids.benchmark = maybeBenchmark;\n        const maybeIdPct = add(\"id_pct\", payload.matrices.id_pct.values);\n        if (maybeIdPct) grids.id_pct = maybeIdPct;\n        const maybePctDrv = add(\"pct_drv\", payload.matrices.pct_drv.values);\n        if (maybePctDrv) grids.pct_drv = maybePctDrv;\n        const maybePct24h = add(\"pct24h\", payload.matrices.pct24h?.values);\n        if (maybePct24h) grids.pct24h = maybePct24h;\n        const maybePctRef = add(\"pct_ref\", payload.matrices.pct_ref?.values);\n        if (maybePctRef) grids.pct_ref = maybePctRef;\n        const maybeRef = add(\"ref\", payload.matrices.ref?.values);\n        if (maybeRef) grids.ref = maybeRef;\n        const maybeDelta = add(\"delta\", payload.matrices.delta?.values);\n        if (maybeDelta) grids.delta = maybeDelta;\n        return {\n            coins: universe,\n            quote: payload.quote,\n            ts: payload.ts,\n            grids\n        };\n    }\n    return {\n        async getSnapshot ({ coins, keys }) {\n            return getSnapshotInternal(coins, keys);\n        },\n        async getBenchmarkGrid (coins) {\n            const snap = await getSnapshotInternal(coins, [\n                \"benchmark\"\n            ]);\n            return snap.grids.benchmark;\n        },\n        async getIdPctGrid (coins) {\n            const snap = await getSnapshotInternal(coins, [\n                \"id_pct\"\n            ]);\n            return snap.grids.id_pct;\n        },\n        async getPctDrvGrid (coins) {\n            const snap = await getSnapshotInternal(coins, [\n                \"pct_drv\"\n            ]);\n            return snap.grids.pct_drv;\n        }\n    };\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvY29yZS9jb252ZXJ0ZXJzL3Byb3ZpZGVycy9tYXRyaWNlcy5odHRwLnRzIiwibWFwcGluZ3MiOiI7Ozs7QUFBQTs7O3NGQUdzRixHQXlCdEYsTUFBTUEsY0FBYyxDQUFDQyxJQUEwQkMsT0FBT0QsS0FBSyxJQUFJRSxJQUFJLEdBQUdDLFdBQVc7QUFFakYsU0FBU0MsYUFBYUMsS0FBZSxFQUFFQyxNQUFrQjtJQUN2RCxJQUFJLENBQUNBLFFBQVEsT0FBT0M7SUFDcEIsTUFBTUMsSUFBSUgsTUFBTUksTUFBTTtJQUN0QixNQUFNQyxNQUFrQkMsTUFBTUMsSUFBSSxDQUFDO1FBQUVILFFBQVFEO0lBQUUsR0FBRyxJQUFNRyxNQUFNQyxJQUFJLENBQUM7WUFBRUgsUUFBUUQ7UUFBRSxHQUFHLElBQU07SUFDeEYsSUFBSyxJQUFJSyxJQUFJLEdBQUdBLElBQUlMLEdBQUdLLElBQUs7UUFDMUIsTUFBTUMsT0FBT1QsS0FBSyxDQUFDUSxFQUFFO1FBQ3JCLE1BQU1FLE1BQU1ULE1BQU0sQ0FBQ1EsS0FBSyxJQUFJLENBQUM7UUFDN0IsSUFBSyxJQUFJRSxJQUFJLEdBQUdBLElBQUlSLEdBQUdRLElBQUs7WUFDMUIsSUFBSUgsTUFBTUcsR0FBRztZQUNiLE1BQU1DLFFBQVFaLEtBQUssQ0FBQ1csRUFBRTtZQUN0QixNQUFNRSxJQUFJSCxHQUFHLENBQUNFLE1BQU07WUFDcEIsTUFBTUUsTUFBTUMsT0FBT0Y7WUFDbkJSLEdBQUcsQ0FBQ0csRUFBRSxDQUFDRyxFQUFFLEdBQUdJLE9BQU9DLFFBQVEsQ0FBQ0YsT0FBT0EsTUFBTTtRQUMzQztJQUNGO0lBQ0EsT0FBT1Q7QUFDVDtBQUVPLFNBQVNZLHlCQUF5QlIsT0FBTyxFQUFFO0lBQ2hELE1BQU1TLFNBQVNULEtBQUtVLE9BQU8sQ0FBQyxPQUFPO0lBRW5DLGVBQWVDLFlBQVlwQixLQUEyQjtRQUNwRCxNQUFNcUIsS0FBSyxJQUFJQyxnQkFBZ0I7WUFBRUMsR0FBRzNCLE9BQU80QixLQUFLQyxHQUFH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LE9BQU8sTUFBTS9CLG9CQUFvQnZDLE9BQU87Z0JBQUM7YUFBUztZQUN4RCxPQUFPc0UsS0FBS25CLEtBQUssQ0FBQ0ssTUFBTTtRQUMxQjtRQUNBLE1BQU1nQixlQUFjeEUsS0FBSztZQUN2QixNQUFNc0UsT0FBTyxNQUFNL0Isb0JBQW9CdkMsT0FBTztnQkFBQzthQUFVO1lBQ3pELE9BQU9zRSxLQUFLbkIsS0FBSyxDQUFDTyxPQUFPO1FBQzNCO0lBQ0Y7QUFDRiIsInNvdXJjZXMiOlsiSDpcXFVzZXJzXFxHdXNcXHNvdXJjZVxccmVwb1xcZHluYW1pY3NcXGR5bmFtaWNzLWJcXGNyeXB0b3BpLWR5bmFtaWNzXFxzcmNcXGNvcmVcXGNvbnZlcnRlcnNcXHByb3ZpZGVyc1xcbWF0cmljZXMuaHR0cC50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gKiBGaWxlOiBzcmMvY29yZS9jb252ZXJ0ZXJzL3Byb3ZpZGVycy9tYXRyaWNlcy5odHRwLnRzXG4gKiBQdXJwb3NlOiBGZXRjaCBtYXRyaWNlcyBmcm9tIC9hcGkvbWF0cmljZXMvbGF0ZXN0IGtleWVkIGJ5IGNvaW5zIChuby1zdG9yZSkuXG4gKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXG5cbmltcG9ydCB0eXBlIHsgTWF0cmljZXNQcm92aWRlciwgTWF0cml4S2V5LCBNYXRyaXhTbmFwc2hvdCB9IGZyb20gXCJAL2NvcmUvY29udmVydGVycy9wcm92aWRlci50eXBlc1wiO1xuXG50eXBlIE1hdFZhbHVlcyA9IFJlY29yZDxzdHJpbmcsIFJlY29yZDxzdHJpbmcsIG51bWJlciB8IG51bGw+PjtcblxudHlwZSBNYXRyaWNlc0xhdGVzdFN1Y2Nlc3MgPSB7XG4gIG9rOiB0cnVlO1xuICBjb2luczogc3RyaW5nW107XG4gIHF1b3RlOiBzdHJpbmc7XG4gIHRzOiBudW1iZXI7XG4gIG1hdHJpY2VzOiB7XG4gICAgYmVuY2htYXJrOiB7IHZhbHVlczogTWF0VmFsdWVzIH07XG4gICAgcGN0MjRoPzogeyB2YWx1ZXM6IE1hdFZhbHVlcyB9O1xuICAgIGlkX3BjdDogeyB2YWx1ZXM6IE1hdFZhbHVlcyB9O1xuICAgIHBjdF9kcnY6IHsgdmFsdWVzOiBNYXRWYWx1ZXMgfTtcbiAgICBwY3RfcmVmPzogeyB2YWx1ZXM6IE1hdFZhbHVlcyB9O1xuICAgIHJlZj86IHsgdmFsdWVzOiBNYXRWYWx1ZXMgfTtcbiAgICBkZWx0YT86IHsgdmFsdWVzOiBNYXRWYWx1ZXMgfTtcbiAgfTtcbiAgbWV0YT86IHsgdW5pdmVyc2U/OiBzdHJpbmdbXSB9O1xufTtcblxudHlwZSBNYXRyaWNlc0xhdGVzdFBheWxvYWQgPSBNYXRyaWNlc0xhdGVzdFN1Y2Nlc3MgfCB7IG9rOiBmYWxzZTsgZXJyb3I6IHN0cmluZyB9O1xuXG5jb25zdCBlbnN1cmVVcHBlciA9IChzOiBzdHJpbmcgfCB1bmRlZmluZWQpID0+IFN0cmluZyhzID8/IFwiXCIpLnRyaW0oKS50b1VwcGVyQ2FzZSgpO1xuXG5mdW5jdGlvbiB2YWx1ZXNUb0dyaWQoY29pbnM6IHN0cmluZ1tdLCB2YWx1ZXM/OiBNYXRWYWx1ZXMpOiBudW1iZXJbXVtdIHwgdW5kZWZpbmVkIHtcbiAgaWYgKCF2YWx1ZXMpIHJldHVybiB1bmRlZmluZWQ7XG4gIGNvbnN0IG4gPSBjb2lucy5sZW5ndGg7XG4gIGNvbnN0IG91dDogbnVtYmVyW11bXSA9IEFycmF5LmZyb20oeyBsZW5ndGg6IG4gfSwgKCkgPT4gQXJyYXkuZnJvbSh7IGxlbmd0aDogbiB9LCAoKSA9PiAwKSk7XG4gIGZvciAobGV0IGkgPSAwOyBpIDwgbjsgaSsrKSB7XG4gICAgY29uc3QgYmFzZSA9IGNvaW5zW2ldITtcbiAgICBjb25zdCByb3cgPSB2YWx1ZXNbYmFzZV0gPz8ge307XG4gICAgZm9yIChsZXQgaiA9IDA7IGogPCBuOyBqKyspIHtcbiAgICAgIGlmIChpID09PSBqKSBjb250aW51ZTtcbiAgICAgIGNvbnN0IHF1b3RlID0gY29pbnNbal0hO1xuICAgICAgY29uc3QgdiA9IHJvd1txdW90ZV07XG4gICAgICBjb25zdCBudW0gPSBOdW1iZXIodik7XG4gICAgICBvdXRbaV1bal0gPSBOdW1iZXIuaXNGaW5pdGUobnVtKSA/IG51bSA6IDA7XG4gICAgfVxuICB9XG4gIHJldHVybiBvdXQ7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBtYWtlTWF0cmljZXNIdHRwUHJvdmlkZXIoYmFzZSA9IFwiXCIpOiBNYXRyaWNlc1Byb3ZpZGVyIHtcbiAgY29uc3Qgb3JpZ2luID0gYmFzZS5yZXBsYWNlKC9cXC8kLywgXCJcIik7XG5cbiAgYXN5bmMgZnVuY3Rpb24gZmV0Y2hMYXRlc3QoY29pbnM6IHN0cmluZ1tdIHwgdW5kZWZpbmVkKTogUHJvbWlzZTxNYXRyaWNlc0xhdGVzdFN1Y2Nlc3M+IHtcbiAgICBjb25zdCBxcyA9IG5ldyBVUkxTZWFyY2hQYXJhbXMoeyB0OiBTdHJpbmcoRGF0ZS5ub3coKSkgfSk7XG4gICAgaWYgKGNvaW5zICYmIGNvaW5zLmxlbmd0aCkgcXMuc2V0KFwiY29pbnNcIiwgY29pbnMuam9pbihcIixcIikpO1xuXG4gICAgY29uc3QgcmVzID0gYXdhaXQgZmV0Y2goYCR7b3JpZ2lufS9hcGkvbWF0cmljZXMvbGF0ZXN0PyR7cXN9YCwge1xuICAgICAgY2FjaGU6IFwibm8tc3RvcmVcIixcbiAgICAgIG5leHQ6IHsgcmV2YWxpZGF0ZTogMCB9LFxuICAgIH0pO1xuXG4gICAgaWYgKCFyZXMub2spIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihgbWF0cmljZXMgaHR0cCAke3Jlcy5zdGF0dXN9YCk7XG4gICAgfVxuXG4gICAgY29uc3QgZGF0YSA9IChhd2FpdCByZXMuanNvbigpKSBhcyBNYXRyaWNlc0xhdGVzdFBheWxvYWQ7XG4gICAgaWYgKCFkYXRhLm9rKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoZGF0YS5lcnJvciB8fCBcIm1hdHJpY2VzIGxhdGVzdCBlcnJvclwiKTtcbiAgICB9XG4gICAgcmV0dXJuIGRhdGE7XG4gIH1cblxuICBhc3luYyBmdW5jdGlvbiBnZXRTbmFwc2hvdEludGVybmFsKGNvaW5zOiBzdHJpbmdbXSwga2V5cz86IE1hdHJpeEtleVtdKTogUHJvbWlzZTxNYXRyaXhTbmFwc2hvdD4ge1xuICAgIGNvbnN0IHBheWxvYWQgPSBhd2FpdCBmZXRjaExhdGVzdChjb2lucyk7XG4gICAgY29uc3QgdW5pdmVyc2VTcmMgPSBwYXlsb2FkLm1ldGE/LnVuaXZlcnNlID8/IHBheWxvYWQuY29pbnMgPz8gY29pbnM7XG4gICAgY29uc3QgdW5pdmVyc2UgPSB1bml2ZXJzZVNyYy5tYXAoZW5zdXJlVXBwZXIpO1xuXG4gICAgY29uc3Qgc2VsZWN0ZWQgPSBrZXlzID8gbmV3IFNldChrZXlzKSA6IG51bGw7XG4gICAgY29uc3QgYWRkID0gKGtleTogTWF0cml4S2V5LCB2YWx1ZXM/OiBNYXRWYWx1ZXMpID0+IHtcbiAgICAgIGlmICghdmFsdWVzKSByZXR1cm4gdW5kZWZpbmVkO1xuICAgICAgaWYgKHNlbGVjdGVkICYmICFzZWxlY3RlZC5oYXMoa2V5KSkgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICAgIHJldHVybiB2YWx1ZXNUb0dyaWQodW5pdmVyc2UsIHZhbHVlcyk7XG4gICAgfTtcblxuICAgIGNvbnN0IGdyaWRzOiBQYXJ0aWFsPFJlY29yZDxNYXRyaXhLZXksIG51bWJlcltdW10+PiA9IHt9O1xuICAgIGNvbnN0IG1heWJlQmVuY2htYXJrID0gYWRkKFwiYmVuY2htYXJrXCIsIHBheWxvYWQubWF0cmljZXMuYmVuY2htYXJrLnZhbHVlcyk7XG4gICAgaWYgKG1heWJlQmVuY2htYXJrKSBncmlkcy5iZW5jaG1hcmsgPSBtYXliZUJlbmNobWFyaztcblxuICAgIGNvbnN0IG1heWJlSWRQY3QgPSBhZGQoXCJpZF9wY3RcIiwgcGF5bG9hZC5tYXRyaWNlcy5pZF9wY3QudmFsdWVzKTtcbiAgICBpZiAobWF5YmVJZFBjdCkgZ3JpZHMuaWRfcGN0ID0gbWF5YmVJZFBjdDtcblxuICAgIGNvbnN0IG1heWJlUGN0RHJ2ID0gYWRkKFwicGN0X2RydlwiLCBwYXlsb2FkLm1hdHJpY2VzLnBjdF9kcnYudmFsdWVzKTtcbiAgICBpZiAobWF5YmVQY3REcnYpIGdyaWRzLnBjdF9kcnYgPSBtYXliZVBjdERydjtcblxuICAgIGNvbnN0IG1heWJlUGN0MjRoID0gYWRkKFwicGN0MjRoXCIsIHBheWxvYWQubWF0cmljZXMucGN0MjRoPy52YWx1ZXMpO1xuICAgIGlmIChtYXliZVBjdDI0aCkgZ3JpZHMucGN0MjRoID0gbWF5YmVQY3QyNGg7XG5cbiAgICBjb25zdCBtYXliZVBjdFJlZiA9IGFkZChcInBjdF9yZWZcIiwgcGF5bG9hZC5tYXRyaWNlcy5wY3RfcmVmPy52YWx1ZXMpO1xuICAgIGlmIChtYXliZVBjdFJlZikgZ3JpZHMucGN0X3JlZiA9IG1heWJlUGN0UmVmO1xuXG4gICAgY29uc3QgbWF5YmVSZWYgPSBhZGQoXCJyZWZcIiwgcGF5bG9hZC5tYXRyaWNlcy5yZWY/LnZhbHVlcyk7XG4gICAgaWYgKG1heWJlUmVmKSBncmlkcy5yZWYgPSBtYXliZVJlZjtcblxuICAgIGNvbnN0IG1heWJlRGVsdGEgPSBhZGQoXCJkZWx0YVwiLCBwYXlsb2FkLm1hdHJpY2VzLmRlbHRhPy52YWx1ZXMpO1xuICAgIGlmIChtYXliZURlbHRhKSBncmlkcy5kZWx0YSA9IG1heWJlRGVsdGE7XG5cbiAgICByZXR1cm4ge1xuICAgICAgY29pbnM6IHVuaXZlcnNlLFxuICAgICAgcXVvdGU6IHBheWxvYWQucXVvdGUsXG4gICAgICB0czogcGF5bG9hZC50cyxcbiAgICAgIGdyaWRzLFxuICAgIH07XG4gIH1cblxuICByZXR1cm4ge1xuICAgIGFzeW5jIGdldFNuYXBzaG90KHsgY29pbnMsIGtleXMgfTogeyBjb2luczogc3RyaW5nW107IGtleXM/OiBNYXRyaXhLZXlbXSB9KSB7XG4gICAgICByZXR1cm4gZ2V0U25hcHNob3RJbnRlcm5hbChjb2lucywga2V5cyk7XG4gICAgfSxcbiAgICBhc3luYyBnZXRCZW5jaG1hcmtHcmlkKGNvaW5zKSB7XG4gICAgICBjb25zdCBzbmFwID0gYXdhaXQgZ2V0U25hcHNob3RJbnRlcm5hbChjb2lucywgW1wiYmVuY2htYXJrXCJdKTtcbiAgICAgIHJldHVybiBzbmFwLmdyaWRzLmJlbmNobWFyaztcbiAgICB9LFxuICAgIGFzeW5jIGdldElkUGN0R3JpZChjb2lucykge1xuICAgICAgY29uc3Qgc25hcCA9IGF3YWl0IGdldFNuYXBzaG90SW50ZXJuYWwoY29pbnMsIFtcImlkX3BjdFwiXSk7XG4gICAgICByZXR1cm4gc25hcC5ncmlkcy5pZF9wY3Q7XG4gICAgfSxcbiAgICBhc3luYyBnZXRQY3REcnZHcmlkKGNvaW5zKSB7XG4gICAgICBjb25zdCBzbmFwID0gYXdhaXQgZ2V0U25hcHNob3RJbnRlcm5hbChjb2lucywgW1wicGN0X2RydlwiXSk7XG4gICAgICByZXR1cm4gc25hcC5ncmlkcy5wY3RfZHJ2O1xuICAgIH0sXG4gIH07XG59XG4iXSwibmFtZXMiOlsiZW5zdXJlVXBwZXIiLCJzIiwiU3RyaW5nIiwidHJpbSIsInRvVXBwZXJDYXNlIiwidmFsdWVzVG9HcmlkIiwiY29pbnMiLCJ2YWx1ZXMiLCJ1bmRlZmluZWQiLCJuIiwibGVuZ3RoIiwib3V0IiwiQXJyYXkiLCJmcm9tIiwiaSIsImJhc2UiLCJyb3ciLCJqIiwicXVvdGUiLCJ2IiwibnVtIiwiTnVtYmVyIiwiaXNGaW5pdGUiLCJtYWtlTWF0cmljZXNIdHRwUHJvdmlkZXIiLCJvcmlnaW4iLCJyZXBsYWNlIiwiZmV0Y2hMYXRlc3QiLCJxcyIsIlVSTFNlYXJjaFBhcmFtcyIsInQiLCJEYXRlIiwibm93Iiwic2V0Iiwiam9pbiIsInJlcyIsImZldGNoIiwiY2FjaGUiLCJuZXh0IiwicmV2YWxpZGF0ZSIsIm9rIiwiRXJyb3IiLCJzdGF0dXMiLCJkYXRhIiwianNvbiIsImVycm9yIiwiZ2V0U25hcHNob3RJbnRlcm5hbCIsImtleXMiLCJwYXlsb2FkIiwidW5pdmVyc2VTcmMiLCJtZXRhIiwidW5pdmVyc2UiLCJtYXAiLCJzZWxlY3RlZCIsIlNldCIsImFkZCIsImtleSIsImhhcyIsImdyaWRzIiwibWF5YmVCZW5jaG1hcmsiLCJtYXRyaWNlcyIsImJlbmNobWFyayIsIm1heWJlSWRQY3QiLCJpZF9wY3QiLCJtYXliZVBjdERydiIsInBjdF9kcnYiLCJtYXliZVBjdDI0aCIsInBjdDI0aCIsIm1heWJlUGN0UmVmIiwicGN0X3JlZiIsIm1heWJlUmVmIiwicmVmIiwibWF5YmVEZWx0YSIsImRlbHRhIiwidHMiLCJnZXRTbmFwc2hvdCIsImdldEJlbmNobWFya0dyaWQiLCJzbmFwIiwiZ2V0SWRQY3RHcmlkIiwiZ2V0UGN0RHJ2R3JpZCJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./src/core/converters/providers/matrices.http.ts\n");

/***/ }),

/***/ "(rsc)/./src/core/converters/providers/mooaux.module.ts":
/*!********************************************************!*\
  !*** ./src/core/converters/providers/mooaux.module.ts ***!
  \********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   makeMooModuleProvider: () => (/* binding */ makeMooModuleProvider)\n/* harmony export */ });\n/* ----------------------------------------------------------------------------------\n* 3) File: src/converters/providers/mooaux.module.ts\n* ---------------------------------------------------------------------------------- */ function makeMooModuleProvider(deps) {\n    return {\n        getMea (pair) {\n            return deps.getMooForPair(pair);\n        }\n    };\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvY29yZS9jb252ZXJ0ZXJzL3Byb3ZpZGVycy9tb29hdXgubW9kdWxlLnRzIiwibWFwcGluZ3MiOiI7Ozs7QUFBQTs7cUZBRXFGLEdBUTlFLFNBQVNBLHNCQUFzQkMsSUFBbUI7SUFDdkQsT0FBTztRQUNMQyxRQUFPQyxJQUFJO1lBQ1QsT0FBT0YsS0FBS0csYUFBYSxDQUFDRDtRQUM1QjtJQUNGO0FBQ0YiLCJzb3VyY2VzIjpbIkg6XFxVc2Vyc1xcR3VzXFxzb3VyY2VcXHJlcG9cXGR5bmFtaWNzXFxkeW5hbWljcy1iXFxjcnlwdG9waS1keW5hbWljc1xcc3JjXFxjb3JlXFxjb252ZXJ0ZXJzXFxwcm92aWRlcnNcXG1vb2F1eC5tb2R1bGUudHMiXSwic291cmNlc0NvbnRlbnQiOlsiLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuKiAzKSBGaWxlOiBzcmMvY29udmVydGVycy9wcm92aWRlcnMvbW9vYXV4Lm1vZHVsZS50c1xuKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXG5cbmltcG9ydCB0eXBlIHsgTW9vQXV4UHJvdmlkZXIsIFBhaXIgfSBmcm9tIFwiQC9jb3JlL2NvbnZlcnRlcnMvcHJvdmlkZXIudHlwZXNcIjtcblxuZXhwb3J0IHR5cGUgTW9vTW9kdWxlRGVwcyA9IHtcbiAgZ2V0TW9vRm9yUGFpcjogKHBhaXI6IFBhaXIpID0+IFByb21pc2U8eyB2YWx1ZTogbnVtYmVyOyB0aWVyOiBzdHJpbmcgfT47XG59O1xuXG5leHBvcnQgZnVuY3Rpb24gbWFrZU1vb01vZHVsZVByb3ZpZGVyKGRlcHM6IE1vb01vZHVsZURlcHMpOiBNb29BdXhQcm92aWRlciB7XG4gIHJldHVybiB7XG4gICAgZ2V0TWVhKHBhaXIpIHtcbiAgICAgIHJldHVybiBkZXBzLmdldE1vb0ZvclBhaXIocGFpcik7XG4gICAgfSxcbiAgfSBzYXRpc2ZpZXMgTW9vQXV4UHJvdmlkZXI7XG59XG4iXSwibmFtZXMiOlsibWFrZU1vb01vZHVsZVByb3ZpZGVyIiwiZGVwcyIsImdldE1lYSIsInBhaXIiLCJnZXRNb29Gb3JQYWlyIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./src/core/converters/providers/mooaux.module.ts\n");

/***/ }),

/***/ "(rsc)/./src/core/converters/providers/straux.db.ts":
/*!****************************************************!*\
  !*** ./src/core/converters/providers/straux.db.ts ***!
  \****************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   makeStrDbProvider: () => (/* binding */ makeStrDbProvider)\n/* harmony export */ });\n/* ----------------------------------------------------------------------------------\r\n* 4) File: src/converters/providers/straux.db.ts\r\n* ---------------------------------------------------------------------------------- */ function makeStrDbProvider(db) {\n    function swapFromHist(hist) {\n        let count = 0;\n        let direction = \"frozen\";\n        for(let i = 1; i < hist.length; i++){\n            const ps = Math.sign(hist[i - 1] ?? 0);\n            const cs = Math.sign(hist[i] ?? 0);\n            if (ps !== cs && cs !== 0) count++;\n        }\n        const last = hist[hist.length - 1] ?? 0;\n        direction = last > 0 ? \"up\" : last < 0 ? \"down\" : \"frozen\";\n        return {\n            count,\n            direction\n        };\n    }\n    return {\n        async getSwapTag ({ from, to }) {\n            const h = await db.getIdPctHistory(from, to, 6);\n            return swapFromHist(h);\n        },\n        getGfm: ()=>db.getGfm(),\n        getShift: ()=>db.getShift(),\n        getVTendency: (pair)=>db.getVTendency(pair)\n    };\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvY29yZS9jb252ZXJ0ZXJzL3Byb3ZpZGVycy9zdHJhdXguZGIudHMiLCJtYXBwaW5ncyI6Ijs7OztBQUFBOztxRkFFcUYsR0FjOUUsU0FBU0Esa0JBQWtCQyxFQUFhO0lBQy9DLFNBQVNDLGFBQWFDLElBQWM7UUFDcEMsSUFBSUMsUUFBUTtRQUFHLElBQUlDLFlBQTJCO1FBQzlDLElBQUssSUFBSUMsSUFBSSxHQUFHQSxJQUFJSCxLQUFLSSxNQUFNLEVBQUVELElBQUs7WUFDdEMsTUFBTUUsS0FBS0MsS0FBS0MsSUFBSSxDQUFDUCxJQUFJLENBQUNHLElBQUksRUFBRSxJQUFJO1lBQ3BDLE1BQU1LLEtBQUtGLEtBQUtDLElBQUksQ0FBQ1AsSUFBSSxDQUFDRyxFQUFFLElBQUk7WUFDaEMsSUFBSUUsT0FBT0csTUFBTUEsT0FBTyxHQUFHUDtRQUMzQjtRQUNBLE1BQU1RLE9BQU9ULElBQUksQ0FBQ0EsS0FBS0ksTUFBTSxHQUFHLEVBQUUsSUFBSTtRQUN0Q0YsWUFBWU8sT0FBTyxJQUFJLE9BQU9BLE9BQU8sSUFBSSxTQUFTO1FBQ2xELE9BQU87WUFBRVI7WUFBT0M7UUFBVTtJQUMxQjtJQUNBLE9BQU87UUFDUCxNQUFNUSxZQUFXLEVBQUVDLElBQUksRUFBRUMsRUFBRSxFQUFFO1lBQzdCLE1BQU1DLElBQUksTUFBTWYsR0FBR2dCLGVBQWUsQ0FBQ0gsTUFBTUMsSUFBSTtZQUM3QyxPQUFPYixhQUFhYztRQUNwQjtRQUNBRSxRQUFRLElBQU1qQixHQUFHaUIsTUFBTTtRQUN2QkMsVUFBVSxJQUFNbEIsR0FBR2tCLFFBQVE7UUFDM0JDLGNBQWMsQ0FBQ0MsT0FBU3BCLEdBQUdtQixZQUFZLENBQUNDO0lBQ3hDO0FBQ0EiLCJzb3VyY2VzIjpbIkg6XFxVc2Vyc1xcR3VzXFxzb3VyY2VcXHJlcG9cXGR5bmFtaWNzXFxkeW5hbWljcy1iXFxjcnlwdG9waS1keW5hbWljc1xcc3JjXFxjb3JlXFxjb252ZXJ0ZXJzXFxwcm92aWRlcnNcXHN0cmF1eC5kYi50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcbiogNCkgRmlsZTogc3JjL2NvbnZlcnRlcnMvcHJvdmlkZXJzL3N0cmF1eC5kYi50c1xyXG4qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cclxuXHJcblxyXG5pbXBvcnQgdHlwZSB7IFN0ckF1eFByb3ZpZGVyLCBTd2FwRGlyZWN0aW9uLCBTd2FwVGFnLCBQYWlyIH0gZnJvbSBcIkAvY29yZS9jb252ZXJ0ZXJzL3Byb3ZpZGVyLnR5cGVzXCI7XHJcblxyXG5cclxuZXhwb3J0IHR5cGUgU3RyRGJEZXBzID0ge1xyXG5nZXRJZFBjdEhpc3Rvcnk6IChmcm9tOiBzdHJpbmcsIHRvOiBzdHJpbmcsIGxhc3ROPzogbnVtYmVyKSA9PiBQcm9taXNlPG51bWJlcltdPjtcclxuZ2V0R2ZtOiAoKSA9PiBQcm9taXNlPG51bWJlcj47XHJcbmdldFNoaWZ0OiAoKSA9PiBQcm9taXNlPG51bWJlcj47XHJcbmdldFZUZW5kZW5jeTogKHBhaXI6IFBhaXIpID0+IFByb21pc2U8bnVtYmVyPjtcclxufTtcclxuXHJcblxyXG5leHBvcnQgZnVuY3Rpb24gbWFrZVN0ckRiUHJvdmlkZXIoZGI6IFN0ckRiRGVwcyk6IFN0ckF1eFByb3ZpZGVyIHtcclxuZnVuY3Rpb24gc3dhcEZyb21IaXN0KGhpc3Q6IG51bWJlcltdKTogU3dhcFRhZyB7XHJcbmxldCBjb3VudCA9IDA7IGxldCBkaXJlY3Rpb246IFN3YXBEaXJlY3Rpb24gPSBcImZyb3plblwiO1xyXG5mb3IgKGxldCBpID0gMTsgaSA8IGhpc3QubGVuZ3RoOyBpKyspIHtcclxuY29uc3QgcHMgPSBNYXRoLnNpZ24oaGlzdFtpIC0gMV0gPz8gMCk7XHJcbmNvbnN0IGNzID0gTWF0aC5zaWduKGhpc3RbaV0gPz8gMCk7XHJcbmlmIChwcyAhPT0gY3MgJiYgY3MgIT09IDApIGNvdW50Kys7XHJcbn1cclxuY29uc3QgbGFzdCA9IGhpc3RbaGlzdC5sZW5ndGggLSAxXSA/PyAwO1xyXG5kaXJlY3Rpb24gPSBsYXN0ID4gMCA/IFwidXBcIiA6IGxhc3QgPCAwID8gXCJkb3duXCIgOiBcImZyb3plblwiO1xyXG5yZXR1cm4geyBjb3VudCwgZGlyZWN0aW9uIH07XHJcbn1cclxucmV0dXJuIHtcclxuYXN5bmMgZ2V0U3dhcFRhZyh7IGZyb20sIHRvIH0pIHtcclxuY29uc3QgaCA9IGF3YWl0IGRiLmdldElkUGN0SGlzdG9yeShmcm9tLCB0bywgNik7XHJcbnJldHVybiBzd2FwRnJvbUhpc3QoaCk7XHJcbn0sXHJcbmdldEdmbTogKCkgPT4gZGIuZ2V0R2ZtKCksXHJcbmdldFNoaWZ0OiAoKSA9PiBkYi5nZXRTaGlmdCgpLFxyXG5nZXRWVGVuZGVuY3k6IChwYWlyKSA9PiBkYi5nZXRWVGVuZGVuY3kocGFpciksXHJcbn0gc2F0aXNmaWVzIFN0ckF1eFByb3ZpZGVyO1xyXG59Il0sIm5hbWVzIjpbIm1ha2VTdHJEYlByb3ZpZGVyIiwiZGIiLCJzd2FwRnJvbUhpc3QiLCJoaXN0IiwiY291bnQiLCJkaXJlY3Rpb24iLCJpIiwibGVuZ3RoIiwicHMiLCJNYXRoIiwic2lnbiIsImNzIiwibGFzdCIsImdldFN3YXBUYWciLCJmcm9tIiwidG8iLCJoIiwiZ2V0SWRQY3RIaXN0b3J5IiwiZ2V0R2ZtIiwiZ2V0U2hpZnQiLCJnZXRWVGVuZGVuY3kiLCJwYWlyIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./src/core/converters/providers/straux.db.ts\n");

/***/ }),

/***/ "(rsc)/./src/core/converters/providers/wallet.http.ts":
/*!******************************************************!*\
  !*** ./src/core/converters/providers/wallet.http.ts ***!
  \******************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   makeWalletHttpProvider: () => (/* binding */ makeWalletHttpProvider)\n/* harmony export */ });\n/* ----------------------------------------------------------------------------------\r\n* 6) File: src/converters/providers/wallet.http.ts\r\n* ---------------------------------------------------------------------------------- */ const DEFAULT_BASE = '/api/market/wallet';\nconst DEFAULT_ORIGIN = typeof process !== 'undefined' && process.env.NEXT_PUBLIC_BASE_URL || 'http://localhost:3000';\nfunction makeWalletHttpProvider(base = DEFAULT_BASE) {\n    return {\n        async getWallet (symbol) {\n            try {\n                const origin =  true ? DEFAULT_ORIGIN : 0;\n                const url = new URL(base, origin);\n                if (!url.pathname.startsWith('/')) {\n                    url.pathname = `/${url.pathname}`;\n                }\n                if (!url.searchParams.has('provider')) url.searchParams.set('provider', 'binance');\n                const res = await fetch(url.toString(), {\n                    cache: 'no-store'\n                });\n                if (!res.ok) return 0;\n                const payload = await res.json();\n                const wallets = payload?.wallets ?? {};\n                const key = String(symbol ?? '').trim().toUpperCase();\n                const val = Number(wallets[key]);\n                return Number.isFinite(val) ? val : 0;\n            } catch  {\n                return 0;\n            }\n        }\n    };\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvY29yZS9jb252ZXJ0ZXJzL3Byb3ZpZGVycy93YWxsZXQuaHR0cC50cyIsIm1hcHBpbmdzIjoiOzs7O0FBQUE7O3FGQUVxRixHQUlyRixNQUFNQSxlQUFlO0FBQ3JCLE1BQU1DLGlCQUNKLE9BQVFDLFlBQVksZUFBZUEsUUFBUUMsR0FBRyxDQUFDQyxvQkFBb0IsSUFDbkU7QUFFSyxTQUFTQyx1QkFBdUJDLE9BQU9OLFlBQVk7SUFDeEQsT0FBTztRQUNMLE1BQU1PLFdBQVVDLE1BQU07WUFDcEIsSUFBSTtnQkFDRixNQUFNQyxTQUFTLEtBQTZCLEdBQUdSLGlCQUFpQlMsQ0FBc0I7Z0JBQ3RGLE1BQU1FLE1BQU0sSUFBSUMsSUFBSVAsTUFBTUc7Z0JBQzFCLElBQUksQ0FBQ0csSUFBSUUsUUFBUSxDQUFDQyxVQUFVLENBQUMsTUFBTTtvQkFDakNILElBQUlFLFFBQVEsR0FBRyxDQUFDLENBQUMsRUFBRUYsSUFBSUUsUUFBUSxFQUFFO2dCQUNuQztnQkFDQSxJQUFJLENBQUNGLElBQUlJLFlBQVksQ0FBQ0MsR0FBRyxDQUFDLGFBQWFMLElBQUlJLFlBQVksQ0FBQ0UsR0FBRyxDQUFDLFlBQVk7Z0JBRXhFLE1BQU1DLE1BQU0sTUFBTUMsTUFBTVIsSUFBSVMsUUFBUSxJQUFJO29CQUFFQyxPQUFPO2dCQUFXO2dCQUM1RCxJQUFJLENBQUNILElBQUlJLEVBQUUsRUFBRSxPQUFPO2dCQUNwQixNQUFNQyxVQUFVLE1BQU1MLElBQUlNLElBQUk7Z0JBQzlCLE1BQU1DLFVBQVdGLFNBQVNFLFdBQVcsQ0FBQztnQkFDdEMsTUFBTUMsTUFBTUMsT0FBT3BCLFVBQVUsSUFBSXFCLElBQUksR0FBR0MsV0FBVztnQkFDbkQsTUFBTUMsTUFBTUMsT0FBT04sT0FBTyxDQUFDQyxJQUFJO2dCQUMvQixPQUFPSyxPQUFPQyxRQUFRLENBQUNGLE9BQU9BLE1BQU07WUFDdEMsRUFBRSxPQUFNO2dCQUNOLE9BQU87WUFDVDtRQUNGO0lBQ0Y7QUFDRiIsInNvdXJjZXMiOlsiSDpcXFVzZXJzXFxHdXNcXHNvdXJjZVxccmVwb1xcZHluYW1pY3NcXGR5bmFtaWNzLWJcXGNyeXB0b3BpLWR5bmFtaWNzXFxzcmNcXGNvcmVcXGNvbnZlcnRlcnNcXHByb3ZpZGVyc1xcd2FsbGV0Lmh0dHAudHMiXSwic291cmNlc0NvbnRlbnQiOlsiLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG4qIDYpIEZpbGU6IHNyYy9jb252ZXJ0ZXJzL3Byb3ZpZGVycy93YWxsZXQuaHR0cC50c1xyXG4qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cclxuXHJcbmltcG9ydCB0eXBlIHsgV2FsbGV0SHR0cFByb3ZpZGVyIH0gZnJvbSAnQC9jb3JlL2NvbnZlcnRlcnMvcHJvdmlkZXIudHlwZXMnO1xyXG5cclxuY29uc3QgREVGQVVMVF9CQVNFID0gJy9hcGkvbWFya2V0L3dhbGxldCc7XHJcbmNvbnN0IERFRkFVTFRfT1JJR0lOID1cclxuICAodHlwZW9mIHByb2Nlc3MgIT09ICd1bmRlZmluZWQnICYmIHByb2Nlc3MuZW52Lk5FWFRfUFVCTElDX0JBU0VfVVJMKSB8fFxyXG4gICdodHRwOi8vbG9jYWxob3N0OjMwMDAnO1xyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIG1ha2VXYWxsZXRIdHRwUHJvdmlkZXIoYmFzZSA9IERFRkFVTFRfQkFTRSk6IFdhbGxldEh0dHBQcm92aWRlciB7XHJcbiAgcmV0dXJuIHtcclxuICAgIGFzeW5jIGdldFdhbGxldChzeW1ib2wpIHtcclxuICAgICAgdHJ5IHtcclxuICAgICAgICBjb25zdCBvcmlnaW4gPSB0eXBlb2Ygd2luZG93ID09PSAndW5kZWZpbmVkJyA/IERFRkFVTFRfT1JJR0lOIDogd2luZG93LmxvY2F0aW9uLm9yaWdpbjtcclxuICAgICAgICBjb25zdCB1cmwgPSBuZXcgVVJMKGJhc2UsIG9yaWdpbik7XHJcbiAgICAgICAgaWYgKCF1cmwucGF0aG5hbWUuc3RhcnRzV2l0aCgnLycpKSB7XHJcbiAgICAgICAgICB1cmwucGF0aG5hbWUgPSBgLyR7dXJsLnBhdGhuYW1lfWA7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICghdXJsLnNlYXJjaFBhcmFtcy5oYXMoJ3Byb3ZpZGVyJykpIHVybC5zZWFyY2hQYXJhbXMuc2V0KCdwcm92aWRlcicsICdiaW5hbmNlJyk7XHJcblxyXG4gICAgICAgIGNvbnN0IHJlcyA9IGF3YWl0IGZldGNoKHVybC50b1N0cmluZygpLCB7IGNhY2hlOiAnbm8tc3RvcmUnIH0pO1xyXG4gICAgICAgIGlmICghcmVzLm9rKSByZXR1cm4gMDtcclxuICAgICAgICBjb25zdCBwYXlsb2FkID0gYXdhaXQgcmVzLmpzb24oKTtcclxuICAgICAgICBjb25zdCB3YWxsZXRzID0gKHBheWxvYWQ/LndhbGxldHMgPz8ge30pIGFzIFJlY29yZDxzdHJpbmcsIHVua25vd24+O1xyXG4gICAgICAgIGNvbnN0IGtleSA9IFN0cmluZyhzeW1ib2wgPz8gJycpLnRyaW0oKS50b1VwcGVyQ2FzZSgpO1xyXG4gICAgICAgIGNvbnN0IHZhbCA9IE51bWJlcih3YWxsZXRzW2tleV0pO1xyXG4gICAgICAgIHJldHVybiBOdW1iZXIuaXNGaW5pdGUodmFsKSA/IHZhbCA6IDA7XHJcbiAgICAgIH0gY2F0Y2gge1xyXG4gICAgICAgIHJldHVybiAwO1xyXG4gICAgICB9XHJcbiAgICB9LFxyXG4gIH0gc2F0aXNmaWVzIFdhbGxldEh0dHBQcm92aWRlcjtcclxufVxyXG4iXSwibmFtZXMiOlsiREVGQVVMVF9CQVNFIiwiREVGQVVMVF9PUklHSU4iLCJwcm9jZXNzIiwiZW52IiwiTkVYVF9QVUJMSUNfQkFTRV9VUkwiLCJtYWtlV2FsbGV0SHR0cFByb3ZpZGVyIiwiYmFzZSIsImdldFdhbGxldCIsInN5bWJvbCIsIm9yaWdpbiIsIndpbmRvdyIsImxvY2F0aW9uIiwidXJsIiwiVVJMIiwicGF0aG5hbWUiLCJzdGFydHNXaXRoIiwic2VhcmNoUGFyYW1zIiwiaGFzIiwic2V0IiwicmVzIiwiZmV0Y2giLCJ0b1N0cmluZyIsImNhY2hlIiwib2siLCJwYXlsb2FkIiwianNvbiIsIndhbGxldHMiLCJrZXkiLCJTdHJpbmciLCJ0cmltIiwidG9VcHBlckNhc2UiLCJ2YWwiLCJOdW1iZXIiLCJpc0Zpbml0ZSJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./src/core/converters/providers/wallet.http.ts\n");

/***/ }),

/***/ "(rsc)/./src/core/db/index.ts":
/*!******************************!*\
  !*** ./src/core/db/index.ts ***!
  \******************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   appendAppLedger: () => (/* binding */ appendAppLedger),\n/* harmony export */   createAppSession: () => (/* binding */ createAppSession),\n/* harmony export */   currentAppSession: () => (/* binding */ currentAppSession),\n/* harmony export */   db: () => (/* binding */ db),\n/* harmony export */   getOpening: () => (/* binding */ getOpening),\n/* harmony export */   getPool: () => (/* binding */ getPool),\n/* harmony export */   query: () => (/* binding */ query),\n/* harmony export */   sessionKV: () => (/* binding */ sessionKV),\n/* harmony export */   useAppSession: () => (/* binding */ useAppSession),\n/* harmony export */   withClient: () => (/* binding */ withClient)\n/* harmony export */ });\n/* harmony import */ var pg__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! pg */ \"pg\");\n/* harmony import */ var crypto__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! crypto */ \"crypto\");\n/* harmony import */ var crypto__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(crypto__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var fs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! fs */ \"fs\");\n/* harmony import */ var fs__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(fs__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var path__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! path */ \"path\");\n/* harmony import */ var path__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(path__WEBPACK_IMPORTED_MODULE_3__);\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([pg__WEBPACK_IMPORTED_MODULE_0__]);\npg__WEBPACK_IMPORTED_MODULE_0__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n// Unified Postgres access layer (connection + helpers + ledgers + openings + sessions)\n\n\n\n\n/*  Pool setup  */ function asBool(v, def = false) {\n    if (v == null) return def;\n    const s = String(v).trim().toLowerCase();\n    return s === \"1\" || s === \"true\" || s === \"yes\" || s === \"on\";\n}\nconst useUrl = !!process.env.DATABASE_URL;\nconst base = useUrl ? {\n    connectionString: String(process.env.DATABASE_URL)\n} : {\n    host: String(process.env.PGHOST ?? \"localhost\"),\n    port: Number(process.env.PGPORT ?? 5432),\n    user: String(process.env.PGUSER ?? \"\"),\n    password: String(process.env.PGPASSWORD ?? \"\"),\n    database: String(process.env.PGDATABASE ?? \"\")\n};\nconst poolConfig = {\n    ...base,\n    max: Number(process.env.DB_POOL_MAX ?? 10),\n    idleTimeoutMillis: Number(process.env.DB_IDLE_MS ?? 45000),\n    connectionTimeoutMillis: Number(process.env.DB_CONN_TIMEOUT_MS ?? 5000),\n    ssl: asBool(process.env.DB_SSL) ? {\n        rejectUnauthorized: false\n    } : undefined\n};\nfunction getPool() {\n    if (!global.__core_pg_pool__) {\n        global.__core_pg_pool__ = new pg__WEBPACK_IMPORTED_MODULE_0__.Pool(poolConfig);\n    }\n    return global.__core_pg_pool__;\n}\nconst db = getPool();\n/** Convenience wrappers */ async function withClient(fn) {\n    const c = await db.connect();\n    try {\n        return await fn(c);\n    } finally{\n        c.release();\n    }\n}\nasync function query(text, params) {\n    return db.query(text, params);\n}\nasync function appendAppLedger(e) {\n    await db.query(`INSERT INTO app_ledger (topic,event,payload,session_id,idempotency_key,ts_epoch_ms)\n     VALUES ($1,$2,$3,$4,$5,$6)\n     ON CONFLICT (idempotency_key) DO NOTHING`, [\n        e.topic,\n        e.event,\n        e.payload ?? null,\n        e.session_id ?? null,\n        e.idempotency_key ?? null,\n        e.ts_epoch_ms\n    ]);\n}\n/*  Opening helpers  */ const openingCache = new Map();\nconst keyStr = (b, q, w, sid)=>`${b}:${q}:${w}:${sid}`;\nasync function getOpening(base, quote = \"USDT\", window = \"1h\", appSessionId = \"global\") {\n    const ck = keyStr(base, quote, window, appSessionId);\n    const hit = openingCache.get(ck);\n    if (hit) return hit;\n    const q = `\n    SELECT opening_ts AS ts, opening_price AS price\n      FROM strategy_aux.str_aux_session\n     WHERE pair_base=$1 AND pair_quote=$2 AND window_key=$3\n       AND ($4::text IS NULL OR app_session_id=$4)\n       AND opening_stamp=TRUE\n  ORDER BY opening_ts DESC LIMIT 1\n  `;\n    const { rows } = await db.query(q, [\n        base,\n        quote,\n        window,\n        appSessionId\n    ]);\n    if (rows.length) {\n        const val = {\n            price: Number(rows[0].price),\n            ts: Number(rows[0].ts)\n        };\n        openingCache.set(ck, val);\n        return val;\n    }\n    return null;\n}\n/*  Sessions  */ const SESSION_FILE = (0,path__WEBPACK_IMPORTED_MODULE_3__.resolve)(process.cwd(), \"var\", \"current-session.json\");\nfunction ensureDir() {\n    (0,fs__WEBPACK_IMPORTED_MODULE_2__.mkdirSync)((0,path__WEBPACK_IMPORTED_MODULE_3__.dirname)(SESSION_FILE), {\n        recursive: true\n    });\n}\nfunction newSessionId() {\n    return `sess_${Date.now()}_${(0,crypto__WEBPACK_IMPORTED_MODULE_1__.randomBytes)(4).toString(\"hex\")}`;\n}\nasync function createAppSession(id) {\n    const sid = id ?? newSessionId();\n    await db.query(`INSERT INTO app_sessions (app_session_id) VALUES ($1)\n     ON CONFLICT (app_session_id) DO NOTHING`, [\n        sid\n    ]);\n    return sid;\n}\nfunction useAppSession(id) {\n    ensureDir();\n    (0,fs__WEBPACK_IMPORTED_MODULE_2__.writeFileSync)(SESSION_FILE, JSON.stringify({\n        id\n    }, null, 2), \"utf8\");\n}\nfunction currentAppSession() {\n    if (process.env.APP_SESSION_ID) return String(process.env.APP_SESSION_ID);\n    if (!(0,fs__WEBPACK_IMPORTED_MODULE_2__.existsSync)(SESSION_FILE)) return null;\n    try {\n        const j = JSON.parse((0,fs__WEBPACK_IMPORTED_MODULE_2__.readFileSync)(SESSION_FILE, \"utf8\"));\n        return typeof j?.id === \"string\" ? j.id : null;\n    } catch  {\n        return null;\n    }\n}\n/*  Ephemeral Session KV  */ class SessionKV {\n    set(ns, key, v, ttlMs) {\n        const k = `${ns}:${key}`;\n        this.s.set(k, {\n            v,\n            exp: ttlMs ? Date.now() + ttlMs : undefined\n        });\n    }\n    get(ns, key) {\n        const k = `${ns}:${key}`;\n        const e = this.s.get(k);\n        if (!e) return;\n        if (e.exp && Date.now() > e.exp) {\n            this.s.delete(k);\n            return;\n        }\n        return e.v;\n    }\n    delete(ns, key) {\n        this.s.delete(`${ns}:${key}`);\n    }\n    clear(ns) {\n        if (!ns) return this.s.clear();\n        const p = `${ns}:`;\n        for (const k of Array.from(this.s.keys()))if (k.startsWith(p)) this.s.delete(k);\n    }\n    constructor(){\n        this.s = new Map();\n    }\n}\nconst sessionKV = new SessionKV();\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUFDMUYsQ0FBQyxDQUFDZ0csS0FBSztRQUM1QixNQUFNQyxJQUFJLEdBQUdQLEdBQUcsQ0FBQyxDQUFDO1FBQ2xCLEtBQUssTUFBTUcsS0FBS0ssTUFBTUMsSUFBSSxDQUFDLElBQUksQ0FBQ25HLENBQUMsQ0FBQ29HLElBQUksSUFBSyxJQUFJUCxFQUFFUSxVQUFVLENBQUNKLElBQUksSUFBSSxDQUFDakcsQ0FBQyxDQUFDK0YsTUFBTSxDQUFDRjtJQUNoRjs7YUFmUTdGLElBQUksSUFBSXFEOztBQWdCbEI7QUFFTyxNQUFNaUQsWUFBWSxJQUFJYixZQUFpQiIsInNvdXJjZXMiOlsiSDpcXFVzZXJzXFxHdXNcXHNvdXJjZVxccmVwb1xcZHluYW1pY3NcXGR5bmFtaWNzLWJcXGNyeXB0b3BpLWR5bmFtaWNzXFxzcmNcXGNvcmVcXGRiXFxpbmRleC50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBVbmlmaWVkIFBvc3RncmVzIGFjY2VzcyBsYXllciAoY29ubmVjdGlvbiArIGhlbHBlcnMgKyBsZWRnZXJzICsgb3BlbmluZ3MgKyBzZXNzaW9ucylcblxuaW1wb3J0IHsgUG9vbCwgdHlwZSBQb29sQ2xpZW50LCB0eXBlIFF1ZXJ5UmVzdWx0IH0gZnJvbSBcInBnXCI7XG5pbXBvcnQgeyByYW5kb21CeXRlcyB9IGZyb20gXCJjcnlwdG9cIjtcbmltcG9ydCB7IG1rZGlyU3luYywgZXhpc3RzU3luYywgcmVhZEZpbGVTeW5jLCB3cml0ZUZpbGVTeW5jIH0gZnJvbSBcImZzXCI7XG5pbXBvcnQgeyByZXNvbHZlLCBkaXJuYW1lIH0gZnJvbSBcInBhdGhcIjtcblxuLyog4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSAIFBvb2wgc2V0dXAg4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSAICovXG5cbmZ1bmN0aW9uIGFzQm9vbCh2OiBhbnksIGRlZiA9IGZhbHNlKSB7XG4gIGlmICh2ID09IG51bGwpIHJldHVybiBkZWY7XG4gIGNvbnN0IHMgPSBTdHJpbmcodikudHJpbSgpLnRvTG93ZXJDYXNlKCk7XG4gIHJldHVybiBzID09PSBcIjFcIiB8fCBzID09PSBcInRydWVcIiB8fCBzID09PSBcInllc1wiIHx8IHMgPT09IFwib25cIjtcbn1cblxuY29uc3QgdXNlVXJsID0gISFwcm9jZXNzLmVudi5EQVRBQkFTRV9VUkw7XG5jb25zdCBiYXNlID0gdXNlVXJsXG4gID8geyBjb25uZWN0aW9uU3RyaW5nOiBTdHJpbmcocHJvY2Vzcy5lbnYuREFUQUJBU0VfVVJMKSB9XG4gIDoge1xuICAgICAgaG9zdDogU3RyaW5nKHByb2Nlc3MuZW52LlBHSE9TVCA/PyBcImxvY2FsaG9zdFwiKSxcbiAgICAgIHBvcnQ6IE51bWJlcihwcm9jZXNzLmVudi5QR1BPUlQgPz8gNTQzMiksXG4gICAgICB1c2VyOiBTdHJpbmcocHJvY2Vzcy5lbnYuUEdVU0VSID8/IFwiXCIpLFxuICAgICAgcGFzc3dvcmQ6IFN0cmluZyhwcm9jZXNzLmVudi5QR1BBU1NXT1JEID8/IFwiXCIpLFxuICAgICAgZGF0YWJhc2U6IFN0cmluZyhwcm9jZXNzLmVudi5QR0RBVEFCQVNFID8/IFwiXCIpLFxuICAgIH07XG5cbmNvbnN0IHBvb2xDb25maWcgPSB7XG4gIC4uLmJhc2UsXG4gIG1heDogTnVtYmVyKHByb2Nlc3MuZW52LkRCX1BPT0xfTUFYID8/IDEwKSxcbiAgaWRsZVRpbWVvdXRNaWxsaXM6IE51bWJlcihwcm9jZXNzLmVudi5EQl9JRExFX01TID8/IDQ1XzAwMCksXG4gIGNvbm5lY3Rpb25UaW1lb3V0TWlsbGlzOiBOdW1iZXIocHJvY2Vzcy5lbnYuREJfQ09OTl9USU1FT1VUX01TID8/IDVfMDAwKSxcbiAgc3NsOiBhc0Jvb2wocHJvY2Vzcy5lbnYuREJfU1NMKSA/IHsgcmVqZWN0VW5hdXRob3JpemVkOiBmYWxzZSBhcyBjb25zdCB9IDogdW5kZWZpbmVkLFxufTtcblxuZGVjbGFyZSBnbG9iYWwge1xuICAgXG4gIHZhciBfX2NvcmVfcGdfcG9vbF9fOiBQb29sIHwgdW5kZWZpbmVkO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0UG9vbCgpOiBQb29sIHtcbiAgaWYgKCFnbG9iYWwuX19jb3JlX3BnX3Bvb2xfXykge1xuICAgIGdsb2JhbC5fX2NvcmVfcGdfcG9vbF9fID0gbmV3IFBvb2wocG9vbENvbmZpZyBhcyBhbnkpO1xuICB9XG4gIHJldHVybiBnbG9iYWwuX19jb3JlX3BnX3Bvb2xfXyE7XG59XG5cbmV4cG9ydCBjb25zdCBkYiA9IGdldFBvb2woKTtcblxuLyoqIENvbnZlbmllbmNlIHdyYXBwZXJzICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gd2l0aENsaWVudDxUPihmbjogKGM6IFBvb2xDbGllbnQpID0+IFByb21pc2U8VD4pIHtcbiAgY29uc3QgYyA9IGF3YWl0IGRiLmNvbm5lY3QoKTtcbiAgdHJ5IHsgcmV0dXJuIGF3YWl0IGZuKGMpOyB9IGZpbmFsbHkgeyBjLnJlbGVhc2UoKTsgfVxufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gcXVlcnk8VCA9IGFueT4odGV4dDogc3RyaW5nLCBwYXJhbXM/OiBhbnlbXSk6IFByb21pc2U8UXVlcnlSZXN1bHQ8VD4+IHtcbiAgcmV0dXJuIGRiLnF1ZXJ5PFQ+KHRleHQsIHBhcmFtcyk7XG59XG5cbi8qIOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgCBBcHAgTGVkZ2VyIOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgCAqL1xuZXhwb3J0IHR5cGUgQXBwTGVkZ2VyRXZlbnQgPSB7XG4gIHRvcGljOiBzdHJpbmc7XG4gIGV2ZW50OiBzdHJpbmc7XG4gIHBheWxvYWQ/OiB1bmtub3duO1xuICBzZXNzaW9uX2lkPzogc3RyaW5nO1xuICBpZGVtcG90ZW5jeV9rZXk/OiBzdHJpbmc7XG4gIHRzX2Vwb2NoX21zOiBudW1iZXI7XG59O1xuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gYXBwZW5kQXBwTGVkZ2VyKGU6IEFwcExlZGdlckV2ZW50KSB7XG4gIGF3YWl0IGRiLnF1ZXJ5KFxuICAgIGBJTlNFUlQgSU5UTyBhcHBfbGVkZ2VyICh0b3BpYyxldmVudCxwYXlsb2FkLHNlc3Npb25faWQsaWRlbXBvdGVuY3lfa2V5LHRzX2Vwb2NoX21zKVxuICAgICBWQUxVRVMgKCQxLCQyLCQzLCQ0LCQ1LCQ2KVxuICAgICBPTiBDT05GTElDVCAoaWRlbXBvdGVuY3lfa2V5KSBETyBOT1RISU5HYCxcbiAgICBbZS50b3BpYywgZS5ldmVudCwgZS5wYXlsb2FkID8/IG51bGwsIGUuc2Vzc2lvbl9pZCA/PyBudWxsLCBlLmlkZW1wb3RlbmN5X2tleSA/PyBudWxsLCBlLnRzX2Vwb2NoX21zXVxuICApO1xufVxuXG4vKiDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIAgT3BlbmluZyBoZWxwZXJzIOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgCAqL1xuXG5jb25zdCBvcGVuaW5nQ2FjaGUgPSBuZXcgTWFwPHN0cmluZywgeyBwcmljZTogbnVtYmVyOyB0czogbnVtYmVyIH0+KCk7XG5jb25zdCBrZXlTdHIgPSAoYjogc3RyaW5nLCBxOiBzdHJpbmcsIHc6IHN0cmluZywgc2lkOiBzdHJpbmcpID0+IGAke2J9OiR7cX06JHt3fToke3NpZH1gO1xuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0T3BlbmluZyhiYXNlOiBzdHJpbmcsIHF1b3RlID0gXCJVU0RUXCIsIHdpbmRvdyA9IFwiMWhcIiwgYXBwU2Vzc2lvbklkID0gXCJnbG9iYWxcIikge1xuICBjb25zdCBjayA9IGtleVN0cihiYXNlLCBxdW90ZSwgd2luZG93LCBhcHBTZXNzaW9uSWQpO1xuICBjb25zdCBoaXQgPSBvcGVuaW5nQ2FjaGUuZ2V0KGNrKTtcbiAgaWYgKGhpdCkgcmV0dXJuIGhpdDtcblxuICBjb25zdCBxID0gYFxuICAgIFNFTEVDVCBvcGVuaW5nX3RzIEFTIHRzLCBvcGVuaW5nX3ByaWNlIEFTIHByaWNlXG4gICAgICBGUk9NIHN0cmF0ZWd5X2F1eC5zdHJfYXV4X3Nlc3Npb25cbiAgICAgV0hFUkUgcGFpcl9iYXNlPSQxIEFORCBwYWlyX3F1b3RlPSQyIEFORCB3aW5kb3dfa2V5PSQzXG4gICAgICAgQU5EICgkNDo6dGV4dCBJUyBOVUxMIE9SIGFwcF9zZXNzaW9uX2lkPSQ0KVxuICAgICAgIEFORCBvcGVuaW5nX3N0YW1wPVRSVUVcbiAgT1JERVIgQlkgb3BlbmluZ190cyBERVNDIExJTUlUIDFcbiAgYDtcbiAgY29uc3QgeyByb3dzIH0gPSBhd2FpdCBkYi5xdWVyeShxLCBbYmFzZSwgcXVvdGUsIHdpbmRvdywgYXBwU2Vzc2lvbklkXSk7XG4gIGlmIChyb3dzLmxlbmd0aCkge1xuICAgIGNvbnN0IHZhbCA9IHsgcHJpY2U6IE51bWJlcihyb3dzWzBdLnByaWNlKSwgdHM6IE51bWJlcihyb3dzWzBdLnRzKSB9O1xuICAgIG9wZW5pbmdDYWNoZS5zZXQoY2ssIHZhbCk7XG4gICAgcmV0dXJuIHZhbDtcbiAgfVxuICByZXR1cm4gbnVsbDtcbn1cblxuLyog4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSAIFNlc3Npb25zIOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgCAqL1xuXG5jb25zdCBTRVNTSU9OX0ZJTEUgPSByZXNvbHZlKHByb2Nlc3MuY3dkKCksIFwidmFyXCIsIFwiY3VycmVudC1zZXNzaW9uLmpzb25cIik7XG5mdW5jdGlvbiBlbnN1cmVEaXIoKSB7IG1rZGlyU3luYyhkaXJuYW1lKFNFU1NJT05fRklMRSksIHsgcmVjdXJzaXZlOiB0cnVlIH0pOyB9XG5mdW5jdGlvbiBuZXdTZXNzaW9uSWQoKSB7IHJldHVybiBgc2Vzc18ke0RhdGUubm93KCl9XyR7cmFuZG9tQnl0ZXMoNCkudG9TdHJpbmcoXCJoZXhcIil9YDsgfVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gY3JlYXRlQXBwU2Vzc2lvbihpZD86IHN0cmluZyk6IFByb21pc2U8c3RyaW5nPiB7XG4gIGNvbnN0IHNpZCA9IGlkID8/IG5ld1Nlc3Npb25JZCgpO1xuICBhd2FpdCBkYi5xdWVyeShcbiAgICBgSU5TRVJUIElOVE8gYXBwX3Nlc3Npb25zIChhcHBfc2Vzc2lvbl9pZCkgVkFMVUVTICgkMSlcbiAgICAgT04gQ09ORkxJQ1QgKGFwcF9zZXNzaW9uX2lkKSBETyBOT1RISU5HYCxcbiAgICBbc2lkXVxuICApO1xuICByZXR1cm4gc2lkO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gdXNlQXBwU2Vzc2lvbihpZDogc3RyaW5nKSB7XG4gIGVuc3VyZURpcigpO1xuICB3cml0ZUZpbGVTeW5jKFNFU1NJT05fRklMRSwgSlNPTi5zdHJpbmdpZnkoeyBpZCB9LCBudWxsLCAyKSwgXCJ1dGY4XCIpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gY3VycmVudEFwcFNlc3Npb24oKTogc3RyaW5nIHwgbnVsbCB7XG4gIGlmIChwcm9jZXNzLmVudi5BUFBfU0VTU0lPTl9JRCkgcmV0dXJuIFN0cmluZyhwcm9jZXNzLmVudi5BUFBfU0VTU0lPTl9JRCk7XG4gIGlmICghZXhpc3RzU3luYyhTRVNTSU9OX0ZJTEUpKSByZXR1cm4gbnVsbDtcbiAgdHJ5IHtcbiAgICBjb25zdCBqID0gSlNPTi5wYXJzZShyZWFkRmlsZVN5bmMoU0VTU0lPTl9GSUxFLCBcInV0ZjhcIikpO1xuICAgIHJldHVybiB0eXBlb2Ygaj8uaWQgPT09IFwic3RyaW5nXCIgPyBqLmlkIDogbnVsbDtcbiAgfSBjYXRjaCB7IHJldHVybiBudWxsOyB9XG59XG5cbi8qIOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgCBFcGhlbWVyYWwgU2Vzc2lvbiBLViDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIAgKi9cbmNsYXNzIFNlc3Npb25LVjxWID0gdW5rbm93bj4ge1xuICBwcml2YXRlIHMgPSBuZXcgTWFwPHN0cmluZywgeyB2OiBWOyBleHA/OiBudW1iZXIgfT4oKTtcbiAgc2V0KG5zOiBzdHJpbmcsIGtleTogc3RyaW5nLCB2OiBWLCB0dGxNcz86IG51bWJlcikge1xuICAgIGNvbnN0IGsgPSBgJHtuc306JHtrZXl9YDsgdGhpcy5zLnNldChrLCB7IHYsIGV4cDogdHRsTXMgPyBEYXRlLm5vdygpK3R0bE1zIDogdW5kZWZpbmVkIH0pO1xuICB9XG4gIGdldChuczogc3RyaW5nLCBrZXk6IHN0cmluZyk6IFYgfCB1bmRlZmluZWQge1xuICAgIGNvbnN0IGsgPSBgJHtuc306JHtrZXl9YDsgY29uc3QgZSA9IHRoaXMucy5nZXQoayk7XG4gICAgaWYgKCFlKSByZXR1cm47XG4gICAgaWYgKGUuZXhwICYmIERhdGUubm93KCkgPiBlLmV4cCkgeyB0aGlzLnMuZGVsZXRlKGspOyByZXR1cm47IH1cbiAgICByZXR1cm4gZS52O1xuICB9XG4gIGRlbGV0ZShuczogc3RyaW5nLCBrZXk6IHN0cmluZykgeyB0aGlzLnMuZGVsZXRlKGAke25zfToke2tleX1gKTsgfVxuICBjbGVhcihucz86IHN0cmluZykge1xuICAgIGlmICghbnMpIHJldHVybiB0aGlzLnMuY2xlYXIoKTtcbiAgICBjb25zdCBwID0gYCR7bnN9OmA7XG4gICAgZm9yIChjb25zdCBrIG9mIEFycmF5LmZyb20odGhpcy5zLmtleXMoKSkpIGlmIChrLnN0YXJ0c1dpdGgocCkpIHRoaXMucy5kZWxldGUoayk7XG4gIH1cbn1cblxuZXhwb3J0IGNvbnN0IHNlc3Npb25LViA9IG5ldyBTZXNzaW9uS1Y8YW55PigpO1xuIl0sIm5hbWVzIjpbIlBvb2wiLCJyYW5kb21CeXRlcyIsIm1rZGlyU3luYyIsImV4aXN0c1N5bmMiLCJyZWFkRmlsZVN5bmMiLCJ3cml0ZUZpbGVTeW5jIiwicmVzb2x2ZSIsImRpcm5hbWUiLCJhc0Jvb2wiLCJ2IiwiZGVmIiwicyIsIlN0cmluZyIsInRyaW0iLCJ0b0xvd2VyQ2FzZSIsInVzZVVybCIsInByb2Nlc3MiLCJlbnYiLCJEQVRBQkFTRV9VUkwiLCJiYXNlIiwiY29ubmVjdGlvblN0cmluZyIsImhvc3QiLCJQR0hPU1QiLCJwb3J0IiwiTnVtYmVyIiwiUEdQT1JUIiwidXNlciIsIlBHVVNFUiIsInBhc3N3b3JkIiwiUEdQQVNTV09SRCIsImRhdGFiYXNlIiwiUEdEQVRBQkFTRSIsInBvb2xDb25maWciLCJtYXgiLCJEQl9QT09MX01BWCIsImlkbGVUaW1lb3V0TWlsbGlzIiwiREJfSURMRV9NUyIsImNvbm5lY3Rpb25UaW1lb3V0TWlsbGlzIiwiREJfQ09OTl9USU1FT1VUX01TIiwic3NsIiwiREJfU1NMIiwicmVqZWN0VW5hdXRob3JpemVkIiwidW5kZWZpbmVkIiwiZ2V0UG9vbCIsImdsb2JhbCIsIl9fY29yZV9wZ19wb29sX18iLCJkYiIsIndpdGhDbGllbnQiLCJmbiIsImMiLCJjb25uZWN0IiwicmVsZWFzZSIsInF1ZXJ5IiwidGV4dCIsInBhcmFtcyIsImFwcGVuZEFwcExlZGdlciIsImUiLCJ0b3BpYyIsImV2ZW50IiwicGF5bG9hZCIsInNlc3Npb25faWQiLCJpZGVtcG90ZW5jeV9rZXkiLCJ0c19lcG9jaF9tcyIsIm9wZW5pbmdDYWNoZSIsIk1hcCIsImtleVN0ciIsImIiLCJxIiwidyIsInNpZCIsImdldE9wZW5pbmciLCJxdW90ZSIsIndpbmRvdyIsImFwcFNlc3Npb25JZCIsImNrIiwiaGl0IiwiZ2V0Iiwicm93cyIsImxlbmd0aCIsInZhbCIsInByaWNlIiwidHMiLCJzZXQiLCJTRVNTSU9OX0ZJTEUiLCJjd2QiLCJlbnN1cmVEaXIiLCJyZWN1cnNpdmUiLCJuZXdTZXNzaW9uSWQiLCJEYXRlIiwibm93IiwidG9TdHJpbmciLCJjcmVhdGVBcHBTZXNzaW9uIiwiaWQiLCJ1c2VBcHBTZXNzaW9uIiwiSlNPTiIsInN0cmluZ2lmeSIsImN1cnJlbnRBcHBTZXNzaW9uIiwiQVBQX1NFU1NJT05fSUQiLCJqIiwicGFyc2UiLCJTZXNzaW9uS1YiLCJucyIsImtleSIsInR0bE1zIiwiayIsImV4cCIsImRlbGV0ZSIsImNsZWFyIiwicCIsIkFycmF5IiwiZnJvbSIsImtleXMiLCJzdGFydHNXaXRoIiwic2Vzc2lvbktWIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./src/core/db/index.ts\n");

/***/ }),

/***/ "(rsc)/./src/core/features/moo-aux/grid.ts":
/*!*******************************************!*\
  !*** ./src/core/features/moo-aux/grid.ts ***!
  \*******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   buildMeaAux: () => (/* binding */ buildMeaAux),\n/* harmony export */   pickTierName: () => (/* binding */ pickTierName),\n/* harmony export */   toRenderableRows: () => (/* binding */ toRenderableRows)\n/* harmony export */ });\n/* harmony import */ var _tiers__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./tiers */ \"(rsc)/./src/core/features/moo-aux/tiers.ts\");\n// PATCH: src/core/features/moo-aux/grid.ts\n\nfunction pickTierName(idp, rules = _tiers__WEBPACK_IMPORTED_MODULE_0__.DEFAULT_TIER_RULES) {\n    const a = Math.abs(Number(idp || 0));\n    const r = rules.find((r)=>a >= r.minAbs && (r.maxAbs == null || a <= r.maxAbs));\n    return r?.name;\n}\nfunction buildMeaAux(params) {\n    const { coins, idPct, balances, coverage, rules = _tiers__WEBPACK_IMPORTED_MODULE_0__.DEFAULT_TIER_RULES } = params;\n    const k = Math.max(1, params.k ?? coins.length - 1);\n    const mood = Number.isFinite(params.moodCoeff ?? 1) ? params.moodCoeff : 1;\n    const out = {};\n    for (const base of coins){\n        const avail = balances[base] ?? 0;\n        const row = {};\n        for (const quote of coins){\n            if (quote === base) {\n                row[quote] = null;\n                continue;\n            }\n            if (coverage && coverage[base] && coverage[base][quote] === false) {\n                row[quote] = null;\n                continue;\n            }\n            const idp = idPct?.[base]?.[quote];\n            const w = (0,_tiers__WEBPACK_IMPORTED_MODULE_0__.getTierWeighting)(Number(idp ?? 0), rules); // legacy bin weight\n            const cell = avail * (1 / k) * w * mood; // APPLY mood here\n            row[quote] = Number.isFinite(cell) ? cell : 0;\n        }\n        out[base] = row;\n    }\n    return out;\n}\n// ...rest unchanged...\nfunction toRenderableRows(mea) {\n// keeps your existing shape (no change needed)\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvY29yZS9mZWF0dXJlcy9tb28tYXV4L2dyaWQudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFBLDJDQUEyQztBQUVvQjtBQU94RCxTQUFTRSxhQUFhQyxHQUFXLEVBQUVDLFFBQW9CSixzREFBa0I7SUFDOUUsTUFBTUssSUFBSUMsS0FBS0MsR0FBRyxDQUFDQyxPQUFPTCxPQUFPO0lBQ2pDLE1BQU1NLElBQUlMLE1BQU1NLElBQUksQ0FBQ0QsQ0FBQUEsSUFBS0osS0FBS0ksRUFBRUUsTUFBTSxJQUFLRixDQUFBQSxFQUFFRyxNQUFNLElBQUksUUFBUVAsS0FBS0ksRUFBRUcsTUFBTTtJQUM3RSxPQUFPSCxHQUFHSTtBQUNaO0FBRU8sU0FBU0MsWUFBWUMsTUFRM0I7SUFDQyxNQUFNLEVBQUVDLEtBQUssRUFBRUMsS0FBSyxFQUFFQyxRQUFRLEVBQUVDLFFBQVEsRUFBRWYsUUFBUUosc0RBQWtCLEVBQUUsR0FBR2U7SUFDekUsTUFBTUssSUFBSWQsS0FBS2UsR0FBRyxDQUFDLEdBQUdOLE9BQU9LLENBQUMsSUFBSUosTUFBTU0sTUFBTSxHQUFHO0lBQ2pELE1BQU1DLE9BQU9mLE9BQU9nQixRQUFRLENBQUNULE9BQU9VLFNBQVMsSUFBSSxLQUFNVixPQUFPVSxTQUFTLEdBQWM7SUFFckYsTUFBTUMsTUFBa0IsQ0FBQztJQUN6QixLQUFLLE1BQU1DLFFBQVFYLE1BQU87UUFDeEIsTUFBTVksUUFBUVYsUUFBUSxDQUFDUyxLQUFLLElBQUk7UUFDaEMsTUFBTUUsTUFBcUMsQ0FBQztRQUM1QyxLQUFLLE1BQU1DLFNBQVNkLE1BQU87WUFDekIsSUFBSWMsVUFBVUgsTUFBTTtnQkFBRUUsR0FBRyxDQUFDQyxNQUFNLEdBQUc7Z0JBQU07WUFBVTtZQUNuRCxJQUFJWCxZQUFZQSxRQUFRLENBQUNRLEtBQUssSUFBSVIsUUFBUSxDQUFDUSxLQUFLLENBQUNHLE1BQU0sS0FBSyxPQUFPO2dCQUFFRCxHQUFHLENBQUNDLE1BQU0sR0FBRztnQkFBTTtZQUFVO1lBRWxHLE1BQU0zQixNQUFNYyxPQUFPLENBQUNVLEtBQUssRUFBRSxDQUFDRyxNQUFNO1lBQ2xDLE1BQU1DLElBQUk5Qix3REFBZ0JBLENBQUNPLE9BQU9MLE9BQU8sSUFBSUMsUUFBUSxvQkFBb0I7WUFDekUsTUFBTTRCLE9BQU9KLFFBQVMsS0FBSVIsQ0FBQUEsSUFBS1csSUFBSVIsTUFBTSxrQkFBa0I7WUFDM0RNLEdBQUcsQ0FBQ0MsTUFBTSxHQUFHdEIsT0FBT2dCLFFBQVEsQ0FBQ1EsUUFBUUEsT0FBTztRQUM5QztRQUNBTixHQUFHLENBQUNDLEtBQUssR0FBR0U7SUFDZDtJQUNBLE9BQU9IO0FBQ1Q7QUFFQSx1QkFBdUI7QUFFaEIsU0FBU08saUJBQWlCQyxHQUs5QjtBQUNELCtDQUErQztBQUNqRCIsInNvdXJjZXMiOlsiSDpcXFVzZXJzXFxHdXNcXHNvdXJjZVxccmVwb1xcZHluYW1pY3NcXGR5bmFtaWNzLWJcXGNyeXB0b3BpLWR5bmFtaWNzXFxzcmNcXGNvcmVcXGZlYXR1cmVzXFxtb28tYXV4XFxncmlkLnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIFBBVENIOiBzcmMvY29yZS9mZWF0dXJlcy9tb28tYXV4L2dyaWQudHNcclxuaW1wb3J0IHR5cGUgeyBUaWVyUnVsZSB9IGZyb20gXCIuL3RpZXJzXCI7XHJcbmltcG9ydCB7IERFRkFVTFRfVElFUl9SVUxFUywgZ2V0VGllcldlaWdodGluZyB9IGZyb20gXCIuL3RpZXJzXCI7XHJcblxyXG5leHBvcnQgdHlwZSBJZFBjdEdyaWQgPSBSZWNvcmQ8c3RyaW5nLCBSZWNvcmQ8c3RyaW5nLCBudW1iZXIgfCBudWxsPj47XHJcbmV4cG9ydCB0eXBlIEJhbGFuY2VzTWFwID0gUmVjb3JkPHN0cmluZywgbnVtYmVyPjtcclxuZXhwb3J0IHR5cGUgTWVhQXV4R3JpZCA9IFJlY29yZDxzdHJpbmcsIFJlY29yZDxzdHJpbmcsIG51bWJlciB8IG51bGw+PjtcclxuZXhwb3J0IHR5cGUgTWVhUGFpciA9IHsgYmFzZTogc3RyaW5nOyBxdW90ZTogc3RyaW5nOyB2YWx1ZTogbnVtYmVyOyBmcm96ZW4/OiBib29sZWFuIH07XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gcGlja1RpZXJOYW1lKGlkcDogbnVtYmVyLCBydWxlczogVGllclJ1bGVbXSA9IERFRkFVTFRfVElFUl9SVUxFUyk6IHN0cmluZyB8IHVuZGVmaW5lZCB7XHJcbiAgY29uc3QgYSA9IE1hdGguYWJzKE51bWJlcihpZHAgfHwgMCkpO1xyXG4gIGNvbnN0IHIgPSBydWxlcy5maW5kKHIgPT4gYSA+PSByLm1pbkFicyAmJiAoci5tYXhBYnMgPT0gbnVsbCB8fCBhIDw9IHIubWF4QWJzKSk7XHJcbiAgcmV0dXJuIHI/Lm5hbWU7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBidWlsZE1lYUF1eChwYXJhbXM6IHtcclxuICBjb2luczogc3RyaW5nW107XHJcbiAgaWRQY3Q6IElkUGN0R3JpZDtcclxuICBiYWxhbmNlczogQmFsYW5jZXNNYXA7XHJcbiAgaz86IG51bWJlcjtcclxuICBydWxlcz86IFRpZXJSdWxlW107XHJcbiAgY292ZXJhZ2U/OiBSZWNvcmQ8c3RyaW5nLCBSZWNvcmQ8c3RyaW5nLCBib29sZWFuPj47XHJcbiAgbW9vZENvZWZmPzogbnVtYmVyOyAvLyBORVdcclxufSk6IE1lYUF1eEdyaWQge1xyXG4gIGNvbnN0IHsgY29pbnMsIGlkUGN0LCBiYWxhbmNlcywgY292ZXJhZ2UsIHJ1bGVzID0gREVGQVVMVF9USUVSX1JVTEVTIH0gPSBwYXJhbXM7XHJcbiAgY29uc3QgayA9IE1hdGgubWF4KDEsIHBhcmFtcy5rID8/IGNvaW5zLmxlbmd0aCAtIDEpO1xyXG4gIGNvbnN0IG1vb2QgPSBOdW1iZXIuaXNGaW5pdGUocGFyYW1zLm1vb2RDb2VmZiA/PyAxKSA/IChwYXJhbXMubW9vZENvZWZmIGFzIG51bWJlcikgOiAxO1xyXG5cclxuICBjb25zdCBvdXQ6IE1lYUF1eEdyaWQgPSB7fTtcclxuICBmb3IgKGNvbnN0IGJhc2Ugb2YgY29pbnMpIHtcclxuICAgIGNvbnN0IGF2YWlsID0gYmFsYW5jZXNbYmFzZV0gPz8gMDtcclxuICAgIGNvbnN0IHJvdzogUmVjb3JkPHN0cmluZywgbnVtYmVyIHwgbnVsbD4gPSB7fTtcclxuICAgIGZvciAoY29uc3QgcXVvdGUgb2YgY29pbnMpIHtcclxuICAgICAgaWYgKHF1b3RlID09PSBiYXNlKSB7IHJvd1txdW90ZV0gPSBudWxsOyBjb250aW51ZTsgfVxyXG4gICAgICBpZiAoY292ZXJhZ2UgJiYgY292ZXJhZ2VbYmFzZV0gJiYgY292ZXJhZ2VbYmFzZV1bcXVvdGVdID09PSBmYWxzZSkgeyByb3dbcXVvdGVdID0gbnVsbDsgY29udGludWU7IH1cclxuXHJcbiAgICAgIGNvbnN0IGlkcCA9IGlkUGN0Py5bYmFzZV0/LltxdW90ZV07XHJcbiAgICAgIGNvbnN0IHcgPSBnZXRUaWVyV2VpZ2h0aW5nKE51bWJlcihpZHAgPz8gMCksIHJ1bGVzKTsgLy8gbGVnYWN5IGJpbiB3ZWlnaHRcclxuICAgICAgY29uc3QgY2VsbCA9IGF2YWlsICogKDEgLyBrKSAqIHcgKiBtb29kOyAvLyBBUFBMWSBtb29kIGhlcmVcclxuICAgICAgcm93W3F1b3RlXSA9IE51bWJlci5pc0Zpbml0ZShjZWxsKSA/IGNlbGwgOiAwO1xyXG4gICAgfVxyXG4gICAgb3V0W2Jhc2VdID0gcm93O1xyXG4gIH1cclxuICByZXR1cm4gb3V0O1xyXG59XHJcblxyXG4vLyAuLi5yZXN0IHVuY2hhbmdlZC4uLlxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHRvUmVuZGVyYWJsZVJvd3MobWVhOiBSZWNvcmQ8c3RyaW5nLCBSZWNvcmQ8c3RyaW5nLCB7XHJcbiAgaWRfcGN0OiBudW1iZXI7XHJcbiAgd2VpZ2h0OiBudW1iZXI7XHJcbiAgdGllck5hbWU/OiBzdHJpbmc7XHJcbiAgaXNOdWxsPzogYm9vbGVhbjtcclxufT4+KXtcclxuICAvLyBrZWVwcyB5b3VyIGV4aXN0aW5nIHNoYXBlIChubyBjaGFuZ2UgbmVlZGVkKVxyXG59XHJcblxyXG4iXSwibmFtZXMiOlsiREVGQVVMVF9USUVSX1JVTEVTIiwiZ2V0VGllcldlaWdodGluZyIsInBpY2tUaWVyTmFtZSIsImlkcCIsInJ1bGVzIiwiYSIsIk1hdGgiLCJhYnMiLCJOdW1iZXIiLCJyIiwiZmluZCIsIm1pbkFicyIsIm1heEFicyIsIm5hbWUiLCJidWlsZE1lYUF1eCIsInBhcmFtcyIsImNvaW5zIiwiaWRQY3QiLCJiYWxhbmNlcyIsImNvdmVyYWdlIiwiayIsIm1heCIsImxlbmd0aCIsIm1vb2QiLCJpc0Zpbml0ZSIsIm1vb2RDb2VmZiIsIm91dCIsImJhc2UiLCJhdmFpbCIsInJvdyIsInF1b3RlIiwidyIsImNlbGwiLCJ0b1JlbmRlcmFibGVSb3dzIiwibWVhIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./src/core/features/moo-aux/grid.ts\n");

/***/ }),

/***/ "(rsc)/./src/core/features/moo-aux/tiers.ts":
/*!********************************************!*\
  !*** ./src/core/features/moo-aux/tiers.ts ***!
  \********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   DEFAULT_TIER_RULES: () => (/* binding */ DEFAULT_TIER_RULES),\n/* harmony export */   MOOD_CLASS_ROWS: () => (/* binding */ MOOD_CLASS_ROWS),\n/* harmony export */   MOOD_CLASS_WEIGHTS: () => (/* binding */ MOOD_CLASS_WEIGHTS),\n/* harmony export */   getTierWeighting: () => (/* binding */ getTierWeighting)\n/* harmony export */ });\n// src/core/features/moo-aux/tiers.ts\n/** ---------- legacy MEA bins (id_pct  weight) ---------- */ // default bins (tune freely)\nconst DEFAULT_TIER_RULES = [\n    {\n        key: \"alpha\",\n        name: \"Alpha\",\n        minAbs: 0.00016,\n        maxAbs: 0.00032,\n        weight: 0.15\n    },\n    {\n        key: \"beta\",\n        name: \"Beta\",\n        minAbs: 0.00033,\n        maxAbs: 0.00045,\n        weight: 0.55\n    },\n    {\n        key: \"gamma\",\n        name: \"Gamma\",\n        minAbs: 0.00046,\n        maxAbs: 0.00076,\n        weight: 1.15\n    },\n    {\n        key: \"delta\",\n        name: \"Delta\",\n        minAbs: 0.00077,\n        maxAbs: 0.00120,\n        weight: 0.65\n    },\n    {\n        key: \"epsilon\",\n        name: \"Epsilon\",\n        minAbs: 0.00121,\n        maxAbs: null,\n        weight: 0.50\n    }\n];\nfunction getTierWeighting(id_pct, rules = DEFAULT_TIER_RULES) {\n    const a = Math.abs(Number(id_pct || 0));\n    const r = rules.find((r)=>a >= r.minAbs && (r.maxAbs == null || a <= r.maxAbs));\n    return r ? r.weight : 0;\n}\n/**\r\n * Base per-mood weights (mirror of engine presets).\r\n * These are normalized inside the engines at runtime; keep relative shape here.\r\n */ const MOOD_CLASS_WEIGHTS = {\n    std: {\n        vTendency: 0.28,\n        vSwap: 0.22,\n        Volt: 0.16,\n        Inertia: 0.14,\n        Amp: 0.10,\n        Disruption: 0.10\n    },\n    trl: {\n        vTendency: 0.40,\n        vSwap: 0.25,\n        Inertia: 0.18,\n        Volt: 0.07,\n        Amp: 0.05,\n        Disruption: 0.05\n    },\n    rev: {\n        vSwap: 0.34,\n        Disruption: 0.20,\n        Amp: 0.16,\n        vTendency: 0.16,\n        Volt: 0.08,\n        Inertia: 0.06\n    },\n    inj: {\n        GFMdelta: 0.38,\n        vSwap: 0.22,\n        Volt: 0.18,\n        Disruption: 0.12,\n        Inertia: 0.05,\n        Amp: 0.05\n    },\n    drn: {\n        GFMdelta: 0.36,\n        Volt: 0.22,\n        vSwap: 0.16,\n        Disruption: 0.12,\n        Inertia: 0.08,\n        Amp: 0.06\n    },\n    wnd: {\n        Inertia: 0.36,\n        Volt: 0.18,\n        Amp: 0.10,\n        vSwap: 0.12,\n        vTendency: 0.14,\n        Disruption: 0.10\n    },\n    emg: {\n        Disruption: 0.30,\n        Volt: 0.26,\n        vSwap: 0.20,\n        vTendency: 0.12,\n        Amp: 0.07,\n        Inertia: 0.05\n    },\n    stb: {\n        Inertia: 0.44,\n        vTendency: 0.18,\n        vSwap: 0.16,\n        Volt: 0.08,\n        Amp: 0.06,\n        Disruption: 0.08\n    },\n    flo: {\n        Amp: 0.30,\n        vSwap: 0.28,\n        Volt: 0.16,\n        vTendency: 0.12,\n        Disruption: 0.08,\n        Inertia: 0.06\n    }\n};\nconst MOOD_CLASS_ROWS = Object.keys(MOOD_CLASS_WEIGHTS).map((mn)=>({\n        mn,\n        weights: MOOD_CLASS_WEIGHTS[mn],\n        intervals: DEFAULT_TIER_RULES\n    }));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvY29yZS9mZWF0dXJlcy9tb28tYXV4L3RpZXJzLnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBQSxxQ0FBcUM7QUFFckMsNERBQTRELEdBUzVELDZCQUE2QjtBQUN0QixNQUFNQSxxQkFBaUM7SUFDNUM7UUFBRUMsS0FBSztRQUFXQyxNQUFNO1FBQVdDLFFBQVE7UUFBU0MsUUFBUTtRQUFTQyxRQUFRO0lBQUs7SUFDbEY7UUFBRUosS0FBSztRQUFXQyxNQUFNO1FBQVdDLFFBQVE7UUFBU0MsUUFBUTtRQUFTQyxRQUFRO0lBQUs7SUFDbEY7UUFBRUosS0FBSztRQUFXQyxNQUFNO1FBQVdDLFFBQVE7UUFBU0MsUUFBUTtRQUFTQyxRQUFRO0lBQUs7SUFDbEY7UUFBRUosS0FBSztRQUFXQyxNQUFNO1FBQVdDLFFBQVE7UUFBU0MsUUFBUTtRQUFTQyxRQUFRO0lBQUs7SUFDbEY7UUFBRUosS0FBSztRQUFXQyxNQUFNO1FBQVdDLFFBQVE7UUFBU0MsUUFBUTtRQUFVQyxRQUFRO0lBQUs7Q0FDcEYsQ0FBQztBQUVLLFNBQVNDLGlCQUFpQkMsTUFBYyxFQUFFQyxRQUFvQlIsa0JBQWtCO0lBQ3JGLE1BQU1TLElBQUlDLEtBQUtDLEdBQUcsQ0FBQ0MsT0FBT0wsVUFBVTtJQUNwQyxNQUFNTSxJQUFJTCxNQUFNTSxJQUFJLENBQUNELENBQUFBLElBQUtKLEtBQUtJLEVBQUVWLE1BQU0sSUFBS1UsQ0FBQUEsRUFBRVQsTUFBTSxJQUFJLFFBQVFLLEtBQUtJLEVBQUVULE1BQU07SUFDN0UsT0FBT1MsSUFBSUEsRUFBRVIsTUFBTSxHQUFHO0FBQ3hCO0FBU0E7OztDQUdDLEdBQ00sTUFBTVUscUJBQXFFO0lBQ2hGQyxLQUFJO1FBQUVDLFdBQVU7UUFBTUMsT0FBTTtRQUFNQyxNQUFLO1FBQU1DLFNBQVE7UUFBTUMsS0FBSTtRQUFNQyxZQUFXO0lBQUs7SUFDckZDLEtBQUk7UUFBRU4sV0FBVTtRQUFNQyxPQUFNO1FBQU1FLFNBQVE7UUFBTUQsTUFBSztRQUFNRSxLQUFJO1FBQU1DLFlBQVc7SUFBSztJQUNyRkUsS0FBSTtRQUFFTixPQUFNO1FBQU1JLFlBQVc7UUFBTUQsS0FBSTtRQUFNSixXQUFVO1FBQU1FLE1BQUs7UUFBTUMsU0FBUTtJQUFLO0lBQ3JGSyxLQUFJO1FBQUVDLFVBQVM7UUFBTVIsT0FBTTtRQUFNQyxNQUFLO1FBQU1HLFlBQVc7UUFBTUYsU0FBUTtRQUFNQyxLQUFJO0lBQUs7SUFDcEZNLEtBQUk7UUFBRUQsVUFBUztRQUFNUCxNQUFLO1FBQU1ELE9BQU07UUFBTUksWUFBVztRQUFNRixTQUFRO1FBQU1DLEtBQUk7SUFBSztJQUNwRk8sS0FBSTtRQUFFUixTQUFRO1FBQU1ELE1BQUs7UUFBTUUsS0FBSTtRQUFNSCxPQUFNO1FBQU1ELFdBQVU7UUFBTUssWUFBVztJQUFLO0lBQ3JGTyxLQUFJO1FBQUVQLFlBQVc7UUFBTUgsTUFBSztRQUFNRCxPQUFNO1FBQU1ELFdBQVU7UUFBTUksS0FBSTtRQUFNRCxTQUFRO0lBQUs7SUFDckZVLEtBQUk7UUFBRVYsU0FBUTtRQUFNSCxXQUFVO1FBQU1DLE9BQU07UUFBTUMsTUFBSztRQUFNRSxLQUFJO1FBQU1DLFlBQVc7SUFBSztJQUNyRlMsS0FBSTtRQUFFVixLQUFJO1FBQU1ILE9BQU07UUFBTUMsTUFBSztRQUFNRixXQUFVO1FBQU1LLFlBQVc7UUFBTUYsU0FBUTtJQUFLO0FBQ3ZGLEVBQUU7QUFZSyxNQUFNWSxrQkFBa0MsT0FBUUUsSUFBSSxDQUFDbkIsb0JBQTZCb0IsR0FBRyxDQUFDQyxDQUFBQSxLQUFPO1FBQ2xHQTtRQUNBQyxTQUFTdEIsa0JBQWtCLENBQUNxQixHQUFHO1FBQy9CRSxXQUFXdEM7SUFDYixJQUFJIiwic291cmNlcyI6WyJIOlxcVXNlcnNcXEd1c1xcc291cmNlXFxyZXBvXFxkeW5hbWljc1xcZHluYW1pY3MtYlxcY3J5cHRvcGktZHluYW1pY3NcXHNyY1xcY29yZVxcZmVhdHVyZXNcXG1vby1hdXhcXHRpZXJzLnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIHNyYy9jb3JlL2ZlYXR1cmVzL21vby1hdXgvdGllcnMudHNcclxuXHJcbi8qKiAtLS0tLS0tLS0tIGxlZ2FjeSBNRUEgYmlucyAoaWRfcGN0IOKGkiB3ZWlnaHQpIC0tLS0tLS0tLS0gKi9cclxuZXhwb3J0IHR5cGUgVGllclJ1bGUgPSB7XHJcbiAgbWluQWJzOiBudW1iZXI7ICAgICAgICAgICAgICAgIC8vIGluY2x1c2l2ZVxyXG4gIG1heEFiczogbnVtYmVyIHwgbnVsbDsgICAgICAgICAvLyBpbmNsdXNpdmUgd2hlbiBudW1iZXI7IG51bGwgPT4gK+KInlxyXG4gIHdlaWdodDogbnVtYmVyOyAgICAgICAgICAgICAgICAvLyB1bnNpZ25lZCBiaW4gd2VpZ2h0XHJcbiAgbmFtZTogc3RyaW5nOyAgICAgICAgICAgICAgICAgIC8vIFwiQWxwaGFcIiB8IC4uLlxyXG4gIGtleTogXCJhbHBoYVwifFwiYmV0YVwifFwiZ2FtbWFcInxcImRlbHRhXCJ8XCJlcHNpbG9uXCI7XHJcbn07XHJcblxyXG4vLyBkZWZhdWx0IGJpbnMgKHR1bmUgZnJlZWx5KVxyXG5leHBvcnQgY29uc3QgREVGQVVMVF9USUVSX1JVTEVTOiBUaWVyUnVsZVtdID0gW1xyXG4gIHsga2V5OiBcImFscGhhXCIsICAgbmFtZTogXCJBbHBoYVwiLCAgIG1pbkFiczogMC4wMDAxNiwgbWF4QWJzOiAwLjAwMDMyLCB3ZWlnaHQ6IDAuMTUgfSxcclxuICB7IGtleTogXCJiZXRhXCIsICAgIG5hbWU6IFwiQmV0YVwiLCAgICBtaW5BYnM6IDAuMDAwMzMsIG1heEFiczogMC4wMDA0NSwgd2VpZ2h0OiAwLjU1IH0sXHJcbiAgeyBrZXk6IFwiZ2FtbWFcIiwgICBuYW1lOiBcIkdhbW1hXCIsICAgbWluQWJzOiAwLjAwMDQ2LCBtYXhBYnM6IDAuMDAwNzYsIHdlaWdodDogMS4xNSB9LFxyXG4gIHsga2V5OiBcImRlbHRhXCIsICAgbmFtZTogXCJEZWx0YVwiLCAgIG1pbkFiczogMC4wMDA3NywgbWF4QWJzOiAwLjAwMTIwLCB3ZWlnaHQ6IDAuNjUgfSxcclxuICB7IGtleTogXCJlcHNpbG9uXCIsIG5hbWU6IFwiRXBzaWxvblwiLCBtaW5BYnM6IDAuMDAxMjEsIG1heEFiczogbnVsbCwgICAgIHdlaWdodDogMC41MCB9LFxyXG5dO1xyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGdldFRpZXJXZWlnaHRpbmcoaWRfcGN0OiBudW1iZXIsIHJ1bGVzOiBUaWVyUnVsZVtdID0gREVGQVVMVF9USUVSX1JVTEVTKTogbnVtYmVyIHtcclxuICBjb25zdCBhID0gTWF0aC5hYnMoTnVtYmVyKGlkX3BjdCB8fCAwKSk7XHJcbiAgY29uc3QgciA9IHJ1bGVzLmZpbmQociA9PiBhID49IHIubWluQWJzICYmIChyLm1heEFicyA9PSBudWxsIHx8IGEgPD0gci5tYXhBYnMpKTtcclxuICByZXR1cm4gciA/IHIud2VpZ2h0IDogMDtcclxufVxyXG5cclxuLyoqIC0tLS0tLS0tLS0gbW9vZCBjbGFzc2VzIChlbmdpbmUtYWxpZ25lZCkgLS0tLS0tLS0tLSAqL1xyXG5cclxuZXhwb3J0IHR5cGUgTW4gPSBcImlualwifFwiZHJuXCJ8XCJ0cmxcInxcInJldlwifFwid25kXCJ8XCJlbWdcInxcInN0ZFwifFwic3RiXCJ8XCJmbG9cIjtcclxuZXhwb3J0IHR5cGUgTWV0cmljS2V5ID1cclxuICB8IFwiR0ZNZGVsdGFcIiB8IFwidlN3YXBcIiB8IFwidlRlbmRlbmN5XCJcclxuICB8IFwiVm9sdFwiIHwgXCJJbmVydGlhXCIgfCBcIkRpc3J1cHRpb25cIiB8IFwiQW1wXCIgfCBcIk1FQVwiO1xyXG5cclxuLyoqXHJcbiAqIEJhc2UgcGVyLW1vb2Qgd2VpZ2h0cyAobWlycm9yIG9mIGVuZ2luZSBwcmVzZXRzKS5cclxuICogVGhlc2UgYXJlIG5vcm1hbGl6ZWQgaW5zaWRlIHRoZSBlbmdpbmVzIGF0IHJ1bnRpbWU7IGtlZXAgcmVsYXRpdmUgc2hhcGUgaGVyZS5cclxuICovXHJcbmV4cG9ydCBjb25zdCBNT09EX0NMQVNTX1dFSUdIVFM6IFJlY29yZDxNbiwgUGFydGlhbDxSZWNvcmQ8TWV0cmljS2V5LCBudW1iZXI+Pj4gPSB7XHJcbiAgc3RkOnsgdlRlbmRlbmN5OjAuMjgsIHZTd2FwOjAuMjIsIFZvbHQ6MC4xNiwgSW5lcnRpYTowLjE0LCBBbXA6MC4xMCwgRGlzcnVwdGlvbjowLjEwIH0sXHJcbiAgdHJsOnsgdlRlbmRlbmN5OjAuNDAsIHZTd2FwOjAuMjUsIEluZXJ0aWE6MC4xOCwgVm9sdDowLjA3LCBBbXA6MC4wNSwgRGlzcnVwdGlvbjowLjA1IH0sXHJcbiAgcmV2OnsgdlN3YXA6MC4zNCwgRGlzcnVwdGlvbjowLjIwLCBBbXA6MC4xNiwgdlRlbmRlbmN5OjAuMTYsIFZvbHQ6MC4wOCwgSW5lcnRpYTowLjA2IH0sXHJcbiAgaW5qOnsgR0ZNZGVsdGE6MC4zOCwgdlN3YXA6MC4yMiwgVm9sdDowLjE4LCBEaXNydXB0aW9uOjAuMTIsIEluZXJ0aWE6MC4wNSwgQW1wOjAuMDUgfSxcclxuICBkcm46eyBHRk1kZWx0YTowLjM2LCBWb2x0OjAuMjIsIHZTd2FwOjAuMTYsIERpc3J1cHRpb246MC4xMiwgSW5lcnRpYTowLjA4LCBBbXA6MC4wNiB9LFxyXG4gIHduZDp7IEluZXJ0aWE6MC4zNiwgVm9sdDowLjE4LCBBbXA6MC4xMCwgdlN3YXA6MC4xMiwgdlRlbmRlbmN5OjAuMTQsIERpc3J1cHRpb246MC4xMCB9LFxyXG4gIGVtZzp7IERpc3J1cHRpb246MC4zMCwgVm9sdDowLjI2LCB2U3dhcDowLjIwLCB2VGVuZGVuY3k6MC4xMiwgQW1wOjAuMDcsIEluZXJ0aWE6MC4wNSB9LFxyXG4gIHN0Yjp7IEluZXJ0aWE6MC40NCwgdlRlbmRlbmN5OjAuMTgsIHZTd2FwOjAuMTYsIFZvbHQ6MC4wOCwgQW1wOjAuMDYsIERpc3J1cHRpb246MC4wOCB9LFxyXG4gIGZsbzp7IEFtcDowLjMwLCB2U3dhcDowLjI4LCBWb2x0OjAuMTYsIHZUZW5kZW5jeTowLjEyLCBEaXNydXB0aW9uOjAuMDgsIEluZXJ0aWE6MC4wNiB9LFxyXG59O1xyXG5cclxuLyoqXHJcbiAqIE9wdGlvbmFsOiBwZXItbW9vZCDigJxpbnRlcnZhbCBsaW5lc+KAnSB5b3Ugd2FudCB0byBkaXNwbGF5IGluIFVJIG9yIHVzZSBmb3IgcmFuayBndWlkYW5jZS5cclxuICogRm9yIG5vdyB3ZSByZXVzZSB0aGUgaWRfcGN0IERFRkFVTFRfVElFUl9SVUxFUyBhcyB0aGUgcmVmZXJlbmNlIGxpbmUuXHJcbiAqL1xyXG5leHBvcnQgdHlwZSBNb29kQ2xhc3NSb3cgPSB7XHJcbiAgbW46IE1uO1xyXG4gIHdlaWdodHM6IFBhcnRpYWw8UmVjb3JkPE1ldHJpY0tleSwgbnVtYmVyPj47XHJcbiAgaW50ZXJ2YWxzOiBUaWVyUnVsZVtdOyAgICAgICAgICAvLyByZWZlcmVuY2UgYmFuZHMgYXR0YWNoZWQgdG8gdGhpcyBtb29kIHJvd1xyXG59O1xyXG5cclxuZXhwb3J0IGNvbnN0IE1PT0RfQ0xBU1NfUk9XUzogTW9vZENsYXNzUm93W10gPSAoT2JqZWN0LmtleXMoTU9PRF9DTEFTU19XRUlHSFRTKSBhcyBNbltdKS5tYXAobW4gPT4gKHtcclxuICBtbixcclxuICB3ZWlnaHRzOiBNT09EX0NMQVNTX1dFSUdIVFNbbW5dLFxyXG4gIGludGVydmFsczogREVGQVVMVF9USUVSX1JVTEVTLFxyXG59KSk7XHJcblxyXG4iXSwibmFtZXMiOlsiREVGQVVMVF9USUVSX1JVTEVTIiwia2V5IiwibmFtZSIsIm1pbkFicyIsIm1heEFicyIsIndlaWdodCIsImdldFRpZXJXZWlnaHRpbmciLCJpZF9wY3QiLCJydWxlcyIsImEiLCJNYXRoIiwiYWJzIiwiTnVtYmVyIiwiciIsImZpbmQiLCJNT09EX0NMQVNTX1dFSUdIVFMiLCJzdGQiLCJ2VGVuZGVuY3kiLCJ2U3dhcCIsIlZvbHQiLCJJbmVydGlhIiwiQW1wIiwiRGlzcnVwdGlvbiIsInRybCIsInJldiIsImluaiIsIkdGTWRlbHRhIiwiZHJuIiwid25kIiwiZW1nIiwic3RiIiwiZmxvIiwiTU9PRF9DTEFTU19ST1dTIiwiT2JqZWN0Iiwia2V5cyIsIm1hcCIsIm1uIiwid2VpZ2h0cyIsImludGVydmFscyJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./src/core/features/moo-aux/tiers.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/str-aux/db.ts":
/*!*******************************!*\
  !*** ./src/lib/str-aux/db.ts ***!
  \*******************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   db: () => (/* binding */ db)\n/* harmony export */ });\n/* harmony import */ var _core_db__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @/core/db */ \"(rsc)/./src/core/db/index.ts\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_core_db__WEBPACK_IMPORTED_MODULE_0__]);\n_core_db__WEBPACK_IMPORTED_MODULE_0__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\nconst toNumber = (value)=>{\n    const parsed = Number(value);\n    return Number.isFinite(parsed) ? parsed : Date.now();\n};\nfunction rowToDoc(row) {\n    return {\n        id: row.id,\n        pair: {\n            base: row.pair_base,\n            quote: row.pair_quote,\n            window: row.window_key,\n            appSessionId: row.app_session_id\n        },\n        opening: row.opening,\n        nuclei: row.nuclei,\n        stats: row.stats,\n        stream: row.stream,\n        updatedAt: Math.round(toNumber(row.updated_ms))\n    };\n}\nconst db = {\n    pool: _core_db__WEBPACK_IMPORTED_MODULE_0__.db,\n    async upsert (doc) {\n        const q = `\n      INSERT INTO strategy_aux.str_aux_doc\n        (id, pair_base, pair_quote, window_key, app_session_id,\n         opening, nuclei, stats, stream, updated_ms)\n      VALUES\n        ($1,$2,$3,$4,$5,$6,$7,$8,$9,$10)\n      ON CONFLICT (id) DO UPDATE SET\n        opening    = EXCLUDED.opening,\n        nuclei     = EXCLUDED.nuclei,\n        stats      = EXCLUDED.stats,\n        stream     = EXCLUDED.stream,\n        updated_ms = EXCLUDED.updated_ms\n      RETURNING *`;\n        const v = [\n            doc.id,\n            doc.pair.base,\n            doc.pair.quote,\n            doc.pair.window,\n            doc.pair.appSessionId,\n            JSON.stringify(doc.opening),\n            JSON.stringify(doc.nuclei),\n            JSON.stringify(doc.stats),\n            JSON.stringify(doc.stream),\n            doc.updatedAt\n        ];\n        const r = await _core_db__WEBPACK_IMPORTED_MODULE_0__.db.query(q, v);\n        return rowToDoc(r.rows[0]);\n    },\n    async getLatest (key) {\n        const q = `\n      SELECT *\n      FROM strategy_aux.str_aux_doc\n      WHERE pair_base=$1 AND pair_quote=$2 AND window_key=$3 AND app_session_id=$4\n      ORDER BY updated_ms DESC\n      LIMIT 1`;\n        const v = [\n            key.base,\n            key.quote,\n            key.window,\n            key.appSessionId\n        ];\n        const r = await _core_db__WEBPACK_IMPORTED_MODULE_0__.db.query(q, v);\n        if (!r.rowCount) return null;\n        return rowToDoc(r.rows[0]);\n    },\n    // ---- snapshots ----\n    async insertSnapshot (doc) {\n        const q = `\n      INSERT INTO strategy_aux.str_aux_snapshot\n        (doc_id, pair_base, pair_quote, window_key, app_session_id, payload, updated_ms)\n      VALUES\n        ($1,$2,$3,$4,$5,$6,$7)\n      RETURNING snapshot_id`;\n        const v = [\n            doc.id,\n            doc.pair.base,\n            doc.pair.quote,\n            doc.pair.window,\n            doc.pair.appSessionId,\n            JSON.stringify(doc),\n            doc.updatedAt\n        ];\n        const r = await _core_db__WEBPACK_IMPORTED_MODULE_0__.db.query(q, v);\n        return r.rows[0];\n    },\n    async getLatestSnapshot (key) {\n        const q = `\n      SELECT payload\n      FROM strategy_aux.str_aux_snapshot\n      WHERE pair_base=$1 AND pair_quote=$2 AND window_key=$3 AND app_session_id=$4\n      ORDER BY updated_ms DESC\n      LIMIT 1`;\n        const v = [\n            key.base,\n            key.quote,\n            key.window,\n            key.appSessionId\n        ];\n        const r = await _core_db__WEBPACK_IMPORTED_MODULE_0__.db.query(q, v);\n        if (!r.rowCount) return null;\n        return r.rows[0].payload;\n    },\n    async writeThroughUpsert (doc) {\n        const saved = await this.upsert(doc);\n        await this.insertSnapshot(doc);\n        return saved;\n    }\n};\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUs7WUFBRXdCLElBQUl0QixNQUFNO1lBQUVzQixJQUFJcEIsWUFBWTtTQUFDO1FBQzdELE1BQU1nQixJQUFJLE1BQU1sQyx3Q0FBSUEsQ0FBQ21DLEtBQUssQ0FBY0wsR0FBR0M7UUFDM0MsSUFBSSxDQUFDRyxFQUFFSyxRQUFRLEVBQUUsT0FBTztRQUN4QixPQUFPTCxFQUFFRSxJQUFJLENBQUMsRUFBRSxDQUFDTSxPQUFPO0lBQzFCO0lBRUEsTUFBTUMsb0JBQW1CZCxHQUF5QztRQUNoRSxNQUFNZSxRQUFRLE1BQU0sSUFBSSxDQUFDaEIsTUFBTSxDQUFDQztRQUNoQyxNQUFNLElBQUksQ0FBQ1csY0FBYyxDQUFDWDtRQUMxQixPQUFPZTtJQUNUO0FBQ0YsRUFBRSIsInNvdXJjZXMiOlsiSDpcXFVzZXJzXFxHdXNcXHNvdXJjZVxccmVwb1xcZHluYW1pY3NcXGR5bmFtaWNzLWJcXGNyeXB0b3BpLWR5bmFtaWNzXFxzcmNcXGxpYlxcc3RyLWF1eFxcZGIudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHR5cGUgeyBRdWVyeVJlc3VsdFJvdyB9IGZyb20gXCJwZ1wiO1xuaW1wb3J0IHsgZGIgYXMgcG9vbCB9IGZyb20gXCJAL2NvcmUvZGJcIjtcbmltcG9ydCB0eXBlIHsgU3RyQXV4RG9jLCBXaW5kb3dLZXkgfSBmcm9tIFwiLi4vLi4vLi4vbGFiL2xlZ2FjeS9hdXhpbGlhcnkvc3RyLWF1eC90eXBlc1wiO1xuXG5jb25zdCB0b051bWJlciA9ICh2YWx1ZTogdW5rbm93bik6IG51bWJlciA9PiB7XG4gIGNvbnN0IHBhcnNlZCA9IE51bWJlcih2YWx1ZSk7XG4gIHJldHVybiBOdW1iZXIuaXNGaW5pdGUocGFyc2VkKSA/IHBhcnNlZCA6IERhdGUubm93KCk7XG59O1xuXG50eXBlIERvY1JvdyA9IFF1ZXJ5UmVzdWx0Um93ICYge1xuICBpZDogc3RyaW5nO1xuICBwYWlyX2Jhc2U6IHN0cmluZztcbiAgcGFpcl9xdW90ZTogc3RyaW5nO1xuICB3aW5kb3dfa2V5OiBXaW5kb3dLZXk7XG4gIGFwcF9zZXNzaW9uX2lkOiBzdHJpbmc7XG4gIG9wZW5pbmc6IHVua25vd247XG4gIG51Y2xlaTogdW5rbm93bjtcbiAgc3RhdHM6IHVua25vd247XG4gIHN0cmVhbTogdW5rbm93bjtcbiAgdXBkYXRlZF9tczogbnVtYmVyIHwgc3RyaW5nO1xufTtcblxudHlwZSBLZXkgPSB7IGJhc2U6IHN0cmluZzsgcXVvdGU6IHN0cmluZzsgd2luZG93OiBXaW5kb3dLZXk7IGFwcFNlc3Npb25JZDogc3RyaW5nIH07XG5cbnR5cGUgU25hcHNob3RSb3cgPSBRdWVyeVJlc3VsdFJvdyAmIHsgcGF5bG9hZDogU3RyQXV4RG9jIH07XG5cbnR5cGUgU25hcHNob3RJbnNlcnRSb3cgPSBRdWVyeVJlc3VsdFJvdyAmIHsgc25hcHNob3RfaWQ6IHN0cmluZyB9O1xuXG5mdW5jdGlvbiByb3dUb0RvYyhyb3c6IERvY1Jvdyk6IFN0ckF1eERvYyB7XG4gIHJldHVybiB7XG4gICAgaWQ6IHJvdy5pZCxcbiAgICBwYWlyOiB7XG4gICAgICBiYXNlOiByb3cucGFpcl9iYXNlLFxuICAgICAgcXVvdGU6IHJvdy5wYWlyX3F1b3RlLFxuICAgICAgd2luZG93OiByb3cud2luZG93X2tleSxcbiAgICAgIGFwcFNlc3Npb25JZDogcm93LmFwcF9zZXNzaW9uX2lkLFxuICAgIH0sXG4gICAgb3BlbmluZzogcm93Lm9wZW5pbmcgYXMgU3RyQXV4RG9jW1wib3BlbmluZ1wiXSxcbiAgICBudWNsZWk6IHJvdy5udWNsZWkgYXMgU3RyQXV4RG9jW1wibnVjbGVpXCJdLFxuICAgIHN0YXRzOiByb3cuc3RhdHMgYXMgU3RyQXV4RG9jW1wic3RhdHNcIl0sXG4gICAgc3RyZWFtOiByb3cuc3RyZWFtIGFzIFN0ckF1eERvY1tcInN0cmVhbVwiXSxcbiAgICB1cGRhdGVkQXQ6IE1hdGgucm91bmQodG9OdW1iZXIocm93LnVwZGF0ZWRfbXMpKSxcbiAgfTtcbn1cblxuZXhwb3J0IGNvbnN0IGRiID0ge1xuICBwb29sLFxuXG4gIGFzeW5jIHVwc2VydChkb2M6IFN0ckF1eERvYyAmIHsgYXBwU2Vzc2lvbklkOiBzdHJpbmcgfSkge1xuICAgIGNvbnN0IHEgPSBgXG4gICAgICBJTlNFUlQgSU5UTyBzdHJhdGVneV9hdXguc3RyX2F1eF9kb2NcbiAgICAgICAgKGlkLCBwYWlyX2Jhc2UsIHBhaXJfcXVvdGUsIHdpbmRvd19rZXksIGFwcF9zZXNzaW9uX2lkLFxuICAgICAgICAgb3BlbmluZywgbnVjbGVpLCBzdGF0cywgc3RyZWFtLCB1cGRhdGVkX21zKVxuICAgICAgVkFMVUVTXG4gICAgICAgICgkMSwkMiwkMywkNCwkNSwkNiwkNywkOCwkOSwkMTApXG4gICAgICBPTiBDT05GTElDVCAoaWQpIERPIFVQREFURSBTRVRcbiAgICAgICAgb3BlbmluZyAgICA9IEVYQ0xVREVELm9wZW5pbmcsXG4gICAgICAgIG51Y2xlaSAgICAgPSBFWENMVURFRC5udWNsZWksXG4gICAgICAgIHN0YXRzICAgICAgPSBFWENMVURFRC5zdGF0cyxcbiAgICAgICAgc3RyZWFtICAgICA9IEVYQ0xVREVELnN0cmVhbSxcbiAgICAgICAgdXBkYXRlZF9tcyA9IEVYQ0xVREVELnVwZGF0ZWRfbXNcbiAgICAgIFJFVFVSTklORyAqYDtcbiAgICBjb25zdCB2ID0gW1xuICAgICAgZG9jLmlkLFxuICAgICAgZG9jLnBhaXIuYmFzZSxcbiAgICAgIGRvYy5wYWlyLnF1b3RlLFxuICAgICAgZG9jLnBhaXIud2luZG93LFxuICAgICAgZG9jLnBhaXIuYXBwU2Vzc2lvbklkISxcbiAgICAgIEpTT04uc3RyaW5naWZ5KGRvYy5vcGVuaW5nKSxcbiAgICAgIEpTT04uc3RyaW5naWZ5KGRvYy5udWNsZWkpLFxuICAgICAgSlNPTi5zdHJpbmdpZnkoZG9jLnN0YXRzKSxcbiAgICAgIEpTT04uc3RyaW5naWZ5KGRvYy5zdHJlYW0pLFxuICAgICAgZG9jLnVwZGF0ZWRBdCxcbiAgICBdO1xuICAgIGNvbnN0IHIgPSBhd2FpdCBwb29sLnF1ZXJ5PERvY1Jvdz4ocSwgdik7XG4gICAgcmV0dXJuIHJvd1RvRG9jKHIucm93c1swXSk7XG4gIH0sXG5cbiAgYXN5bmMgZ2V0TGF0ZXN0KGtleTogS2V5KTogUHJvbWlzZTxTdHJBdXhEb2MgfCBudWxsPiB7XG4gICAgY29uc3QgcSA9IGBcbiAgICAgIFNFTEVDVCAqXG4gICAgICBGUk9NIHN0cmF0ZWd5X2F1eC5zdHJfYXV4X2RvY1xuICAgICAgV0hFUkUgcGFpcl9iYXNlPSQxIEFORCBwYWlyX3F1b3RlPSQyIEFORCB3aW5kb3dfa2V5PSQzIEFORCBhcHBfc2Vzc2lvbl9pZD0kNFxuICAgICAgT1JERVIgQlkgdXBkYXRlZF9tcyBERVNDXG4gICAgICBMSU1JVCAxYDtcbiAgICBjb25zdCB2ID0gW2tleS5iYXNlLCBrZXkucXVvdGUsIGtleS53aW5kb3csIGtleS5hcHBTZXNzaW9uSWRdO1xuICAgIGNvbnN0IHIgPSBhd2FpdCBwb29sLnF1ZXJ5PERvY1Jvdz4ocSwgdik7XG4gICAgaWYgKCFyLnJvd0NvdW50KSByZXR1cm4gbnVsbDtcbiAgICByZXR1cm4gcm93VG9Eb2Moci5yb3dzWzBdKTtcbiAgfSxcblxuICAvLyAtLS0tIHNuYXBzaG90cyAtLS0tXG4gIGFzeW5jIGluc2VydFNuYXBzaG90KGRvYzogU3RyQXV4RG9jICYgeyBhcHBTZXNzaW9uSWQ6IHN0cmluZyB9KSB7XG4gICAgY29uc3QgcSA9IGBcbiAgICAgIElOU0VSVCBJTlRPIHN0cmF0ZWd5X2F1eC5zdHJfYXV4X3NuYXBzaG90XG4gICAgICAgIChkb2NfaWQsIHBhaXJfYmFzZSwgcGFpcl9xdW90ZSwgd2luZG93X2tleSwgYXBwX3Nlc3Npb25faWQsIHBheWxvYWQsIHVwZGF0ZWRfbXMpXG4gICAgICBWQUxVRVNcbiAgICAgICAgKCQxLCQyLCQzLCQ0LCQ1LCQ2LCQ3KVxuICAgICAgUkVUVVJOSU5HIHNuYXBzaG90X2lkYDtcbiAgICBjb25zdCB2ID0gW1xuICAgICAgZG9jLmlkLFxuICAgICAgZG9jLnBhaXIuYmFzZSxcbiAgICAgIGRvYy5wYWlyLnF1b3RlLFxuICAgICAgZG9jLnBhaXIud2luZG93LFxuICAgICAgZG9jLnBhaXIuYXBwU2Vzc2lvbklkISxcbiAgICAgIEpTT04uc3RyaW5naWZ5KGRvYyksXG4gICAgICBkb2MudXBkYXRlZEF0LFxuICAgIF07XG4gICAgY29uc3QgciA9IGF3YWl0IHBvb2wucXVlcnk8U25hcHNob3RJbnNlcnRSb3c+KHEsIHYpO1xuICAgIHJldHVybiByLnJvd3NbMF07XG4gIH0sXG5cbiAgYXN5bmMgZ2V0TGF0ZXN0U25hcHNob3Qoa2V5OiBLZXkpOiBQcm9taXNlPFN0ckF1eERvYyB8IG51bGw+IHtcbiAgICBjb25zdCBxID0gYFxuICAgICAgU0VMRUNUIHBheWxvYWRcbiAgICAgIEZST00gc3RyYXRlZ3lfYXV4LnN0cl9hdXhfc25hcHNob3RcbiAgICAgIFdIRVJFIHBhaXJfYmFzZT0kMSBBTkQgcGFpcl9xdW90ZT0kMiBBTkQgd2luZG93X2tleT0kMyBBTkQgYXBwX3Nlc3Npb25faWQ9JDRcbiAgICAgIE9SREVSIEJZIHVwZGF0ZWRfbXMgREVTQ1xuICAgICAgTElNSVQgMWA7XG4gICAgY29uc3QgdiA9IFtrZXkuYmFzZSwga2V5LnF1b3RlLCBrZXkud2luZG93LCBrZXkuYXBwU2Vzc2lvbklkXTtcbiAgICBjb25zdCByID0gYXdhaXQgcG9vbC5xdWVyeTxTbmFwc2hvdFJvdz4ocSwgdik7XG4gICAgaWYgKCFyLnJvd0NvdW50KSByZXR1cm4gbnVsbDtcbiAgICByZXR1cm4gci5yb3dzWzBdLnBheWxvYWQ7XG4gIH0sXG5cbiAgYXN5bmMgd3JpdGVUaHJvdWdoVXBzZXJ0KGRvYzogU3RyQXV4RG9jICYgeyBhcHBTZXNzaW9uSWQ6IHN0cmluZyB9KSB7XG4gICAgY29uc3Qgc2F2ZWQgPSBhd2FpdCB0aGlzLnVwc2VydChkb2MpO1xuICAgIGF3YWl0IHRoaXMuaW5zZXJ0U25hcHNob3QoZG9jKTtcbiAgICByZXR1cm4gc2F2ZWQ7XG4gIH0sXG59O1xuIl0sIm5hbWVzIjpbImRiIiwicG9vbCIsInRvTnVtYmVyIiwidmFsdWUiLCJwYXJzZWQiLCJOdW1iZXIiLCJpc0Zpbml0ZSIsIkRhdGUiLCJub3ciLCJyb3dUb0RvYyIsInJvdyIsImlkIiwicGFpciIsImJhc2UiLCJwYWlyX2Jhc2UiLCJxdW90ZSIsInBhaXJfcXVvdGUiLCJ3aW5kb3ciLCJ3aW5kb3dfa2V5IiwiYXBwU2Vzc2lvbklkIiwiYXBwX3Nlc3Npb25faWQiLCJvcGVuaW5nIiwibnVjbGVpIiwic3RhdHMiLCJzdHJlYW0iLCJ1cGRhdGVkQXQiLCJNYXRoIiwicm91bmQiLCJ1cGRhdGVkX21zIiwidXBzZXJ0IiwiZG9jIiwicSIsInYiLCJKU09OIiwic3RyaW5naWZ5IiwiciIsInF1ZXJ5Iiwicm93cyIsImdldExhdGVzdCIsImtleSIsInJvd0NvdW50IiwiaW5zZXJ0U25hcHNob3QiLCJnZXRMYXRlc3RTbmFwc2hvdCIsInBheWxvYWQiLCJ3cml0ZVRocm91Z2hVcHNlcnQiLCJzYXZlZCJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/str-aux/db.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/tiers/meaAux.ts":
/*!*********************************!*\
  !*** ./src/lib/tiers/meaAux.ts ***!
  \*********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   computeMeaAux: () => (/* binding */ computeMeaAux),\n/* harmony export */   fmt4: () => (/* binding */ fmt4),\n/* harmony export */   fmt6: () => (/* binding */ fmt6)\n/* harmony export */ });\n// src/lib/tiers/meaAux.ts\nconst BINS = [\n    {\n        name: \"alpha\",\n        written: \"Alpha\",\n        min: 0.00016,\n        max: 0.00032,\n        weight: 0.15\n    },\n    {\n        name: \"beta\",\n        written: \"Beta\",\n        min: 0.00033,\n        max: 0.00045,\n        weight: 0.55\n    },\n    {\n        name: \"gamma\",\n        written: \"Gamma\",\n        min: 0.00046,\n        max: 0.00076,\n        weight: 1.15\n    },\n    {\n        name: \"delta\",\n        written: \"Delta\",\n        min: 0.00077,\n        max: 0.00120,\n        weight: 0.65\n    },\n    {\n        name: \"epsilon\",\n        written: \"Epsilon\",\n        min: 0.00121,\n        max: null,\n        weight: 0.50\n    }\n];\nfunction computeMeaAux(id_pct) {\n    if (Object.is(id_pct, 0) || Math.abs(id_pct) === 0) {\n        return {\n            isNull: true,\n            weight: 0,\n            unsignedWeight: 0\n        };\n    }\n    const mag = Math.abs(id_pct);\n    const sign = id_pct > 0 ? -1 : +1;\n    const bin = BINS.find((b)=>mag >= b.min && (b.max == null || mag <= b.max));\n    if (!bin) {\n        return {\n            isNull: false,\n            tier: \"alpha\",\n            name: \"Alpha\",\n            weight: sign * 0.0,\n            unsignedWeight: 0.0\n        };\n    }\n    return {\n        isNull: false,\n        tier: bin.name,\n        name: bin.written,\n        weight: sign * bin.weight,\n        unsignedWeight: bin.weight\n    };\n}\n// shared formatters (well reuse later for matrices precision)\nconst fmt6 = (n)=>Number.isFinite(n) ? n.toFixed(6) : \"\";\nconst fmt4 = (n)=>Number.isFinite(n) ? n.toFixed(4) : \"\";\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvbGliL3RpZXJzL21lYUF1eC50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFBQSwwQkFBMEI7QUFVMUIsTUFBTUEsT0FBTztJQUNYO1FBQUVDLE1BQU07UUFBV0MsU0FBUztRQUFXQyxLQUFLO1FBQVNDLEtBQUs7UUFBU0MsUUFBUTtJQUFLO0lBQ2hGO1FBQUVKLE1BQU07UUFBV0MsU0FBUztRQUFXQyxLQUFLO1FBQVNDLEtBQUs7UUFBU0MsUUFBUTtJQUFLO0lBQ2hGO1FBQUVKLE1BQU07UUFBV0MsU0FBUztRQUFXQyxLQUFLO1FBQVNDLEtBQUs7UUFBU0MsUUFBUTtJQUFLO0lBQ2hGO1FBQUVKLE1BQU07UUFBV0MsU0FBUztRQUFXQyxLQUFLO1FBQVNDLEtBQUs7UUFBU0MsUUFBUTtJQUFLO0lBQ2hGO1FBQUVKLE1BQU07UUFBV0MsU0FBUztRQUFXQyxLQUFLO1FBQVNDLEtBQUs7UUFBVUMsUUFBUTtJQUFLO0NBQ2xGO0FBRU0sU0FBU0MsY0FBY0MsTUFBYztJQUMxQyxJQUFJQyxPQUFPQyxFQUFFLENBQUNGLFFBQVEsTUFBTUcsS0FBS0MsR0FBRyxDQUFDSixZQUFZLEdBQUc7UUFDbEQsT0FBTztZQUFFSyxRQUFRO1lBQU1QLFFBQVE7WUFBR1EsZ0JBQWdCO1FBQUU7SUFDdEQ7SUFDQSxNQUFNQyxNQUFNSixLQUFLQyxHQUFHLENBQUNKO0lBQ3JCLE1BQU1RLE9BQU9SLFNBQVMsSUFBSSxDQUFDLElBQUksQ0FBQztJQUVoQyxNQUFNUyxNQUFNaEIsS0FBS2lCLElBQUksQ0FBQ0MsQ0FBQUEsSUFBS0osT0FBT0ksRUFBRWYsR0FBRyxJQUFLZSxDQUFBQSxFQUFFZCxHQUFHLElBQUksUUFBUVUsT0FBT0ksRUFBRWQsR0FBRztJQUN6RSxJQUFJLENBQUNZLEtBQUs7UUFDUixPQUFPO1lBQUVKLFFBQVE7WUFBT08sTUFBTTtZQUFTbEIsTUFBTTtZQUFTSSxRQUFRVSxPQUFPO1lBQUtGLGdCQUFnQjtRQUFJO0lBQ2hHO0lBQ0EsT0FBTztRQUNMRCxRQUFRO1FBQ1JPLE1BQU1ILElBQUlmLElBQUk7UUFDZEEsTUFBTWUsSUFBSWQsT0FBTztRQUNqQkcsUUFBUVUsT0FBT0MsSUFBSVgsTUFBTTtRQUN6QlEsZ0JBQWdCRyxJQUFJWCxNQUFNO0lBQzVCO0FBQ0Y7QUFFQSwrREFBK0Q7QUFDeEQsTUFBTWUsT0FBTyxDQUFDQyxJQUFlQyxPQUFPQyxRQUFRLENBQUNGLEtBQUtBLEVBQUVHLE9BQU8sQ0FBQyxLQUFLLElBQUs7QUFDdEUsTUFBTUMsT0FBTyxDQUFDSixJQUFlQyxPQUFPQyxRQUFRLENBQUNGLEtBQUtBLEVBQUVHLE9BQU8sQ0FBQyxLQUFLLElBQUsiLCJzb3VyY2VzIjpbIkg6XFxVc2Vyc1xcR3VzXFxzb3VyY2VcXHJlcG9cXGR5bmFtaWNzXFxkeW5hbWljcy1iXFxjcnlwdG9waS1keW5hbWljc1xcc3JjXFxsaWJcXHRpZXJzXFxtZWFBdXgudHMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gc3JjL2xpYi90aWVycy9tZWFBdXgudHNcclxuZXhwb3J0IHR5cGUgTWVhQXV4VGllck5hbWUgPSBcImFscGhhXCIgfCBcImJldGFcIiB8IFwiZ2FtbWFcIiB8IFwiZGVsdGFcIiB8IFwiZXBzaWxvblwiO1xyXG5leHBvcnQgdHlwZSBNZWFBdXhSZXN1bHQgPSB7XHJcbiAgdGllcj86IE1lYUF1eFRpZXJOYW1lO1xyXG4gIG5hbWU/OiBzdHJpbmc7XHJcbiAgd2VpZ2h0OiBudW1iZXI7ICAgICAgICAgIC8vIHNpZ25lZDogKyBmb3IgbmVnYXRpdmUgaWRfcGN0LCAtIGZvciBwb3NpdGl2ZSBpZF9wY3RcclxuICB1bnNpZ25lZFdlaWdodDogbnVtYmVyO1xyXG4gIGlzTnVsbDogYm9vbGVhbjtcclxufTtcclxuXHJcbmNvbnN0IEJJTlMgPSBbXHJcbiAgeyBuYW1lOiBcImFscGhhXCIsICAgd3JpdHRlbjogXCJBbHBoYVwiLCAgIG1pbjogMC4wMDAxNiwgbWF4OiAwLjAwMDMyLCB3ZWlnaHQ6IDAuMTUgfSxcclxuICB7IG5hbWU6IFwiYmV0YVwiLCAgICB3cml0dGVuOiBcIkJldGFcIiwgICAgbWluOiAwLjAwMDMzLCBtYXg6IDAuMDAwNDUsIHdlaWdodDogMC41NSB9LFxyXG4gIHsgbmFtZTogXCJnYW1tYVwiLCAgIHdyaXR0ZW46IFwiR2FtbWFcIiwgICBtaW46IDAuMDAwNDYsIG1heDogMC4wMDA3Niwgd2VpZ2h0OiAxLjE1IH0sXHJcbiAgeyBuYW1lOiBcImRlbHRhXCIsICAgd3JpdHRlbjogXCJEZWx0YVwiLCAgIG1pbjogMC4wMDA3NywgbWF4OiAwLjAwMTIwLCB3ZWlnaHQ6IDAuNjUgfSxcclxuICB7IG5hbWU6IFwiZXBzaWxvblwiLCB3cml0dGVuOiBcIkVwc2lsb25cIiwgbWluOiAwLjAwMTIxLCBtYXg6IG51bGwsICAgICB3ZWlnaHQ6IDAuNTAgfSxcclxuXSBhcyBjb25zdDtcclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBjb21wdXRlTWVhQXV4KGlkX3BjdDogbnVtYmVyKTogTWVhQXV4UmVzdWx0IHtcclxuICBpZiAoT2JqZWN0LmlzKGlkX3BjdCwgMCkgfHwgTWF0aC5hYnMoaWRfcGN0KSA9PT0gMCkge1xyXG4gICAgcmV0dXJuIHsgaXNOdWxsOiB0cnVlLCB3ZWlnaHQ6IDAsIHVuc2lnbmVkV2VpZ2h0OiAwIH07XHJcbiAgfVxyXG4gIGNvbnN0IG1hZyA9IE1hdGguYWJzKGlkX3BjdCk7XHJcbiAgY29uc3Qgc2lnbiA9IGlkX3BjdCA+IDAgPyAtMSA6ICsxO1xyXG5cclxuICBjb25zdCBiaW4gPSBCSU5TLmZpbmQoYiA9PiBtYWcgPj0gYi5taW4gJiYgKGIubWF4ID09IG51bGwgfHwgbWFnIDw9IGIubWF4KSk7XHJcbiAgaWYgKCFiaW4pIHtcclxuICAgIHJldHVybiB7IGlzTnVsbDogZmFsc2UsIHRpZXI6IFwiYWxwaGFcIiwgbmFtZTogXCJBbHBoYVwiLCB3ZWlnaHQ6IHNpZ24gKiAwLjAsIHVuc2lnbmVkV2VpZ2h0OiAwLjAgfTtcclxuICB9XHJcbiAgcmV0dXJuIHtcclxuICAgIGlzTnVsbDogZmFsc2UsXHJcbiAgICB0aWVyOiBiaW4ubmFtZSxcclxuICAgIG5hbWU6IGJpbi53cml0dGVuLFxyXG4gICAgd2VpZ2h0OiBzaWduICogYmluLndlaWdodCxcclxuICAgIHVuc2lnbmVkV2VpZ2h0OiBiaW4ud2VpZ2h0LFxyXG4gIH07XHJcbn1cclxuXHJcbi8vIHNoYXJlZCBmb3JtYXR0ZXJzICh3ZeKAmWxsIHJldXNlIGxhdGVyIGZvciBtYXRyaWNlcyBwcmVjaXNpb24pXHJcbmV4cG9ydCBjb25zdCBmbXQ2ID0gKG46IG51bWJlcikgPT4gKE51bWJlci5pc0Zpbml0ZShuKSA/IG4udG9GaXhlZCg2KSA6IFwi4oCUXCIpO1xyXG5leHBvcnQgY29uc3QgZm10NCA9IChuOiBudW1iZXIpID0+IChOdW1iZXIuaXNGaW5pdGUobikgPyBuLnRvRml4ZWQoNCkgOiBcIuKAlFwiKTtcclxuIl0sIm5hbWVzIjpbIkJJTlMiLCJuYW1lIiwid3JpdHRlbiIsIm1pbiIsIm1heCIsIndlaWdodCIsImNvbXB1dGVNZWFBdXgiLCJpZF9wY3QiLCJPYmplY3QiLCJpcyIsIk1hdGgiLCJhYnMiLCJpc051bGwiLCJ1bnNpZ25lZFdlaWdodCIsIm1hZyIsInNpZ24iLCJiaW4iLCJmaW5kIiwiYiIsInRpZXIiLCJmbXQ2IiwibiIsIk51bWJlciIsImlzRmluaXRlIiwidG9GaXhlZCIsImZtdDQiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/tiers/meaAux.ts\n");

/***/ }),

/***/ "(ssr)/./node_modules/.pnpm/next@15.5.2_@playwright+tes_b7e6c280e9a1b4309347c0bf0ab476d5/node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true!":
/*!**************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/next@15.5.2_@playwright+tes_b7e6c280e9a1b4309347c0bf0ab476d5/node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true! ***!
  \**************************************************************************************************************************************************************************************/
/***/ (() => {



/***/ }),

/***/ "../app-render/action-async-storage.external":
/*!*******************************************************************************!*\
  !*** external "next/dist/server/app-render/action-async-storage.external.js" ***!
  \*******************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/action-async-storage.external.js");

/***/ }),

/***/ "../app-render/after-task-async-storage.external":
/*!***********************************************************************************!*\
  !*** external "next/dist/server/app-render/after-task-async-storage.external.js" ***!
  \***********************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/after-task-async-storage.external.js");

/***/ }),

/***/ "./work-async-storage.external":
/*!*****************************************************************************!*\
  !*** external "next/dist/server/app-render/work-async-storage.external.js" ***!
  \*****************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/work-async-storage.external.js");

/***/ }),

/***/ "./work-unit-async-storage.external":
/*!**********************************************************************************!*\
  !*** external "next/dist/server/app-render/work-unit-async-storage.external.js" ***!
  \**********************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/work-unit-async-storage.external.js");

/***/ }),

/***/ "crypto":
/*!*************************!*\
  !*** external "crypto" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("crypto");

/***/ }),

/***/ "fs":
/*!*********************!*\
  !*** external "fs" ***!
  \*********************/
/***/ ((module) => {

"use strict";
module.exports = require("fs");

/***/ }),

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "next/dist/shared/lib/no-fallback-error.external":
/*!******************************************************************!*\
  !*** external "next/dist/shared/lib/no-fallback-error.external" ***!
  \******************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/shared/lib/no-fallback-error.external");

/***/ }),

/***/ "next/dist/shared/lib/router/utils/app-paths":
/*!**************************************************************!*\
  !*** external "next/dist/shared/lib/router/utils/app-paths" ***!
  \**************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/shared/lib/router/utils/app-paths");

/***/ }),

/***/ "path":
/*!***********************!*\
  !*** external "path" ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = require("path");

/***/ }),

/***/ "pg":
/*!*********************!*\
  !*** external "pg" ***!
  \*********************/
/***/ ((module) => {

"use strict";
module.exports = import("pg");;

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next@15.5.2_@playwright+tes_b7e6c280e9a1b4309347c0bf0ab476d5"], () => (__webpack_exec__("(rsc)/./node_modules/.pnpm/next@15.5.2_@playwright+tes_b7e6c280e9a1b4309347c0bf0ab476d5/node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fdynamics%2Froute&page=%2Fapi%2Fdynamics%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fdynamics%2Froute.ts&appDir=H%3A%5CUsers%5CGus%5Csource%5Crepo%5Cdynamics%5Cdynamics-b%5Ccryptopi-dynamics%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=H%3A%5CUsers%5CGus%5Csource%5Crepo%5Cdynamics%5Cdynamics-b%5Ccryptopi-dynamics&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=!")));
module.exports = __webpack_exports__;

})();