/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/matrices/latest/route";
exports.ids = ["app/api/matrices/latest/route"];
exports.modules = {

/***/ "(rsc)/./node_modules/.pnpm/next@15.5.2_@playwright+tes_b7e6c280e9a1b4309347c0bf0ab476d5/node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fmatrices%2Flatest%2Froute&page=%2Fapi%2Fmatrices%2Flatest%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fmatrices%2Flatest%2Froute.ts&appDir=H%3A%5CUsers%5CGus%5Csource%5Crepo%5Cdynamics%5Cdynamics-b%5Ccryptopi-dynamics%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=H%3A%5CUsers%5CGus%5Csource%5Crepo%5Cdynamics%5Cdynamics-b%5Ccryptopi-dynamics&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=!":
/*!****************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/next@15.5.2_@playwright+tes_b7e6c280e9a1b4309347c0bf0ab476d5/node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fmatrices%2Flatest%2Froute&page=%2Fapi%2Fmatrices%2Flatest%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fmatrices%2Flatest%2Froute.ts&appDir=H%3A%5CUsers%5CGus%5Csource%5Crepo%5Cdynamics%5Cdynamics-b%5Ccryptopi-dynamics%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=H%3A%5CUsers%5CGus%5Csource%5Crepo%5Cdynamics%5Cdynamics-b%5Ccryptopi-dynamics&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=! ***!
  \****************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   handler: () => (/* binding */ handler),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   workAsyncStorage: () => (/* binding */ workAsyncStorage),\n/* harmony export */   workUnitAsyncStorage: () => (/* binding */ workUnitAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/.pnpm/next@15.5.2_@playwright+tes_b7e6c280e9a1b4309347c0bf0ab476d5/node_modules/next/dist/server/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/route-kind */ \"(rsc)/./node_modules/.pnpm/next@15.5.2_@playwright+tes_b7e6c280e9a1b4309347c0bf0ab476d5/node_modules/next/dist/server/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/.pnpm/next@15.5.2_@playwright+tes_b7e6c280e9a1b4309347c0bf0ab476d5/node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var next_dist_server_request_meta__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! next/dist/server/request-meta */ \"(rsc)/./node_modules/.pnpm/next@15.5.2_@playwright+tes_b7e6c280e9a1b4309347c0bf0ab476d5/node_modules/next/dist/server/request-meta.js\");\n/* harmony import */ var next_dist_server_request_meta__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_request_meta__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var next_dist_server_lib_trace_tracer__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! next/dist/server/lib/trace/tracer */ \"(rsc)/./node_modules/.pnpm/next@15.5.2_@playwright+tes_b7e6c280e9a1b4309347c0bf0ab476d5/node_modules/next/dist/server/lib/trace/tracer.js\");\n/* harmony import */ var next_dist_server_lib_trace_tracer__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_trace_tracer__WEBPACK_IMPORTED_MODULE_4__);\n/* harmony import */ var next_dist_shared_lib_router_utils_app_paths__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! next/dist/shared/lib/router/utils/app-paths */ \"next/dist/shared/lib/router/utils/app-paths\");\n/* harmony import */ var next_dist_shared_lib_router_utils_app_paths__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(next_dist_shared_lib_router_utils_app_paths__WEBPACK_IMPORTED_MODULE_5__);\n/* harmony import */ var next_dist_server_base_http_node__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! next/dist/server/base-http/node */ \"(rsc)/./node_modules/.pnpm/next@15.5.2_@playwright+tes_b7e6c280e9a1b4309347c0bf0ab476d5/node_modules/next/dist/server/base-http/node.js\");\n/* harmony import */ var next_dist_server_base_http_node__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_base_http_node__WEBPACK_IMPORTED_MODULE_6__);\n/* harmony import */ var next_dist_server_web_spec_extension_adapters_next_request__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! next/dist/server/web/spec-extension/adapters/next-request */ \"(rsc)/./node_modules/.pnpm/next@15.5.2_@playwright+tes_b7e6c280e9a1b4309347c0bf0ab476d5/node_modules/next/dist/server/web/spec-extension/adapters/next-request.js\");\n/* harmony import */ var next_dist_server_web_spec_extension_adapters_next_request__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_web_spec_extension_adapters_next_request__WEBPACK_IMPORTED_MODULE_7__);\n/* harmony import */ var next_dist_server_lib_trace_constants__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! next/dist/server/lib/trace/constants */ \"(rsc)/./node_modules/.pnpm/next@15.5.2_@playwright+tes_b7e6c280e9a1b4309347c0bf0ab476d5/node_modules/next/dist/server/lib/trace/constants.js\");\n/* harmony import */ var next_dist_server_lib_trace_constants__WEBPACK_IMPORTED_MODULE_8___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_trace_constants__WEBPACK_IMPORTED_MODULE_8__);\n/* harmony import */ var next_dist_server_instrumentation_utils__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! next/dist/server/instrumentation/utils */ \"(rsc)/./node_modules/.pnpm/next@15.5.2_@playwright+tes_b7e6c280e9a1b4309347c0bf0ab476d5/node_modules/next/dist/server/instrumentation/utils.js\");\n/* harmony import */ var next_dist_server_send_response__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! next/dist/server/send-response */ \"(rsc)/./node_modules/.pnpm/next@15.5.2_@playwright+tes_b7e6c280e9a1b4309347c0bf0ab476d5/node_modules/next/dist/server/send-response.js\");\n/* harmony import */ var next_dist_server_web_utils__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! next/dist/server/web/utils */ \"(rsc)/./node_modules/.pnpm/next@15.5.2_@playwright+tes_b7e6c280e9a1b4309347c0bf0ab476d5/node_modules/next/dist/server/web/utils.js\");\n/* harmony import */ var next_dist_server_web_utils__WEBPACK_IMPORTED_MODULE_11___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_web_utils__WEBPACK_IMPORTED_MODULE_11__);\n/* harmony import */ var next_dist_server_lib_cache_control__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! next/dist/server/lib/cache-control */ \"(rsc)/./node_modules/.pnpm/next@15.5.2_@playwright+tes_b7e6c280e9a1b4309347c0bf0ab476d5/node_modules/next/dist/server/lib/cache-control.js\");\n/* harmony import */ var next_dist_lib_constants__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! next/dist/lib/constants */ \"(rsc)/./node_modules/.pnpm/next@15.5.2_@playwright+tes_b7e6c280e9a1b4309347c0bf0ab476d5/node_modules/next/dist/lib/constants.js\");\n/* harmony import */ var next_dist_lib_constants__WEBPACK_IMPORTED_MODULE_13___default = /*#__PURE__*/__webpack_require__.n(next_dist_lib_constants__WEBPACK_IMPORTED_MODULE_13__);\n/* harmony import */ var next_dist_shared_lib_no_fallback_error_external__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! next/dist/shared/lib/no-fallback-error.external */ \"next/dist/shared/lib/no-fallback-error.external\");\n/* harmony import */ var next_dist_shared_lib_no_fallback_error_external__WEBPACK_IMPORTED_MODULE_14___default = /*#__PURE__*/__webpack_require__.n(next_dist_shared_lib_no_fallback_error_external__WEBPACK_IMPORTED_MODULE_14__);\n/* harmony import */ var next_dist_server_response_cache__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! next/dist/server/response-cache */ \"(rsc)/./node_modules/.pnpm/next@15.5.2_@playwright+tes_b7e6c280e9a1b4309347c0bf0ab476d5/node_modules/next/dist/server/response-cache/index.js\");\n/* harmony import */ var next_dist_server_response_cache__WEBPACK_IMPORTED_MODULE_15___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_response_cache__WEBPACK_IMPORTED_MODULE_15__);\n/* harmony import */ var H_Users_Gus_source_repo_dynamics_dynamics_b_cryptopi_dynamics_src_app_api_matrices_latest_route_ts__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ./src/app/api/matrices/latest/route.ts */ \"(rsc)/./src/app/api/matrices/latest/route.ts\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([H_Users_Gus_source_repo_dynamics_dynamics_b_cryptopi_dynamics_src_app_api_matrices_latest_route_ts__WEBPACK_IMPORTED_MODULE_16__]);\nH_Users_Gus_source_repo_dynamics_dynamics_b_cryptopi_dynamics_src_app_api_matrices_latest_route_ts__WEBPACK_IMPORTED_MODULE_16__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/matrices/latest/route\",\n        pathname: \"/api/matrices/latest\",\n        filename: \"route\",\n        bundlePath: \"app/api/matrices/latest/route\"\n    },\n    distDir: \".next\" || 0,\n    relativeProjectDir:  false || '',\n    resolvedPagePath: \"H:\\\\Users\\\\Gus\\\\source\\\\repo\\\\dynamics\\\\dynamics-b\\\\cryptopi-dynamics\\\\src\\\\app\\\\api\\\\matrices\\\\latest\\\\route.ts\",\n    nextConfigOutput,\n    userland: H_Users_Gus_source_repo_dynamics_dynamics_b_cryptopi_dynamics_src_app_api_matrices_latest_route_ts__WEBPACK_IMPORTED_MODULE_16__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { workAsyncStorage, workUnitAsyncStorage, serverHooks } = routeModule;\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        workAsyncStorage,\n        workUnitAsyncStorage\n    });\n}\n\nasync function handler(req, res, ctx) {\n    var _nextConfig_experimental;\n    let srcPage = \"/api/matrices/latest/route\";\n    // turbopack doesn't normalize `/index` in the page name\n    // so we need to to process dynamic routes properly\n    // TODO: fix turbopack providing differing value from webpack\n    if (false) {} else if (srcPage === '/index') {\n        // we always normalize /index specifically\n        srcPage = '/';\n    }\n    const multiZoneDraftMode = false;\n    const prepareResult = await routeModule.prepare(req, res, {\n        srcPage,\n        multiZoneDraftMode\n    });\n    if (!prepareResult) {\n        res.statusCode = 400;\n        res.end('Bad Request');\n        ctx.waitUntil == null ? void 0 : ctx.waitUntil.call(ctx, Promise.resolve());\n        return null;\n    }\n    const { buildId, params, nextConfig, isDraftMode, prerenderManifest, routerServerContext, isOnDemandRevalidate, revalidateOnlyGenerated, resolvedPathname } = prepareResult;\n    const normalizedSrcPage = (0,next_dist_shared_lib_router_utils_app_paths__WEBPACK_IMPORTED_MODULE_5__.normalizeAppPath)(srcPage);\n    let isIsr = Boolean(prerenderManifest.dynamicRoutes[normalizedSrcPage] || prerenderManifest.routes[resolvedPathname]);\n    if (isIsr && !isDraftMode) {\n        const isPrerendered = Boolean(prerenderManifest.routes[resolvedPathname]);\n        const prerenderInfo = prerenderManifest.dynamicRoutes[normalizedSrcPage];\n        if (prerenderInfo) {\n            if (prerenderInfo.fallback === false && !isPrerendered) {\n                throw new next_dist_shared_lib_no_fallback_error_external__WEBPACK_IMPORTED_MODULE_14__.NoFallbackError();\n            }\n        }\n    }\n    let cacheKey = null;\n    if (isIsr && !routeModule.isDev && !isDraftMode) {\n        cacheKey = resolvedPathname;\n        // ensure /index and / is normalized to one key\n        cacheKey = cacheKey === '/index' ? '/' : cacheKey;\n    }\n    const supportsDynamicResponse = // If we're in development, we always support dynamic HTML\n    routeModule.isDev === true || // If this is not SSG or does not have static paths, then it supports\n    // dynamic HTML.\n    !isIsr;\n    // This is a revalidation request if the request is for a static\n    // page and it is not being resumed from a postponed render and\n    // it is not a dynamic RSC request then it is a revalidation\n    // request.\n    const isRevalidate = isIsr && !supportsDynamicResponse;\n    const method = req.method || 'GET';\n    const tracer = (0,next_dist_server_lib_trace_tracer__WEBPACK_IMPORTED_MODULE_4__.getTracer)();\n    const activeSpan = tracer.getActiveScopeSpan();\n    const context = {\n        params,\n        prerenderManifest,\n        renderOpts: {\n            experimental: {\n                cacheComponents: Boolean(nextConfig.experimental.cacheComponents),\n                authInterrupts: Boolean(nextConfig.experimental.authInterrupts)\n            },\n            supportsDynamicResponse,\n            incrementalCache: (0,next_dist_server_request_meta__WEBPACK_IMPORTED_MODULE_3__.getRequestMeta)(req, 'incrementalCache'),\n            cacheLifeProfiles: (_nextConfig_experimental = nextConfig.experimental) == null ? void 0 : _nextConfig_experimental.cacheLife,\n            isRevalidate,\n            waitUntil: ctx.waitUntil,\n            onClose: (cb)=>{\n                res.on('close', cb);\n            },\n            onAfterTaskError: undefined,\n            onInstrumentationRequestError: (error, _request, errorContext)=>routeModule.onRequestError(req, error, errorContext, routerServerContext)\n        },\n        sharedContext: {\n            buildId\n        }\n    };\n    const nodeNextReq = new next_dist_server_base_http_node__WEBPACK_IMPORTED_MODULE_6__.NodeNextRequest(req);\n    const nodeNextRes = new next_dist_server_base_http_node__WEBPACK_IMPORTED_MODULE_6__.NodeNextResponse(res);\n    const nextReq = next_dist_server_web_spec_extension_adapters_next_request__WEBPACK_IMPORTED_MODULE_7__.NextRequestAdapter.fromNodeNextRequest(nodeNextReq, (0,next_dist_server_web_spec_extension_adapters_next_request__WEBPACK_IMPORTED_MODULE_7__.signalFromNodeResponse)(res));\n    try {\n        const invokeRouteModule = async (span)=>{\n            return routeModule.handle(nextReq, context).finally(()=>{\n                if (!span) return;\n                span.setAttributes({\n                    'http.status_code': res.statusCode,\n                    'next.rsc': false\n                });\n                const rootSpanAttributes = tracer.getRootSpanAttributes();\n                // We were unable to get attributes, probably OTEL is not enabled\n                if (!rootSpanAttributes) {\n                    return;\n                }\n                if (rootSpanAttributes.get('next.span_type') !== next_dist_server_lib_trace_constants__WEBPACK_IMPORTED_MODULE_8__.BaseServerSpan.handleRequest) {\n                    console.warn(`Unexpected root span type '${rootSpanAttributes.get('next.span_type')}'. Please report this Next.js issue https://github.com/vercel/next.js`);\n                    return;\n                }\n                const route = rootSpanAttributes.get('next.route');\n                if (route) {\n                    const name = `${method} ${route}`;\n                    span.setAttributes({\n                        'next.route': route,\n                        'http.route': route,\n                        'next.span_name': name\n                    });\n                    span.updateName(name);\n                } else {\n                    span.updateName(`${method} ${req.url}`);\n                }\n            });\n        };\n        const handleResponse = async (currentSpan)=>{\n            var _cacheEntry_value;\n            const responseGenerator = async ({ previousCacheEntry })=>{\n                try {\n                    if (!(0,next_dist_server_request_meta__WEBPACK_IMPORTED_MODULE_3__.getRequestMeta)(req, 'minimalMode') && isOnDemandRevalidate && revalidateOnlyGenerated && !previousCacheEntry) {\n                        res.statusCode = 404;\n                        // on-demand revalidate always sets this header\n                        res.setHeader('x-nextjs-cache', 'REVALIDATED');\n                        res.end('This page could not be found');\n                        return null;\n                    }\n                    const response = await invokeRouteModule(currentSpan);\n                    req.fetchMetrics = context.renderOpts.fetchMetrics;\n                    let pendingWaitUntil = context.renderOpts.pendingWaitUntil;\n                    // Attempt using provided waitUntil if available\n                    // if it's not we fallback to sendResponse's handling\n                    if (pendingWaitUntil) {\n                        if (ctx.waitUntil) {\n                            ctx.waitUntil(pendingWaitUntil);\n                            pendingWaitUntil = undefined;\n                        }\n                    }\n                    const cacheTags = context.renderOpts.collectedTags;\n                    // If the request is for a static response, we can cache it so long\n                    // as it's not edge.\n                    if (isIsr) {\n                        const blob = await response.blob();\n                        // Copy the headers from the response.\n                        const headers = (0,next_dist_server_web_utils__WEBPACK_IMPORTED_MODULE_11__.toNodeOutgoingHttpHeaders)(response.headers);\n                        if (cacheTags) {\n                            headers[next_dist_lib_constants__WEBPACK_IMPORTED_MODULE_13__.NEXT_CACHE_TAGS_HEADER] = cacheTags;\n                        }\n                        if (!headers['content-type'] && blob.type) {\n                            headers['content-type'] = blob.type;\n                        }\n                        const revalidate = typeof context.renderOpts.collectedRevalidate === 'undefined' || context.renderOpts.collectedRevalidate >= next_dist_lib_constants__WEBPACK_IMPORTED_MODULE_13__.INFINITE_CACHE ? false : context.renderOpts.collectedRevalidate;\n                        const expire = typeof context.renderOpts.collectedExpire === 'undefined' || context.renderOpts.collectedExpire >= next_dist_lib_constants__WEBPACK_IMPORTED_MODULE_13__.INFINITE_CACHE ? undefined : context.renderOpts.collectedExpire;\n                        // Create the cache entry for the response.\n                        const cacheEntry = {\n                            value: {\n                                kind: next_dist_server_response_cache__WEBPACK_IMPORTED_MODULE_15__.CachedRouteKind.APP_ROUTE,\n                                status: response.status,\n                                body: Buffer.from(await blob.arrayBuffer()),\n                                headers\n                            },\n                            cacheControl: {\n                                revalidate,\n                                expire\n                            }\n                        };\n                        return cacheEntry;\n                    } else {\n                        // send response without caching if not ISR\n                        await (0,next_dist_server_send_response__WEBPACK_IMPORTED_MODULE_10__.sendResponse)(nodeNextReq, nodeNextRes, response, context.renderOpts.pendingWaitUntil);\n                        return null;\n                    }\n                } catch (err) {\n                    // if this is a background revalidate we need to report\n                    // the request error here as it won't be bubbled\n                    if (previousCacheEntry == null ? void 0 : previousCacheEntry.isStale) {\n                        await routeModule.onRequestError(req, err, {\n                            routerKind: 'App Router',\n                            routePath: srcPage,\n                            routeType: 'route',\n                            revalidateReason: (0,next_dist_server_instrumentation_utils__WEBPACK_IMPORTED_MODULE_9__.getRevalidateReason)({\n                                isRevalidate,\n                                isOnDemandRevalidate\n                            })\n                        }, routerServerContext);\n                    }\n                    throw err;\n                }\n            };\n            const cacheEntry = await routeModule.handleResponse({\n                req,\n                nextConfig,\n                cacheKey,\n                routeKind: next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n                isFallback: false,\n                prerenderManifest,\n                isRoutePPREnabled: false,\n                isOnDemandRevalidate,\n                revalidateOnlyGenerated,\n                responseGenerator,\n                waitUntil: ctx.waitUntil\n            });\n            // we don't create a cacheEntry for ISR\n            if (!isIsr) {\n                return null;\n            }\n            if ((cacheEntry == null ? void 0 : (_cacheEntry_value = cacheEntry.value) == null ? void 0 : _cacheEntry_value.kind) !== next_dist_server_response_cache__WEBPACK_IMPORTED_MODULE_15__.CachedRouteKind.APP_ROUTE) {\n                var _cacheEntry_value1;\n                throw Object.defineProperty(new Error(`Invariant: app-route received invalid cache entry ${cacheEntry == null ? void 0 : (_cacheEntry_value1 = cacheEntry.value) == null ? void 0 : _cacheEntry_value1.kind}`), \"__NEXT_ERROR_CODE\", {\n                    value: \"E701\",\n                    enumerable: false,\n                    configurable: true\n                });\n            }\n            if (!(0,next_dist_server_request_meta__WEBPACK_IMPORTED_MODULE_3__.getRequestMeta)(req, 'minimalMode')) {\n                res.setHeader('x-nextjs-cache', isOnDemandRevalidate ? 'REVALIDATED' : cacheEntry.isMiss ? 'MISS' : cacheEntry.isStale ? 'STALE' : 'HIT');\n            }\n            // Draft mode should never be cached\n            if (isDraftMode) {\n                res.setHeader('Cache-Control', 'private, no-cache, no-store, max-age=0, must-revalidate');\n            }\n            const headers = (0,next_dist_server_web_utils__WEBPACK_IMPORTED_MODULE_11__.fromNodeOutgoingHttpHeaders)(cacheEntry.value.headers);\n            if (!((0,next_dist_server_request_meta__WEBPACK_IMPORTED_MODULE_3__.getRequestMeta)(req, 'minimalMode') && isIsr)) {\n                headers.delete(next_dist_lib_constants__WEBPACK_IMPORTED_MODULE_13__.NEXT_CACHE_TAGS_HEADER);\n            }\n            // If cache control is already set on the response we don't\n            // override it to allow users to customize it via next.config\n            if (cacheEntry.cacheControl && !res.getHeader('Cache-Control') && !headers.get('Cache-Control')) {\n                headers.set('Cache-Control', (0,next_dist_server_lib_cache_control__WEBPACK_IMPORTED_MODULE_12__.getCacheControlHeader)(cacheEntry.cacheControl));\n            }\n            await (0,next_dist_server_send_response__WEBPACK_IMPORTED_MODULE_10__.sendResponse)(nodeNextReq, nodeNextRes, new Response(cacheEntry.value.body, {\n                headers,\n                status: cacheEntry.value.status || 200\n            }));\n            return null;\n        };\n        // TODO: activeSpan code path is for when wrapped by\n        // next-server can be removed when this is no longer used\n        if (activeSpan) {\n            await handleResponse(activeSpan);\n        } else {\n            await tracer.withPropagatedContext(req.headers, ()=>tracer.trace(next_dist_server_lib_trace_constants__WEBPACK_IMPORTED_MODULE_8__.BaseServerSpan.handleRequest, {\n                    spanName: `${method} ${req.url}`,\n                    kind: next_dist_server_lib_trace_tracer__WEBPACK_IMPORTED_MODULE_4__.SpanKind.SERVER,\n                    attributes: {\n                        'http.method': method,\n                        'http.target': req.url\n                    }\n                }, handleResponse));\n        }\n    } catch (err) {\n        // if we aren't wrapped by base-server handle here\n        if (!activeSpan && !(err instanceof next_dist_shared_lib_no_fallback_error_external__WEBPACK_IMPORTED_MODULE_14__.NoFallbackError)) {\n            await routeModule.onRequestError(req, err, {\n                routerKind: 'App Router',\n                routePath: normalizedSrcPage,\n                routeType: 'route',\n                revalidateReason: (0,next_dist_server_instrumentation_utils__WEBPACK_IMPORTED_MODULE_9__.getRevalidateReason)({\n                    isRevalidate,\n                    isOnDemandRevalidate\n                })\n            });\n        }\n        // rethrow so that we can handle serving error page\n        // If this is during static generation, throw the error again.\n        if (isIsr) throw err;\n        // Otherwise, send a 500 response.\n        await (0,next_dist_server_send_response__WEBPACK_IMPORTED_MODULE_10__.sendResponse)(nodeNextReq, nodeNextRes, new Response(null, {\n            status: 500\n        }));\n        return null;\n    }\n}\n\n//# sourceMappingURL=app-route.js.map\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvLnBucG0vbmV4dEAxNS41LjJfQHBsYXl3cmlnaHQrdGVzX2I3ZTZjMjgwZTlhMWI0MzA5MzQ3YzBiZjBhYjQ3NmQ1L25vZGVfbW9kdWxlcy9uZXh0L2Rpc3QvYnVpbGQvd2VicGFjay9sb2FkZXJzL25leHQtYXBwLWxvYWRlci9pbmRleC5qcz9uYW1lPWFwcCUyRmFwaSUyRm1hdHJpY2VzJTJGbGF0ZXN0JTJGcm91dGUmcGFnZT0lMkZhcGklMkZtYXRyaWNlcyUyRmxhdGVzdCUyRnJvdXRlJmFwcFBhdGhzPSZwYWdlUGF0aD1wcml2YXRlLW5leHQtYXBwLWRpciUyRmFwaSUyRm1hdHJpY2VzJTJGbGF0ZXN0JTJGcm91dGUudHMmYXBwRGlyPUglM0ElNUNVc2VycyU1Q0d1cyU1Q3NvdXJjZSU1Q3JlcG8lNUNkeW5hbWljcyU1Q2R5bmFtaWNzLWIlNUNjcnlwdG9waS1keW5hbWljcyU1Q3NyYyU1Q2FwcCZwYWdlRXh0ZW5zaW9ucz10c3gmcGFnZUV4dGVuc2lvbnM9dHMmcGFnZUV4dGVuc2lvbnM9anN4JnBhZ2VFeHRlbnNpb25zPWpzJnJvb3REaXI9SCUzQSU1Q1VzZXJzJTVDR3VzJTVDc291cmNlJTVDcmVwbyU1Q2R5bmFtaWNzJTVDZHluYW1pY3MtYiU1Q2NyeXB0b3BpLWR5bmFtaWNzJmlzRGV2PXRydWUmdHNjb25maWdQYXRoPXRzY29uZmlnLmpzb24mYmFzZVBhdGg9JmFzc2V0UHJlZml4PSZuZXh0Q29uZmlnT3V0cHV0PSZwcmVmZXJyZWRSZWdpb249Jm1pZGRsZXdhcmVDb25maWc9ZTMwJTNEJmlzR2xvYmFsTm90Rm91bmRFbmFibGVkPSEiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBK0Y7QUFDdkM7QUFDcUI7QUFDZDtBQUNTO0FBQ087QUFDSztBQUNtQztBQUNqRDtBQUNPO0FBQ2Y7QUFDc0M7QUFDekI7QUFDTTtBQUNDO0FBQ2hCO0FBQzJFO0FBQzdJO0FB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QWlCLDZFQUFjO0FBQy9CO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDRCQUE0Qix3RkFBMkI7QUFDdkQsa0JBQWtCLDZFQUFjO0FBQ2hDLCtCQUErQiw0RUFBc0I7QUFDckQ7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2Q0FBNkMsMEZBQXFCO0FBQ2xFO0FBQ0Esa0JBQWtCLDZFQUFZO0FBQzlCO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVTtBQUNWLDZFQUE2RSxnRkFBYztBQUMzRixpQ0FBaUMsUUFBUSxFQUFFLFFBQVE7QUFDbkQsMEJBQTBCLHVFQUFRO0FBQ2xDO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0EsTUFBTTtBQUNOO0FBQ0EsNENBQTRDLDZGQUFlO0FBQzNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0NBQWtDLDJGQUFtQjtBQUNyRDtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsY0FBYyw2RUFBWTtBQUMxQjtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7O0FBRUEiLCJzb3VyY2VzIjpbIiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBBcHBSb3V0ZVJvdXRlTW9kdWxlIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvcm91dGUtbW9kdWxlcy9hcHAtcm91dGUvbW9kdWxlLmNvbXBpbGVkXCI7XG5pbXBvcnQgeyBSb3V0ZUtpbmQgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9yb3V0ZS1raW5kXCI7XG5pbXBvcnQgeyBwYXRjaEZldGNoIGFzIF9wYXRjaEZldGNoIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvbGliL3BhdGNoLWZldGNoXCI7XG5pbXBvcnQgeyBnZXRSZXF1ZXN0TWV0YSB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL3JlcXVlc3QtbWV0YVwiO1xuaW1wb3J0IHsgZ2V0VHJhY2VyLCBTcGFuS2luZCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2xpYi90cmFjZS90cmFjZXJcIjtcbmltcG9ydCB7IG5vcm1hbGl6ZUFwcFBhdGggfSBmcm9tIFwibmV4dC9kaXN0L3NoYXJlZC9saWIvcm91dGVyL3V0aWxzL2FwcC1wYXRoc1wiO1xuaW1wb3J0IHsgTm9kZU5leHRSZXF1ZXN0LCBOb2RlTmV4dFJlc3BvbnNlIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvYmFzZS1odHRwL25vZGVcIjtcbmltcG9ydCB7IE5leHRSZXF1ZXN0QWRhcHRlciwgc2lnbmFsRnJvbU5vZGVSZXNwb25zZSB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL3dlYi9zcGVjLWV4dGVuc2lvbi9hZGFwdGVycy9uZXh0LXJlcXVlc3RcIjtcbmltcG9ydCB7IEJhc2VTZXJ2ZXJTcGFuIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvbGliL3RyYWNlL2NvbnN0YW50c1wiO1xuaW1wb3J0IHsgZ2V0UmV2YWxpZGF0ZVJlYXNvbiB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2luc3RydW1lbnRhdGlvbi91dGlsc1wiO1xuaW1wb3J0IHsgc2VuZFJlc3BvbnNlIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvc2VuZC1yZXNwb25zZVwiO1xuaW1wb3J0IHsgZnJvbU5vZGVPdXRnb2luZ0h0dHBIZWFkZXJzLCB0b05vZGVPdXRnb2luZ0h0dHBIZWFkZXJzIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvd2ViL3V0aWxzXCI7XG5pbXBvcnQgeyBnZXRDYWNoZUNvbnRyb2xIZWFkZXIgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9saWIvY2FjaGUtY29udHJvbFwiO1xuaW1wb3J0IHsgSU5GSU5JVEVfQ0FDSEUsIE5FWFRfQ0FDSEVfVEFHU19IRUFERVIgfSBmcm9tIFwibmV4dC9kaXN0L2xpYi9jb25zdGFudHNcIjtcbmltcG9ydCB7IE5vRmFsbGJhY2tFcnJvciB9IGZyb20gXCJuZXh0L2Rpc3Qvc2hhcmVkL2xpYi9uby1mYWxsYmFjay1lcnJvci5leHRlcm5hbFwiO1xuaW1wb3J0IHsgQ2FjaGVkUm91dGVLaW5kIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvcmVzcG9uc2UtY2FjaGVcIjtcbmltcG9ydCAqIGFzIHVzZXJsYW5kIGZyb20gXCJIOlxcXFxVc2Vyc1xcXFxHdXNcXFxcc291cmNlXFxcXHJlcG9cXFxcZHluYW1pY3NcXFxcZHluYW1pY3MtYlxcXFxjcnlwdG9waS1keW5hbWljc1xcXFxzcmNcXFxcYXBwXFxcXGFwaVxcXFxtYXRyaWNlc1xcXFxsYXRlc3RcXFxccm91dGUudHNcIjtcbi8vIFdlIGluamVjdCB0aGUgbmV4dENvbmZpZ091dHB1dCBoZXJlIHNvIHRoYXQgd2UgY2FuIHVzZSB0aGVtIGluIHRoZSByb3V0ZVxuLy8gbW9kdWxlLlxuY29uc3QgbmV4dENvbmZpZ091dHB1dCA9IFwiXCJcbmNvbnN0IHJvdXRlTW9kdWxlID0gbmV3IEFwcFJvdXRlUm91dGVNb2R1bGUoe1xuICAgIGRlZmluaXRpb246IHtcbiAgICAgICAga2luZDogUm91dGVLaW5kLkFQUF9ST1VURSxcbiAgICAgICAgcGFnZTogXCIvYXBpL21hdHJpY2VzL2xhdGVzdC9yb3V0ZVwiLFxuICAgICAgICBwYXRobmFtZTogXCIvYXBpL21hdHJpY2VzL2xhdGVzdFwiLFxuICAgICAgICBmaWxlbmFtZTogXCJyb3V0ZVwiLFxuICAgICAgICBidW5kbGVQYXRoOiBcImFwcC9hcGkvbWF0cmljZXMvbGF0ZXN0L3JvdXRlXCJcbiAgICB9LFxuICAgIGRpc3REaXI6IHByb2Nlc3MuZW52Ll9fTkVYVF9SRUxBVElWRV9ESVNUX0RJUiB8fCAnJyxcbiAgICByZWxhdGl2ZVByb2plY3REaXI6IHByb2Nlc3MuZW52Ll9fTkVYVF9SRUxBVElWRV9QUk9KRUNUX0RJUiB8fCAnJyxcbiAgICByZXNvbHZlZFBhZ2VQYXRoOiBcIkg6XFxcXFVzZXJzXFxcXEd1c1xcXFxzb3VyY2VcXFxccmVwb1xcXFxkeW5hbWljc1xcXFxkeW5hbWljcy1iXFxcXGNyeXB0b3BpLWR5bmFtaWNzXFxcXHNyY1xcXFxhcHBcXFxcYXBpXFxcXG1hdHJpY2VzXFxcXGxhdGVzdFxcXFxyb3V0ZS50c1wiLFxuICAgIG5leHRDb25maWdPdXRwdXQsXG4gICAgdXNlcmxhbmRcbn0pO1xuLy8gUHVsbCBvdXQgdGhlIGV4cG9ydHMgdGhhdCB3ZSBuZWVkIHRvIGV4cG9zZSBmcm9tIHRoZSBtb2R1bGUuIFRoaXMgc2hvdWxkXG4vLyBiZSBlbGltaW5hdGVkIHdoZW4gd2UndmUgbW92ZWQgdGhlIG90aGVyIHJvdXRlcyB0byB0aGUgbmV3IGZvcm1hdC4gVGhlc2Vcbi8vIGFyZSB1c2VkIHRvIGhvb2sgaW50byB0aGUgcm91dGUuXG5jb25zdCB7IHdvcmtBc3luY1N0b3JhZ2UsIHdvcmtVbml0QXN5bmNTdG9yYWdlLCBzZXJ2ZXJIb29rcyB9ID0gcm91dGVNb2R1bGU7XG5mdW5jdGlvbiBwYXRjaEZldGNoKCkge1xuICAgIHJldHVybiBfcGF0Y2hGZXRjaCh7XG4gICAgICAgIHdvcmtBc3luY1N0b3JhZ2UsXG4gICAgICAgIHdvcmtVbml0QXN5bmNTdG9yYWdlXG4gICAgfSk7XG59XG5leHBvcnQgeyByb3V0ZU1vZHVsZSwgd29ya0FzeW5jU3RvcmFnZSwgd29ya1VuaXRBc3luY1N0b3JhZ2UsIHNlcnZlckhvb2tzLCBwYXRjaEZldGNoLCAgfTtcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBoYW5kbGVyKHJlcSwgcmVzLCBjdHgpIHtcbiAgICB2YXIgX25leHRDb25maWdfZXhwZXJpbWVudGFsO1xuICAgIGxldCBzcmNQYWdlID0gXCIvYXBpL21hdHJpY2VzL2xhdGVzdC9yb3V0ZVwiO1xuICAgIC8vIHR1cmJvcGFjayBkb2Vzbid0IG5vcm1hbGl6ZSBgL2luZGV4YCBpbiB0aGUgcGFnZSBuYW1lXG4gICAgLy8gc28gd2UgbmVlZCB0byB0byBwcm9jZXNzIGR5bmFtaWMgcm91dGVzIHByb3Blcmx5XG4gICAgLy8gVE9ETzogZml4IHR1cmJvcGFjayBwcm92aWRpbmcgZGlmZmVyaW5nIHZhbHVlIGZyb20gd2VicGFja1xuICAgIGlmIChwcm9jZXNzLmVudi5UVVJCT1BBQ0spIHtcbiAgICAgICAgc3JjUGFnZSA9IHNyY1BhZ2UucmVwbGFjZSgvXFwvaW5kZXgkLywgJycpIHx8ICcvJztcbiAgICB9IGVsc2UgaWYgKHNyY1BhZ2UgPT09ICcvaW5kZXgnKSB7XG4gICAgICAgIC8vIHdlIGFsd2F5cyBub3JtYWxpemUgL2luZGV4IHNwZWNpZmljYWxseVxuICAgICAgICBzcmNQYWdlID0gJy8nO1xuICAgIH1cbiAgICBjb25zdCBtdWx0aVpvbmVEcmFmdE1vZGUgPSBwcm9jZXNzLmVudi5fX05FWFRfTVVMVElfWk9ORV9EUkFGVF9NT0RFO1xuICAgIGNvbnN0IHByZXBhcmVSZXN1bHQgPSBhd2FpdCByb3V0ZU1vZHVsZS5wcmVwYXJlKHJlcSwgcmVzLCB7XG4gICAgICAgIHNyY1BhZ2UsXG4gICAgICAgIG11bHRpWm9uZURyYWZ0TW9kZVxuICAgIH0pO1xuICAgIGlmICghcHJlcGFyZVJlc3VsdCkge1xuICAgICAgICByZXMuc3RhdHVzQ29kZSA9IDQwMDtcbiAgICAgICAgcmVzLmVuZCgnQmFkIFJlcXVlc3QnKTtcbiAgICAgICAgY3R4LndhaXRVbnRpbCA9PSBudWxsID8gdm9pZCAwIDogY3R4LndhaXRVbnRpbC5jYWxsKGN0eCwgUHJvbWlzZS5yZXNvbHZlKCkpO1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgY29uc3QgeyBidWlsZElkLCBwYXJhbXMsIG5leHRDb25maWcsIGlzRHJhZnRNb2RlLCBwcmVyZW5kZXJNYW5pZmVzdCwgcm91dGVyU2VydmVyQ29udGV4dCwgaXNPbkRlbWFuZFJldmFsaWRhdGUsIHJldmFsaWRhdGVPbmx5R2VuZXJhdGVkLCByZXNvbHZlZFBhdGhuYW1lIH0gPSBwcmVwYXJlUmVzdWx0O1xuICAgIGNvbnN0IG5vcm1hbGl6ZWRTcmNQYWdlID0gbm9ybWFsaXplQXBwUGF0aChzcmNQYWdlKTtcbiAgICBsZXQgaXNJc3IgPSBCb29sZWFuKHByZXJlbmRlck1hbmlmZXN0LmR5bmFtaWNSb3V0ZXNbbm9ybWFsaXplZFNyY1BhZ2VdIHx8IHByZXJlbmRlck1hbmlmZXN0LnJvdXRlc1tyZXNvbHZlZFBhdGhuYW1lXSk7XG4gICAgaWYgKGlzSXNyICYmICFpc0RyYWZ0TW9kZSkge1xuICAgICAgICBjb25zdCBpc1ByZXJlbmRlcmVkID0gQm9vbGVhbihwcmVyZW5kZXJNYW5pZmVzdC5yb3V0ZXNbcmVzb2x2ZWRQYXRobmFtZV0pO1xuICAgICAgICBjb25zdCBwcmVyZW5kZXJJbmZvID0gcHJlcmVuZGVyTWFuaWZlc3QuZHluYW1pY1JvdXRlc1tub3JtYWxpemVkU3JjUGFnZV07XG4gICAgICAgIGlmIChwcmVyZW5kZXJJbmZvKSB7XG4gICAgICAgICAgICBpZiAocHJlcmVuZGVySW5mby5mYWxsYmFjayA9PT0gZmFsc2UgJiYgIWlzUHJlcmVuZGVyZWQpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgTm9GYWxsYmFja0Vycm9yKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgbGV0IGNhY2hlS2V5ID0gbnVsbDtcbiAgICBpZiAoaXNJc3IgJiYgIXJvdXRlTW9kdWxlLmlzRGV2ICYmICFpc0RyYWZ0TW9kZSkge1xuICAgICAgICBjYWNoZUtleSA9IHJlc29sdmVkUGF0aG5hbWU7XG4gICAgICAgIC8vIGVuc3VyZSAvaW5kZXggYW5kIC8gaXMgbm9ybWFsaXplZCB0byBvbmUga2V5XG4gICAgICAgIGNhY2hlS2V5ID0gY2FjaGVLZXkgPT09ICcvaW5kZXgnID8gJy8nIDogY2FjaGVLZXk7XG4gICAgfVxuICAgIGNvbnN0IHN1cHBvcnRzRHluYW1pY1Jlc3BvbnNlID0gLy8gSWYgd2UncmUgaW4gZGV2ZWxvcG1lbnQsIHdlIGFsd2F5cyBzdXBwb3J0IGR5bmFtaWMgSFRNTFxuICAgIHJvdXRlTW9kdWxlLmlzRGV2ID09PSB0cnVlIHx8IC8vIElmIHRoaXMgaXMgbm90IFNTRyBvciBkb2VzIG5vdCBoYXZlIHN0YXRpYyBwYXRocywgdGhlbiBpdCBzdXBwb3J0c1xuICAgIC8vIGR5bmFtaWMgSFRNTC5cbiAgICAhaXNJc3I7XG4gICAgLy8gVGhpcyBpcyBhIHJldmFsaWRhdGlvbiByZXF1ZXN0IGlmIHRoZSByZXF1ZXN0IGlzIGZvciBhIHN0YXRpY1xuICAgIC8vIHBhZ2UgYW5kIGl0IGlzIG5vdCBiZWluZyByZXN1bWVkIGZyb20gYSBwb3N0cG9uZWQgcmVuZGVyIGFuZFxuICAgIC8vIGl0IGlzIG5vdCBhIGR5bmFtaWMgUlNDIHJlcXVlc3QgdGhlbiBpdCBpcyBhIHJldmFsaWRhdGlvblxuICAgIC8vIHJlcXVlc3QuXG4gICAgY29uc3QgaXNSZXZhbGlkYXRlID0gaXNJc3IgJiYgIXN1cHBvcnRzRHluYW1pY1Jlc3BvbnNlO1xuICAgIGNvbnN0IG1ldGhvZCA9IHJlcS5tZXRob2QgfHwgJ0dFVCc7XG4gICAgY29uc3QgdHJhY2VyID0gZ2V0VHJhY2VyKCk7XG4gICAgY29uc3QgYWN0aXZlU3BhbiA9IHRyYWNlci5nZXRBY3RpdmVTY29wZVNwYW4oKTtcbiAgICBjb25zdCBjb250ZXh0ID0ge1xuICAgICAgICBwYXJhbXMsXG4gICAgICAgIHByZXJlbmRlck1hbmlmZXN0LFxuICAgICAgICByZW5kZXJPcHRzOiB7XG4gICAgICAgICAgICBleHBlcmltZW50YWw6IHtcbiAgICAgICAgICAgICAgICBjYWNoZUNvbXBvbmVudHM6IEJvb2xlYW4obmV4dENvbmZpZy5leHBlcmltZW50YWwuY2FjaGVDb21wb25lbnRzKSxcbiAgICAgICAgICAgICAgICBhdXRoSW50ZXJydXB0czogQm9vbGVhbihuZXh0Q29uZmlnLmV4cGVyaW1lbnRhbC5hdXRoSW50ZXJydXB0cylcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBzdXBwb3J0c0R5bmFtaWNSZXNwb25zZSxcbiAgICAgICAgICAgIGluY3JlbWVudGFsQ2FjaGU6IGdldFJlcXVlc3RNZXRhKHJlcSwgJ2luY3JlbWVudGFsQ2FjaGUnKSxcbiAgICAgICAgICAgIGNhY2hlTGlmZVByb2ZpbGVzOiAoX25leHRDb25maWdfZXhwZXJpbWVudGFsID0gbmV4dENvbmZpZy5leHBlcmltZW50YWwpID09IG51bGwgPyB2b2lkIDAgOiBfbmV4dENvbmZpZ19leHBlcmltZW50YWwuY2FjaGVMaWZlLFxuICAgICAgICAgICAgaXNSZXZhbGlkYXRlLFxuICAgICAgICAgICAgd2FpdFVudGlsOiBjdHgud2FpdFVudGlsLFxuICAgICAgICAgICAgb25DbG9zZTogKGNiKT0+e1xuICAgICAgICAgICAgICAgIHJlcy5vbignY2xvc2UnLCBjYik7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgb25BZnRlclRhc2tFcnJvcjogdW5kZWZpbmVkLFxuICAgICAgICAgICAgb25JbnN0cnVtZW50YXRpb25SZXF1ZXN0RXJyb3I6IChlcnJvciwgX3JlcXVlc3QsIGVycm9yQ29udGV4dCk9PnJvdXRlTW9kdWxlLm9uUmVxdWVzdEVycm9yKHJlcSwgZXJyb3IsIGVycm9yQ29udGV4dCwgcm91dGVyU2VydmVyQ29udGV4dClcbiAgICAgICAgfSxcbiAgICAgICAgc2hhcmVkQ29udGV4dDoge1xuICAgICAgICAgICAgYnVpbGRJZFxuICAgICAgICB9XG4gICAgfTtcbiAgICBjb25zdCBub2RlTmV4dFJlcSA9IG5ldyBOb2RlTmV4dFJlcXVlc3QocmVxKTtcbiAgICBjb25zdCBub2RlTmV4dFJlcyA9IG5ldyBOb2RlTmV4dFJlc3BvbnNlKHJlcyk7XG4gICAgY29uc3QgbmV4dFJlcSA9IE5leHRSZXF1ZXN0QWRhcHRlci5mcm9tTm9kZU5leHRSZXF1ZXN0KG5vZGVOZXh0UmVxLCBzaWduYWxGcm9tTm9kZVJlc3BvbnNlKHJlcykpO1xuICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IGludm9rZVJvdXRlTW9kdWxlID0gYXN5bmMgKHNwYW4pPT57XG4gICAgICAgICAgICByZXR1cm4gcm91dGVNb2R1bGUuaGFuZGxlKG5leHRSZXEsIGNvbnRleHQpLmZpbmFsbHkoKCk9PntcbiAgICAgICAgICAgICAgICBpZiAoIXNwYW4pIHJldHVybjtcbiAgICAgICAgICAgICAgICBzcGFuLnNldEF0dHJpYnV0ZXMoe1xuICAgICAgICAgICAgICAgICAgICAnaHR0cC5zdGF0dXNfY29kZSc6IHJlcy5zdGF0dXNDb2RlLFxuICAgICAgICAgICAgICAgICAgICAnbmV4dC5yc2MnOiBmYWxzZVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGNvbnN0IHJvb3RTcGFuQXR0cmlidXRlcyA9IHRyYWNlci5nZXRSb290U3BhbkF0dHJpYnV0ZXMoKTtcbiAgICAgICAgICAgICAgICAvLyBXZSB3ZXJlIHVuYWJsZSB0byBnZXQgYXR0cmlidXRlcywgcHJvYmFibHkgT1RFTCBpcyBub3QgZW5hYmxlZFxuICAgICAgICAgICAgICAgIGlmICghcm9vdFNwYW5BdHRyaWJ1dGVzKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKHJvb3RTcGFuQXR0cmlidXRlcy5nZXQoJ25leHQuc3Bhbl90eXBlJykgIT09IEJhc2VTZXJ2ZXJTcGFuLmhhbmRsZVJlcXVlc3QpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS53YXJuKGBVbmV4cGVjdGVkIHJvb3Qgc3BhbiB0eXBlICcke3Jvb3RTcGFuQXR0cmlidXRlcy5nZXQoJ25leHQuc3Bhbl90eXBlJyl9Jy4gUGxlYXNlIHJlcG9ydCB0aGlzIE5leHQuanMgaXNzdWUgaHR0cHM6Ly9naXRodWIuY29tL3ZlcmNlbC9uZXh0LmpzYCk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY29uc3Qgcm91dGUgPSByb290U3BhbkF0dHJpYnV0ZXMuZ2V0KCduZXh0LnJvdXRlJyk7XG4gICAgICAgICAgICAgICAgaWYgKHJvdXRlKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IG5hbWUgPSBgJHttZXRob2R9ICR7cm91dGV9YDtcbiAgICAgICAgICAgICAgICAgICAgc3Bhbi5zZXRBdHRyaWJ1dGVzKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICduZXh0LnJvdXRlJzogcm91dGUsXG4gICAgICAgICAgICAgICAgICAgICAgICAnaHR0cC5yb3V0ZSc6IHJvdXRlLFxuICAgICAgICAgICAgICAgICAgICAgICAgJ25leHQuc3Bhbl9uYW1lJzogbmFtZVxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgc3Bhbi51cGRhdGVOYW1lKG5hbWUpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHNwYW4udXBkYXRlTmFtZShgJHttZXRob2R9ICR7cmVxLnVybH1gKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfTtcbiAgICAgICAgY29uc3QgaGFuZGxlUmVzcG9uc2UgPSBhc3luYyAoY3VycmVudFNwYW4pPT57XG4gICAgICAgICAgICB2YXIgX2NhY2hlRW50cnlfdmFsdWU7XG4gICAgICAgICAgICBjb25zdCByZXNwb25zZUdlbmVyYXRvciA9IGFzeW5jICh7IHByZXZpb3VzQ2FjaGVFbnRyeSB9KT0+e1xuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghZ2V0UmVxdWVzdE1ldGEocmVxLCAnbWluaW1hbE1vZGUnKSAmJiBpc09uRGVtYW5kUmV2YWxpZGF0ZSAmJiByZXZhbGlkYXRlT25seUdlbmVyYXRlZCAmJiAhcHJldmlvdXNDYWNoZUVudHJ5KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXMuc3RhdHVzQ29kZSA9IDQwNDtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIG9uLWRlbWFuZCByZXZhbGlkYXRlIGFsd2F5cyBzZXRzIHRoaXMgaGVhZGVyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXMuc2V0SGVhZGVyKCd4LW5leHRqcy1jYWNoZScsICdSRVZBTElEQVRFRCcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVzLmVuZCgnVGhpcyBwYWdlIGNvdWxkIG5vdCBiZSBmb3VuZCcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBpbnZva2VSb3V0ZU1vZHVsZShjdXJyZW50U3Bhbik7XG4gICAgICAgICAgICAgICAgICAgIHJlcS5mZXRjaE1ldHJpY3MgPSBjb250ZXh0LnJlbmRlck9wdHMuZmV0Y2hNZXRyaWNzO1xuICAgICAgICAgICAgICAgICAgICBsZXQgcGVuZGluZ1dhaXRVbnRpbCA9IGNvbnRleHQucmVuZGVyT3B0cy5wZW5kaW5nV2FpdFVudGlsO1xuICAgICAgICAgICAgICAgICAgICAvLyBBdHRlbXB0IHVzaW5nIHByb3ZpZGVkIHdhaXRVbnRpbCBpZiBhdmFpbGFibGVcbiAgICAgICAgICAgICAgICAgICAgLy8gaWYgaXQncyBub3Qgd2UgZmFsbGJhY2sgdG8gc2VuZFJlc3BvbnNlJ3MgaGFuZGxpbmdcbiAgICAgICAgICAgICAgICAgICAgaWYgKHBlbmRpbmdXYWl0VW50aWwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjdHgud2FpdFVudGlsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY3R4LndhaXRVbnRpbChwZW5kaW5nV2FpdFVudGlsKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwZW5kaW5nV2FpdFVudGlsID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGNhY2hlVGFncyA9IGNvbnRleHQucmVuZGVyT3B0cy5jb2xsZWN0ZWRUYWdzO1xuICAgICAgICAgICAgICAgICAgICAvLyBJZiB0aGUgcmVxdWVzdCBpcyBmb3IgYSBzdGF0aWMgcmVzcG9uc2UsIHdlIGNhbiBjYWNoZSBpdCBzbyBsb25nXG4gICAgICAgICAgICAgICAgICAgIC8vIGFzIGl0J3Mgbm90IGVkZ2UuXG4gICAgICAgICAgICAgICAgICAgIGlmIChpc0lzcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgYmxvYiA9IGF3YWl0IHJlc3BvbnNlLmJsb2IoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIENvcHkgdGhlIGhlYWRlcnMgZnJvbSB0aGUgcmVzcG9uc2UuXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBoZWFkZXJzID0gdG9Ob2RlT3V0Z29pbmdIdHRwSGVhZGVycyhyZXNwb25zZS5oZWFkZXJzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjYWNoZVRhZ3MpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBoZWFkZXJzW05FWFRfQ0FDSEVfVEFHU19IRUFERVJdID0gY2FjaGVUYWdzO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFoZWFkZXJzWydjb250ZW50LXR5cGUnXSAmJiBibG9iLnR5cGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBoZWFkZXJzWydjb250ZW50LXR5cGUnXSA9IGJsb2IudHlwZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHJldmFsaWRhdGUgPSB0eXBlb2YgY29udGV4dC5yZW5kZXJPcHRzLmNvbGxlY3RlZFJldmFsaWRhdGUgPT09ICd1bmRlZmluZWQnIHx8IGNvbnRleHQucmVuZGVyT3B0cy5jb2xsZWN0ZWRSZXZhbGlkYXRlID49IElORklOSVRFX0NBQ0hFID8gZmFsc2UgOiBjb250ZXh0LnJlbmRlck9wdHMuY29sbGVjdGVkUmV2YWxpZGF0ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGV4cGlyZSA9IHR5cGVvZiBjb250ZXh0LnJlbmRlck9wdHMuY29sbGVjdGVkRXhwaXJlID09PSAndW5kZWZpbmVkJyB8fCBjb250ZXh0LnJlbmRlck9wdHMuY29sbGVjdGVkRXhwaXJlID49IElORklOSVRFX0NBQ0hFID8gdW5kZWZpbmVkIDogY29udGV4dC5yZW5kZXJPcHRzLmNvbGxlY3RlZEV4cGlyZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIENyZWF0ZSB0aGUgY2FjaGUgZW50cnkgZm9yIHRoZSByZXNwb25zZS5cbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGNhY2hlRW50cnkgPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAga2luZDogQ2FjaGVkUm91dGVLaW5kLkFQUF9ST1VURSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdHVzOiByZXNwb25zZS5zdGF0dXMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJvZHk6IEJ1ZmZlci5mcm9tKGF3YWl0IGJsb2IuYXJyYXlCdWZmZXIoKSksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhlYWRlcnNcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhY2hlQ29udHJvbDoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXZhbGlkYXRlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBleHBpcmVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNhY2hlRW50cnk7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBzZW5kIHJlc3BvbnNlIHdpdGhvdXQgY2FjaGluZyBpZiBub3QgSVNSXG4gICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCBzZW5kUmVzcG9uc2Uobm9kZU5leHRSZXEsIG5vZGVOZXh0UmVzLCByZXNwb25zZSwgY29udGV4dC5yZW5kZXJPcHRzLnBlbmRpbmdXYWl0VW50aWwpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gaWYgdGhpcyBpcyBhIGJhY2tncm91bmQgcmV2YWxpZGF0ZSB3ZSBuZWVkIHRvIHJlcG9ydFxuICAgICAgICAgICAgICAgICAgICAvLyB0aGUgcmVxdWVzdCBlcnJvciBoZXJlIGFzIGl0IHdvbid0IGJlIGJ1YmJsZWRcbiAgICAgICAgICAgICAgICAgICAgaWYgKHByZXZpb3VzQ2FjaGVFbnRyeSA9PSBudWxsID8gdm9pZCAwIDogcHJldmlvdXNDYWNoZUVudHJ5LmlzU3RhbGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHJvdXRlTW9kdWxlLm9uUmVxdWVzdEVycm9yKHJlcSwgZXJyLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcm91dGVyS2luZDogJ0FwcCBSb3V0ZXInLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJvdXRlUGF0aDogc3JjUGFnZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByb3V0ZVR5cGU6ICdyb3V0ZScsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV2YWxpZGF0ZVJlYXNvbjogZ2V0UmV2YWxpZGF0ZVJlYXNvbih7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzUmV2YWxpZGF0ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNPbkRlbWFuZFJldmFsaWRhdGVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICAgICAgfSwgcm91dGVyU2VydmVyQ29udGV4dCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgZXJyO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBjb25zdCBjYWNoZUVudHJ5ID0gYXdhaXQgcm91dGVNb2R1bGUuaGFuZGxlUmVzcG9uc2Uoe1xuICAgICAgICAgICAgICAgIHJlcSxcbiAgICAgICAgICAgICAgICBuZXh0Q29uZmlnLFxuICAgICAgICAgICAgICAgIGNhY2hlS2V5LFxuICAgICAgICAgICAgICAgIHJvdXRlS2luZDogUm91dGVLaW5kLkFQUF9ST1VURSxcbiAgICAgICAgICAgICAgICBpc0ZhbGxiYWNrOiBmYWxzZSxcbiAgICAgICAgICAgICAgICBwcmVyZW5kZXJNYW5pZmVzdCxcbiAgICAgICAgICAgICAgICBpc1JvdXRlUFBSRW5hYmxlZDogZmFsc2UsXG4gICAgICAgICAgICAgICAgaXNPbkRlbWFuZFJldmFsaWRhdGUsXG4gICAgICAgICAgICAgICAgcmV2YWxpZGF0ZU9ubHlHZW5lcmF0ZWQsXG4gICAgICAgICAgICAgICAgcmVzcG9uc2VHZW5lcmF0b3IsXG4gICAgICAgICAgICAgICAgd2FpdFVudGlsOiBjdHgud2FpdFVudGlsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIC8vIHdlIGRvbid0IGNyZWF0ZSBhIGNhY2hlRW50cnkgZm9yIElTUlxuICAgICAgICAgICAgaWYgKCFpc0lzcikge1xuICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKChjYWNoZUVudHJ5ID09IG51bGwgPyB2b2lkIDAgOiAoX2NhY2hlRW50cnlfdmFsdWUgPSBjYWNoZUVudHJ5LnZhbHVlKSA9PSBudWxsID8gdm9pZCAwIDogX2NhY2hlRW50cnlfdmFsdWUua2luZCkgIT09IENhY2hlZFJvdXRlS2luZC5BUFBfUk9VVEUpIHtcbiAgICAgICAgICAgICAgICB2YXIgX2NhY2hlRW50cnlfdmFsdWUxO1xuICAgICAgICAgICAgICAgIHRocm93IE9iamVjdC5kZWZpbmVQcm9wZXJ0eShuZXcgRXJyb3IoYEludmFyaWFudDogYXBwLXJvdXRlIHJlY2VpdmVkIGludmFsaWQgY2FjaGUgZW50cnkgJHtjYWNoZUVudHJ5ID09IG51bGwgPyB2b2lkIDAgOiAoX2NhY2hlRW50cnlfdmFsdWUxID0gY2FjaGVFbnRyeS52YWx1ZSkgPT0gbnVsbCA/IHZvaWQgMCA6IF9jYWNoZUVudHJ5X3ZhbHVlMS5raW5kfWApLCBcIl9fTkVYVF9FUlJPUl9DT0RFXCIsIHtcbiAgICAgICAgICAgICAgICAgICAgdmFsdWU6IFwiRTcwMVwiLFxuICAgICAgICAgICAgICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoIWdldFJlcXVlc3RNZXRhKHJlcSwgJ21pbmltYWxNb2RlJykpIHtcbiAgICAgICAgICAgICAgICByZXMuc2V0SGVhZGVyKCd4LW5leHRqcy1jYWNoZScsIGlzT25EZW1hbmRSZXZhbGlkYXRlID8gJ1JFVkFMSURBVEVEJyA6IGNhY2hlRW50cnkuaXNNaXNzID8gJ01JU1MnIDogY2FjaGVFbnRyeS5pc1N0YWxlID8gJ1NUQUxFJyA6ICdISVQnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIERyYWZ0IG1vZGUgc2hvdWxkIG5ldmVyIGJlIGNhY2hlZFxuICAgICAgICAgICAgaWYgKGlzRHJhZnRNb2RlKSB7XG4gICAgICAgICAgICAgICAgcmVzLnNldEhlYWRlcignQ2FjaGUtQ29udHJvbCcsICdwcml2YXRlLCBuby1jYWNoZSwgbm8tc3RvcmUsIG1heC1hZ2U9MCwgbXVzdC1yZXZhbGlkYXRlJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBoZWFkZXJzID0gZnJvbU5vZGVPdXRnb2luZ0h0dHBIZWFkZXJzKGNhY2hlRW50cnkudmFsdWUuaGVhZGVycyk7XG4gICAgICAgICAgICBpZiAoIShnZXRSZXF1ZXN0TWV0YShyZXEsICdtaW5pbWFsTW9kZScpICYmIGlzSXNyKSkge1xuICAgICAgICAgICAgICAgIGhlYWRlcnMuZGVsZXRlKE5FWFRfQ0FDSEVfVEFHU19IRUFERVIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gSWYgY2FjaGUgY29udHJvbCBpcyBhbHJlYWR5IHNldCBvbiB0aGUgcmVzcG9uc2Ugd2UgZG9uJ3RcbiAgICAgICAgICAgIC8vIG92ZXJyaWRlIGl0IHRvIGFsbG93IHVzZXJzIHRvIGN1c3RvbWl6ZSBpdCB2aWEgbmV4dC5jb25maWdcbiAgICAgICAgICAgIGlmIChjYWNoZUVudHJ5LmNhY2hlQ29udHJvbCAmJiAhcmVzLmdldEhlYWRlcignQ2FjaGUtQ29udHJvbCcpICYmICFoZWFkZXJzLmdldCgnQ2FjaGUtQ29udHJvbCcpKSB7XG4gICAgICAgICAgICAgICAgaGVhZGVycy5zZXQoJ0NhY2hlLUNvbnRyb2wnLCBnZXRDYWNoZUNvbnRyb2xIZWFkZXIoY2FjaGVFbnRyeS5jYWNoZUNvbnRyb2wpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGF3YWl0IHNlbmRSZXNwb25zZShub2RlTmV4dFJlcSwgbm9kZU5leHRSZXMsIG5ldyBSZXNwb25zZShjYWNoZUVudHJ5LnZhbHVlLmJvZHksIHtcbiAgICAgICAgICAgICAgICBoZWFkZXJzLFxuICAgICAgICAgICAgICAgIHN0YXR1czogY2FjaGVFbnRyeS52YWx1ZS5zdGF0dXMgfHwgMjAwXG4gICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfTtcbiAgICAgICAgLy8gVE9ETzogYWN0aXZlU3BhbiBjb2RlIHBhdGggaXMgZm9yIHdoZW4gd3JhcHBlZCBieVxuICAgICAgICAvLyBuZXh0LXNlcnZlciBjYW4gYmUgcmVtb3ZlZCB3aGVuIHRoaXMgaXMgbm8gbG9uZ2VyIHVzZWRcbiAgICAgICAgaWYgKGFjdGl2ZVNwYW4pIHtcbiAgICAgICAgICAgIGF3YWl0IGhhbmRsZVJlc3BvbnNlKGFjdGl2ZVNwYW4pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgYXdhaXQgdHJhY2VyLndpdGhQcm9wYWdhdGVkQ29udGV4dChyZXEuaGVhZGVycywgKCk9PnRyYWNlci50cmFjZShCYXNlU2VydmVyU3Bhbi5oYW5kbGVSZXF1ZXN0LCB7XG4gICAgICAgICAgICAgICAgICAgIHNwYW5OYW1lOiBgJHttZXRob2R9ICR7cmVxLnVybH1gLFxuICAgICAgICAgICAgICAgICAgICBraW5kOiBTcGFuS2luZC5TRVJWRVIsXG4gICAgICAgICAgICAgICAgICAgIGF0dHJpYnV0ZXM6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICdodHRwLm1ldGhvZCc6IG1ldGhvZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICdodHRwLnRhcmdldCc6IHJlcS51cmxcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0sIGhhbmRsZVJlc3BvbnNlKSk7XG4gICAgICAgIH1cbiAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgLy8gaWYgd2UgYXJlbid0IHdyYXBwZWQgYnkgYmFzZS1zZXJ2ZXIgaGFuZGxlIGhlcmVcbiAgICAgICAgaWYgKCFhY3RpdmVTcGFuICYmICEoZXJyIGluc3RhbmNlb2YgTm9GYWxsYmFja0Vycm9yKSkge1xuICAgICAgICAgICAgYXdhaXQgcm91dGVNb2R1bGUub25SZXF1ZXN0RXJyb3IocmVxLCBlcnIsIHtcbiAgICAgICAgICAgICAgICByb3V0ZXJLaW5kOiAnQXBwIFJvdXRlcicsXG4gICAgICAgICAgICAgICAgcm91dGVQYXRoOiBub3JtYWxpemVkU3JjUGFnZSxcbiAgICAgICAgICAgICAgICByb3V0ZVR5cGU6ICdyb3V0ZScsXG4gICAgICAgICAgICAgICAgcmV2YWxpZGF0ZVJlYXNvbjogZ2V0UmV2YWxpZGF0ZVJlYXNvbih7XG4gICAgICAgICAgICAgICAgICAgIGlzUmV2YWxpZGF0ZSxcbiAgICAgICAgICAgICAgICAgICAgaXNPbkRlbWFuZFJldmFsaWRhdGVcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gcmV0aHJvdyBzbyB0aGF0IHdlIGNhbiBoYW5kbGUgc2VydmluZyBlcnJvciBwYWdlXG4gICAgICAgIC8vIElmIHRoaXMgaXMgZHVyaW5nIHN0YXRpYyBnZW5lcmF0aW9uLCB0aHJvdyB0aGUgZXJyb3IgYWdhaW4uXG4gICAgICAgIGlmIChpc0lzcikgdGhyb3cgZXJyO1xuICAgICAgICAvLyBPdGhlcndpc2UsIHNlbmQgYSA1MDAgcmVzcG9uc2UuXG4gICAgICAgIGF3YWl0IHNlbmRSZXNwb25zZShub2RlTmV4dFJlcSwgbm9kZU5leHRSZXMsIG5ldyBSZXNwb25zZShudWxsLCB7XG4gICAgICAgICAgICBzdGF0dXM6IDUwMFxuICAgICAgICB9KSk7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbn1cblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YXBwLXJvdXRlLmpzLm1hcFxuIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/.pnpm/next@15.5.2_@playwright+tes_b7e6c280e9a1b4309347c0bf0ab476d5/node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fmatrices%2Flatest%2Froute&page=%2Fapi%2Fmatrices%2Flatest%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fmatrices%2Flatest%2Froute.ts&appDir=H%3A%5CUsers%5CGus%5Csource%5Crepo%5Cdynamics%5Cdynamics-b%5Ccryptopi-dynamics%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=H%3A%5CUsers%5CGus%5Csource%5Crepo%5Cdynamics%5Cdynamics-b%5Ccryptopi-dynamics&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=!\n");

/***/ }),

/***/ "(rsc)/./node_modules/.pnpm/next@15.5.2_@playwright+tes_b7e6c280e9a1b4309347c0bf0ab476d5/node_modules/next/dist/build/webpack/loaders/next-flight-action-entry-loader.js?actions=%5B%5B%22H%3A%5C%5CUsers%5C%5CGus%5C%5Csource%5C%5Crepo%5C%5Cdynamics%5C%5Cdynamics-b%5C%5Ccryptopi-dynamics%5C%5Csrc%5C%5Clib%5C%5Csettings%5C%5Cserver.ts%22%2C%5B%7B%22id%22%3A%2200532f31c65bd9d7119874b7c000efa42c3a9e2e3a%22%2C%22exportedName%22%3A%22getAll%22%2C%22filename%22%3A%22..%2FH%3A%5C%5CUsers%5C%5CGus%5C%5Csource%5C%5Crepo%5C%5Cdynamics%5C%5Cdynamics-b%5C%5Ccryptopi-dynamics%5C%5Csrc%5C%5Clib%5C%5Csettings%5C%5Cserver.ts%22%7D%2C%7B%22id%22%3A%2200696b0d07c16ebe05246c326940d3b9133dac036c%22%2C%22exportedName%22%3A%22resolveCoinsFromSettings%22%2C%22filename%22%3A%22..%2FH%3A%5C%5CUsers%5C%5CGus%5C%5Csource%5C%5Crepo%5C%5Cdynamics%5C%5Cdynamics-b%5C%5Ccryptopi-dynamics%5C%5Csrc%5C%5Clib%5C%5Csettings%5C%5Cserver.ts%22%7D%2C%7B%22id%22%3A%22402b519d81502a95cf319ddb5b60bce32907aa6f08%22%2C%22exportedName%22%3A%22setAll%22%2C%22filename%22%3A%22..%2FH%3A%5C%5CUsers%5C%5CGus%5C%5Csource%5C%5Crepo%5C%5Cdynamics%5C%5Cdynamics-b%5C%5Ccryptopi-dynamics%5C%5Csrc%5C%5Clib%5C%5Csettings%5C%5Cserver.ts%22%7D%2C%7B%22id%22%3A%2240f9a1c8f3a3ab5d85ba51065396bf00a061db869e%22%2C%22exportedName%22%3A%22serializeSettingsCookie%22%2C%22filename%22%3A%22..%2FH%3A%5C%5CUsers%5C%5CGus%5C%5Csource%5C%5Crepo%5C%5Cdynamics%5C%5Cdynamics-b%5C%5Ccryptopi-dynamics%5C%5Csrc%5C%5Clib%5C%5Csettings%5C%5Cserver.ts%22%7D%5D%5D%5D&__client_imported__=!":
/*!*****************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/next@15.5.2_@playwright+tes_b7e6c280e9a1b4309347c0bf0ab476d5/node_modules/next/dist/build/webpack/loaders/next-flight-action-entry-loader.js?actions=%5B%5B%22H%3A%5C%5CUsers%5C%5CGus%5C%5Csource%5C%5Crepo%5C%5Cdynamics%5C%5Cdynamics-b%5C%5Ccryptopi-dynamics%5C%5Csrc%5C%5Clib%5C%5Csettings%5C%5Cserver.ts%22%2C%5B%7B%22id%22%3A%2200532f31c65bd9d7119874b7c000efa42c3a9e2e3a%22%2C%22exportedName%22%3A%22getAll%22%2C%22filename%22%3A%22..%2FH%3A%5C%5CUsers%5C%5CGus%5C%5Csource%5C%5Crepo%5C%5Cdynamics%5C%5Cdynamics-b%5C%5Ccryptopi-dynamics%5C%5Csrc%5C%5Clib%5C%5Csettings%5C%5Cserver.ts%22%7D%2C%7B%22id%22%3A%2200696b0d07c16ebe05246c326940d3b9133dac036c%22%2C%22exportedName%22%3A%22resolveCoinsFromSettings%22%2C%22filename%22%3A%22..%2FH%3A%5C%5CUsers%5C%5CGus%5C%5Csource%5C%5Crepo%5C%5Cdynamics%5C%5Cdynamics-b%5C%5Ccryptopi-dynamics%5C%5Csrc%5C%5Clib%5C%5Csettings%5C%5Cserver.ts%22%7D%2C%7B%22id%22%3A%22402b519d81502a95cf319ddb5b60bce32907aa6f08%22%2C%22exportedName%22%3A%22setAll%22%2C%22filename%22%3A%22..%2FH%3A%5C%5CUsers%5C%5CGus%5C%5Csource%5C%5Crepo%5C%5Cdynamics%5C%5Cdynamics-b%5C%5Ccryptopi-dynamics%5C%5Csrc%5C%5Clib%5C%5Csettings%5C%5Cserver.ts%22%7D%2C%7B%22id%22%3A%2240f9a1c8f3a3ab5d85ba51065396bf00a061db869e%22%2C%22exportedName%22%3A%22serializeSettingsCookie%22%2C%22filename%22%3A%22..%2FH%3A%5C%5CUsers%5C%5CGus%5C%5Csource%5C%5Crepo%5C%5Cdynamics%5C%5Cdynamics-b%5C%5Ccryptopi-dynamics%5C%5Csrc%5C%5Clib%5C%5Csettings%5C%5Cserver.ts%22%7D%5D%5D%5D&__client_imported__=! ***!
  \*****************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"00532f31c65bd9d7119874b7c000efa42c3a9e2e3a\": () => (/* reexport safe */ H_Users_Gus_source_repo_dynamics_dynamics_b_cryptopi_dynamics_src_lib_settings_server_ts__WEBPACK_IMPORTED_MODULE_0__.getAll),\n/* harmony export */   \"00696b0d07c16ebe05246c326940d3b9133dac036c\": () => (/* reexport safe */ H_Users_Gus_source_repo_dynamics_dynamics_b_cryptopi_dynamics_src_lib_settings_server_ts__WEBPACK_IMPORTED_MODULE_0__.resolveCoinsFromSettings),\n/* harmony export */   \"402b519d81502a95cf319ddb5b60bce32907aa6f08\": () => (/* reexport safe */ H_Users_Gus_source_repo_dynamics_dynamics_b_cryptopi_dynamics_src_lib_settings_server_ts__WEBPACK_IMPORTED_MODULE_0__.setAll),\n/* harmony export */   \"40f9a1c8f3a3ab5d85ba51065396bf00a061db869e\": () => (/* reexport safe */ H_Users_Gus_source_repo_dynamics_dynamics_b_cryptopi_dynamics_src_lib_settings_server_ts__WEBPACK_IMPORTED_MODULE_0__.serializeSettingsCookie)\n/* harmony export */ });\n/* harmony import */ var H_Users_Gus_source_repo_dynamics_dynamics_b_cryptopi_dynamics_src_lib_settings_server_ts__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./src/lib/settings/server.ts */ \"(rsc)/./src/lib/settings/server.ts\");\n\n\n\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvLnBucG0vbmV4dEAxNS41LjJfQHBsYXl3cmlnaHQrdGVzX2I3ZTZjMjgwZTlhMWI0MzA5MzQ3YzBiZjBhYjQ3NmQ1L25vZGVfbW9kdWxlcy9uZXh0L2Rpc3QvYnVpbGQvd2VicGFjay9sb2FkZXJzL25leHQtZmxpZ2h0LWFjdGlvbi1lbnRyeS1sb2FkZXIuanM/YWN0aW9ucz0lNUIlNUIlMjJIJTNBJTVDJTVDVXNlcnMlNUMlNUNHdXMlNUMlNUNzb3VyY2UlNUMlNUNyZXBvJTVDJTVDZHluYW1pY3MlNUMlNUNkeW5hbWljcy1iJTVDJTVDY3J5cHRvcGktZHluYW1pY3MlNUMlNUNzcmMlNUMlNUNsaWIlNUMlNUNzZXR0aW5ncyU1QyU1Q3NlcnZlci50cyUyMiUyQyU1QiU3QiUyMmlkJTIyJTNBJTIyMDA1MzJmMzFjNjViZDlkNzExOTg3NGI3YzAwMGVmYTQyYzNhOWUyZTNhJTIyJTJDJTIyZXhwb3J0ZWROYW1lJTIyJTNBJTIyZ2V0QWxsJTIyJTJDJTIyZmlsZW5hbWUlMjIlM0ElMjIuLiUyRkglM0ElNUMlNUNVc2VycyU1QyU1Q0d1cyU1QyU1Q3NvdXJjZSU1QyU1Q3JlcG8lNUMlNUNkeW5hbWljcyU1QyU1Q2R5bmFtaWNzLWIlNUMlNUNjcnlwdG9waS1keW5hbWljcyU1QyU1Q3NyYyU1QyU1Q2xpYiU1QyU1Q3NldHRpbmdzJTVDJTVDc2VydmVyLnRzJTIyJTdEJTJDJTdCJTIyaWQlMjIlM0ElMjIwMDY5NmIwZDA3YzE2ZWJlMDUyNDZjMzI2OTQwZDNiOTEzM2RhYzAzNmMlMjIlMkMlMjJleHBvcnRlZE5hbWUlMjIlM0ElMjJyZXNvbHZlQ29pbnNGcm9tU2V0dGluZ3MlMjIlMkMlMjJmaWxlbmFtZSUyMiUzQSUyMi4uJTJGSCUzQSU1QyU1Q1VzZXJzJTVDJTVDR3VzJTVDJTVDc291cmNlJTVDJTVDcmVwbyU1QyU1Q2R5bmFtaWNzJTVDJTVDZHluYW1pY3MtYiU1QyU1Q2NyeXB0b3BpLWR5bmFtaWNzJTVDJTVDc3JjJTVDJTVDbGliJTVDJTVDc2V0dGluZ3MlNUMlNUNzZXJ2ZXIudHMlMjIlN0QlMkMlN0IlMjJpZCUyMiUzQSUyMjQwMmI1MTlkODE1MDJhOTVjZjMxOWRkYjViNjBiY2UzMjkwN2FhNmYwOCUyMiUyQyUyMmV4cG9ydGVkTmFtZSUyMiUzQSUyMnNldEFsbCUyMiUyQyUyMmZpbGVuYW1lJTIyJTNBJTIyLi4lMkZIJTNBJTVDJTVDVXNlcnMlNUMlNUNHdXMlNUMlNUNzb3VyY2UlNUMlNUNyZXBvJTVDJTVDZHluYW1pY3MlNUMlNUNkeW5hbWljcy1iJTVDJTVDY3J5cHRvcGktZHluYW1pY3MlNUMlNUNzcmMlNUMlNUNsaWIlNUMlNUNzZXR0aW5ncyU1QyU1Q3NlcnZlci50cyUyMiU3RCUyQyU3QiUyMmlkJTIyJTNBJTIyNDBmOWExYzhmM2EzYWI1ZDg1YmE1MTA2NTM5NmJmMDBhMDYxZGI4NjllJTIyJTJDJTIyZXhwb3J0ZWROYW1lJTIyJTNBJTIyc2VyaWFsaXplU2V0dGluZ3NDb29raWUlMjIlMkMlMjJmaWxlbmFtZSUyMiUzQSUyMi4uJTJGSCUzQSU1QyU1Q1VzZXJzJTVDJTVDR3VzJTVDJTVDc291cmNlJTVDJTVDcmVwbyU1QyU1Q2R5bmFtaWNzJTVDJTVDZHluYW1pY3MtYiU1QyU1Q2NyeXB0b3BpLWR5bmFtaWNzJTVDJTVDc3JjJTVDJTVDbGliJTVDJTVDc2V0dGluZ3MlNUMlNUNzZXJ2ZXIudHMlMjIlN0QlNUQlNUQlNUQmX19jbGllbnRfaW1wb3J0ZWRfXz0hIiwibWFwcGluZ3MiOiI7Ozs7Ozs7OztBQUM2SztBQUNrQjtBQUNsQjtBQUNpQiIsInNvdXJjZXMiOlsiIl0sInNvdXJjZXNDb250ZW50IjpbIlxuZXhwb3J0IHsgZ2V0QWxsIGFzIFwiMDA1MzJmMzFjNjViZDlkNzExOTg3NGI3YzAwMGVmYTQyYzNhOWUyZTNhXCIgfSBmcm9tIFwiSDpcXFxcVXNlcnNcXFxcR3VzXFxcXHNvdXJjZVxcXFxyZXBvXFxcXGR5bmFtaWNzXFxcXGR5bmFtaWNzLWJcXFxcY3J5cHRvcGktZHluYW1pY3NcXFxcc3JjXFxcXGxpYlxcXFxzZXR0aW5nc1xcXFxzZXJ2ZXIudHNcIlxuZXhwb3J0IHsgcmVzb2x2ZUNvaW5zRnJvbVNldHRpbmdzIGFzIFwiMDA2OTZiMGQwN2MxNmViZTA1MjQ2YzMyNjk0MGQzYjkxMzNkYWMwMzZjXCIgfSBmcm9tIFwiSDpcXFxcVXNlcnNcXFxcR3VzXFxcXHNvdXJjZVxcXFxyZXBvXFxcXGR5bmFtaWNzXFxcXGR5bmFtaWNzLWJcXFxcY3J5cHRvcGktZHluYW1pY3NcXFxcc3JjXFxcXGxpYlxcXFxzZXR0aW5nc1xcXFxzZXJ2ZXIudHNcIlxuZXhwb3J0IHsgc2V0QWxsIGFzIFwiNDAyYjUxOWQ4MTUwMmE5NWNmMzE5ZGRiNWI2MGJjZTMyOTA3YWE2ZjA4XCIgfSBmcm9tIFwiSDpcXFxcVXNlcnNcXFxcR3VzXFxcXHNvdXJjZVxcXFxyZXBvXFxcXGR5bmFtaWNzXFxcXGR5bmFtaWNzLWJcXFxcY3J5cHRvcGktZHluYW1pY3NcXFxcc3JjXFxcXGxpYlxcXFxzZXR0aW5nc1xcXFxzZXJ2ZXIudHNcIlxuZXhwb3J0IHsgc2VyaWFsaXplU2V0dGluZ3NDb29raWUgYXMgXCI0MGY5YTFjOGYzYTNhYjVkODViYTUxMDY1Mzk2YmYwMGEwNjFkYjg2OWVcIiB9IGZyb20gXCJIOlxcXFxVc2Vyc1xcXFxHdXNcXFxcc291cmNlXFxcXHJlcG9cXFxcZHluYW1pY3NcXFxcZHluYW1pY3MtYlxcXFxjcnlwdG9waS1keW5hbWljc1xcXFxzcmNcXFxcbGliXFxcXHNldHRpbmdzXFxcXHNlcnZlci50c1wiXG4iXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/.pnpm/next@15.5.2_@playwright+tes_b7e6c280e9a1b4309347c0bf0ab476d5/node_modules/next/dist/build/webpack/loaders/next-flight-action-entry-loader.js?actions=%5B%5B%22H%3A%5C%5CUsers%5C%5CGus%5C%5Csource%5C%5Crepo%5C%5Cdynamics%5C%5Cdynamics-b%5C%5Ccryptopi-dynamics%5C%5Csrc%5C%5Clib%5C%5Csettings%5C%5Cserver.ts%22%2C%5B%7B%22id%22%3A%2200532f31c65bd9d7119874b7c000efa42c3a9e2e3a%22%2C%22exportedName%22%3A%22getAll%22%2C%22filename%22%3A%22..%2FH%3A%5C%5CUsers%5C%5CGus%5C%5Csource%5C%5Crepo%5C%5Cdynamics%5C%5Cdynamics-b%5C%5Ccryptopi-dynamics%5C%5Csrc%5C%5Clib%5C%5Csettings%5C%5Cserver.ts%22%7D%2C%7B%22id%22%3A%2200696b0d07c16ebe05246c326940d3b9133dac036c%22%2C%22exportedName%22%3A%22resolveCoinsFromSettings%22%2C%22filename%22%3A%22..%2FH%3A%5C%5CUsers%5C%5CGus%5C%5Csource%5C%5Crepo%5C%5Cdynamics%5C%5Cdynamics-b%5C%5Ccryptopi-dynamics%5C%5Csrc%5C%5Clib%5C%5Csettings%5C%5Cserver.ts%22%7D%2C%7B%22id%22%3A%22402b519d81502a95cf319ddb5b60bce32907aa6f08%22%2C%22exportedName%22%3A%22setAll%22%2C%22filename%22%3A%22..%2FH%3A%5C%5CUsers%5C%5CGus%5C%5Csource%5C%5Crepo%5C%5Cdynamics%5C%5Cdynamics-b%5C%5Ccryptopi-dynamics%5C%5Csrc%5C%5Clib%5C%5Csettings%5C%5Cserver.ts%22%7D%2C%7B%22id%22%3A%2240f9a1c8f3a3ab5d85ba51065396bf00a061db869e%22%2C%22exportedName%22%3A%22serializeSettingsCookie%22%2C%22filename%22%3A%22..%2FH%3A%5C%5CUsers%5C%5CGus%5C%5Csource%5C%5Crepo%5C%5Cdynamics%5C%5Cdynamics-b%5C%5Ccryptopi-dynamics%5C%5Csrc%5C%5Clib%5C%5Csettings%5C%5Cserver.ts%22%7D%5D%5D%5D&__client_imported__=!\n");

/***/ }),

/***/ "(rsc)/./node_modules/.pnpm/next@15.5.2_@playwright+tes_b7e6c280e9a1b4309347c0bf0ab476d5/node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true!":
/*!**************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/next@15.5.2_@playwright+tes_b7e6c280e9a1b4309347c0bf0ab476d5/node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true! ***!
  \**************************************************************************************************************************************************************************************/
/***/ (() => {



/***/ }),

/***/ "(rsc)/./src/app/api/matrices/latest/route.ts":
/*!**********************************************!*\
  !*** ./src/app/api/matrices/latest/route.ts ***!
  \**********************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   GET: () => (/* binding */ GET),\n/* harmony export */   buildMatricesLatestPayload: () => (/* binding */ buildMatricesLatestPayload),\n/* harmony export */   \"default\": () => (/* binding */ handler)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(rsc)/./node_modules/.pnpm/next@15.5.2_@playwright+tes_b7e6c280e9a1b4309347c0bf0ab476d5/node_modules/next/dist/api/server.js\");\n/* harmony import */ var next_headers__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/headers */ \"(rsc)/./node_modules/.pnpm/next@15.5.2_@playwright+tes_b7e6c280e9a1b4309347c0bf0ab476d5/node_modules/next/dist/api/headers.js\");\n/* harmony import */ var _core_db_db__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/core/db/db */ \"(rsc)/./src/core/db/db.ts\");\n/* harmony import */ var _core_features_matrices_liveFromSources__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @/core/features/matrices/liveFromSources */ \"(rsc)/./src/core/features/matrices/liveFromSources.ts\");\n/* harmony import */ var _core_maths_math__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @/core/maths/math */ \"(rsc)/./src/core/maths/math.ts\");\n/* harmony import */ var _core_features_matrices_opening__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @/core/features/matrices/opening */ \"(rsc)/./src/core/features/matrices/opening.ts\");\n/* harmony import */ var _lib_settings_server__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @/lib/settings/server */ \"(rsc)/./src/lib/settings/server.ts\");\n/* harmony import */ var _core_db_pool_server__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @/core/db/pool_server */ \"(rsc)/./src/core/db/pool_server.ts\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_core_db_db__WEBPACK_IMPORTED_MODULE_2__, _core_features_matrices_opening__WEBPACK_IMPORTED_MODULE_5__, _core_db_pool_server__WEBPACK_IMPORTED_MODULE_7__]);\n([_core_db_db__WEBPACK_IMPORTED_MODULE_2__, _core_features_matrices_opening__WEBPACK_IMPORTED_MODULE_5__, _core_db_pool_server__WEBPACK_IMPORTED_MODULE_7__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);\n// app/api/matrices/latest/route.ts\n\n\n\n\n\n\n\n\nconst ALLOWED_WINDOWS = new Set([\n    \"15m\",\n    \"30m\",\n    \"1h\"\n]);\nconst normalizeCoins = (xs)=>Array.from(new Set(xs.map((s)=>s.trim().toUpperCase()).filter(Boolean)));\nfunction parseCoinsCSV(csv) {\n    if (!csv) return null;\n    return normalizeCoins(csv.split(\",\"));\n}\nfunction parseCoinsJSON(jsonStr) {\n    if (!jsonStr) return null;\n    try {\n        const xs = JSON.parse(jsonStr);\n        if (!Array.isArray(xs)) return null;\n        return normalizeCoins(xs);\n    } catch  {\n        return null;\n    }\n}\nfunction coinsAddUSDTFirst(userCoins) {\n    const xs = normalizeCoins(userCoins);\n    const withoutUSDT = xs.filter((c)=>c !== \"USDT\");\n    return [\n        \"USDT\",\n        ...withoutUSDT\n    ];\n}\nasync function coinsFromCookiesOrHeaders() {\n    const bagCookies = (0,next_headers__WEBPACK_IMPORTED_MODULE_1__.cookies)();\n    const bagHeaders = (0,next_headers__WEBPACK_IMPORTED_MODULE_1__.headers)();\n    const ckJson = (await bagCookies).get(\"cp_coins\")?.value; // JSON array\n    const ckCsv = (await bagCookies).get(\"cp.coins\")?.value; // CSV\n    const fromCkJson = parseCoinsJSON(ckJson);\n    const fromCkCsv = parseCoinsCSV(ckCsv);\n    if (fromCkJson?.length) return fromCkJson;\n    if (fromCkCsv?.length) return fromCkCsv;\n    const hxCsv = (await bagHeaders).get(\"x-cp-coins\");\n    const hxJson = (await bagHeaders).get(\"x-cp-coins-json\");\n    const fromHxCsv = parseCoinsCSV(hxCsv ?? undefined);\n    const fromHxJson = parseCoinsJSON(hxJson ?? undefined);\n    if (fromHxJson?.length) return fromHxJson;\n    if (fromHxCsv?.length) return fromHxCsv;\n    return null;\n}\nasync function resolveCoinsUniverse(preferred) {\n    if (preferred && preferred.length) return coinsAddUSDTFirst(preferred);\n    const legacy = await coinsFromCookiesOrHeaders();\n    if (legacy?.length) return coinsAddUSDTFirst(legacy);\n    const fromSettings = await (0,_lib_settings_server__WEBPACK_IMPORTED_MODULE_6__.resolveCoinsFromSettings)();\n    if (fromSettings.length) return coinsAddUSDTFirst(fromSettings);\n    return [\n        \"USDT\"\n    ];\n}\nfunction ensureWindow(win) {\n    if (!win) return \"30m\";\n    const lc = win.toLowerCase();\n    return ALLOWED_WINDOWS.has(lc) ? lc : \"30m\";\n}\nfunction toGrid(coins, values) {\n    const n = coins.length;\n    const grid = Array.from({\n        length: n\n    }, ()=>Array.from({\n            length: n\n        }, ()=>null));\n    for(let i = 0; i < n; i++){\n        const bi = coins[i];\n        const row = values[bi] || {};\n        for(let j = 0; j < n; j++){\n            if (i === j) continue;\n            const qj = coins[j];\n            const v = row[qj];\n            grid[i][j] = v == null ? null : Number(v);\n        }\n    }\n    return grid;\n}\nfunction toValues(coins, grid) {\n    const out = {};\n    for(let i = 0; i < coins.length; i++){\n        const bi = coins[i];\n        out[bi] = {};\n        for(let j = 0; j < coins.length; j++){\n            if (i === j) continue;\n            const qj = coins[j];\n            out[bi][qj] = grid[i][j] ?? null;\n        }\n    }\n    return out;\n}\nfunction parseQuery(req) {\n    const url = new URL(req.url);\n    const qCoins = parseCoinsCSV(url.searchParams.get(\"coins\"));\n    const quote = (url.searchParams.get(\"quote\") || \"USDT\").toUpperCase();\n    const window = ensureWindow(url.searchParams.get(\"window\"));\n    const appSessionId = url.searchParams.get(\"appSessionId\") || null;\n    return {\n        coins: qCoins,\n        quote,\n        window,\n        appSessionId\n    };\n}\nconst pickValues = (coins, vals)=>{\n    const toKeep = coins;\n    const out = {};\n    for (const b of toKeep){\n        const row = vals[b] || {};\n        const dst = {};\n        for (const q of toKeep){\n            if (b === q) continue;\n            if (Object.prototype.hasOwnProperty.call(row, q)) {\n                dst[q] = row[q];\n            }\n        }\n        out[b] = dst;\n    }\n    return out;\n};\nasync function buildMatricesLatestPayload(params = {}) {\n    const quote = (params.quote ?? \"USDT\").toUpperCase();\n    const window = ensureWindow(params.window ?? null);\n    const appSessionId = params.appSessionId ?? null;\n    try {\n        const queryCoinsNormalized = Array.isArray(params.coins) ? normalizeCoins(params.coins) : null;\n        const coins = await resolveCoinsUniverse(queryCoinsNormalized && queryCoinsNormalized.length ? queryCoinsNormalized : null);\n        if (!coins.length) {\n            throw new Error(\"No coins resolved for matrices universe\");\n        }\n        const live = await (0,_core_features_matrices_liveFromSources__WEBPACK_IMPORTED_MODULE_3__.liveFromSources)(coins);\n        const bmGrid = toGrid(coins, live.matrices.benchmark.values);\n        const nowTs = live.matrices.benchmark.ts;\n        const [prevBenchmarkRows, prevIdPctRows] = await Promise.all([\n            (0,_core_db_db__WEBPACK_IMPORTED_MODULE_2__.getPrevSnapshotByType)(\"benchmark\", nowTs, coins),\n            (0,_core_db_db__WEBPACK_IMPORTED_MODULE_2__.getPrevSnapshotByType)(\"id_pct\", nowTs, coins)\n        ]);\n        const prevBenchmarkMap = new Map();\n        for (const row of prevBenchmarkRows){\n            const key = `${row.base.toUpperCase()}/${row.quote.toUpperCase()}`;\n            const value = Number(row.value);\n            if (Number.isFinite(value)) prevBenchmarkMap.set(key, value);\n        }\n        const prevIdPctMap = new Map();\n        for (const row of prevIdPctRows){\n            const key = `${row.base.toUpperCase()}/${row.quote.toUpperCase()}`;\n            const value = Number(row.value);\n            if (Number.isFinite(value)) prevIdPctMap.set(key, value);\n        }\n        let lastOpeningTs = null;\n        (0,_core_maths_math__WEBPACK_IMPORTED_MODULE_4__.configureBenchmarkProviders)({\n            getPrev: async (matrix_type, base, quoteSym, beforeTs)=>{\n                const key = `${base.toUpperCase()}/${quoteSym.toUpperCase()}`;\n                const fromPrefetch = matrix_type === \"benchmark\" ? prevBenchmarkMap.get(key) : matrix_type === \"id_pct\" ? prevIdPctMap.get(key) : undefined;\n                if (fromPrefetch != null) return fromPrefetch;\n                return (0,_core_db_db__WEBPACK_IMPORTED_MODULE_2__.getPrevValue)(matrix_type, base.toUpperCase(), quoteSym.toUpperCase(), beforeTs);\n            },\n            fetchOpeningGrid: async (coinsUniverse, nowTsParam)=>{\n                const ref = await (0,_core_features_matrices_opening__WEBPACK_IMPORTED_MODULE_5__.fetchOpeningGridFromView)({\n                    coins: coinsUniverse,\n                    window,\n                    appSessionId,\n                    openingTs: undefined\n                });\n                lastOpeningTs = ref.ts ?? nowTsParam;\n                return {\n                    ts: ref.ts ?? nowTsParam,\n                    grid: ref.grid\n                };\n            }\n        });\n        const derived = await (0,_core_maths_math__WEBPACK_IMPORTED_MODULE_4__.computeFromDbAndLive)({\n            coins: coins.slice(),\n            nowTs,\n            liveBenchmark: bmGrid\n        });\n        const bmValues = pickValues(coins, live.matrices.benchmark.values);\n        const pct24Values = pickValues(coins, live.matrices.pct24h.values);\n        const idPctValues = toValues(coins, derived.id_pct);\n        const drvValues = toValues(coins, derived.pct_drv);\n        const pctRefValues = toValues(coins, derived.pct_ref);\n        const refValues = toValues(coins, derived.ref);\n        const deltaValues = toValues(coins, derived.delta);\n        const symbols = [];\n        for(let i = 0; i < coins.length; i++){\n            for(let j = 0; j < coins.length; j++){\n                if (i === j) continue;\n                symbols.push(`${coins[i]}${coins[j]}`);\n            }\n        }\n        const coinsDisplay = coins.filter((c)=>c !== quote);\n        return {\n            ok: true,\n            coins: coinsDisplay,\n            symbols,\n            quote,\n            window,\n            ts: nowTs,\n            matrices: {\n                benchmark: {\n                    ts: nowTs,\n                    values: bmValues,\n                    flags: live.matrices.benchmark.flags\n                },\n                pct24h: {\n                    ts: nowTs,\n                    values: pct24Values,\n                    flags: live.matrices.pct24h.flags\n                },\n                id_pct: {\n                    ts: nowTs,\n                    values: idPctValues\n                },\n                pct_drv: {\n                    ts: nowTs,\n                    values: drvValues\n                },\n                pct_ref: {\n                    ts: nowTs,\n                    values: pctRefValues\n                },\n                ref: {\n                    ts: nowTs,\n                    values: refValues\n                },\n                delta: {\n                    ts: nowTs,\n                    values: deltaValues\n                }\n            },\n            meta: {\n                openingTs: lastOpeningTs,\n                universe: coins\n            }\n        };\n    } catch (err) {\n        console.error(\"[matrices/latest] error:\", err);\n        return {\n            ok: false,\n            error: String(err?.message ?? err)\n        };\n    }\n}\nasync function GET(req) {\n    const q = parseQuery(req);\n    const payload = await buildMatricesLatestPayload(q);\n    const status = payload.ok ? 200 : 500;\n    return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json(payload, {\n        status\n    });\n}\nasync function handler(_req, res) {\n    try {\n        const sql = `\n      SELECT dv.*\n      FROM matrices.dyn_values dv\n      JOIN settings.coin_universe cu\n        ON cu.base_asset = dv.base\n       AND cu.quote_asset = dv.quote\n       AND cu.enabled = true\n      WHERE dv.matrix_type = 'benchmark'\n        AND dv.ts_ms = (\n          SELECT MAX(ts_ms)\n          FROM matrices.dyn_values d2\n          WHERE d2.matrix_type = dv.matrix_type\n            AND d2.base = dv.base\n            AND d2.quote = dv.quote\n        )\n      ORDER BY COALESCE(cu.sort_order, 999), dv.base\n    `;\n        const { rows } = await (0,_core_db_pool_server__WEBPACK_IMPORTED_MODULE_7__.query)(sql);\n        res.status(200).json(rows);\n    } catch (e) {\n        res.status(500).json({\n            error: e?.message ?? \"unknown error\"\n        });\n    }\n}\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvYXBwL2FwaS9tYXRyaWNlcy9sYXRlc3Qvcm91dGUudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQSxtQ0FBbUM7QUFFUTtBQUNLO0FBSzFCO0FBQ3FEO0FBSWhEO0FBQ2lEO0FBQ1g7QUFTbkI7QUFTOUMsTUFBTVcsa0JBQWtCLElBQUlDLElBQUk7SUFBQztJQUFPO0lBQU87Q0FBSztBQUdwRCxNQUFNQyxpQkFBaUIsQ0FBQ0MsS0FDdEJDLE1BQU1DLElBQUksQ0FBQyxJQUFJSixJQUFJRSxHQUFHRyxHQUFHLENBQUMsQ0FBQ0MsSUFBTUEsRUFBRUMsSUFBSSxHQUFHQyxXQUFXLElBQUlDLE1BQU0sQ0FBQ0M7QUFFbEUsU0FBU0MsY0FBY0MsR0FBOEI7SUFDbkQsSUFBSSxDQUFDQSxLQUFLLE9BQU87SUFDakIsT0FBT1gsZUFBZVcsSUFBSUMsS0FBSyxDQUFDO0FBQ2xDO0FBRUEsU0FBU0MsZUFBZUMsT0FBa0M7SUFDeEQsSUFBSSxDQUFDQSxTQUFTLE9BQU87SUFDckIsSUFBSTtRQUNGLE1BQU1iLEtBQUtjLEtBQUtDLEtBQUssQ0FBQ0Y7UUFDdEIsSUFBSSxDQUFDWixNQUFNZSxPQUFPLENBQUNoQixLQUFLLE9BQU87UUFDL0IsT0FBT0QsZUFBZUM7SUFDeEIsRUFBRSxPQUFNO1FBQ04sT0FBTztJQUNUO0FBQ0Y7QUFFQSxTQUFTaUIsa0JBQWtCQyxTQUE0QjtJQUNyRCxNQUFNbEIsS0FBS0QsZUFBZW1CO0lBQzFCLE1BQU1DLGNBQWNuQixHQUFHTyxNQUFNLENBQUMsQ0FBQ2EsSUFBTUEsTUFBTTtJQUMzQyxPQUFPO1FBQUM7V0FBV0Q7S0FBWTtBQUNqQztBQUVBLGVBQWVFO0lBQ2IsTUFBTUMsYUFBYW5DLHFEQUFPQTtJQUMxQixNQUFNb0MsYUFBYW5DLHFEQUFPQTtJQUUxQixNQUFNb0MsU0FBUyxDQUFDLE1BQU1GLFVBQVMsRUFBR0csR0FBRyxDQUFDLGFBQWFDLE9BQU8sYUFBYTtJQUN2RSxNQUFNQyxRQUFRLENB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QUVyQixJQUFJRDtvQkFBT3ZDLFFBQVEyRTtnQkFBVTtnQkFDcENFLE9BQU87b0JBQUVyQyxJQUFJRDtvQkFBT3ZDLFFBQVE0RTtnQkFBWTtZQUMxQztZQUNBTyxNQUFNO2dCQUNKckIsV0FBV1Y7Z0JBQ1hnQyxVQUFVckY7WUFDWjtRQUNGO0lBQ0YsRUFBRSxPQUFPc0YsS0FBVTtRQUNqQkMsUUFBUUMsS0FBSyxDQUFDLDRCQUE0QkY7UUFDMUMsT0FBTztZQUNMSixJQUFJO1lBQ0pNLE9BQU9DLE9BQU9ILEtBQUtJLFdBQVdKO1FBQ2hDO0lBQ0Y7QUFDRjtBQUVPLGVBQWVLLElBQUk3RSxHQUFZO0lBQ3BDLE1BQU1hLElBQUlkLFdBQVdDO0lBQ3JCLE1BQU04RSxVQUFVLE1BQU01RCwyQkFBMkJMO0lBQ2pELE1BQU1rRSxTQUFTRCxRQUFRVixFQUFFLEdBQUcsTUFBTTtJQUNsQyxPQUFPOUkscURBQVlBLENBQUMwSixJQUFJLENBQUNGLFNBQVM7UUFBRUM7SUFBTztBQUM3QztBQUVlLGVBQWVFLFFBQVFDLElBQW9CLEVBQUVDLEdBQW9CO0lBQzlFLElBQUk7UUFDRixNQUFNQyxNQUFNLENBQUM7Ozs7Ozs7Ozs7Ozs7Ozs7SUFnQmIsQ0FBQztRQUNELE1BQU0sRUFBRUMsSUFBSSxFQUFFLEdBQUcsTUFBTXJKLDJEQUFLQSxDQUFDb0o7UUFDN0JELElBQUlKLE1BQU0sQ0FBQyxLQUFLQyxJQUFJLENBQUNLO0lBQ3ZCLEVBQUUsT0FBT0MsR0FBUTtRQUNmSCxJQUFJSixNQUFNLENBQUMsS0FBS0MsSUFBSSxDQUFDO1lBQUVOLE9BQU9ZLEdBQUdWLFdBQVc7UUFBZ0I7SUFDOUQ7QUFDRiIsInNvdXJjZXMiOlsiSDpcXFVzZXJzXFxHdXNcXHNvdXJjZVxccmVwb1xcZHluYW1pY3NcXGR5bmFtaWNzLWJcXGNyeXB0b3BpLWR5bmFtaWNzXFxzcmNcXGFwcFxcYXBpXFxtYXRyaWNlc1xcbGF0ZXN0XFxyb3V0ZS50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBhcHAvYXBpL21hdHJpY2VzL2xhdGVzdC9yb3V0ZS50c1xuXG5pbXBvcnQgeyBOZXh0UmVzcG9uc2UgfSBmcm9tIFwibmV4dC9zZXJ2ZXJcIjtcbmltcG9ydCB7IGNvb2tpZXMsIGhlYWRlcnMgfSBmcm9tIFwibmV4dC9oZWFkZXJzXCI7XG5pbXBvcnQgdHlwZSB7IE5leHRBcGlSZXF1ZXN0LCBOZXh0QXBpUmVzcG9uc2UgfSBmcm9tIFwibmV4dFwiO1xuaW1wb3J0IHtcbiAgZ2V0UHJldlNuYXBzaG90QnlUeXBlLFxuICBnZXRQcmV2VmFsdWUsXG59IGZyb20gXCJAL2NvcmUvZGIvZGJcIjtcbmltcG9ydCB7IGxpdmVGcm9tU291cmNlcyB9IGZyb20gXCJAL2NvcmUvZmVhdHVyZXMvbWF0cmljZXMvbGl2ZUZyb21Tb3VyY2VzXCI7XG5pbXBvcnQge1xuICBjb25maWd1cmVCZW5jaG1hcmtQcm92aWRlcnMsXG4gIGNvbXB1dGVGcm9tRGJBbmRMaXZlLFxufSBmcm9tIFwiQC9jb3JlL21hdGhzL21hdGhcIjtcbmltcG9ydCB7IGZldGNoT3BlbmluZ0dyaWRGcm9tVmlldyB9IGZyb20gXCJAL2NvcmUvZmVhdHVyZXMvbWF0cmljZXMvb3BlbmluZ1wiO1xuaW1wb3J0IHsgcmVzb2x2ZUNvaW5zRnJvbVNldHRpbmdzIH0gZnJvbSBcIkAvbGliL3NldHRpbmdzL3NlcnZlclwiO1xuLy8gdHlwZWQgZG93bnN0cmVhbSBpbXBvcnQgZnJvbSBtYXRyaWNlcyBmcm96ZW4gaGVscGVycyAobm8gcnVudGltZSBpbXBhY3QpXG5pbXBvcnQgdHlwZSB7XG4gIEZyb3plblBhaXJLZXksXG4gIGJ1aWxkRnJvemVuU2V0RnJvbUZsYWdzLFxuICBtYXRlcmlhbGl6ZUZyb3plbkdyaWRGcm9tU2V0LFxuICBpc1BhaXJGcm96ZW5Gcm9tU2V0LFxuICBnZXRGcm96ZW5TZXRGcm9tTWF0cmljZXNMYXRlc3QsXG59IGZyb20gXCJAL2NvcmUvZmVhdHVyZXMvbWF0cmljZXMvbWF0cmljZXNcIjtcbmltcG9ydCB7IHF1ZXJ5IH0gZnJvbSBcIkAvY29yZS9kYi9wb29sX3NlcnZlclwiO1xuXG4vLyBrZWVwIHRoZXNlIGFsaWFzZXMgc28gVFMgdHJlYXRzIHRoZSBpbXBvcnRzIGFzIOKAnHVzZWTigJ0gKHN0aWxsIHR5cGUtb25seSlcbnR5cGUgX0Zyb3plblBhaXJLZXkgPSBGcm96ZW5QYWlyS2V5O1xudHlwZSBfRnJvemVuU2V0QnVpbGRlciA9IHR5cGVvZiBidWlsZEZyb3plblNldEZyb21GbGFncztcbnR5cGUgX0Zyb3plbkdyaWRNYXRlcmlhbGl6ZXIgPSB0eXBlb2YgbWF0ZXJpYWxpemVGcm96ZW5HcmlkRnJvbVNldDtcbnR5cGUgX0lzUGFpckZyb3plbiA9IHR5cGVvZiBpc1BhaXJGcm96ZW5Gcm9tU2V0O1xudHlwZSBfR2V0RnJvemVuU2V0TGF0ZXN0ID0gdHlwZW9mIGdldEZyb3plblNldEZyb21NYXRyaWNlc0xhdGVzdDtcblxuY29uc3QgQUxMT1dFRF9XSU5ET1dTID0gbmV3IFNldChbXCIxNW1cIiwgXCIzMG1cIiwgXCIxaFwiXSBhcyBjb25zdCk7XG50eXBlIE1hdHJpeFdpbmRvdyA9IFwiMTVtXCIgfCBcIjMwbVwiIHwgXCIxaFwiO1xuXG5jb25zdCBub3JtYWxpemVDb2lucyA9ICh4czogcmVhZG9ubHkgc3RyaW5nW10pID0+XG4gIEFycmF5LmZyb20obmV3IFNldCh4cy5tYXAoKHMpID0+IHMudHJpbSgpLnRvVXBwZXJDYXNlKCkpLmZpbHRlcihCb29sZWFuKSkpO1xuXG5mdW5jdGlvbiBwYXJzZUNvaW5zQ1NWKGNzdjogc3RyaW5nIHwgbnVsbCB8IHVuZGVmaW5lZCk6IHN0cmluZ1tdIHwgbnVsbCB7XG4gIGlmICghY3N2KSByZXR1cm4gbnVsbDtcbiAgcmV0dXJuIG5vcm1hbGl6ZUNvaW5zKGNzdi5zcGxpdChcIixcIikpO1xufVxuXG5mdW5jdGlvbiBwYXJzZUNvaW5zSlNPTihqc29uU3RyOiBzdHJpbmcgfCBudWxsIHwgdW5kZWZpbmVkKTogc3RyaW5nW10gfCBudWxsIHtcbiAgaWYgKCFqc29uU3RyKSByZXR1cm4gbnVsbDtcbiAgdHJ5IHtcbiAgICBjb25zdCB4cyA9IEpTT04ucGFyc2UoanNvblN0cik7XG4gICAgaWYgKCFBcnJheS5pc0FycmF5KHhzKSkgcmV0dXJuIG51bGw7XG4gICAgcmV0dXJuIG5vcm1hbGl6ZUNvaW5zKHhzKTtcbiAgfSBjYXRjaCB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cbn1cblxuZnVuY3Rpb24gY29pbnNBZGRVU0RURmlyc3QodXNlckNvaW5zOiByZWFkb25seSBzdHJpbmdbXSkge1xuICBjb25zdCB4cyA9IG5vcm1hbGl6ZUNvaW5zKHVzZXJDb2lucyk7XG4gIGNvbnN0IHdpdGhvdXRVU0RUID0geHMuZmlsdGVyKChjKSA9PiBjICE9PSBcIlVTRFRcIik7XG4gIHJldHVybiBbXCJVU0RUXCIsIC4uLndpdGhvdXRVU0RUXTtcbn1cblxuYXN5bmMgZnVuY3Rpb24gY29pbnNGcm9tQ29va2llc09ySGVhZGVycygpOiBQcm9taXNlPHN0cmluZ1tdIHwgbnVsbD4ge1xuICBjb25zdCBiYWdDb29raWVzID0gY29va2llcygpO1xuICBjb25zdCBiYWdIZWFkZXJzID0gaGVhZGVycygpO1xuXG4gIGNvbnN0IGNrSnNvbiA9IChhd2FpdCBiYWdDb29raWVzKS5nZXQoXCJjcF9jb2luc1wiKT8udmFsdWU7IC8vIEpTT04gYXJyYXlcbiAgY29uc3QgY2tDc3YgPSAoYXdhaXQgYmFnQ29va2llcykuZ2V0KFwiY3AuY29pbnNcIik/LnZhbHVlOyAvLyBDU1ZcbiAgY29uc3QgZnJvbUNrSnNvbiA9IHBhcnNlQ29pbnNKU09OKGNrSnNvbik7XG4gIGNvbnN0IGZyb21Da0NzdiA9IHBhcnNlQ29pbnNDU1YoY2tDc3YpO1xuICBpZiAoZnJvbUNrSnNvbj8ubGVuZ3RoKSByZXR1cm4gZnJvbUNrSnNvbjtcbiAgaWYgKGZyb21Da0Nzdj8ubGVuZ3RoKSByZXR1cm4gZnJvbUNrQ3N2O1xuXG4gIGNvbnN0IGh4Q3N2ID0gKGF3YWl0IGJhZ0hlYWRlcnMpLmdldChcIngtY3AtY29pbnNcIik7XG4gIGNvbnN0IGh4SnNvbiA9IChhd2FpdCBiYWdIZWFkZXJzKS5nZXQoXCJ4LWNwLWNvaW5zLWpzb25cIik7XG4gIGNvbnN0IGZyb21IeENzdiA9IHBhcnNlQ29pbnNDU1YoaHhDc3YgPz8gdW5kZWZpbmVkKTtcbiAgY29uc3QgZnJvbUh4SnNvbiA9IHBhcnNlQ29pbnNKU09OKGh4SnNvbiA/PyB1bmRlZmluZWQpO1xuICBpZiAoZnJvbUh4SnNvbj8ubGVuZ3RoKSByZXR1cm4gZnJvbUh4SnNvbjtcbiAgaWYgKGZyb21IeENzdj8ubGVuZ3RoKSByZXR1cm4gZnJvbUh4Q3N2O1xuXG4gIHJldHVybiBudWxsO1xufVxuXG5hc3luYyBmdW5jdGlvbiByZXNvbHZlQ29pbnNVbml2ZXJzZShwcmVmZXJyZWQ6IHN0cmluZ1tdIHwgbnVsbCk6IFByb21pc2U8c3RyaW5nW10+IHtcbiAgaWYgKHByZWZlcnJlZCAmJiBwcmVmZXJyZWQubGVuZ3RoKSByZXR1cm4gY29pbnNBZGRVU0RURmlyc3QocHJlZmVycmVkKTtcblxuICBjb25zdCBsZWdhY3kgPSBhd2FpdCBjb2luc0Zyb21Db29raWVzT3JIZWFkZXJzKCk7XG4gIGlmIChsZWdhY3k/Lmxlbmd0aCkgcmV0dXJuIGNvaW5zQWRkVVNEVEZpcnN0KGxlZ2FjeSk7XG5cbiAgY29uc3QgZnJvbVNldHRpbmdzID0gYXdhaXQgcmVzb2x2ZUNvaW5zRnJvbVNldHRpbmdzKCk7XG4gIGlmIChmcm9tU2V0dGluZ3MubGVuZ3RoKSByZXR1cm4gY29pbnNBZGRVU0RURmlyc3QoZnJvbVNldHRpbmdzKTtcblxuICByZXR1cm4gW1wiVVNEVFwiXTtcbn1cblxuZnVuY3Rpb24gZW5zdXJlV2luZG93KHdpbjogc3RyaW5nIHwgbnVsbCB8IHVuZGVmaW5lZCk6IE1hdHJpeFdpbmRvdyB7XG4gIGlmICghd2luKSByZXR1cm4gXCIzMG1cIjtcbiAgY29uc3QgbGMgPSB3aW4udG9Mb3dlckNhc2UoKTtcbiAgcmV0dXJuIEFMTE9XRURfV0lORE9XUy5oYXMobGMgYXMgTWF0cml4V2luZG93KVxuICAgID8gKGxjIGFzIE1hdHJpeFdpbmRvdylcbiAgICA6IFwiMzBtXCI7XG59XG5cbnR5cGUgTWF0VmFsdWVzID0gUmVjb3JkPHN0cmluZywgUmVjb3JkPHN0cmluZywgbnVtYmVyIHwgbnVsbD4+O1xuXG50eXBlIE1hdHJpY2VzTGF0ZXN0U3VjY2Vzc1BheWxvYWQgPSB7XG4gIG9rOiB0cnVlO1xuICBjb2luczogc3RyaW5nW107XG4gIHN5bWJvbHM6IHN0cmluZ1tdO1xuICBxdW90ZTogc3RyaW5nO1xuICB3aW5kb3c6IE1hdHJpeFdpbmRvdztcbiAgdHM6IG51bWJlcjtcbiAgbWF0cmljZXM6IHtcbiAgICBiZW5jaG1hcms6IHsgdHM6IG51bWJlcjsgdmFsdWVzOiBNYXRWYWx1ZXM7IGZsYWdzPzogYW55IH07XG4gICAgcGN0MjRoOiB7IHRzOiBudW1iZXI7IHZhbHVlczogTWF0VmFsdWVzOyBmbGFncz86IGFueSB9O1xuICAgIGlkX3BjdDogeyB0czogbnVtYmVyOyB2YWx1ZXM6IE1hdFZhbHVlcyB9O1xuICAgIHBjdF9kcnY6IHsgdHM6IG51bWJlcjsgdmFsdWVzOiBNYXRWYWx1ZXMgfTtcbiAgICBwY3RfcmVmOiB7IHRzOiBudW1iZXI7IHZhbHVlczogTWF0VmFsdWVzIH07XG4gICAgcmVmOiB7IHRzOiBudW1iZXI7IHZhbHVlczogTWF0VmFsdWVzIH07XG4gICAgZGVsdGE6IHsgdHM6IG51bWJlcjsgdmFsdWVzOiBNYXRWYWx1ZXMgfTtcbiAgfTtcbiAgbWV0YToge1xuICAgIG9wZW5pbmdUczogbnVtYmVyIHwgbnVsbDtcbiAgICB1bml2ZXJzZTogc3RyaW5nW107XG4gIH07XG59O1xuXG50eXBlIE1hdHJpY2VzTGF0ZXN0RXJyb3JQYXlsb2FkID0ge1xuICBvazogZmFsc2U7XG4gIGVycm9yOiBzdHJpbmc7XG59O1xuXG5leHBvcnQgdHlwZSBNYXRyaWNlc0xhdGVzdFBheWxvYWQgPVxuICB8IE1hdHJpY2VzTGF0ZXN0U3VjY2Vzc1BheWxvYWRcbiAgfCBNYXRyaWNlc0xhdGVzdEVycm9yUGF5bG9hZDtcblxuZnVuY3Rpb24gdG9HcmlkKFxuICBjb2luczogcmVhZG9ubHkgc3RyaW5nW10sXG4gIHZhbHVlczogTWF0VmFsdWVzXG4pOiAobnVtYmVyIHwgbnVsbClbXVtdIHtcbiAgY29uc3QgbiA9IGNvaW5zLmxlbmd0aDtcbiAgY29uc3QgZ3JpZDogKG51bWJlciB8IG51bGwpW11bXSA9IEFycmF5LmZyb20oeyBsZW5ndGg6IG4gfSwgKCkgPT5cbiAgICBBcnJheS5mcm9tKHsgbGVuZ3RoOiBuIH0sICgpID0+IG51bGwpXG4gICk7XG4gIGZvciAobGV0IGkgPSAwOyBpIDwgbjsgaSsrKSB7XG4gICAgY29uc3QgYmkgPSBjb2luc1tpXSE7XG4gICAgY29uc3Qgcm93ID0gdmFsdWVzW2JpXSB8fCB7fTtcbiAgICBmb3IgKGxldCBqID0gMDsgaiA8IG47IGorKykge1xuICAgICAgaWYgKGkgPT09IGopIGNvbnRpbnVlO1xuICAgICAgY29uc3QgcWogPSBjb2luc1tqXSE7XG4gICAgICBjb25zdCB2ID0gcm93W3FqXTtcbiAgICAgIGdyaWRbaV1bal0gPSB2ID09IG51bGwgPyBudWxsIDogTnVtYmVyKHYpO1xuICAgIH1cbiAgfVxuICByZXR1cm4gZ3JpZDtcbn1cblxuZnVuY3Rpb24gdG9WYWx1ZXMoXG4gIGNvaW5zOiByZWFkb25seSBzdHJpbmdbXSxcbiAgZ3JpZDogKG51bWJlciB8IG51bGwpW11bXVxuKTogTWF0VmFsdWVzIHtcbiAgY29uc3Qgb3V0OiBNYXRWYWx1ZXMgPSB7fTtcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBjb2lucy5sZW5ndGg7IGkrKykge1xuICAgIGNvbnN0IGJpID0gY29pbnNbaV0hO1xuICAgIG91dFtiaV0gPSB7fSBhcyBhbnk7XG4gICAgZm9yIChsZXQgaiA9IDA7IGogPCBjb2lucy5sZW5ndGg7IGorKykge1xuICAgICAgaWYgKGkgPT09IGopIGNvbnRpbnVlO1xuICAgICAgY29uc3QgcWogPSBjb2luc1tqXSE7XG4gICAgICBvdXRbYmldW3FqXSA9IGdyaWRbaV1bal0gPz8gbnVsbDtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIG91dDtcbn1cblxuZnVuY3Rpb24gcGFyc2VRdWVyeShyZXE6IFJlcXVlc3QpOiB7XG4gIGNvaW5zOiBzdHJpbmdbXSB8IG51bGw7XG4gIHF1b3RlOiBzdHJpbmc7XG4gIHdpbmRvdzogTWF0cml4V2luZG93O1xuICBhcHBTZXNzaW9uSWQ6IHN0cmluZyB8IG51bGw7XG59IHtcbiAgY29uc3QgdXJsID0gbmV3IFVSTChyZXEudXJsKTtcbiAgY29uc3QgcUNvaW5zID0gcGFyc2VDb2luc0NTVih1cmwuc2VhcmNoUGFyYW1zLmdldChcImNvaW5zXCIpKTtcbiAgY29uc3QgcXVvdGUgPSAodXJsLnNlYXJjaFBhcmFtcy5nZXQoXCJxdW90ZVwiKSB8fCBcIlVTRFRcIikudG9VcHBlckNhc2UoKTtcbiAgY29uc3Qgd2luZG93ID0gZW5zdXJlV2luZG93KHVybC5zZWFyY2hQYXJhbXMuZ2V0KFwid2luZG93XCIpKTtcbiAgY29uc3QgYXBwU2Vzc2lvbklkID0gdXJsLnNlYXJjaFBhcmFtcy5nZXQoXCJhcHBTZXNzaW9uSWRcIikgfHwgbnVsbDtcbiAgcmV0dXJuIHsgY29pbnM6IHFDb2lucywgcXVvdGUsIHdpbmRvdywgYXBwU2Vzc2lvbklkIH07XG59XG5cbnR5cGUgQnVpbGRNYXRyaWNlc0xhdGVzdEFyZ3MgPSB7XG4gIGNvaW5zPzogc3RyaW5nW10gfCBudWxsO1xuICBxdW90ZT86IHN0cmluZztcbiAgd2luZG93Pzogc3RyaW5nIHwgbnVsbDtcbiAgYXBwU2Vzc2lvbklkPzogc3RyaW5nIHwgbnVsbDtcbn07XG5cbmNvbnN0IHBpY2tWYWx1ZXMgPSAoY29pbnM6IHJlYWRvbmx5IHN0cmluZ1tdLCB2YWxzOiBNYXRWYWx1ZXMpOiBNYXRWYWx1ZXMgPT4ge1xuICBjb25zdCB0b0tlZXAgPSBjb2lucztcbiAgY29uc3Qgb3V0OiBNYXRWYWx1ZXMgPSB7fTtcbiAgZm9yIChjb25zdCBiIG9mIHRvS2VlcCkge1xuICAgIGNvbnN0IHJvdyA9IHZhbHNbYl0gfHwge307XG4gICAgY29uc3QgZHN0OiBSZWNvcmQ8c3RyaW5nLCBudW1iZXIgfCBudWxsPiA9IHt9O1xuICAgIGZvciAoY29uc3QgcSBvZiB0b0tlZXApIHtcbiAgICAgIGlmIChiID09PSBxKSBjb250aW51ZTtcbiAgICAgIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwocm93LCBxKSkge1xuICAgICAgICBkc3RbcV0gPSByb3dbcV0hO1xuICAgICAgfVxuICAgIH1cbiAgICBvdXRbYl0gPSBkc3Q7XG4gIH1cbiAgcmV0dXJuIG91dDtcbn07XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBidWlsZE1hdHJpY2VzTGF0ZXN0UGF5bG9hZChcbiAgcGFyYW1zOiBCdWlsZE1hdHJpY2VzTGF0ZXN0QXJncyA9IHt9XG4pOiBQcm9taXNlPE1hdHJpY2VzTGF0ZXN0UGF5bG9hZD4ge1xuICBjb25zdCBxdW90ZSA9IChwYXJhbXMucXVvdGUgPz8gXCJVU0RUXCIpLnRvVXBwZXJDYXNlKCk7XG4gIGNvbnN0IHdpbmRvdyA9IGVuc3VyZVdpbmRvdyhwYXJhbXMud2luZG93ID8/IG51bGwpO1xuICBjb25zdCBhcHBTZXNzaW9uSWQgPSBwYXJhbXMuYXBwU2Vzc2lvbklkID8/IG51bGw7XG5cbiAgdHJ5IHtcbiAgICBjb25zdCBxdWVyeUNvaW5zTm9ybWFsaXplZCA9IEFycmF5LmlzQXJyYXkocGFyYW1zLmNvaW5zKVxuICAgICAgPyBub3JtYWxpemVDb2lucyhwYXJhbXMuY29pbnMpXG4gICAgICA6IG51bGw7XG5cbiAgICBjb25zdCBjb2lucyA9IGF3YWl0IHJlc29sdmVDb2luc1VuaXZlcnNlKFxuICAgICAgcXVlcnlDb2luc05vcm1hbGl6ZWQgJiYgcXVlcnlDb2luc05vcm1hbGl6ZWQubGVuZ3RoXG4gICAgICAgID8gcXVlcnlDb2luc05vcm1hbGl6ZWRcbiAgICAgICAgOiBudWxsXG4gICAgKTtcblxuICAgIGlmICghY29pbnMubGVuZ3RoKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJObyBjb2lucyByZXNvbHZlZCBmb3IgbWF0cmljZXMgdW5pdmVyc2VcIik7XG4gICAgfVxuXG4gICAgY29uc3QgbGl2ZSA9IGF3YWl0IGxpdmVGcm9tU291cmNlcyhjb2lucyk7XG5cbiAgICBjb25zdCBibUdyaWQgPSB0b0dyaWQoY29pbnMsIGxpdmUubWF0cmljZXMuYmVuY2htYXJrLnZhbHVlcyk7XG4gICAgY29uc3Qgbm93VHMgPSBsaXZlLm1hdHJpY2VzLmJlbmNobWFyay50cztcblxuICAgIGNvbnN0IFtwcmV2QmVuY2htYXJrUm93cywgcHJldklkUGN0Um93c10gPSBhd2FpdCBQcm9taXNlLmFsbChbXG4gICAgICBnZXRQcmV2U25hcHNob3RCeVR5cGUoXCJiZW5jaG1hcmtcIiwgbm93VHMsIGNvaW5zKSxcbiAgICAgIGdldFByZXZTbmFwc2hvdEJ5VHlwZShcImlkX3BjdFwiLCBub3dUcywgY29pbnMpLFxuICAgIF0pO1xuXG4gICAgY29uc3QgcHJldkJlbmNobWFya01hcCA9IG5ldyBNYXA8c3RyaW5nLCBudW1iZXI+KCk7XG4gICAgZm9yIChjb25zdCByb3cgb2YgcHJldkJlbmNobWFya1Jvd3MpIHtcbiAgICAgIGNvbnN0IGtleSA9IGAke3Jvdy5iYXNlLnRvVXBwZXJDYXNlKCl9LyR7cm93LnF1b3RlLnRvVXBwZXJDYXNlKCl9YDtcbiAgICAgIGNvbnN0IHZhbHVlID0gTnVtYmVyKHJvdy52YWx1ZSk7XG4gICAgICBpZiAoTnVtYmVyLmlzRmluaXRlKHZhbHVlKSkgcHJldkJlbmNobWFya01hcC5zZXQoa2V5LCB2YWx1ZSk7XG4gICAgfVxuXG4gICAgY29uc3QgcHJldklkUGN0TWFwID0gbmV3IE1hcDxzdHJpbmcsIG51bWJlcj4oKTtcbiAgICBmb3IgKGNvbnN0IHJvdyBvZiBwcmV2SWRQY3RSb3dzKSB7XG4gICAgICBjb25zdCBrZXkgPSBgJHtyb3cuYmFzZS50b1VwcGVyQ2FzZSgpfS8ke3Jvdy5xdW90ZS50b1VwcGVyQ2FzZSgpfWA7XG4gICAgICBjb25zdCB2YWx1ZSA9IE51bWJlcihyb3cudmFsdWUpO1xuICAgICAgaWYgKE51bWJlci5pc0Zpbml0ZSh2YWx1ZSkpIHByZXZJZFBjdE1hcC5zZXQoa2V5LCB2YWx1ZSk7XG4gICAgfVxuXG4gICAgbGV0IGxhc3RPcGVuaW5nVHM6IG51bWJlciB8IG51bGwgPSBudWxsO1xuXG4gICAgY29uZmlndXJlQmVuY2htYXJrUHJvdmlkZXJzKHtcbiAgICAgIGdldFByZXY6IGFzeW5jIChtYXRyaXhfdHlwZSwgYmFzZSwgcXVvdGVTeW0sIGJlZm9yZVRzKSA9PiB7XG4gICAgICAgIGNvbnN0IGtleSA9IGAke2Jhc2UudG9VcHBlckNhc2UoKX0vJHtxdW90ZVN5bS50b1VwcGVyQ2FzZSgpfWA7XG4gICAgICAgIGNvbnN0IGZyb21QcmVmZXRjaCA9XG4gICAgICAgICAgbWF0cml4X3R5cGUgPT09IFwiYmVuY2htYXJrXCJcbiAgICAgICAgICAgID8gcHJldkJlbmNobWFya01hcC5nZXQoa2V5KVxuICAgICAgICAgICAgOiBtYXRyaXhfdHlwZSA9PT0gXCJpZF9wY3RcIlxuICAgICAgICAgICAgPyBwcmV2SWRQY3RNYXAuZ2V0KGtleSlcbiAgICAgICAgICAgIDogdW5kZWZpbmVkO1xuICAgICAgICBpZiAoZnJvbVByZWZldGNoICE9IG51bGwpIHJldHVybiBmcm9tUHJlZmV0Y2g7XG4gICAgICAgIHJldHVybiBnZXRQcmV2VmFsdWUoXG4gICAgICAgICAgbWF0cml4X3R5cGUsXG4gICAgICAgICAgYmFzZS50b1VwcGVyQ2FzZSgpLFxuICAgICAgICAgIHF1b3RlU3ltLnRvVXBwZXJDYXNlKCksXG4gICAgICAgICAgYmVmb3JlVHNcbiAgICAgICAgKTtcbiAgICAgIH0sXG5cbiAgICAgIGZldGNoT3BlbmluZ0dyaWQ6IGFzeW5jIChjb2luc1VuaXZlcnNlLCBub3dUc1BhcmFtKSA9PiB7XG4gICAgICAgIGNvbnN0IHJlZiA9IGF3YWl0IGZldGNoT3BlbmluZ0dyaWRGcm9tVmlldyh7XG4gICAgICAgICAgY29pbnM6IGNvaW5zVW5pdmVyc2UsXG4gICAgICAgICAgd2luZG93LFxuICAgICAgICAgIGFwcFNlc3Npb25JZCxcbiAgICAgICAgICBvcGVuaW5nVHM6IHVuZGVmaW5lZCxcbiAgICAgICAgfSk7XG4gICAgICAgIGxhc3RPcGVuaW5nVHMgPSByZWYudHMgPz8gbm93VHNQYXJhbTtcbiAgICAgICAgcmV0dXJuIHsgdHM6IHJlZi50cyA/PyBub3dUc1BhcmFtLCBncmlkOiByZWYuZ3JpZCB9O1xuICAgICAgfSxcbiAgICB9KTtcblxuICAgIGNvbnN0IGRlcml2ZWQgPSBhd2FpdCBjb21wdXRlRnJvbURiQW5kTGl2ZSh7XG4gICAgICBjb2luczogY29pbnMuc2xpY2UoKSxcbiAgICAgIG5vd1RzLFxuICAgICAgbGl2ZUJlbmNobWFyazogYm1HcmlkLFxuICAgIH0pO1xuXG4gICAgY29uc3QgYm1WYWx1ZXMgPSBwaWNrVmFsdWVzKGNvaW5zLCBsaXZlLm1hdHJpY2VzLmJlbmNobWFyay52YWx1ZXMpO1xuICAgIGNvbnN0IHBjdDI0VmFsdWVzID0gcGlja1ZhbHVlcyhjb2lucywgbGl2ZS5tYXRyaWNlcy5wY3QyNGgudmFsdWVzKTtcbiAgICBjb25zdCBpZFBjdFZhbHVlcyA9IHRvVmFsdWVzKGNvaW5zLCBkZXJpdmVkLmlkX3BjdCk7XG4gICAgY29uc3QgZHJ2VmFsdWVzID0gdG9WYWx1ZXMoY29pbnMsIGRlcml2ZWQucGN0X2Rydik7XG4gICAgY29uc3QgcGN0UmVmVmFsdWVzID0gdG9WYWx1ZXMoY29pbnMsIGRlcml2ZWQucGN0X3JlZik7XG4gICAgY29uc3QgcmVmVmFsdWVzID0gdG9WYWx1ZXMoY29pbnMsIGRlcml2ZWQucmVmKTtcbiAgICBjb25zdCBkZWx0YVZhbHVlcyA9IHRvVmFsdWVzKGNvaW5zLCBkZXJpdmVkLmRlbHRhKTtcblxuICAgIGNvbnN0IHN5bWJvbHM6IHN0cmluZ1tdID0gW107XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBjb2lucy5sZW5ndGg7IGkrKykge1xuICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCBjb2lucy5sZW5ndGg7IGorKykge1xuICAgICAgICBpZiAoaSA9PT0gaikgY29udGludWU7XG4gICAgICAgIHN5bWJvbHMucHVzaChgJHtjb2luc1tpXX0ke2NvaW5zW2pdfWApO1xuICAgICAgfVxuICAgIH1cblxuICAgIGNvbnN0IGNvaW5zRGlzcGxheSA9IGNvaW5zLmZpbHRlcigoYykgPT4gYyAhPT0gcXVvdGUpO1xuXG4gICAgcmV0dXJuIHtcbiAgICAgIG9rOiB0cnVlLFxuICAgICAgY29pbnM6IGNvaW5zRGlzcGxheSxcbiAgICAgIHN5bWJvbHMsXG4gICAgICBxdW90ZSxcbiAgICAgIHdpbmRvdyxcbiAgICAgIHRzOiBub3dUcyxcbiAgICAgIG1hdHJpY2VzOiB7XG4gICAgICAgIGJlbmNobWFyazoge1xuICAgICAgICAgIHRzOiBub3dUcyxcbiAgICAgICAgICB2YWx1ZXM6IGJtVmFsdWVzLFxuICAgICAgICAgIGZsYWdzOiBsaXZlLm1hdHJpY2VzLmJlbmNobWFyay5mbGFncyxcbiAgICAgICAgfSxcbiAgICAgICAgcGN0MjRoOiB7XG4gICAgICAgICAgdHM6IG5vd1RzLFxuICAgICAgICAgIHZhbHVlczogcGN0MjRWYWx1ZXMsXG4gICAgICAgICAgZmxhZ3M6IGxpdmUubWF0cmljZXMucGN0MjRoLmZsYWdzLFxuICAgICAgICB9LFxuICAgICAgICBpZF9wY3Q6IHsgdHM6IG5vd1RzLCB2YWx1ZXM6IGlkUGN0VmFsdWVzIH0sXG4gICAgICAgIHBjdF9kcnY6IHsgdHM6IG5vd1RzLCB2YWx1ZXM6IGRydlZhbHVlcyB9LFxuICAgICAgICBwY3RfcmVmOiB7IHRzOiBub3dUcywgdmFsdWVzOiBwY3RSZWZWYWx1ZXMgfSxcbiAgICAgICAgcmVmOiB7IHRzOiBub3dUcywgdmFsdWVzOiByZWZWYWx1ZXMgfSxcbiAgICAgICAgZGVsdGE6IHsgdHM6IG5vd1RzLCB2YWx1ZXM6IGRlbHRhVmFsdWVzIH0sXG4gICAgICB9LFxuICAgICAgbWV0YToge1xuICAgICAgICBvcGVuaW5nVHM6IGxhc3RPcGVuaW5nVHMsXG4gICAgICAgIHVuaXZlcnNlOiBjb2lucyxcbiAgICAgIH0sXG4gICAgfSBzYXRpc2ZpZXMgTWF0cmljZXNMYXRlc3RTdWNjZXNzUGF5bG9hZDtcbiAgfSBjYXRjaCAoZXJyOiBhbnkpIHtcbiAgICBjb25zb2xlLmVycm9yKFwiW21hdHJpY2VzL2xhdGVzdF0gZXJyb3I6XCIsIGVycik7XG4gICAgcmV0dXJuIHtcbiAgICAgIG9rOiBmYWxzZSxcbiAgICAgIGVycm9yOiBTdHJpbmcoZXJyPy5tZXNzYWdlID8/IGVyciksXG4gICAgfSBzYXRpc2ZpZXMgTWF0cmljZXNMYXRlc3RFcnJvclBheWxvYWQ7XG4gIH1cbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIEdFVChyZXE6IFJlcXVlc3QpIHtcbiAgY29uc3QgcSA9IHBhcnNlUXVlcnkocmVxKTtcbiAgY29uc3QgcGF5bG9hZCA9IGF3YWl0IGJ1aWxkTWF0cmljZXNMYXRlc3RQYXlsb2FkKHEpO1xuICBjb25zdCBzdGF0dXMgPSBwYXlsb2FkLm9rID8gMjAwIDogNTAwO1xuICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24ocGF5bG9hZCwgeyBzdGF0dXMgfSk7XG59XG5cbmV4cG9ydCBkZWZhdWx0IGFzeW5jIGZ1bmN0aW9uIGhhbmRsZXIoX3JlcTogTmV4dEFwaVJlcXVlc3QsIHJlczogTmV4dEFwaVJlc3BvbnNlKSB7XG4gIHRyeSB7XG4gICAgY29uc3Qgc3FsID0gYFxuICAgICAgU0VMRUNUIGR2LipcbiAgICAgIEZST00gbWF0cmljZXMuZHluX3ZhbHVlcyBkdlxuICAgICAgSk9JTiBzZXR0aW5ncy5jb2luX3VuaXZlcnNlIGN1XG4gICAgICAgIE9OIGN1LmJhc2VfYXNzZXQgPSBkdi5iYXNlXG4gICAgICAgQU5EIGN1LnF1b3RlX2Fzc2V0ID0gZHYucXVvdGVcbiAgICAgICBBTkQgY3UuZW5hYmxlZCA9IHRydWVcbiAgICAgIFdIRVJFIGR2Lm1hdHJpeF90eXBlID0gJ2JlbmNobWFyaydcbiAgICAgICAgQU5EIGR2LnRzX21zID0gKFxuICAgICAgICAgIFNFTEVDVCBNQVgodHNfbXMpXG4gICAgICAgICAgRlJPTSBtYXRyaWNlcy5keW5fdmFsdWVzIGQyXG4gICAgICAgICAgV0hFUkUgZDIubWF0cml4X3R5cGUgPSBkdi5tYXRyaXhfdHlwZVxuICAgICAgICAgICAgQU5EIGQyLmJhc2UgPSBkdi5iYXNlXG4gICAgICAgICAgICBBTkQgZDIucXVvdGUgPSBkdi5xdW90ZVxuICAgICAgICApXG4gICAgICBPUkRFUiBCWSBDT0FMRVNDRShjdS5zb3J0X29yZGVyLCA5OTkpLCBkdi5iYXNlXG4gICAgYDtcbiAgICBjb25zdCB7IHJvd3MgfSA9IGF3YWl0IHF1ZXJ5KHNxbCk7XG4gICAgcmVzLnN0YXR1cygyMDApLmpzb24ocm93cyk7XG4gIH0gY2F0Y2ggKGU6IGFueSkge1xuICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKHsgZXJyb3I6IGU/Lm1lc3NhZ2UgPz8gXCJ1bmtub3duIGVycm9yXCIgfSk7XG4gIH1cbn1cbiJdLCJuYW1lcyI6WyJOZXh0UmVzcG9uc2UiLCJjb29raWVzIiwiaGVhZGVycyIsImdldFByZXZTbmFwc2hvdEJ5VHlwZSIsImdldFByZXZWYWx1ZSIsImxpdmVGcm9tU291cmNlcyIsImNvbmZpZ3VyZUJlbmNobWFya1Byb3ZpZGVycyIsImNvbXB1dGVGcm9tRGJBbmRMaXZlIiwiZmV0Y2hPcGVuaW5nR3JpZEZyb21WaWV3IiwicmVzb2x2ZUNvaW5zRnJvbVNldHRpbmdzIiwicXVlcnkiLCJBTExPV0VEX1dJTkRPV1MiLCJTZXQiLCJub3JtYWxpemVDb2lucyIsInhzIiwiQXJyYXkiLCJmcm9tIiwibWFwIiwicyIsInRyaW0iLCJ0b1VwcGVyQ2FzZSIsImZpbHRlciIsIkJvb2xlYW4iLCJwYXJzZUNvaW5zQ1NWIiwiY3N2Iiwic3BsaXQiLCJwYXJzZUNvaW5zSlNPTiIsImpzb25TdHIiLCJKU09OIiwicGFyc2UiLCJpc0FycmF5IiwiY29pbnNBZGRVU0RURmlyc3QiLCJ1c2VyQ29pbnMiLCJ3aXRob3V0VVNEVCIsImMiLCJjb2luc0Zyb21Db29raWVzT3JIZWFkZXJzIiwiYmFnQ29va2llcyIsImJhZ0hlYWRlcnMiLCJja0pzb24iLCJnZXQiLCJ2YWx1ZSIsImNrQ3N2IiwiZnJvbUNrSnNvbiIsImZyb21Da0NzdiIsImxlbmd0aCIsImh4Q3N2IiwiaHhKc29uIiwiZnJvbUh4Q3N2IiwidW5kZWZpbmVkIiwiZnJvbUh4SnNvbiIsInJlc29sdmVDb2luc1VuaXZlcnNlIiwicHJlZmVycmVkIiwibGVnYWN5IiwiZnJvbVNldHRpbmdzIiwiZW5zdXJlV2luZG93Iiwid2luIiwibGMiLCJ0b0xvd2VyQ2FzZSIsImhhcyIsInRvR3JpZCIsImNvaW5zIiwidmFsdWVzIiwibiIsImdyaWQiLCJpIiwiYmkiLCJyb3ciLCJqIiwicWoiLCJ2IiwiTnVtYmVyIiwidG9WYWx1ZXMiLCJvdXQiLCJwYXJzZVF1ZXJ5IiwicmVxIiwidXJsIiwiVVJMIiwicUNvaW5zIiwic2VhcmNoUGFyYW1zIiwicXVvdGUiLCJ3aW5kb3ciLCJhcHBTZXNzaW9uSWQiLCJwaWNrVmFsdWVzIiwidmFscyIsInRvS2VlcCIsImIiLCJkc3QiLCJxIiwiT2JqZWN0IiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJjYWxsIiwiYnVpbGRNYXRyaWNlc0xhdGVzdFBheWxvYWQiLCJwYXJhbXMiLCJxdWVyeUNvaW5zTm9ybWFsaXplZCIsIkVycm9yIiwibGl2ZSIsImJtR3JpZCIsIm1hdHJpY2VzIiwiYmVuY2htYXJrIiwibm93VHMiLCJ0cyIsInByZXZCZW5jaG1hcmtSb3dzIiwicHJldklkUGN0Um93cyIsIlByb21pc2UiLCJhbGwiLCJwcmV2QmVuY2htYXJrTWFwIiwiTWFwIiwia2V5IiwiYmFzZSIsImlzRmluaXRlIiwic2V0IiwicHJldklkUGN0TWFwIiwibGFzdE9wZW5pbmdUcyIsImdldFByZXYiLCJtYXRyaXhfdHlwZSIsInF1b3RlU3ltIiwiYmVmb3JlVHMiLCJmcm9tUHJlZmV0Y2giLCJmZXRjaE9wZW5pbmdHcmlkIiwiY29pbnNVbml2ZXJzZSIsIm5vd1RzUGFyYW0iLCJyZWYiLCJvcGVuaW5nVHMiLCJkZXJpdmVkIiwic2xpY2UiLCJsaXZlQmVuY2htYXJrIiwiYm1WYWx1ZXMiLCJwY3QyNFZhbHVlcyIsInBjdDI0aCIsImlkUGN0VmFsdWVzIiwiaWRfcGN0IiwiZHJ2VmFsdWVzIiwicGN0X2RydiIsInBjdFJlZlZhbHVlcyIsInBjdF9yZWYiLCJyZWZWYWx1ZXMiLCJkZWx0YVZhbHVlcyIsImRlbHRhIiwic3ltYm9scyIsInB1c2giLCJjb2luc0Rpc3BsYXkiLCJvayIsImZsYWdzIiwibWV0YSIsInVuaXZlcnNlIiwiZXJyIiwiY29uc29sZSIsImVycm9yIiwiU3RyaW5nIiwibWVzc2FnZSIsIkdFVCIsInBheWxvYWQiLCJzdGF0dXMiLCJqc29uIiwiaGFuZGxlciIsIl9yZXEiLCJyZXMiLCJzcWwiLCJyb3dzIiwiZSJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./src/app/api/matrices/latest/route.ts\n");

/***/ }),

/***/ "(rsc)/./src/core/db/db.ts":
/*!***************************!*\
  !*** ./src/core/db/db.ts ***!
  \***************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   clearOpeningCache: () => (/* binding */ clearOpeningCache),\n/* harmony export */   commitMatrixGrid: () => (/* binding */ commitMatrixGrid),\n/* harmony export */   countRowsAt: () => (/* binding */ countRowsAt),\n/* harmony export */   db: () => (/* reexport safe */ _pool_server__WEBPACK_IMPORTED_MODULE_0__.db),\n/* harmony export */   ensureOpening: () => (/* binding */ ensureOpening),\n/* harmony export */   getLatestByType: () => (/* binding */ getLatestByType),\n/* harmony export */   getLatestTsForType: () => (/* binding */ getLatestTsForType),\n/* harmony export */   getMatrixStageTableIdent: () => (/* binding */ getMatrixStageTableIdent),\n/* harmony export */   getNearestTsAtOrBefore: () => (/* binding */ getNearestTsAtOrBefore),\n/* harmony export */   getOpeningFromDb: () => (/* binding */ getOpeningFromDb),\n/* harmony export */   getPool: () => (/* reexport safe */ _pool_server__WEBPACK_IMPORTED_MODULE_0__.getPool),\n/* harmony export */   getPrevSnapshotByType: () => (/* binding */ getPrevSnapshotByType),\n/* harmony export */   getPrevValue: () => (/* binding */ getPrevValue),\n/* harmony export */   getSnapshotByType: () => (/* binding */ getSnapshotByType),\n/* harmony export */   persistLiveMatricesSlice: () => (/* binding */ persistLiveMatricesSlice),\n/* harmony export */   query: () => (/* reexport safe */ _pool_server__WEBPACK_IMPORTED_MODULE_0__.query),\n/* harmony export */   runDbTool: () => (/* binding */ runDbTool),\n/* harmony export */   stageMatrixGrid: () => (/* binding */ stageMatrixGrid),\n/* harmony export */   upsertMatrixRows: () => (/* binding */ upsertMatrixRows),\n/* harmony export */   withClient: () => (/* reexport safe */ _pool_server__WEBPACK_IMPORTED_MODULE_0__.withClient)\n/* harmony export */ });\n/* harmony import */ var _pool_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./pool_server */ \"(rsc)/./src/core/db/pool_server.ts\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_pool_server__WEBPACK_IMPORTED_MODULE_0__]);\n_pool_server__WEBPACK_IMPORTED_MODULE_0__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n// src/core/db/db.ts\n\n\n/** ------- Dynamics matrices (kept signatures) ------- */ // Optional env override; defaults to our canonical table\nconst RAW_TABLE = process.env.MATRIX_TABLE || \"matrices.dyn_values\";\n// Prevent SQL injection on identifier\nfunction asIdent(name) {\n    const parts = String(name).split(\".\").filter(Boolean);\n    if (!parts.length) throw new Error(`Invalid table identifier: ${name}`);\n    return parts.map((part)=>{\n        if (!/^[A-Za-z_][A-Za-z0-9_]*$/.test(part)) {\n            throw new Error(`Invalid table identifier: ${name}`);\n        }\n        return `\"${part}\"`;\n    }).join(\".\");\n}\nconst TABLE = asIdent(RAW_TABLE);\nconst RAW_STAGE_TABLE = process.env.MATRIX_STAGE_TABLE || \"matrices.dyn_values_stage\";\nconst RAW_COMMIT_TABLE = process.env.MATRIX_COMMIT_TABLE || process.env.MATRIX_TABLE || \"matrices.dyn_values\";\nconst STAGE_TABLE_CANDIDATES = Array.from(new Set([\n    process.env.MATRIX_STAGE_TABLE,\n    \"matrices.dyn_values_stage\",\n    \"public.dyn_matrix_values_stage\"\n].filter(Boolean)));\nconst MATRIX_TABLE_CANDIDATES = Array.from(new Set([\n    process.env.MATRIX_COMMIT_TABLE,\n    process.env.MATRIX_TABLE,\n    \"matrices.dyn_values\",\n    \"public.dyn_matrix_values\"\n].filter(Boolean)));\nfunction splitQualifiedName(name) {\n    const parts = String(name).split(\".\");\n    if (parts.length === 1) return {\n        schema: \"public\",\n        relation: parts[0]\n    };\n    const relation = parts.pop();\n    return {\n        schema: parts.join(\".\"),\n        relation\n    };\n}\nasync function ensureMatrixTables(client) {\n    await client.query(`CREATE SCHEMA IF NOT EXISTS matrices`);\n    await client.query(`\n    DO $$\n    BEGIN\n      IF EXISTS (\n        SELECT 1\n        FROM pg_class c\n        JOIN pg_namespace n ON n.oid = c.relnamespace\n        WHERE n.nspname = 'matrices'\n          AND c.relname = 'dyn_values'\n          AND c.relkind IN ('v','m')\n      ) THEN\n        EXECUTE 'DROP VIEW IF EXISTS matrices.dyn_values CASCADE';\n      END IF;\n      IF EXISTS (\n        SELECT 1\n        FROM pg_class c\n        JOIN pg_namespace n ON n.oid = c.relnamespace\n        WHERE n.nspname = 'matrices'\n          AND c.relname = 'dyn_values_stage'\n          AND c.relkind IN ('v','m')\n      ) THEN\n        EXECUTE 'DROP VIEW IF EXISTS matrices.dyn_values_stage CASCADE';\n      END IF;\n    END\n    $$;\n  `);\n    await client.query(`\n    CREATE TABLE IF NOT EXISTS matrices.dyn_values (\n      ts_ms        bigint           NOT NULL,\n      matrix_type  text             NOT NULL CHECK (matrix_type IN ('benchmark','delta','pct24h','id_pct','pct_drv','ref','pct_ref')),\n      base         text             NOT NULL,\n      quote        text             NOT NULL,\n      value        double precision NOT NULL,\n      meta         jsonb            NOT NULL DEFAULT '{}'::jsonb,\n      created_at   timestamptz      NOT NULL DEFAULT now(),\n      PRIMARY KEY (ts_ms, matrix_type, base, quote)\n    )\n  `);\n    await client.query(`\n    CREATE INDEX IF NOT EXISTS idx_matrices_dyn_values_pair\n      ON matrices.dyn_values (matrix_type, base, quote, ts_ms DESC)\n  `);\n    await client.query(`\n    CREATE TABLE IF NOT EXISTS matrices.dyn_values_stage (\n      ts_ms         bigint           NOT NULL,\n      matrix_type   text             NOT NULL,\n      base          text             NOT NULL,\n      quote         text             NOT NULL,\n      value         double precision NOT NULL,\n      meta          jsonb            NOT NULL DEFAULT '{}'::jsonb,\n      app_session_id text,\n      created_at    timestamptz      NOT NULL DEFAULT now(),\n      PRIMARY KEY (ts_ms, matrix_type, base, quote)\n    )\n  `);\n}\nasync function findExistingTable(client, candidates) {\n    for (const raw of candidates){\n        const { schema, relation } = splitQualifiedName(raw);\n        const { rows } = await client.query(`\n        SELECT c.relkind AS kind\n          FROM pg_class c\n          JOIN pg_namespace n ON n.oid = c.relnamespace\n         WHERE n.nspname = $1 AND c.relname = $2\n      `, [\n            schema,\n            relation\n        ]);\n        const kind = rows[0]?.kind;\n        if (kind && (kind === \"r\" || kind === \"p\")) {\n            return {\n                raw,\n                ident: asIdent(raw),\n                kind\n            };\n        }\n    }\n    return null;\n}\nlet cachedStageInfo = null;\nlet cachedMatrixInfo = null;\nasync function ensureStageInfo(client) {\n    if (cachedStageInfo) return cachedStageInfo;\n    let info = await findExistingTable(client, [\n        RAW_STAGE_TABLE,\n        ...STAGE_TABLE_CANDIDATES\n    ]) ?? await findExistingTable(client, STAGE_TABLE_CANDIDATES);\n    if (!info) {\n        await ensureMatrixTables(client);\n        info = await findExistingTable(client, [\n            RAW_STAGE_TABLE,\n            ...STAGE_TABLE_CANDIDATES\n        ]) ?? await findExistingTable(client, STAGE_TABLE_CANDIDATES);\n        if (!info) {\n            throw new Error(`Matrix stage table not found. Checked: ${[\n                RAW_STAGE_TABLE,\n                ...STAGE_TABLE_CANDIDATES\n            ].filter(Boolean).join(\", \")}`);\n        }\n    }\n    cachedStageInfo = info;\n    return info;\n}\nasync function ensureMatrixInfo(client) {\n    if (cachedMatrixInfo) return cachedMatrixInfo;\n    let info = await findExistingTable(client, [\n        RAW_COMMIT_TABLE,\n        ...MATRIX_TABLE_CANDIDATES\n    ]) ?? await findExistingTable(client, MATRIX_TABLE_CANDIDATES);\n    if (!info) {\n        await ensureMatrixTables(client);\n        info = await findExistingTable(client, [\n            RAW_COMMIT_TABLE,\n            ...MATRIX_TABLE_CANDIDATES\n        ]) ?? await findExistingTable(client, MATRIX_TABLE_CANDIDATES);\n        if (!info) {\n            throw new Error(`Matrix values table not found. Checked: ${[\n                RAW_COMMIT_TABLE,\n                ...MATRIX_TABLE_CANDIDATES\n            ].filter(Boolean).join(\", \")}`);\n        }\n    }\n    if (!info) {\n        throw new Error(`Matrix values table not found. Checked: ${[\n            RAW_COMMIT_TABLE,\n            ...MATRIX_TABLE_CANDIDATES\n        ].filter(Boolean).join(\", \")}`);\n    }\n    cachedMatrixInfo = info;\n    return info;\n}\nfunction dedupeUpper(xs) {\n    if (!xs?.length) return [];\n    const out = [];\n    const seen = new Set();\n    for (const x of xs){\n        const up = String(x ?? \"\").trim().toUpperCase();\n        if (!up || seen.has(up)) continue;\n        seen.add(up);\n        out.push(up);\n    }\n    return out;\n}\nasync function getMatrixStageTableIdent(client) {\n    if (cachedStageInfo) return cachedStageInfo.ident;\n    const useClient = client ?? await _pool_server__WEBPACK_IMPORTED_MODULE_0__.db.connect();\n    const release = !client;\n    try {\n        const info = await ensureStageInfo(useClient);\n        return info.ident;\n    } finally{\n        if (release) useClient.release();\n    }\n}\nasync function getMatrixValuesTableIdent(client) {\n    const info = await ensureMatrixInfo(client);\n    return info.ident;\n}\n/** Bulk upsert directly into main table (bypasses stage/commit) */ async function upsertMatrixRows(rows) {\n    if (!rows.length) return;\n    const client = await _pool_server__WEBPACK_IMPORTED_MODULE_0__.db.connect();\n    try {\n        const values = [];\n        const chunks = rows.map((r, i)=>{\n            const j = i * 6;\n            values.push(r.ts_ms, r.matrix_type, r.base, r.quote, r.value, JSON.stringify(r.meta ?? {}));\n            return `($${j + 1}, $${j + 2}, $${j + 3}, $${j + 4}, $${j + 5}, $${j + 6})`;\n        }).join(\",\");\n        const sql = `\n      INSERT INTO ${TABLE} (ts_ms, matrix_type, base, quote, value, meta)\n      VALUES ${chunks}\n      ON CONFLICT (ts_ms, matrix_type, base, quote)\n      DO UPDATE SET value = EXCLUDED.value, meta = EXCLUDED.meta;\n    `;\n        await client.query(sql, values);\n    } finally{\n        client.release();\n    }\n}\n/** Snapshots & lookups */ async function getLatestByType(matrix_type, coins) {\n    const client = await _pool_server__WEBPACK_IMPORTED_MODULE_0__.db.connect();\n    try {\n        const { rows } = await client.query(`SELECT ts_ms FROM ${TABLE} WHERE matrix_type=$1 ORDER BY ts_ms DESC LIMIT 1`, [\n            matrix_type\n        ]);\n        if (!rows.length) return {\n            ts_ms: null,\n            values: []\n        };\n        const ts_ms = Number(rows[0].ts_ms);\n        const { rows: vals } = await client.query(`SELECT base, quote, value FROM ${TABLE}\n       WHERE matrix_type=$1 AND ts_ms=$2 AND base = ANY($3) AND quote = ANY($3)`, [\n            matrix_type,\n            ts_ms,\n            coins\n        ]);\n        return {\n            ts_ms,\n            values: vals\n        };\n    } finally{\n        client.release();\n    }\n}\nasync function getPrevValue(matrix_type, base, quote, beforeTs) {\n    const { rows } = await _pool_server__WEBPACK_IMPORTED_MODULE_0__.db.query(`SELECT value FROM ${TABLE}\n     WHERE matrix_type=$1 AND base=$2 AND quote=$3 AND ts_ms < $4\n     ORDER BY ts_ms DESC LIMIT 1`, [\n        matrix_type,\n        base,\n        quote,\n        beforeTs\n    ]);\n    return rows.length ? Number(rows[0].value) : null;\n}\nasync function getLatestTsForType(matrix_type) {\n    const { rows } = await _pool_server__WEBPACK_IMPORTED_MODULE_0__.db.query(`SELECT MAX(ts_ms) AS ts_ms FROM ${TABLE} WHERE matrix_type=$1`, [\n        matrix_type\n    ]);\n    const v = rows[0]?.ts_ms;\n    return v == null ? null : Number(v);\n}\nasync function getNearestTsAtOrBefore(matrix_type, ts_ms) {\n    const { rows } = await _pool_server__WEBPACK_IMPORTED_MODULE_0__.db.query(`SELECT ts_ms FROM ${TABLE}\n     WHERE matrix_type=$1 AND ts_ms <= $2\n     ORDER BY ts_ms DESC LIMIT 1`, [\n        matrix_type,\n        ts_ms\n    ]);\n    const v = rows[0]?.ts_ms;\n    return v == null ? null : Number(v);\n}\nasync function getSnapshotByType(matrix_type, ts_ms, coins) {\n    const { rows } = await _pool_server__WEBPACK_IMPORTED_MODULE_0__.db.query(`SELECT base, quote, value FROM ${TABLE}\n     WHERE matrix_type=$1 AND ts_ms=$2 AND base = ANY($3) AND quote = ANY($3)`, [\n        matrix_type,\n        ts_ms,\n        coins\n    ]);\n    return rows;\n}\nasync function getPrevSnapshotByType(matrix_type, beforeTs, coins) {\n    const { rows } = await _pool_server__WEBPACK_IMPORTED_MODULE_0__.db.query(`SELECT DISTINCT ON (base, quote) base, quote, value\n       FROM ${TABLE}\n      WHERE matrix_type=$1\n        AND ts_ms < $2\n        AND base  = ANY($3)\n        AND quote = ANY($3)\n   ORDER BY base, quote, ts_ms DESC`, [\n        matrix_type,\n        beforeTs,\n        coins\n    ]);\n    return rows;\n}\nasync function countRowsAt(matrix_type, ts_ms) {\n    const { rows } = await _pool_server__WEBPACK_IMPORTED_MODULE_0__.db.query(`SELECT count(*)::int AS n FROM ${TABLE} WHERE matrix_type=$1 AND ts_ms=$2`, [\n        matrix_type,\n        ts_ms\n    ]);\n    return rows[0]?.n ?? 0;\n}\nconst openingCache = new Map();\nconst keyStr = (k)=>`${k.base}:${k.quote ?? \"USDT\"}:${k.window ?? \"1h\"}:${k.appSessionId ?? \"global\"}`;\n/** Read last opening for a (base,quote,window,session) from STR-AUX; fallback to compat view */ async function getOpeningFromDb(k) {\n    // Source of truth: strategy_aux.str_aux_session with opening_stamp = TRUE\n    const q1 = `\n    SELECT opening_ts AS ts, opening_price AS price\n      FROM strategy_aux.str_aux_session\n     WHERE pair_base=$1 AND pair_quote=$2 AND window_key=$3\n       AND ($4::text IS NULL OR app_session_id=$4)\n       AND opening_stamp = TRUE\n  ORDER BY opening_ts DESC\n     LIMIT 1\n  `;\n    const r1 = await _pool_server__WEBPACK_IMPORTED_MODULE_0__.db.query(q1, [\n        k.base,\n        k.quote ?? \"USDT\",\n        k.window ?? \"1h\",\n        k.appSessionId ?? null\n    ]);\n    if (r1.rows.length) {\n        return {\n            price: Number(r1.rows[0].price),\n            ts: Number(r1.rows[0].ts)\n        };\n    }\n    // Compatibility view (kept for older code paths)\n    const q2 = `SELECT session_ts AS ts, opening_price AS price\n                FROM session_openings\n            ORDER BY session_ts DESC\n               LIMIT 1`;\n    const r2 = await _pool_server__WEBPACK_IMPORTED_MODULE_0__.db.query(q2);\n    if (r2.rows.length) {\n        return {\n            price: Number(r2.rows[0].price),\n            ts: Number(r2.rows[0].ts)\n        };\n    }\n    return null;\n}\n/**\r\n * Ensure an opening exists + cache it for this process.\r\n * If you pass openingTs/openingPrice, we try to upsert via the SQL function `upsert_str_aux_opening` (if present).\r\n */ async function ensureOpening(k, opts = {}) {\n    const ck = keyStr(k);\n    const hit = openingCache.get(ck);\n    if (hit) return hit;\n    // If given explicit opening, try to persist (no-op if the function doesn't exist).\n    if (opts.openingPrice != null && opts.openingTs != null) {\n        try {\n            await _pool_server__WEBPACK_IMPORTED_MODULE_0__.db.query(`SELECT upsert_str_aux_opening($1,$2,$3,$4,$5,$6,$7)`, [\n                k.base,\n                k.quote ?? \"USDT\",\n                k.window ?? \"1h\",\n                k.appSessionId ?? \"global\",\n                opts.openingTs,\n                opts.openingPrice,\n                `idem:${k.base}:${k.quote ?? \"USDT\"}:${k.window ?? \"1h\"}:${k.appSessionId ?? \"global\"}:${opts.openingTs}`\n            ]);\n        } catch  {}\n    }\n    const row = await getOpeningFromDb(k);\n    if (row) {\n        openingCache.set(ck, row);\n        return row;\n    }\n    return null;\n}\nfunction clearOpeningCache(k) {\n    if (!k) return openingCache.clear();\n    openingCache.delete(keyStr(k));\n}\n/** Internal: iterate off-diagonal cells that have finite numbers */ function* cellsOf(coins, values) {\n    for (const b of coins){\n        for (const q of coins){\n            if (b === q) continue;\n            const v = values?.[b]?.[q];\n            if (v == null || Number.isNaN(Number(v))) continue;\n            yield {\n                base: b,\n                quote: q,\n                value: Number(v)\n            };\n        }\n    }\n}\n/** Stage all cells for a (matrix_type, ts_ms). Overwrites on conflict in STAGE. */ async function stageMatrixGrid(opts) {\n    const { appSessionId, matrixType, tsMs, coins, values, meta, client: external } = opts;\n    const client = external ?? await _pool_server__WEBPACK_IMPORTED_MODULE_0__.db.connect();\n    const release = !external;\n    try {\n        const rows = Array.from(cellsOf(coins, values));\n        if (!rows.length) return {\n            ok: true,\n            staged: 0\n        };\n        const metaJson = JSON.stringify(meta ?? {});\n        const stageInfo = await ensureStageInfo(client);\n        const text = `\n      INSERT INTO ${stageInfo.ident}\n        (ts_ms, matrix_type, base, quote, value, meta, app_session_id)\n      VALUES ${rows.map((_, i)=>`($1,$2,$${i * 3 + 3},$${i * 3 + 4},$${i * 3 + 5},$${rows.length * 3 + 3},$${rows.length * 3 + 4})`).join(\",\")}\n      ON CONFLICT (ts_ms, matrix_type, base, quote)\n      DO UPDATE SET value = EXCLUDED.value, meta = EXCLUDED.meta, app_session_id = EXCLUDED.app_session_id\n    `;\n        const params = [\n            tsMs,\n            matrixType\n        ];\n        for (const r of rows)params.push(r.base, r.quote, r.value);\n        params.push(metaJson, appSessionId);\n        await client.query(text, params);\n        return {\n            ok: true,\n            staged: rows.length\n        };\n    } finally{\n        if (release) client.release();\n    }\n}\n/** Publish staged rows into main table + cycle_document + ledger (see DDL) */ async function commitMatrixGrid(opts) {\n    const { matrixType, tsMs, coins, client: external } = opts;\n    const client = external ?? await _pool_server__WEBPACK_IMPORTED_MODULE_0__.db.connect();\n    const release = !external;\n    const manageTx = !external;\n    try {\n        if (manageTx) await client.query(\"BEGIN\");\n        const stageInfo = await ensureStageInfo(client);\n        const matrixTable = await getMatrixValuesTableIdent(client);\n        const stageRows = await client.query(`SELECT base, quote\n         FROM ${stageInfo.ident}\n        WHERE ts_ms = $1 AND matrix_type = $2`, [\n            tsMs,\n            matrixType\n        ]);\n        const stagedCells = stageRows.rowCount ?? stageRows.rows.length;\n        const coinsFromStage = new Set();\n        for (const row of stageRows.rows){\n            const base = String(row.base ?? \"\").toUpperCase();\n            const quote = String(row.quote ?? \"\").toUpperCase();\n            if (base) coinsFromStage.add(base);\n            if (quote) coinsFromStage.add(quote);\n        }\n        const eligibleCoins = coins?.length && dedupeUpper(coins).length ? dedupeUpper(coins) : Array.from(coinsFromStage);\n        const expectedCells = eligibleCoins.length * Math.max(eligibleCoins.length - 1, 0);\n        await client.query(`\n      INSERT INTO ${matrixTable}\n        (ts_ms, matrix_type, base, quote, value, meta)\n      SELECT ts_ms, matrix_type, base, quote, value, meta\n        FROM ${stageInfo.ident}\n       WHERE ts_ms = $1 AND matrix_type = $2\n      ON CONFLICT (ts_ms, matrix_type, base, quote)\n      DO UPDATE SET value = EXCLUDED.value, meta = EXCLUDED.meta\n    `, [\n            tsMs,\n            matrixType\n        ]);\n        const stagedPairs = new Set(stageRows.rows.map((row)=>{\n            const base = String(row.base ?? \"\").toUpperCase();\n            const quote = String(row.quote ?? \"\").toUpperCase();\n            if (!base || !quote || base === quote) return null;\n            return `${base}${quote}`;\n        }).filter(Boolean));\n        let missingCount = 0;\n        for (const base of eligibleCoins){\n            for (const quote of eligibleCoins){\n                if (base === quote) continue;\n                if (!stagedPairs.has(`${base}${quote}`)) missingCount += 1;\n            }\n        }\n        if (manageTx) await client.query(\"COMMIT\");\n        return {\n            ok: true,\n            matrix_type: matrixType,\n            ts_ms: tsMs,\n            expected_cells: expectedCells,\n            staged_cells: stagedCells,\n            missing_count: missingCount,\n            complete: missingCount === 0 && stagedCells === expectedCells\n        };\n    } catch (err) {\n        if (manageTx) await client.query(\"ROLLBACK\");\n        throw err;\n    } finally{\n        if (release) client.release();\n    }\n}\n/** Convenience: read prev benchmark grid for a coin set (paired map) */ async function mapPrevBenchmark(beforeTs, coins) {\n    const prev = await getPrevSnapshotByType(\"benchmark\", beforeTs, coins);\n    const m = new Map();\n    for (const r of prev)m.set(`${r.base}/${r.quote}`, Number(r.value));\n    return m;\n}\n/**\r\n * Persist the current live slices for the active coin-universe:\r\n *  - benchmark (full NN)\r\n *  - pct24h   (as-is from live)\r\n *  - id_pct   (derived vs prev benchmark so pct_drv has history on next tick)\r\n *\r\n * All three use the SAME ts_ms to keep slices aligned.\r\n */ async function persistLiveMatricesSlice(opts) {\n    const { appSessionId, coins, tsMs, benchmark, pct24h, idemPrefix } = opts;\n    // 1) stage+commit benchmark\n    await stageMatrixGrid({\n        appSessionId,\n        matrixType: \"benchmark\",\n        tsMs,\n        coins,\n        values: benchmark,\n        meta: {\n            source: \"live\"\n        }\n    });\n    await commitMatrixGrid({\n        appSessionId,\n        matrixType: \"benchmark\",\n        tsMs,\n        coins,\n        idem: `${idemPrefix ?? \"benchmark\"}:${tsMs}`\n    });\n    // 2) stage+commit pct24h (optional)\n    if (pct24h) {\n        await stageMatrixGrid({\n            appSessionId,\n            matrixType: \"pct24h\",\n            tsMs,\n            coins,\n            values: pct24h,\n            meta: {\n                source: \"live\"\n            }\n        });\n        await commitMatrixGrid({\n            appSessionId,\n            matrixType: \"pct24h\",\n            tsMs,\n            coins,\n            idem: `${idemPrefix ?? \"pct24h\"}:${tsMs}`\n        });\n    }\n    // 3) derive id_pct vs prev(benchmark) and persist\n    const prevMap = await mapPrevBenchmark(tsMs, coins);\n    const idObj = {};\n    for (const b of coins){\n        idObj[b] = {};\n        for (const q of coins){\n            if (b === q) continue;\n            const now = benchmark?.[b]?.[q];\n            const prev = prevMap.get(`${b}/${q}`);\n            if (now == null || prev == null || Math.abs(prev) < 1e-300) {\n                idObj[b][q] = null;\n            } else {\n                idObj[b][q] = (Number(now) - prev) / prev; // id_pct = (bm_new - bm_prev)/bm_prev\n            }\n        }\n    }\n    await stageMatrixGrid({\n        appSessionId,\n        matrixType: \"id_pct\",\n        tsMs,\n        coins,\n        values: idObj,\n        meta: {\n            source: \"derived@db\",\n            base: \"prev(benchmark)\"\n        }\n    });\n    await commitMatrixGrid({\n        appSessionId,\n        matrixType: \"id_pct\",\n        tsMs,\n        coins,\n        idem: `${idemPrefix ?? \"id_pct\"}:${tsMs}`\n    });\n}\nconst BASE_STEP = {\n    name: \"BASE DDLs\",\n    files: [\n        \"00_extensions.sql\",\n        \"01_settings.sql\",\n        \"02_market.sql\",\n        \"03_docs.sql\",\n        \"04_matrices.sql\",\n        \"05_str_aux.sql\",\n        \"06_cin_aux_core.sql\",\n        \"07_cin_aux_runtime.sql\",\n        \"08_cin_aux_functions.sql\",\n        \"09_ops.sql\",\n        \"09_ingest.sql\",\n        \"10_helpers.sql\",\n        \"11_views_latest.sql\"\n    ]\n};\nconst PATCH_STEP = {\n    name: \"PATCH SET v1\",\n    files: [\n        \"01_settings_patches.sql\",\n        \"02_market_patches.sql\",\n        \"03_docs_patches.sql\",\n        \"04_matrices_patches.sql\",\n        \"05_str_aux_patches.sql\",\n        \"06_cin_aux_core_patches.sql\",\n        \"07_cin_aux_runtime_patches.sql\",\n        \"08_cin_aux_functions_patches.sql\",\n        \"09_mea_dynamics_patches.sql\",\n        \"10_ops_patches.sql\",\n        \"11_remove_bootstrap.sql\"\n    ]\n};\nconst SEED_STEP = {\n    name: \"SEEDS\",\n    files: [\n        \"01_seed.sql\",\n        \"02_seed_jobs.sql\"\n    ]\n};\nconst VERIFY_STEP = {\n    name: \"VERIFY\",\n    files: [\n        \"03_verify.sql\"\n    ]\n};\nasync function spawnCommand(cmd, args, env) {\n    const { spawn } = await Promise.resolve(/*! import() */).then(__webpack_require__.t.bind(__webpack_require__, /*! node:child_process */ \"node:child_process\", 23));\n    return new Promise((resolve, reject)=>{\n        const child = spawn(cmd, args, {\n            stdio: \"inherit\",\n            env\n        });\n        child.on(\"error\", reject);\n        child.on(\"exit\", (code)=>code === 0 ? resolve() : reject(new Error(`${cmd} exited with ${code}`)));\n    });\n}\nasync function runDbTool(argv = typeof process !== \"undefined\" ? process.argv.slice(2) : [], opts = {}) {\n    const [{ resolve, join }, fs, dotenv] = await Promise.all([\n        Promise.resolve(/*! import() */).then(__webpack_require__.t.bind(__webpack_require__, /*! node:path */ \"node:path\", 23)),\n        Promise.resolve(/*! import() */).then(__webpack_require__.t.bind(__webpack_require__, /*! node:fs */ \"node:fs\", 23)),\n        __webpack_require__.e(/*! import() */ \"vendor-chunks/dotenv@17.2.2\").then(__webpack_require__.t.bind(__webpack_require__, /*! dotenv */ \"(rsc)/./node_modules/.pnpm/dotenv@17.2.2/node_modules/dotenv/lib/main.js\", 23))\n    ]);\n    const ROOT = resolve(process.cwd(), opts.root ?? \"db\");\n    const ENV_FILE = join(ROOT, \".env.db\");\n    if (fs.existsSync(ENV_FILE)) {\n        dotenv.config({\n            path: ENV_FILE\n        });\n    }\n    const pg = {\n        host: process.env.PGHOST ?? \"localhost\",\n        port: String(process.env.PGPORT ?? \"5432\"),\n        db: process.env.PGDATABASE ?? \"postgres\",\n        user: process.env.PGUSER ?? \"postgres\",\n        pass: process.env.PGPASSWORD ?? \"\"\n    };\n    const fileExists = (file)=>fs.existsSync(join(ROOT, file));\n    async function ensurePsql() {\n        await spawnCommand(\"psql\", [\n            \"--version\"\n        ]);\n    }\n    async function execSql(file) {\n        if (!fileExists(file)) return;\n        const full = join(ROOT, file);\n        await spawnCommand(\"psql\", [\n            \"-X\",\n            \"-v\",\n            \"ON_ERROR_STOP=1\",\n            \"-h\",\n            pg.host,\n            \"-p\",\n            pg.port,\n            \"-U\",\n            pg.user,\n            \"-d\",\n            pg.db,\n            \"-f\",\n            full\n        ], {\n            ...process.env,\n            PGPASSWORD: pg.pass\n        });\n    }\n    async function runStep(step) {\n        console.log(`\\n=== ${step.name} ===`);\n        for (const file of step.files){\n            if (!fileExists(file)) continue;\n            console.log(`-> ${file}`);\n            await execSql(file);\n        }\n    }\n    async function ensureDb() {\n        const sql = `DO $$\n     BEGIN\n       IF NOT EXISTS (SELECT 1 FROM pg_database WHERE datname = '${pg.db}') THEN\n         EXECUTE 'CREATE DATABASE ${pg.db}';\n       END IF;\n     END$$;`;\n        await spawnCommand(\"psql\", [\n            \"-X\",\n            \"-v\",\n            \"ON_ERROR_STOP=1\",\n            \"-h\",\n            pg.host,\n            \"-p\",\n            pg.port,\n            \"-U\",\n            pg.user,\n            \"-d\",\n            \"postgres\",\n            \"-c\",\n            sql\n        ], {\n            ...process.env,\n            PGPASSWORD: pg.pass\n        });\n    }\n    function usage() {\n        console.log(`\nUsage:\n  pnpm db:apply     # base DDLs + patches\n  pnpm db:seed      # seeds (universe/timing/session/jobs)\n  pnpm db:verify    # quick checks\n  pnpm db:all       # ensure DB, apply, seed, verify\n  pnpm db:psql      # open interactive psql to PGDATABASE\n\nENV: read from db/.env.db (PGHOST, PGPORT, PGDATABASE, PGUSER, PGPASSWORD)\n`.trim());\n    }\n    const [cmd = \"\"] = argv;\n    await ensurePsql();\n    if (cmd === \"apply\") {\n        await runStep(BASE_STEP);\n        await runStep(PATCH_STEP);\n        console.log(\"[ok] apply complete\");\n        return;\n    }\n    if (cmd === \"seed\") {\n        await runStep(SEED_STEP);\n        console.log(\"[ok] seed complete\");\n        return;\n    }\n    if (cmd === \"verify\") {\n        await runStep(VERIFY_STEP);\n        console.log(\"[ok] verify complete\");\n        return;\n    }\n    if (cmd === \"all\") {\n        await ensureDb();\n        await runStep(BASE_STEP);\n        await runStep(PATCH_STEP);\n        await runStep(SEED_STEP);\n        await runStep(VERIFY_STEP);\n        console.log(\"[ok] all done\");\n        return;\n    }\n    if (cmd === \"psql\") {\n        await spawnCommand(\"psql\", [\n            \"-h\",\n            pg.host,\n            \"-p\",\n            pg.port,\n            \"-U\",\n            pg.user,\n            \"-d\",\n            pg.db\n        ], {\n            ...process.env,\n            PGPASSWORD: pg.pass\n        });\n        return;\n    }\n    usage();\n    throw new Error(`Unknown db command \"${cmd}\"`);\n}\nasync function maybeRunDbToolFromCli() {\n    if (typeof process === \"undefined\" || !process.argv?.[1]) return;\n    try {\n        const { pathToFileURL } = await Promise.resolve(/*! import() */).then(__webpack_require__.t.bind(__webpack_require__, /*! node:url */ \"node:url\", 23));\n        if (\"file:///H:/Users/Gus/source/repo/dynamics/dynamics-b/cryptopi-dynamics/src/core/db/db.ts\" !== pathToFileURL(process.argv[1]).href) return;\n    } catch  {\n        return;\n    }\n    try {\n        await runDbTool(process.argv.slice(2));\n    } catch (err) {\n        console.error(err);\n        process.exitCode = 1;\n    }\n}\nvoid maybeRunDbToolFromCli();\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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UUFBUUMsR0FBRyxDQUFDO1FBQ1o7SUFDRjtJQUVBLElBQUl6QyxRQUFRLFFBQVE7UUFDbEIsTUFBTUQsYUFDSixRQUNBO1lBQUM7WUFBTXdCLEdBQUdDLElBQUk7WUFBRTtZQUFNRCxHQUFHRyxJQUFJO1lBQUU7WUFBTUgsR0FBR00sSUFBSTtZQUFFO1lBQU1OLEdBQUdoTSxFQUFFO1NBQUMsRUFDMUQ7WUFBRSxHQUFHSyxRQUFRQyxHQUFHO1lBQUVtTSxZQUFZVCxHQUFHUSxJQUFJO1FBQUM7UUFFeEM7SUFDRjtJQUVBWTtJQUNBLE1BQU0sSUFBSXBNLE1BQU0sQ0FBQyxvQkFBb0IsRUFBRXlKLElBQUksQ0FBQyxDQUFDO0FBQy9DO0FBRUEsZUFBZTRDO0lBQ2IsSUFBSSxPQUFPaE4sWUFBWSxlQUFlLENBQUNBLFFBQVErSyxJQUFJLEVBQUUsQ0FBQyxFQUFFLEVBQUU7SUFDMUQsSUFBSTtRQUNGLE1BQU0sRUFBRWtDLGFBQWEsRUFBRSxHQUFHLE1BQU0sc0hBQWtCO1FBQ2xELElBQUksMEZBQWUsS0FBS0EsY0FBY2pOLFFBQVErSyxJQUFJLENBQUMsRUFBRSxFQUFHb0MsSUFBSSxFQUFFO0lBQ2hFLEVBQUUsT0FBTTtRQUNOO0lBQ0Y7SUFFQSxJQUFJO1FBQ0YsTUFBTXJDLFVBQVU5SyxRQUFRK0ssSUFBSSxDQUFDQyxLQUFLLENBQUM7SUFDckMsRUFBRSxPQUFPaEMsS0FBSztRQUNaNEQsUUFBUVEsS0FBSyxDQUFDcEU7UUFDZGhKLFFBQVFxTixRQUFRLEdBQUc7SUFDckI7QUFDRjtBQUVBLEtBQUtMIiwic291cmNlcyI6WyJIOlxcVXNlcnNcXEd1c1xcc291cmNlXFxyZXBvXFxkeW5hbWljc1xcZHluYW1pY3MtYlxcY3J5cHRvcGktZHluYW1pY3NcXHNyY1xcY29yZVxcZGJcXGRiLnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIHNyYy9jb3JlL2RiL2RiLnRzXHJcbmltcG9ydCB0eXBlIHsgUG9vbENsaWVudCwgUXVlcnlSZXN1bHQsIFF1ZXJ5UmVzdWx0Um93IH0gZnJvbSBcInBnXCI7XHJcbmltcG9ydCB7IGRiLCBnZXRQb29sLCBxdWVyeSwgd2l0aENsaWVudCB9IGZyb20gXCIuL3Bvb2xfc2VydmVyXCI7XHJcblxyXG5leHBvcnQgeyBkYiwgZ2V0UG9vbCwgcXVlcnksIHdpdGhDbGllbnQgfSBmcm9tIFwiLi9wb29sX3NlcnZlclwiO1xyXG5cclxuLyoqIC0tLS0tLS0gRHluYW1pY3MgbWF0cmljZXMgKGtlcHQgc2lnbmF0dXJlcykgLS0tLS0tLSAqL1xyXG4vLyBPcHRpb25hbCBlbnYgb3ZlcnJpZGU7IGRlZmF1bHRzIHRvIG91ciBjYW5vbmljYWwgdGFibGVcbmNvbnN0IFJBV19UQUJMRSA9IHByb2Nlc3MuZW52Lk1BVFJJWF9UQUJMRSB8fCBcIm1hdHJpY2VzLmR5bl92YWx1ZXNcIjtcblxuLy8gUHJldmVudCBTUUwgaW5qZWN0aW9uIG9uIGlkZW50aWZpZXJcbmZ1bmN0aW9uIGFzSWRlbnQobmFtZTogc3RyaW5nKSB7XG4gIGNvbnN0IHBhcnRzID0gU3RyaW5nKG5hbWUpLnNwbGl0KFwiLlwiKS5maWx0ZXIoQm9vbGVhbik7XG4gIGlmICghcGFydHMubGVuZ3RoKSB0aHJvdyBuZXcgRXJyb3IoYEludmFsaWQgdGFibGUgaWRlbnRpZmllcjogJHtuYW1lfWApO1xuICByZXR1cm4gcGFydHMubWFwKChwYXJ0KSA9PiB7XG4gICAgaWYgKCEvXltBLVphLXpfXVtBLVphLXowLTlfXSokLy50ZXN0KHBhcnQpKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYEludmFsaWQgdGFibGUgaWRlbnRpZmllcjogJHtuYW1lfWApO1xuICAgIH1cbiAgICByZXR1cm4gYFwiJHtwYXJ0fVwiYDtcbiAgfSkuam9pbihcIi5cIik7XG59XG5jb25zdCBUQUJMRSA9IGFzSWRlbnQoUkFXX1RBQkxFKTtcblxuY29uc3QgUkFXX1NUQUdFX1RBQkxFID1cbiAgcHJvY2Vzcy5lbnYuTUFUUklYX1NUQUdFX1RBQkxFIHx8IFwibWF0cmljZXMuZHluX3ZhbHVlc19zdGFnZVwiO1xuY29uc3QgUkFXX0NPTU1JVF9UQUJMRSA9XG4gIHByb2Nlc3MuZW52Lk1BVFJJWF9DT01NSVRfVEFCTEUgfHxcbiAgcHJvY2Vzcy5lbnYuTUFUUklYX1RBQkxFIHx8XG4gIFwibWF0cmljZXMuZHluX3ZhbHVlc1wiO1xuXG5jb25zdCBTVEFHRV9UQUJMRV9DQU5ESURBVEVTID0gQXJyYXkuZnJvbShcbiAgbmV3IFNldChcbiAgICBbXG4gICAgICBwcm9jZXNzLmVudi5NQVRSSVhfU1RBR0VfVEFCTEUsXG4gICAgICBcIm1hdHJpY2VzLmR5bl92YWx1ZXNfc3RhZ2VcIixcbiAgICAgIFwicHVibGljLmR5bl9tYXRyaXhfdmFsdWVzX3N0YWdlXCIsXG4gICAgXS5maWx0ZXIoQm9vbGVhbikgYXMgc3RyaW5nW11cbiAgKVxuKTtcblxuY29uc3QgTUFUUklYX1RBQkxFX0NBTkRJREFURVMgPSBBcnJheS5mcm9tKFxuICBuZXcgU2V0KFxuICAgIFtcbiAgICAgIHByb2Nlc3MuZW52Lk1BVFJJWF9DT01NSVRfVEFCTEUsXG4gICAgICBwcm9jZXNzLmVudi5NQVRSSVhfVEFCTEUsXG4gICAgICBcIm1hdHJpY2VzLmR5bl92YWx1ZXNcIixcbiAgICAgIFwicHVibGljLmR5bl9tYXRyaXhfdmFsdWVzXCIsXG4gICAgXS5maWx0ZXIoQm9vbGVhbikgYXMgc3RyaW5nW11cbiAgKVxuKTtcblxudHlwZSBSZWxhdGlvbkluZm8gPSB7IHJhdzogc3RyaW5nOyBpZGVudDogc3RyaW5nOyBraW5kOiBzdHJpbmcgfTtcblxuZnVuY3Rpb24gc3BsaXRRdWFsaWZpZWROYW1lKG5hbWU6IHN0cmluZyk6IHsgc2NoZW1hOiBzdHJpbmc7IHJlbGF0aW9uOiBzdHJpbmcgfSB7XG4gIGNvbnN0IHBhcnRzID0gU3RyaW5nKG5hbWUpLnNwbGl0KFwiLlwiKTtcbiAgaWYgKHBhcnRzLmxlbmd0aCA9PT0gMSkgcmV0dXJuIHsgc2NoZW1hOiBcInB1YmxpY1wiLCByZWxhdGlvbjogcGFydHNbMF0hIH07XG4gIGNvbnN0IHJlbGF0aW9uID0gcGFydHMucG9wKCkhO1xuICByZXR1cm4geyBzY2hlbWE6IHBhcnRzLmpvaW4oXCIuXCIpLCByZWxhdGlvbiB9O1xufVxuXG5hc3luYyBmdW5jdGlvbiBlbnN1cmVNYXRyaXhUYWJsZXMoY2xpZW50OiBQb29sQ2xpZW50KSB7XG4gIGF3YWl0IGNsaWVudC5xdWVyeShgQ1JFQVRFIFNDSEVNQSBJRiBOT1QgRVhJU1RTIG1hdHJpY2VzYCk7XG4gIGF3YWl0IGNsaWVudC5xdWVyeShgXG4gICAgRE8gJCRcbiAgICBCRUdJTlxuICAgICAgSUYgRVhJU1RTIChcbiAgICAgICAgU0VMRUNUIDFcbiAgICAgICAgRlJPTSBwZ19jbGFzcyBjXG4gICAgICAgIEpPSU4gcGdfbmFtZXNwYWNlIG4gT04gbi5vaWQgPSBjLnJlbG5hbWVzcGFjZVxuICAgICAgICBXSEVSRSBuLm5zcG5hbWUgPSAnbWF0cmljZXMnXG4gICAgICAgICAgQU5EIGMucmVsbmFtZSA9ICdkeW5fdmFsdWVzJ1xuICAgICAgICAgIEFORCBjLnJlbGtpbmQgSU4gKCd2JywnbScpXG4gICAgICApIFRIRU5cbiAgICAgICAgRVhFQ1VURSAnRFJPUCBWSUVXIElGIEVYSVNUUyBtYXRyaWNlcy5keW5fdmFsdWVzIENBU0NBREUnO1xuICAgICAgRU5EIElGO1xuICAgICAgSUYgRVhJU1RTIChcbiAgICAgICAgU0VMRUNUIDFcbiAgICAgICAgRlJPTSBwZ19jbGFzcyBjXG4gICAgICAgIEpPSU4gcGdfbmFtZXNwYWNlIG4gT04gbi5vaWQgPSBjLnJlbG5hbWVzcGFjZVxuICAgICAgICBXSEVSRSBuLm5zcG5hbWUgPSAnbWF0cmljZXMnXG4gICAgICAgICAgQU5EIGMucmVsbmFtZSA9ICdkeW5fdmFsdWVzX3N0YWdlJ1xuICAgICAgICAgIEFORCBjLnJlbGtpbmQgSU4gKCd2JywnbScpXG4gICAgICApIFRIRU5cbiAgICAgICAgRVhFQ1VURSAnRFJPUCBWSUVXIElGIEVYSVNUUyBtYXRyaWNlcy5keW5fdmFsdWVzX3N0YWdlIENBU0NBREUnO1xuICAgICAgRU5EIElGO1xuICAgIEVORFxuICAgICQkO1xuICBgKTtcbiAgYXdhaXQgY2xpZW50LnF1ZXJ5KGBcbiAgICBDUkVBVEUgVEFCTEUgSUYgTk9UIEVYSVNUUyBtYXRyaWNlcy5keW5fdmFsdWVzIChcbiAgICAgIHRzX21zICAgICAgICBiaWdpbnQgICAgICAgICAgIE5PVCBOVUxMLFxuICAgICAgbWF0cml4X3R5cGUgIHRleHQgICAgICAgICAgICAgTk9UIE5VTEwgQ0hFQ0sgKG1hdHJpeF90eXBlIElOICgnYmVuY2htYXJrJywnZGVsdGEnLCdwY3QyNGgnLCdpZF9wY3QnLCdwY3RfZHJ2JywncmVmJywncGN0X3JlZicpKSxcbiAgICAgIGJhc2UgICAgICAgICB0ZXh0ICAgICAgICAgICAgIE5PVCBOVUxMLFxuICAgICAgcXVvdGUgICAgICAgIHRleHQgICAgICAgICAgICAgTk9UIE5VTEwsXG4gICAgICB2YWx1ZSAgICAgICAgZG91YmxlIHByZWNpc2lvbiBOT1QgTlVMTCxcbiAgICAgIG1ldGEgICAgICAgICBqc29uYiAgICAgICAgICAgIE5PVCBOVUxMIERFRkFVTFQgJ3t9Jzo6anNvbmIsXG4gICAgICBjcmVhdGVkX2F0ICAgdGltZXN0YW1wdHogICAgICBOT1QgTlVMTCBERUZBVUxUIG5vdygpLFxuICAgICAgUFJJTUFSWSBLRVkgKHRzX21zLCBtYXRyaXhfdHlwZSwgYmFzZSwgcXVvdGUpXG4gICAgKVxuICBgKTtcbiAgYXdhaXQgY2xpZW50LnF1ZXJ5KGBcbiAgICBDUkVBVEUgSU5ERVggSUYgTk9UIEVYSVNUUyBpZHhfbWF0cmljZXNfZHluX3ZhbHVlc19wYWlyXG4gICAgICBPTiBtYXRyaWNlcy5keW5fdmFsdWVzIChtYXRyaXhfdHlwZSwgYmFzZSwgcXVvdGUsIHRzX21zIERFU0MpXG4gIGApO1xuICBhd2FpdCBjbGllbnQucXVlcnkoYFxuICAgIENSRUFURSBUQUJMRSBJRiBOT1QgRVhJU1RTIG1hdHJpY2VzLmR5bl92YWx1ZXNfc3RhZ2UgKFxuICAgICAgdHNfbXMgICAgICAgICBiaWdpbnQgICAgICAgICAgIE5PVCBOVUxMLFxuICAgICAgbWF0cml4X3R5cGUgICB0ZXh0ICAgICAgICAgICAgIE5PVCBOVUxMLFxuICAgICAgYmFzZSAgICAgICAgICB0ZXh0ICAgICAgICAgICAgIE5PVCBOVUxMLFxuICAgICAgcXVvdGUgICAgICAgICB0ZXh0ICAgICAgICAgICAgIE5PVCBOVUxMLFxuICAgICAgdmFsdWUgICAgICAgICBkb3VibGUgcHJlY2lzaW9uIE5PVCBOVUxMLFxuICAgICAgbWV0YSAgICAgICAgICBqc29uYiAgICAgICAgICAgIE5PVCBOVUxMIERFRkFVTFQgJ3t9Jzo6anNvbmIsXG4gICAgICBhcHBfc2Vzc2lvbl9pZCB0ZXh0LFxuICAgICAgY3JlYXRlZF9hdCAgICB0aW1lc3RhbXB0eiAgICAgIE5PVCBOVUxMIERFRkFVTFQgbm93KCksXG4gICAgICBQUklNQVJZIEtFWSAodHNfbXMsIG1hdHJpeF90eXBlLCBiYXNlLCBxdW90ZSlcbiAgICApXG4gIGApO1xufVxuXG5hc3luYyBmdW5jdGlvbiBmaW5kRXhpc3RpbmdUYWJsZShcbiAgY2xpZW50OiBQb29sQ2xpZW50LFxuICBjYW5kaWRhdGVzOiBzdHJpbmdbXVxuKTogUHJvbWlzZTxSZWxhdGlvbkluZm8gfCBudWxsPiB7XG4gIGZvciAoY29uc3QgcmF3IG9mIGNhbmRpZGF0ZXMpIHtcbiAgICBjb25zdCB7IHNjaGVtYSwgcmVsYXRpb24gfSA9IHNwbGl0UXVhbGlmaWVkTmFtZShyYXcpO1xuICAgIGNvbnN0IHsgcm93cyB9ID0gYXdhaXQgY2xpZW50LnF1ZXJ5PHsga2luZD86IHN0cmluZyB9PihcbiAgICAgIGBcbiAgICAgICAgU0VMRUNUIGMucmVsa2luZCBBUyBraW5kXG4gICAgICAgICAgRlJPTSBwZ19jbGFzcyBjXG4gICAgICAgICAgSk9JTiBwZ19uYW1lc3BhY2UgbiBPTiBuLm9pZCA9IGMucmVsbmFtZXNwYWNlXG4gICAgICAgICBXSEVSRSBuLm5zcG5hbWUgPSAkMSBBTkQgYy5yZWxuYW1lID0gJDJcbiAgICAgIGAsXG4gICAgICBbc2NoZW1hLCByZWxhdGlvbl1cbiAgICApO1xuICAgIGNvbnN0IGtpbmQgPSByb3dzWzBdPy5raW5kO1xuICAgIGlmIChraW5kICYmIChraW5kID09PSBcInJcIiB8fCBraW5kID09PSBcInBcIikpIHtcbiAgICAgIHJldHVybiB7IHJhdywgaWRlbnQ6IGFzSWRlbnQocmF3KSwga2luZCB9O1xuICAgIH1cbiAgfVxuICByZXR1cm4gbnVsbDtcbn1cblxubGV0IGNhY2hlZFN0YWdlSW5mbzogUmVsYXRpb25JbmZvIHwgbnVsbCA9IG51bGw7XG5sZXQgY2FjaGVkTWF0cml4SW5mbzogUmVsYXRpb25JbmZvIHwgbnVsbCA9IG51bGw7XG5cbmFzeW5jIGZ1bmN0aW9uIGVuc3VyZVN0YWdlSW5mbyhjbGllbnQ6IFBvb2xDbGllbnQpOiBQcm9taXNlPFJlbGF0aW9uSW5mbz4ge1xuICBpZiAoY2FjaGVkU3RhZ2VJbmZvKSByZXR1cm4gY2FjaGVkU3RhZ2VJbmZvO1xuICBsZXQgaW5mbyA9XG4gICAgKGF3YWl0IGZpbmRFeGlzdGluZ1RhYmxlKGNsaWVudCwgW1JBV19TVEFHRV9UQUJMRSwgLi4uU1RBR0VfVEFCTEVfQ0FORElEQVRFU10pKSA/P1xuICAgIChhd2FpdCBmaW5kRXhpc3RpbmdUYWJsZShjbGllbnQsIFNUQUdFX1RBQkxFX0NBTkRJREFURVMpKTtcbiAgaWYgKCFpbmZvKSB7XG4gICAgYXdhaXQgZW5zdXJlTWF0cml4VGFibGVzKGNsaWVudCk7XG4gICAgaW5mbyA9XG4gICAgICAoYXdhaXQgZmluZEV4aXN0aW5nVGFibGUoY2xpZW50LCBbUkFXX1NUQUdFX1RBQkxFLCAuLi5TVEFHRV9UQUJMRV9DQU5ESURBVEVTXSkpID8/XG4gICAgICAoYXdhaXQgZmluZEV4aXN0aW5nVGFibGUoY2xpZW50LCBTVEFHRV9UQUJMRV9DQU5ESURBVEVTKSk7XG4gICAgaWYgKCFpbmZvKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgIGBNYXRyaXggc3RhZ2UgdGFibGUgbm90IGZvdW5kLiBDaGVja2VkOiAke1tcbiAgICAgICAgICBSQVdfU1RBR0VfVEFCTEUsXG4gICAgICAgICAgLi4uU1RBR0VfVEFCTEVfQ0FORElEQVRFUyxcbiAgICAgICAgXVxuICAgICAgICAgIC5maWx0ZXIoQm9vbGVhbilcbiAgICAgICAgICAuam9pbihcIiwgXCIpfWBcbiAgICAgICk7XG4gICAgfVxuICB9XG4gIGNhY2hlZFN0YWdlSW5mbyA9IGluZm87XG4gIHJldHVybiBpbmZvO1xufVxuXG5hc3luYyBmdW5jdGlvbiBlbnN1cmVNYXRyaXhJbmZvKGNsaWVudDogUG9vbENsaWVudCk6IFByb21pc2U8UmVsYXRpb25JbmZvPiB7XG4gIGlmIChjYWNoZWRNYXRyaXhJbmZvKSByZXR1cm4gY2FjaGVkTWF0cml4SW5mbztcbiAgbGV0IGluZm8gPVxuICAgIChhd2FpdCBmaW5kRXhpc3RpbmdUYWJsZShjbGllbnQsIFtSQVdfQ09NTUlUX1RBQkxFLCAuLi5NQVRSSVhfVEFCTEVfQ0FORElEQVRFU10pKSA/P1xuICAgIChhd2FpdCBmaW5kRXhpc3RpbmdUYWJsZShjbGllbnQsIE1BVFJJWF9UQUJMRV9DQU5ESURBVEVTKSk7XG4gIGlmICghaW5mbykge1xuICAgIGF3YWl0IGVuc3VyZU1hdHJpeFRhYmxlcyhjbGllbnQpO1xuICAgIGluZm8gPVxuICAgICAgKGF3YWl0IGZpbmRFeGlzdGluZ1RhYmxlKGNsaWVudCwgW1JBV19DT01NSVRfVEFCTEUsIC4uLk1BVFJJWF9UQUJMRV9DQU5ESURBVEVTXSkpID8/XG4gICAgICAoYXdhaXQgZmluZEV4aXN0aW5nVGFibGUoY2xpZW50LCBNQVRSSVhfVEFCTEVfQ0FORElEQVRFUykpO1xuICAgIGlmICghaW5mbykge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICBgTWF0cml4IHZhbHVlcyB0YWJsZSBub3QgZm91bmQuIENoZWNrZWQ6ICR7W1xuICAgICAgICAgIFJBV19DT01NSVRfVEFCTEUsXG4gICAgICAgICAgLi4uTUFUUklYX1RBQkxFX0NBTkRJREFURVMsXG4gICAgICAgIF1cbiAgICAgICAgICAuZmlsdGVyKEJvb2xlYW4pXG4gICAgICAgICAgLmpvaW4oXCIsIFwiKX1gXG4gICAgICApO1xuICAgIH1cbiAgfVxuICBpZiAoIWluZm8pIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICBgTWF0cml4IHZhbHVlcyB0YWJsZSBub3QgZm91bmQuIENoZWNrZWQ6ICR7W1xuICAgICAgICBSQVdfQ09NTUlUX1RBQkxFLFxuICAgICAgICAuLi5NQVRSSVhfVEFCTEVfQ0FORElEQVRFUyxcbiAgICAgIF1cbiAgICAgICAgLmZpbHRlcihCb29sZWFuKVxuICAgICAgICAuam9pbihcIiwgXCIpfWBcbiAgICApO1xuICB9XG4gIGNhY2hlZE1hdHJpeEluZm8gPSBpbmZvO1xuICByZXR1cm4gaW5mbztcbn1cblxuZnVuY3Rpb24gZGVkdXBlVXBwZXIoeHM6IHJlYWRvbmx5IHN0cmluZ1tdIHwgdW5kZWZpbmVkIHwgbnVsbCk6IHN0cmluZ1tdIHtcbiAgaWYgKCF4cz8ubGVuZ3RoKSByZXR1cm4gW107XG4gIGNvbnN0IG91dDogc3RyaW5nW10gPSBbXTtcbiAgY29uc3Qgc2VlbiA9IG5ldyBTZXQ8c3RyaW5nPigpO1xuICBmb3IgKGNvbnN0IHggb2YgeHMpIHtcbiAgICBjb25zdCB1cCA9IFN0cmluZyh4ID8/IFwiXCIpLnRyaW0oKS50b1VwcGVyQ2FzZSgpO1xuICAgIGlmICghdXAgfHwgc2Vlbi5oYXModXApKSBjb250aW51ZTtcbiAgICBzZWVuLmFkZCh1cCk7XG4gICAgb3V0LnB1c2godXApO1xuICB9XG4gIHJldHVybiBvdXQ7XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRNYXRyaXhTdGFnZVRhYmxlSWRlbnQoXG4gIGNsaWVudD86IFBvb2xDbGllbnRcbik6IFByb21pc2U8c3RyaW5nPiB7XG4gIGlmIChjYWNoZWRTdGFnZUluZm8pIHJldHVybiBjYWNoZWRTdGFnZUluZm8uaWRlbnQ7XG4gIGNvbnN0IHVzZUNsaWVudCA9IGNsaWVudCA/PyAoYXdhaXQgZGIuY29ubmVjdCgpKTtcbiAgY29uc3QgcmVsZWFzZSA9ICFjbGllbnQ7XG4gIHRyeSB7XG4gICAgY29uc3QgaW5mbyA9IGF3YWl0IGVuc3VyZVN0YWdlSW5mbyh1c2VDbGllbnQpO1xuICAgIHJldHVybiBpbmZvLmlkZW50O1xuICB9IGZpbmFsbHkge1xuICAgIGlmIChyZWxlYXNlKSB1c2VDbGllbnQucmVsZWFzZSgpO1xuICB9XG59XG5cbmFzeW5jIGZ1bmN0aW9uIGdldE1hdHJpeFZhbHVlc1RhYmxlSWRlbnQoXG4gIGNsaWVudDogUG9vbENsaWVudFxuKTogUHJvbWlzZTxzdHJpbmc+IHtcbiAgY29uc3QgaW5mbyA9IGF3YWl0IGVuc3VyZU1hdHJpeEluZm8oY2xpZW50KTtcbiAgcmV0dXJuIGluZm8uaWRlbnQ7XG59XG5cclxuLyoqIE1hdHJpeCB0eXBlIHVuaW9uIChhbGlnbnMgd2l0aCBEREwpICovXHJcbmV4cG9ydCB0eXBlIE1hdHJpeFR5cGUgPSBcImJlbmNobWFya1wiIHwgXCJkZWx0YVwiIHwgXCJwY3QyNGhcIiB8IFwiaWRfcGN0XCIgfCBcInBjdF9kcnZcIiB8IFwicmVmXCIgfCBcInBjdF9yZWZcIjtcclxuXHJcbi8qKiBCdWxrIHVwc2VydCBkaXJlY3RseSBpbnRvIG1haW4gdGFibGUgKGJ5cGFzc2VzIHN0YWdlL2NvbW1pdCkgKi9cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHVwc2VydE1hdHJpeFJvd3Mocm93czoge1xyXG4gIHRzX21zOiBudW1iZXI7XHJcbiAgbWF0cml4X3R5cGU6IE1hdHJpeFR5cGU7XHJcbiAgYmFzZTogc3RyaW5nOyBxdW90ZTogc3RyaW5nOyB2YWx1ZTogbnVtYmVyO1xyXG4gIG1ldGE/OiBSZWNvcmQ8c3RyaW5nLCBhbnk+O1xyXG59W10pIHtcclxuICBpZiAoIXJvd3MubGVuZ3RoKSByZXR1cm47XHJcbiAgY29uc3QgY2xpZW50ID0gYXdhaXQgZGIuY29ubmVjdCgpO1xyXG4gIHRyeSB7XHJcbiAgICBjb25zdCB2YWx1ZXM6IGFueVtdID0gW107XHJcbiAgICBjb25zdCBjaHVua3MgPSByb3dzLm1hcCgociwgaSkgPT4ge1xyXG4gICAgICBjb25zdCBqID0gaSAqIDY7XHJcbiAgICAgIHZhbHVlcy5wdXNoKHIudHNfbXMsIHIubWF0cml4X3R5cGUsIHIuYmFzZSwgci5xdW90ZSwgci52YWx1ZSwgSlNPTi5zdHJpbmdpZnkoci5tZXRhID8/IHt9KSk7XHJcbiAgICAgIHJldHVybiBgKCQke2orMX0sICQke2orMn0sICQke2orM30sICQke2orNH0sICQke2orNX0sICQke2orNn0pYDtcclxuICAgIH0pLmpvaW4oXCIsXCIpO1xyXG5cclxuICAgIGNvbnN0IHNxbCA9IGBcclxuICAgICAgSU5TRVJUIElOVE8gJHtUQUJMRX0gKHRzX21zLCBtYXRyaXhfdHlwZSwgYmFzZSwgcXVvdGUsIHZhbHVlLCBtZXRhKVxyXG4gICAgICBWQUxVRVMgJHtjaHVua3N9XHJcbiAgICAgIE9OIENPTkZMSUNUICh0c19tcywgbWF0cml4X3R5cGUsIGJhc2UsIHF1b3RlKVxyXG4gICAgICBETyBVUERBVEUgU0VUIHZhbHVlID0gRVhDTFVERUQudmFsdWUsIG1ldGEgPSBFWENMVURFRC5tZXRhO1xyXG4gICAgYDtcclxuICAgIGF3YWl0IGNsaWVudC5xdWVyeShzcWwsIHZhbHVlcyk7XHJcbiAgfSBmaW5hbGx5IHtcclxuICAgIGNsaWVudC5yZWxlYXNlKCk7XHJcbiAgfVxyXG59XHJcblxyXG4vKiogU25hcHNob3RzICYgbG9va3VwcyAqL1xyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0TGF0ZXN0QnlUeXBlKG1hdHJpeF90eXBlOiBzdHJpbmcsIGNvaW5zOiBzdHJpbmdbXSkge1xyXG4gIGNvbnN0IGNsaWVudCA9IGF3YWl0IGRiLmNvbm5lY3QoKTtcclxuICB0cnkge1xyXG4gICAgY29uc3QgeyByb3dzIH0gPSBhd2FpdCBjbGllbnQucXVlcnkoXHJcbiAgICAgIGBTRUxFQ1QgdHNfbXMgRlJPTSAke1RBQkxFfSBXSEVSRSBtYXRyaXhfdHlwZT0kMSBPUkRFUiBCWSB0c19tcyBERVNDIExJTUlUIDFgLFxyXG4gICAgICBbbWF0cml4X3R5cGVdXHJcbiAgICApO1xyXG4gICAgaWYgKCFyb3dzLmxlbmd0aCkgcmV0dXJuIHsgdHNfbXM6IG51bGwsIHZhbHVlczogW10gYXMgYW55W10gfTtcclxuICAgIGNvbnN0IHRzX21zID0gTnVtYmVyKHJvd3NbMF0udHNfbXMpO1xyXG4gICAgY29uc3QgeyByb3dzOiB2YWxzIH0gPSBhd2FpdCBjbGllbnQucXVlcnkoXHJcbiAgICAgIGBTRUxFQ1QgYmFzZSwgcXVvdGUsIHZhbHVlIEZST00gJHtUQUJMRX1cclxuICAgICAgIFdIRVJFIG1hdHJpeF90eXBlPSQxIEFORCB0c19tcz0kMiBBTkQgYmFzZSA9IEFOWSgkMykgQU5EIHF1b3RlID0gQU5ZKCQzKWAsXHJcbiAgICAgIFttYXRyaXhfdHlwZSwgdHNfbXMsIGNvaW5zXVxyXG4gICAgKTtcclxuICAgIHJldHVybiB7IHRzX21zLCB2YWx1ZXM6IHZhbHMgfTtcclxuICB9IGZpbmFsbHkgeyBjbGllbnQucmVsZWFzZSgpOyB9XHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRQcmV2VmFsdWUobWF0cml4X3R5cGU6IHN0cmluZywgYmFzZTogc3RyaW5nLCBxdW90ZTogc3RyaW5nLCBiZWZvcmVUczogbnVtYmVyKSB7XHJcbiAgY29uc3QgeyByb3dzIH0gPSBhd2FpdCBkYi5xdWVyeShcclxuICAgIGBTRUxFQ1QgdmFsdWUgRlJPTSAke1RBQkxFfVxyXG4gICAgIFdIRVJFIG1hdHJpeF90eXBlPSQxIEFORCBiYXNlPSQyIEFORCBxdW90ZT0kMyBBTkQgdHNfbXMgPCAkNFxyXG4gICAgIE9SREVSIEJZIHRzX21zIERFU0MgTElNSVQgMWAsXHJcbiAgICBbbWF0cml4X3R5cGUsIGJhc2UsIHF1b3RlLCBiZWZvcmVUc11cclxuICApO1xyXG4gIHJldHVybiByb3dzLmxlbmd0aCA/IE51bWJlcihyb3dzWzBdLnZhbHVlKSA6IG51bGw7XHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRMYXRlc3RUc0ZvclR5cGUobWF0cml4X3R5cGU6IHN0cmluZykge1xyXG4gIGNvbnN0IHsgcm93cyB9ID0gYXdhaXQgZGIucXVlcnkoXHJcbiAgICBgU0VMRUNUIE1BWCh0c19tcykgQVMgdHNfbXMgRlJPTSAke1RBQkxFfSBXSEVSRSBtYXRyaXhfdHlwZT0kMWAsXHJcbiAgICBbbWF0cml4X3R5cGVdXHJcbiAgKTtcclxuICBjb25zdCB2ID0gcm93c1swXT8udHNfbXM7XHJcbiAgcmV0dXJuIHYgPT0gbnVsbCA/IG51bGwgOiBOdW1iZXIodik7XHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXROZWFyZXN0VHNBdE9yQmVmb3JlKG1hdHJpeF90eXBlOiBzdHJpbmcsIHRzX21zOiBudW1iZXIpIHtcclxuICBjb25zdCB7IHJvd3MgfSA9IGF3YWl0IGRiLnF1ZXJ5KFxyXG4gICAgYFNFTEVDVCB0c19tcyBGUk9NICR7VEFCTEV9XHJcbiAgICAgV0hFUkUgbWF0cml4X3R5cGU9JDEgQU5EIHRzX21zIDw9ICQyXHJcbiAgICAgT1JERVIgQlkgdHNfbXMgREVTQyBMSU1JVCAxYCxcclxuICAgIFttYXRyaXhfdHlwZSwgdHNfbXNdXHJcbiAgKTtcclxuICBjb25zdCB2ID0gcm93c1swXT8udHNfbXM7XHJcbiAgcmV0dXJuIHYgPT0gbnVsbCA/IG51bGwgOiBOdW1iZXIodik7XHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRTbmFwc2hvdEJ5VHlwZShtYXRyaXhfdHlwZTogc3RyaW5nLCB0c19tczogbnVtYmVyLCBjb2luczogc3RyaW5nW10pIHtcclxuICBjb25zdCB7IHJvd3MgfSA9IGF3YWl0IGRiLnF1ZXJ5KFxyXG4gICAgYFNFTEVDVCBiYXNlLCBxdW90ZSwgdmFsdWUgRlJPTSAke1RBQkxFfVxyXG4gICAgIFdIRVJFIG1hdHJpeF90eXBlPSQxIEFORCB0c19tcz0kMiBBTkQgYmFzZSA9IEFOWSgkMykgQU5EIHF1b3RlID0gQU5ZKCQzKWAsXHJcbiAgICBbbWF0cml4X3R5cGUsIHRzX21zLCBjb2luc11cclxuICApO1xyXG4gIHJldHVybiByb3dzIGFzIHsgYmFzZTpzdHJpbmc7IHF1b3RlOnN0cmluZzsgdmFsdWU6bnVtYmVyIH1bXTtcclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldFByZXZTbmFwc2hvdEJ5VHlwZShtYXRyaXhfdHlwZTogc3RyaW5nLCBiZWZvcmVUczogbnVtYmVyLCBjb2luczogc3RyaW5nW10pIHtcclxuICBjb25zdCB7IHJvd3MgfSA9IGF3YWl0IGRiLnF1ZXJ5KFxyXG4gICAgYFNFTEVDVCBESVNUSU5DVCBPTiAoYmFzZSwgcXVvdGUpIGJhc2UsIHF1b3RlLCB2YWx1ZVxyXG4gICAgICAgRlJPTSAke1RBQkxFfVxyXG4gICAgICBXSEVSRSBtYXRyaXhfdHlwZT0kMVxyXG4gICAgICAgIEFORCB0c19tcyA8ICQyXHJcbiAgICAgICAgQU5EIGJhc2UgID0gQU5ZKCQzKVxyXG4gICAgICAgIEFORCBxdW90ZSA9IEFOWSgkMylcclxuICAgT1JERVIgQlkgYmFzZSwgcXVvdGUsIHRzX21zIERFU0NgLFxyXG4gICAgW21hdHJpeF90eXBlLCBiZWZvcmVUcywgY29pbnNdXHJcbiAgKTtcclxuICByZXR1cm4gcm93cyBhcyB7IGJhc2U6IHN0cmluZzsgcXVvdGU6IHN0cmluZzsgdmFsdWU6IG51bWJlciB9W107XHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBjb3VudFJvd3NBdChtYXRyaXhfdHlwZTogc3RyaW5nLCB0c19tczogbnVtYmVyKSB7XHJcbiAgY29uc3QgeyByb3dzIH0gPSBhd2FpdCBkYi5xdWVyeShcclxuICAgIGBTRUxFQ1QgY291bnQoKik6OmludCBBUyBuIEZST00gJHtUQUJMRX0gV0hFUkUgbWF0cml4X3R5cGU9JDEgQU5EIHRzX21zPSQyYCxcclxuICAgIFttYXRyaXhfdHlwZSwgdHNfbXNdXHJcbiAgKTtcclxuICByZXR1cm4gcm93c1swXT8ubiA/PyAwO1xyXG59XHJcblxyXG5cclxuLy8g4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSAIE9wZW5pbmcgaGVscGVycyAoREIgKyBjYWNoZSkg4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSAXHJcbnR5cGUgT3BlbmluZ0tleSA9IHsgYmFzZTogc3RyaW5nOyBxdW90ZT86IHN0cmluZzsgd2luZG93Pzogc3RyaW5nOyBhcHBTZXNzaW9uSWQ/OiBzdHJpbmcgfTtcclxuY29uc3Qgb3BlbmluZ0NhY2hlID0gbmV3IE1hcDxzdHJpbmcsIHsgcHJpY2U6IG51bWJlcjsgdHM6IG51bWJlciB9PigpO1xyXG5jb25zdCBrZXlTdHIgPSAoazogT3BlbmluZ0tleSkgPT5cclxuICBgJHtrLmJhc2V9OiR7ay5xdW90ZSA/PyBcIlVTRFRcIn06JHtrLndpbmRvdyA/PyBcIjFoXCJ9OiR7ay5hcHBTZXNzaW9uSWQgPz8gXCJnbG9iYWxcIn1gO1xyXG5cclxuLyoqIFJlYWQgbGFzdCBvcGVuaW5nIGZvciBhIChiYXNlLHF1b3RlLHdpbmRvdyxzZXNzaW9uKSBmcm9tIFNUUi1BVVg7IGZhbGxiYWNrIHRvIGNvbXBhdCB2aWV3ICovXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRPcGVuaW5nRnJvbURiKFxyXG4gIGs6IE9wZW5pbmdLZXlcclxuKTogUHJvbWlzZTx7IHByaWNlOiBudW1iZXI7IHRzOiBudW1iZXIgfSB8IG51bGw+IHtcclxuICAvLyBTb3VyY2Ugb2YgdHJ1dGg6IHN0cmF0ZWd5X2F1eC5zdHJfYXV4X3Nlc3Npb24gd2l0aCBvcGVuaW5nX3N0YW1wID0gVFJVRVxyXG4gIGNvbnN0IHExID0gYFxyXG4gICAgU0VMRUNUIG9wZW5pbmdfdHMgQVMgdHMsIG9wZW5pbmdfcHJpY2UgQVMgcHJpY2VcclxuICAgICAgRlJPTSBzdHJhdGVneV9hdXguc3RyX2F1eF9zZXNzaW9uXHJcbiAgICAgV0hFUkUgcGFpcl9iYXNlPSQxIEFORCBwYWlyX3F1b3RlPSQyIEFORCB3aW5kb3dfa2V5PSQzXHJcbiAgICAgICBBTkQgKCQ0Ojp0ZXh0IElTIE5VTEwgT1IgYXBwX3Nlc3Npb25faWQ9JDQpXHJcbiAgICAgICBBTkQgb3BlbmluZ19zdGFtcCA9IFRSVUVcclxuICBPUkRFUiBCWSBvcGVuaW5nX3RzIERFU0NcclxuICAgICBMSU1JVCAxXHJcbiAgYDtcclxuICBjb25zdCByMSA9IGF3YWl0IGRiLnF1ZXJ5KHExLCBbay5iYXNlLCBrLnF1b3RlID8/IFwiVVNEVFwiLCBrLndpbmRvdyA/PyBcIjFoXCIsIGsuYXBwU2Vzc2lvbklkID8/IG51bGxdKTtcclxuICBpZiAocjEucm93cy5sZW5ndGgpIHtcclxuICAgIHJldHVybiB7IHByaWNlOiBOdW1iZXIocjEucm93c1swXS5wcmljZSksIHRzOiBOdW1iZXIocjEucm93c1swXS50cykgfTtcclxuICB9XHJcblxyXG4gIC8vIENvbXBhdGliaWxpdHkgdmlldyAoa2VwdCBmb3Igb2xkZXIgY29kZSBwYXRocylcclxuICBjb25zdCBxMiA9IGBTRUxFQ1Qgc2Vzc2lvbl90cyBBUyB0cywgb3BlbmluZ19wcmljZSBBUyBwcmljZVxyXG4gICAgICAgICAgICAgICAgRlJPTSBzZXNzaW9uX29wZW5pbmdzXHJcbiAgICAgICAgICAgIE9SREVSIEJZIHNlc3Npb25fdHMgREVTQ1xyXG4gICAgICAgICAgICAgICBMSU1JVCAxYDtcclxuICBjb25zdCByMiA9IGF3YWl0IGRiLnF1ZXJ5KHEyKTtcclxuICBpZiAocjIucm93cy5sZW5ndGgpIHtcclxuICAgIHJldHVybiB7IHByaWNlOiBOdW1iZXIocjIucm93c1swXS5wcmljZSksIHRzOiBOdW1iZXIocjIucm93c1swXS50cykgfTtcclxuICB9XHJcbiAgcmV0dXJuIG51bGw7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBFbnN1cmUgYW4gb3BlbmluZyBleGlzdHMgKyBjYWNoZSBpdCBmb3IgdGhpcyBwcm9jZXNzLlxyXG4gKiBJZiB5b3UgcGFzcyBvcGVuaW5nVHMvb3BlbmluZ1ByaWNlLCB3ZSB0cnkgdG8gdXBzZXJ0IHZpYSB0aGUgU1FMIGZ1bmN0aW9uIGB1cHNlcnRfc3RyX2F1eF9vcGVuaW5nYCAoaWYgcHJlc2VudCkuXHJcbiAqL1xyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZW5zdXJlT3BlbmluZyhcclxuICBrOiBPcGVuaW5nS2V5LFxyXG4gIG9wdHM6IHsgb3BlbmluZ1RzPzogbnVtYmVyOyBvcGVuaW5nUHJpY2U/OiBudW1iZXI7IGV0YVBjdD86IG51bWJlcjsgZXBzU2hpZnRQY3Q/OiBudW1iZXI7IEs/OiBudW1iZXIgfSA9IHt9XHJcbikge1xyXG4gIGNvbnN0IGNrID0ga2V5U3RyKGspO1xyXG4gIGNvbnN0IGhpdCA9IG9wZW5pbmdDYWNoZS5nZXQoY2spO1xyXG4gIGlmIChoaXQpIHJldHVybiBoaXQ7XHJcblxyXG4gIC8vIElmIGdpdmVuIGV4cGxpY2l0IG9wZW5pbmcsIHRyeSB0byBwZXJzaXN0IChuby1vcCBpZiB0aGUgZnVuY3Rpb24gZG9lc24ndCBleGlzdCkuXHJcbiAgaWYgKG9wdHMub3BlbmluZ1ByaWNlICE9IG51bGwgJiYgb3B0cy5vcGVuaW5nVHMgIT0gbnVsbCkge1xyXG4gICAgdHJ5IHtcclxuICAgICAgYXdhaXQgZGIucXVlcnkoXHJcbiAgICAgICAgYFNFTEVDVCB1cHNlcnRfc3RyX2F1eF9vcGVuaW5nKCQxLCQyLCQzLCQ0LCQ1LCQ2LCQ3KWAsXHJcbiAgICAgICAgW1xyXG4gICAgICAgICAgay5iYXNlLCBrLnF1b3RlID8/IFwiVVNEVFwiLCBrLndpbmRvdyA/PyBcIjFoXCIsIGsuYXBwU2Vzc2lvbklkID8/IFwiZ2xvYmFsXCIsXHJcbiAgICAgICAgICBvcHRzLm9wZW5pbmdUcywgb3B0cy5vcGVuaW5nUHJpY2UsXHJcbiAgICAgICAgICBgaWRlbToke2suYmFzZX06JHtrLnF1b3RlID8/IFwiVVNEVFwifToke2sud2luZG93ID8/IFwiMWhcIn06JHtrLmFwcFNlc3Npb25JZCA/PyBcImdsb2JhbFwifToke29wdHMub3BlbmluZ1RzfWBcclxuICAgICAgICBdXHJcbiAgICAgICk7XHJcbiAgICB9IGNhdGNoIHsgLyogZnVuY3Rpb24gbWF5IG5vdCBleGlzdCB5ZXQ7IGl0J3MgZmluZSAqLyB9XHJcbiAgfVxyXG5cclxuICBjb25zdCByb3cgPSBhd2FpdCBnZXRPcGVuaW5nRnJvbURiKGspO1xyXG4gIGlmIChyb3cpIHtcclxuICAgIG9wZW5pbmdDYWNoZS5zZXQoY2ssIHJvdyk7XHJcbiAgICByZXR1cm4gcm93O1xyXG4gIH1cclxuICByZXR1cm4gbnVsbDtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGNsZWFyT3BlbmluZ0NhY2hlKGs/OiBPcGVuaW5nS2V5KSB7XHJcbiAgaWYgKCFrKSByZXR1cm4gb3BlbmluZ0NhY2hlLmNsZWFyKCk7XHJcbiAgb3BlbmluZ0NhY2hlLmRlbGV0ZShrZXlTdHIoaykpO1xyXG59XHJcblxyXG5cclxuLy8g4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSAIE1hdHJpY2VzIFNUQUdFL0NPTU1JVCBoZWxwZXJzIOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgFxyXG4vKiogR3JpZCBvYmplY3Qgc2hhcGUgdXNlZCBhY3Jvc3MgZmVhdHVyZXMgKEJBU0UgLT4gUVVPVEUgLT4gdmFsdWV8bnVsbCkgKi9cclxuZXhwb3J0IHR5cGUgTWF0cml4R3JpZE9iamVjdCA9IFJlY29yZDxzdHJpbmcsIFJlY29yZDxzdHJpbmcsIG51bWJlciB8IG51bGw+PjtcclxuXHJcbi8qKiBJbnRlcm5hbDogaXRlcmF0ZSBvZmYtZGlhZ29uYWwgY2VsbHMgdGhhdCBoYXZlIGZpbml0ZSBudW1iZXJzICovXHJcbmZ1bmN0aW9uKiBjZWxsc09mKGNvaW5zOiBzdHJpbmdbXSwgdmFsdWVzOiBNYXRyaXhHcmlkT2JqZWN0KSB7XHJcbiAgZm9yIChjb25zdCBiIG9mIGNvaW5zKSB7XHJcbiAgICBmb3IgKGNvbnN0IHEgb2YgY29pbnMpIHtcclxuICAgICAgaWYgKGIgPT09IHEpIGNvbnRpbnVlO1xyXG4gICAgICBjb25zdCB2ID0gdmFsdWVzPy5bYl0/LltxXTtcclxuICAgICAgaWYgKHYgPT0gbnVsbCB8fCBOdW1iZXIuaXNOYU4oTnVtYmVyKHYpKSkgY29udGludWU7XHJcbiAgICAgIHlpZWxkIHsgYmFzZTogYiwgcXVvdGU6IHEsIHZhbHVlOiBOdW1iZXIodikgfTtcclxuICAgIH1cclxuICB9XHJcbn1cclxuXHJcbi8qKiBTdGFnZSBhbGwgY2VsbHMgZm9yIGEgKG1hdHJpeF90eXBlLCB0c19tcykuIE92ZXJ3cml0ZXMgb24gY29uZmxpY3QgaW4gU1RBR0UuICovXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBzdGFnZU1hdHJpeEdyaWQob3B0czoge1xuICBhcHBTZXNzaW9uSWQ6IHN0cmluZztcbiAgbWF0cml4VHlwZTogTWF0cml4VHlwZTtcbiAgdHNNczogbnVtYmVyO1xuICBjb2luczogc3RyaW5nW107XG4gIHZhbHVlczogTWF0cml4R3JpZE9iamVjdDtcbiAgbWV0YT86IGFueTtcbiAgY2xpZW50PzogUG9vbENsaWVudDtcbn0pIHtcbiAgY29uc3QgeyBhcHBTZXNzaW9uSWQsIG1hdHJpeFR5cGUsIHRzTXMsIGNvaW5zLCB2YWx1ZXMsIG1ldGEsIGNsaWVudDogZXh0ZXJuYWwgfSA9XG4gICAgb3B0cztcbiAgY29uc3QgY2xpZW50ID0gZXh0ZXJuYWwgPz8gKGF3YWl0IGRiLmNvbm5lY3QoKSk7XG4gIGNvbnN0IHJlbGVhc2UgPSAhZXh0ZXJuYWw7XG4gIHRyeSB7XG4gICAgY29uc3Qgcm93cyA9IEFycmF5LmZyb20oY2VsbHNPZihjb2lucywgdmFsdWVzKSk7XG4gICAgaWYgKCFyb3dzLmxlbmd0aCkgcmV0dXJuIHsgb2s6IHRydWUsIHN0YWdlZDogMCB9O1xuXG4gICAgY29uc3QgbWV0YUpzb24gPSBKU09OLnN0cmluZ2lmeShtZXRhID8/IHt9KTtcbiAgICBjb25zdCBzdGFnZUluZm8gPSBhd2FpdCBlbnN1cmVTdGFnZUluZm8oY2xpZW50KTtcbiAgICBjb25zdCB0ZXh0ID0gYFxuICAgICAgSU5TRVJUIElOVE8gJHtzdGFnZUluZm8uaWRlbnR9XG4gICAgICAgICh0c19tcywgbWF0cml4X3R5cGUsIGJhc2UsIHF1b3RlLCB2YWx1ZSwgbWV0YSwgYXBwX3Nlc3Npb25faWQpXG4gICAgICBWQUxVRVMgJHtyb3dzXG4gICAgICAgIC5tYXAoXG4gICAgICAgICAgKF8sIGkpID0+XG4gICAgICAgICAgICBgKCQxLCQyLCQke2kgKiAzICsgM30sJCR7aSAqIDMgKyA0fSwkJHtpICogMyArIDV9LCQke1xuICAgICAgICAgICAgICByb3dzLmxlbmd0aCAqIDMgKyAzXG4gICAgICAgICAgICB9LCQke3Jvd3MubGVuZ3RoICogMyArIDR9KWBcbiAgICAgICAgKVxuICAgICAgICAuam9pbihcIixcIil9XG4gICAgICBPTiBDT05GTElDVCAodHNfbXMsIG1hdHJpeF90eXBlLCBiYXNlLCBxdW90ZSlcbiAgICAgIERPIFVQREFURSBTRVQgdmFsdWUgPSBFWENMVURFRC52YWx1ZSwgbWV0YSA9IEVYQ0xVREVELm1ldGEsIGFwcF9zZXNzaW9uX2lkID0gRVhDTFVERUQuYXBwX3Nlc3Npb25faWRcbiAgICBgO1xuICAgIGNvbnN0IHBhcmFtczogYW55W10gPSBbdHNNcywgbWF0cml4VHlwZV07XG4gICAgZm9yIChjb25zdCByIG9mIHJvd3MpIHBhcmFtcy5wdXNoKHIuYmFzZSwgci5xdW90ZSwgci52YWx1ZSk7XG4gICAgcGFyYW1zLnB1c2gobWV0YUpzb24sIGFwcFNlc3Npb25JZCk7XG4gICAgYXdhaXQgY2xpZW50LnF1ZXJ5KHRleHQsIHBhcmFtcyk7XG4gICAgcmV0dXJuIHsgb2s6IHRydWUsIHN0YWdlZDogcm93cy5sZW5ndGggfTtcbiAgfSBmaW5hbGx5IHtcbiAgICBpZiAocmVsZWFzZSkgY2xpZW50LnJlbGVhc2UoKTtcbiAgfVxufVxuXG4vKiogUHVibGlzaCBzdGFnZWQgcm93cyBpbnRvIG1haW4gdGFibGUgKyBjeWNsZV9kb2N1bWVudCArIGxlZGdlciAoc2VlIERETCkgKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBjb21taXRNYXRyaXhHcmlkKG9wdHM6IHtcbiAgYXBwU2Vzc2lvbklkOiBzdHJpbmc7XG4gIG1hdHJpeFR5cGU6IE1hdHJpeFR5cGU7XG4gIHRzTXM6IG51bWJlcjtcbiAgY29pbnM/OiBzdHJpbmdbXTtcbiAgaWRlbT86IHN0cmluZyB8IG51bGw7XG4gIGNsaWVudD86IFBvb2xDbGllbnQ7XG59KSB7XG4gIGNvbnN0IHsgbWF0cml4VHlwZSwgdHNNcywgY29pbnMsIGNsaWVudDogZXh0ZXJuYWwgfSA9IG9wdHM7XG4gIGNvbnN0IGNsaWVudCA9IGV4dGVybmFsID8/IChhd2FpdCBkYi5jb25uZWN0KCkpO1xuICBjb25zdCByZWxlYXNlID0gIWV4dGVybmFsO1xuICBjb25zdCBtYW5hZ2VUeCA9ICFleHRlcm5hbDtcbiAgdHJ5IHtcbiAgICBpZiAobWFuYWdlVHgpIGF3YWl0IGNsaWVudC5xdWVyeShcIkJFR0lOXCIpO1xuXG4gICAgY29uc3Qgc3RhZ2VJbmZvID0gYXdhaXQgZW5zdXJlU3RhZ2VJbmZvKGNsaWVudCk7XG4gICAgY29uc3QgbWF0cml4VGFibGUgPSBhd2FpdCBnZXRNYXRyaXhWYWx1ZXNUYWJsZUlkZW50KGNsaWVudCk7XG5cbiAgICBjb25zdCBzdGFnZVJvd3MgPSBhd2FpdCBjbGllbnQucXVlcnk8eyBiYXNlOiBzdHJpbmc7IHF1b3RlOiBzdHJpbmcgfT4oXG4gICAgICBgU0VMRUNUIGJhc2UsIHF1b3RlXG4gICAgICAgICBGUk9NICR7c3RhZ2VJbmZvLmlkZW50fVxuICAgICAgICBXSEVSRSB0c19tcyA9ICQxIEFORCBtYXRyaXhfdHlwZSA9ICQyYCxcbiAgICAgIFt0c01zLCBtYXRyaXhUeXBlXVxuICAgICk7XG5cbiAgICBjb25zdCBzdGFnZWRDZWxscyA9IHN0YWdlUm93cy5yb3dDb3VudCA/PyBzdGFnZVJvd3Mucm93cy5sZW5ndGg7XG5cbiAgICBjb25zdCBjb2luc0Zyb21TdGFnZSA9IG5ldyBTZXQ8c3RyaW5nPigpO1xuICAgIGZvciAoY29uc3Qgcm93IG9mIHN0YWdlUm93cy5yb3dzKSB7XG4gICAgICBjb25zdCBiYXNlID0gU3RyaW5nKHJvdy5iYXNlID8/IFwiXCIpLnRvVXBwZXJDYXNlKCk7XG4gICAgICBjb25zdCBxdW90ZSA9IFN0cmluZyhyb3cucXVvdGUgPz8gXCJcIikudG9VcHBlckNhc2UoKTtcbiAgICAgIGlmIChiYXNlKSBjb2luc0Zyb21TdGFnZS5hZGQoYmFzZSk7XG4gICAgICBpZiAocXVvdGUpIGNvaW5zRnJvbVN0YWdlLmFkZChxdW90ZSk7XG4gICAgfVxuXG4gICAgY29uc3QgZWxpZ2libGVDb2lucyA9XG4gICAgICBjb2lucz8ubGVuZ3RoICYmIGRlZHVwZVVwcGVyKGNvaW5zKS5sZW5ndGhcbiAgICAgICAgPyBkZWR1cGVVcHBlcihjb2lucylcbiAgICAgICAgOiBBcnJheS5mcm9tKGNvaW5zRnJvbVN0YWdlKTtcblxuICAgIGNvbnN0IGV4cGVjdGVkQ2VsbHMgPVxuICAgICAgZWxpZ2libGVDb2lucy5sZW5ndGggKiBNYXRoLm1heChlbGlnaWJsZUNvaW5zLmxlbmd0aCAtIDEsIDApO1xuXG4gICAgYXdhaXQgY2xpZW50LnF1ZXJ5KFxuICAgICAgYFxuICAgICAgSU5TRVJUIElOVE8gJHttYXRyaXhUYWJsZX1cbiAgICAgICAgKHRzX21zLCBtYXRyaXhfdHlwZSwgYmFzZSwgcXVvdGUsIHZhbHVlLCBtZXRhKVxuICAgICAgU0VMRUNUIHRzX21zLCBtYXRyaXhfdHlwZSwgYmFzZSwgcXVvdGUsIHZhbHVlLCBtZXRhXG4gICAgICAgIEZST00gJHtzdGFnZUluZm8uaWRlbnR9XG4gICAgICAgV0hFUkUgdHNfbXMgPSAkMSBBTkQgbWF0cml4X3R5cGUgPSAkMlxuICAgICAgT04gQ09ORkxJQ1QgKHRzX21zLCBtYXRyaXhfdHlwZSwgYmFzZSwgcXVvdGUpXG4gICAgICBETyBVUERBVEUgU0VUIHZhbHVlID0gRVhDTFVERUQudmFsdWUsIG1ldGEgPSBFWENMVURFRC5tZXRhXG4gICAgYCxcbiAgICAgIFt0c01zLCBtYXRyaXhUeXBlXVxuICAgICk7XG5cbiAgICBjb25zdCBzdGFnZWRQYWlycyA9IG5ldyBTZXQoXG4gICAgICBzdGFnZVJvd3Mucm93c1xuICAgICAgICAubWFwKChyb3cpID0+IHtcbiAgICAgICAgICBjb25zdCBiYXNlID0gU3RyaW5nKHJvdy5iYXNlID8/IFwiXCIpLnRvVXBwZXJDYXNlKCk7XG4gICAgICAgICAgY29uc3QgcXVvdGUgPSBTdHJpbmcocm93LnF1b3RlID8/IFwiXCIpLnRvVXBwZXJDYXNlKCk7XG4gICAgICAgICAgaWYgKCFiYXNlIHx8ICFxdW90ZSB8fCBiYXNlID09PSBxdW90ZSkgcmV0dXJuIG51bGw7XG4gICAgICAgICAgcmV0dXJuIGAke2Jhc2V94oaSJHtxdW90ZX1gO1xuICAgICAgICB9KVxuICAgICAgICAuZmlsdGVyKEJvb2xlYW4pIGFzIHN0cmluZ1tdXG4gICAgKTtcblxuICAgIGxldCBtaXNzaW5nQ291bnQgPSAwO1xuICAgIGZvciAoY29uc3QgYmFzZSBvZiBlbGlnaWJsZUNvaW5zKSB7XG4gICAgICBmb3IgKGNvbnN0IHF1b3RlIG9mIGVsaWdpYmxlQ29pbnMpIHtcbiAgICAgICAgaWYgKGJhc2UgPT09IHF1b3RlKSBjb250aW51ZTtcbiAgICAgICAgaWYgKCFzdGFnZWRQYWlycy5oYXMoYCR7YmFzZX3ihpIke3F1b3RlfWApKSBtaXNzaW5nQ291bnQgKz0gMTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAobWFuYWdlVHgpIGF3YWl0IGNsaWVudC5xdWVyeShcIkNPTU1JVFwiKTtcblxuICAgIHJldHVybiB7XG4gICAgICBvazogdHJ1ZSxcbiAgICAgIG1hdHJpeF90eXBlOiBtYXRyaXhUeXBlLFxuICAgICAgdHNfbXM6IHRzTXMsXG4gICAgICBleHBlY3RlZF9jZWxsczogZXhwZWN0ZWRDZWxscyxcbiAgICAgIHN0YWdlZF9jZWxsczogc3RhZ2VkQ2VsbHMsXG4gICAgICBtaXNzaW5nX2NvdW50OiBtaXNzaW5nQ291bnQsXG4gICAgICBjb21wbGV0ZTogbWlzc2luZ0NvdW50ID09PSAwICYmIHN0YWdlZENlbGxzID09PSBleHBlY3RlZENlbGxzLFxuICAgIH07XG4gIH0gY2F0Y2ggKGVycikge1xuICAgIGlmIChtYW5hZ2VUeCkgYXdhaXQgY2xpZW50LnF1ZXJ5KFwiUk9MTEJBQ0tcIik7XG4gICAgdGhyb3cgZXJyO1xuICB9IGZpbmFsbHkge1xuICAgIGlmIChyZWxlYXNlKSBjbGllbnQucmVsZWFzZSgpO1xuICB9XG59XG5cclxuLyoqIENvbnZlbmllbmNlOiByZWFkIHByZXYgYmVuY2htYXJrIGdyaWQgZm9yIGEgY29pbiBzZXQgKHBhaXJlZCBtYXApICovXHJcbmFzeW5jIGZ1bmN0aW9uIG1hcFByZXZCZW5jaG1hcmsoYmVmb3JlVHM6IG51bWJlciwgY29pbnM6IHN0cmluZ1tdKSB7XHJcbiAgY29uc3QgcHJldiA9IGF3YWl0IGdldFByZXZTbmFwc2hvdEJ5VHlwZShcImJlbmNobWFya1wiLCBiZWZvcmVUcywgY29pbnMpO1xyXG4gIGNvbnN0IG0gPSBuZXcgTWFwPHN0cmluZywgbnVtYmVyPigpO1xyXG4gIGZvciAoY29uc3QgciBvZiBwcmV2KSBtLnNldChgJHtyLmJhc2V9LyR7ci5xdW90ZX1gLCBOdW1iZXIoci52YWx1ZSkpO1xyXG4gIHJldHVybiBtO1xyXG59XHJcblxyXG4vKipcclxuICogUGVyc2lzdCB0aGUgY3VycmVudCBsaXZlIHNsaWNlcyBmb3IgdGhlIGFjdGl2ZSBjb2luLXVuaXZlcnNlOlxyXG4gKiAgLSBiZW5jaG1hcmsgKGZ1bGwgTsOXTilcclxuICogIC0gcGN0MjRoICAgKGFzLWlzIGZyb20gbGl2ZSlcclxuICogIC0gaWRfcGN0ICAgKGRlcml2ZWQgdnMgcHJldiBiZW5jaG1hcmsgc28gcGN0X2RydiBoYXMgaGlzdG9yeSBvbiBuZXh0IHRpY2spXHJcbiAqXHJcbiAqIEFsbCB0aHJlZSB1c2UgdGhlIFNBTUUgdHNfbXMgdG8ga2VlcCBzbGljZXMgYWxpZ25lZC5cclxuICovXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBwZXJzaXN0TGl2ZU1hdHJpY2VzU2xpY2Uob3B0czoge1xuICBhcHBTZXNzaW9uSWQ6IHN0cmluZztcbiAgY29pbnM6IHN0cmluZ1tdO1xuICB0c01zOiBudW1iZXI7XG4gIGJlbmNobWFyazogTWF0cml4R3JpZE9iamVjdDtcbiAgcGN0MjRoPzogTWF0cml4R3JpZE9iamVjdDtcclxuICBpZGVtUHJlZml4Pzogc3RyaW5nO1xyXG59KSB7XHJcbiAgY29uc3QgeyBhcHBTZXNzaW9uSWQsIGNvaW5zLCB0c01zLCBiZW5jaG1hcmssIHBjdDI0aCwgaWRlbVByZWZpeCB9ID0gb3B0cztcclxuXHJcbiAgLy8gMSkgc3RhZ2UrY29tbWl0IGJlbmNobWFya1xyXG4gIGF3YWl0IHN0YWdlTWF0cml4R3JpZCh7XHJcbiAgICBhcHBTZXNzaW9uSWQsXHJcbiAgICBtYXRyaXhUeXBlOiBcImJlbmNobWFya1wiLFxyXG4gICAgdHNNcyxcclxuICAgIGNvaW5zLFxyXG4gICAgdmFsdWVzOiBiZW5jaG1hcmssXHJcbiAgICBtZXRhOiB7IHNvdXJjZTogXCJsaXZlXCIgfVxyXG4gIH0pO1xyXG4gIGF3YWl0IGNvbW1pdE1hdHJpeEdyaWQoe1xyXG4gICAgYXBwU2Vzc2lvbklkLFxyXG4gICAgbWF0cml4VHlwZTogXCJiZW5jaG1hcmtcIixcclxuICAgIHRzTXMsXHJcbiAgICBjb2lucyxcclxuICAgIGlkZW06IGAke2lkZW1QcmVmaXggPz8gXCJiZW5jaG1hcmtcIn06JHt0c01zfWBcclxuICB9KTtcclxuXHJcbiAgLy8gMikgc3RhZ2UrY29tbWl0IHBjdDI0aCAob3B0aW9uYWwpXHJcbiAgaWYgKHBjdDI0aCkge1xyXG4gICAgYXdhaXQgc3RhZ2VNYXRyaXhHcmlkKHtcclxuICAgICAgYXBwU2Vzc2lvbklkLFxyXG4gICAgICBtYXRyaXhUeXBlOiBcInBjdDI0aFwiLFxyXG4gICAgICB0c01zLFxyXG4gICAgICBjb2lucyxcclxuICAgICAgdmFsdWVzOiBwY3QyNGgsXHJcbiAgICAgIG1ldGE6IHsgc291cmNlOiBcImxpdmVcIiB9XHJcbiAgICB9KTtcclxuICAgIGF3YWl0IGNvbW1pdE1hdHJpeEdyaWQoe1xyXG4gICAgICBhcHBTZXNzaW9uSWQsXHJcbiAgICAgIG1hdHJpeFR5cGU6IFwicGN0MjRoXCIsXHJcbiAgICAgIHRzTXMsXHJcbiAgICAgIGNvaW5zLFxyXG4gICAgICBpZGVtOiBgJHtpZGVtUHJlZml4ID8/IFwicGN0MjRoXCJ9OiR7dHNNc31gXHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIC8vIDMpIGRlcml2ZSBpZF9wY3QgdnMgcHJldihiZW5jaG1hcmspIGFuZCBwZXJzaXN0XHJcbiAgY29uc3QgcHJldk1hcCA9IGF3YWl0IG1hcFByZXZCZW5jaG1hcmsodHNNcywgY29pbnMpO1xyXG4gIGNvbnN0IGlkT2JqOiBNYXRyaXhHcmlkT2JqZWN0ID0ge307XHJcbiAgZm9yIChjb25zdCBiIG9mIGNvaW5zKSB7XHJcbiAgICBpZE9ialtiXSA9IHt9IGFzIFJlY29yZDxzdHJpbmcsIG51bWJlciB8IG51bGw+O1xyXG4gICAgZm9yIChjb25zdCBxIG9mIGNvaW5zKSB7XHJcbiAgICAgIGlmIChiID09PSBxKSBjb250aW51ZTtcclxuICAgICAgY29uc3Qgbm93ID0gYmVuY2htYXJrPy5bYl0/LltxXTtcclxuICAgICAgY29uc3QgcHJldiA9IHByZXZNYXAuZ2V0KGAke2J9LyR7cX1gKTtcclxuICAgICAgaWYgKG5vdyA9PSBudWxsIHx8IHByZXYgPT0gbnVsbCB8fCBNYXRoLmFicyhwcmV2KSA8IDFlLTMwMCkge1xyXG4gICAgICAgIGlkT2JqW2JdW3FdID0gbnVsbDtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBpZE9ialtiXVtxXSA9IChOdW1iZXIobm93KSAtIHByZXYpIC8gcHJldjsgLy8gaWRfcGN0ID0gKGJtX25ldyAtIGJtX3ByZXYpL2JtX3ByZXZcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH1cclxuICBhd2FpdCBzdGFnZU1hdHJpeEdyaWQoe1xyXG4gICAgYXBwU2Vzc2lvbklkLFxyXG4gICAgbWF0cml4VHlwZTogXCJpZF9wY3RcIixcclxuICAgIHRzTXMsXHJcbiAgICBjb2lucyxcclxuICAgIHZhbHVlczogaWRPYmosXHJcbiAgICBtZXRhOiB7IHNvdXJjZTogXCJkZXJpdmVkQGRiXCIsIGJhc2U6IFwicHJldihiZW5jaG1hcmspXCIgfVxyXG4gIH0pO1xyXG4gIGF3YWl0IGNvbW1pdE1hdHJpeEdyaWQoe1xuICAgIGFwcFNlc3Npb25JZCxcbiAgICBtYXRyaXhUeXBlOiBcImlkX3BjdFwiLFxuICAgIHRzTXMsXG4gICAgY29pbnMsXG4gICAgaWRlbTogYCR7aWRlbVByZWZpeCA/PyBcImlkX3BjdFwifToke3RzTXN9YFxuICB9KTtcbn1cblxuLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cbi8qICAgICAgICAgICAgICAgICAgICAgICAgQ0xJIHV0aWxpdGllcyAoZm9ybWVyIGRiLm10cykgICAgICAgICAgICAgICAgICAgICAgICAqL1xuLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cblxudHlwZSBTdGVwID0geyBuYW1lOiBzdHJpbmc7IGZpbGVzOiBzdHJpbmdbXSB9O1xuXG5jb25zdCBCQVNFX1NURVA6IFN0ZXAgPSB7XG4gIG5hbWU6IFwiQkFTRSBERExzXCIsXG4gIGZpbGVzOiBbXG4gICAgXCIwMF9leHRlbnNpb25zLnNxbFwiLFxuICAgIFwiMDFfc2V0dGluZ3Muc3FsXCIsXG4gICAgXCIwMl9tYXJrZXQuc3FsXCIsXG4gICAgXCIwM19kb2NzLnNxbFwiLFxuICAgIFwiMDRfbWF0cmljZXMuc3FsXCIsXG4gICAgXCIwNV9zdHJfYXV4LnNxbFwiLFxuICAgIFwiMDZfY2luX2F1eF9jb3JlLnNxbFwiLFxuICAgIFwiMDdfY2luX2F1eF9ydW50aW1lLnNxbFwiLFxuICAgIFwiMDhfY2luX2F1eF9mdW5jdGlvbnMuc3FsXCIsXG4gICAgXCIwOV9vcHMuc3FsXCIsXG4gICAgXCIwOV9pbmdlc3Quc3FsXCIsXG4gICAgXCIxMF9oZWxwZXJzLnNxbFwiLFxuICAgIFwiMTFfdmlld3NfbGF0ZXN0LnNxbFwiLFxuICBdLFxufTtcblxuY29uc3QgUEFUQ0hfU1RFUDogU3RlcCA9IHtcbiAgbmFtZTogXCJQQVRDSCBTRVQgdjFcIixcbiAgZmlsZXM6IFtcbiAgICBcIjAxX3NldHRpbmdzX3BhdGNoZXMuc3FsXCIsXG4gICAgXCIwMl9tYXJrZXRfcGF0Y2hlcy5zcWxcIixcbiAgICBcIjAzX2RvY3NfcGF0Y2hlcy5zcWxcIixcbiAgICBcIjA0X21hdHJpY2VzX3BhdGNoZXMuc3FsXCIsXG4gICAgXCIwNV9zdHJfYXV4X3BhdGNoZXMuc3FsXCIsXG4gICAgXCIwNl9jaW5fYXV4X2NvcmVfcGF0Y2hlcy5zcWxcIixcbiAgICBcIjA3X2Npbl9hdXhfcnVudGltZV9wYXRjaGVzLnNxbFwiLFxuICAgIFwiMDhfY2luX2F1eF9mdW5jdGlvbnNfcGF0Y2hlcy5zcWxcIixcbiAgICBcIjA5X21lYV9keW5hbWljc19wYXRjaGVzLnNxbFwiLFxuICAgIFwiMTBfb3BzX3BhdGNoZXMuc3FsXCIsXG4gICAgXCIxMV9yZW1vdmVfYm9vdHN0cmFwLnNxbFwiLFxuICBdLFxufTtcblxuY29uc3QgU0VFRF9TVEVQOiBTdGVwID0geyBuYW1lOiBcIlNFRURTXCIsIGZpbGVzOiBbXCIwMV9zZWVkLnNxbFwiLCBcIjAyX3NlZWRfam9icy5zcWxcIl0gfTtcbmNvbnN0IFZFUklGWV9TVEVQOiBTdGVwID0geyBuYW1lOiBcIlZFUklGWVwiLCBmaWxlczogW1wiMDNfdmVyaWZ5LnNxbFwiXSB9O1xuXG5hc3luYyBmdW5jdGlvbiBzcGF3bkNvbW1hbmQoY21kOiBzdHJpbmcsIGFyZ3M6IHN0cmluZ1tdLCBlbnY/OiBOb2RlSlMuUHJvY2Vzc0Vudikge1xuICBjb25zdCB7IHNwYXduIH0gPSBhd2FpdCBpbXBvcnQoXCJub2RlOmNoaWxkX3Byb2Nlc3NcIik7XG4gIHJldHVybiBuZXcgUHJvbWlzZTx2b2lkPigocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgY29uc3QgY2hpbGQgPSBzcGF3bihjbWQsIGFyZ3MsIHsgc3RkaW86IFwiaW5oZXJpdFwiLCBlbnYgfSk7XG4gICAgY2hpbGQub24oXCJlcnJvclwiLCByZWplY3QpO1xuICAgIGNoaWxkLm9uKFwiZXhpdFwiLCAoY29kZSkgPT4gKGNvZGUgPT09IDAgPyByZXNvbHZlKCkgOiByZWplY3QobmV3IEVycm9yKGAke2NtZH0gZXhpdGVkIHdpdGggJHtjb2RlfWApKSkpO1xuICB9KTtcbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHJ1bkRiVG9vbChcbiAgYXJndjogc3RyaW5nW10gPSB0eXBlb2YgcHJvY2VzcyAhPT0gXCJ1bmRlZmluZWRcIiA/IHByb2Nlc3MuYXJndi5zbGljZSgyKSA6IFtdLFxuICBvcHRzOiB7IHJvb3Q/OiBzdHJpbmcgfSA9IHt9LFxuKTogUHJvbWlzZTx2b2lkPiB7XG4gIGNvbnN0IFt7IHJlc29sdmUsIGpvaW4gfSwgZnMsIGRvdGVudl0gPSBhd2FpdCBQcm9taXNlLmFsbChbXG4gICAgaW1wb3J0KFwibm9kZTpwYXRoXCIpLFxuICAgIGltcG9ydChcIm5vZGU6ZnNcIiksXG4gICAgaW1wb3J0KFwiZG90ZW52XCIpLFxuICBdKTtcblxuICBjb25zdCBST09UID0gcmVzb2x2ZShwcm9jZXNzLmN3ZCgpLCBvcHRzLnJvb3QgPz8gXCJkYlwiKTtcbiAgY29uc3QgRU5WX0ZJTEUgPSBqb2luKFJPT1QsIFwiLmVudi5kYlwiKTtcbiAgaWYgKGZzLmV4aXN0c1N5bmMoRU5WX0ZJTEUpKSB7XG4gICAgZG90ZW52LmNvbmZpZyh7IHBhdGg6IEVOVl9GSUxFIH0pO1xuICB9XG5cbiAgY29uc3QgcGcgPSB7XG4gICAgaG9zdDogcHJvY2Vzcy5lbnYuUEdIT1NUID8/IFwibG9jYWxob3N0XCIsXG4gICAgcG9ydDogU3RyaW5nKHByb2Nlc3MuZW52LlBHUE9SVCA/PyBcIjU0MzJcIiksXG4gICAgZGI6IHByb2Nlc3MuZW52LlBHREFUQUJBU0UgPz8gXCJwb3N0Z3Jlc1wiLFxuICAgIHVzZXI6IHByb2Nlc3MuZW52LlBHVVNFUiA/PyBcInBvc3RncmVzXCIsXG4gICAgcGFzczogcHJvY2Vzcy5lbnYuUEdQQVNTV09SRCA/PyBcIlwiLFxuICB9O1xuXG4gIGNvbnN0IGZpbGVFeGlzdHMgPSAoZmlsZTogc3RyaW5nKSA9PiBmcy5leGlzdHNTeW5jKGpvaW4oUk9PVCwgZmlsZSkpO1xuXG4gIGFzeW5jIGZ1bmN0aW9uIGVuc3VyZVBzcWwoKSB7XG4gICAgYXdhaXQgc3Bhd25Db21tYW5kKFwicHNxbFwiLCBbXCItLXZlcnNpb25cIl0pO1xuICB9XG5cbiAgYXN5bmMgZnVuY3Rpb24gZXhlY1NxbChmaWxlOiBzdHJpbmcpIHtcbiAgICBpZiAoIWZpbGVFeGlzdHMoZmlsZSkpIHJldHVybjtcbiAgICBjb25zdCBmdWxsID0gam9pbihST09ULCBmaWxlKTtcbiAgICBhd2FpdCBzcGF3bkNvbW1hbmQoXG4gICAgICBcInBzcWxcIixcbiAgICAgIFtcbiAgICAgICAgXCItWFwiLFxuICAgICAgICBcIi12XCIsXG4gICAgICAgIFwiT05fRVJST1JfU1RPUD0xXCIsXG4gICAgICAgIFwiLWhcIixcbiAgICAgICAgcGcuaG9zdCxcbiAgICAgICAgXCItcFwiLFxuICAgICAgICBwZy5wb3J0LFxuICAgICAgICBcIi1VXCIsXG4gICAgICAgIHBnLnVzZXIsXG4gICAgICAgIFwiLWRcIixcbiAgICAgICAgcGcuZGIsXG4gICAgICAgIFwiLWZcIixcbiAgICAgICAgZnVsbCxcbiAgICAgIF0sXG4gICAgICB7IC4uLnByb2Nlc3MuZW52LCBQR1BBU1NXT1JEOiBwZy5wYXNzIH0sXG4gICAgKTtcbiAgfVxuXG4gIGFzeW5jIGZ1bmN0aW9uIHJ1blN0ZXAoc3RlcDogU3RlcCkge1xuICAgIGNvbnNvbGUubG9nKGBcXG49PT0gJHtzdGVwLm5hbWV9ID09PWApO1xuICAgIGZvciAoY29uc3QgZmlsZSBvZiBzdGVwLmZpbGVzKSB7XG4gICAgICBpZiAoIWZpbGVFeGlzdHMoZmlsZSkpIGNvbnRpbnVlO1xuICAgICAgY29uc29sZS5sb2coYC0+ICR7ZmlsZX1gKTtcbiAgICAgIGF3YWl0IGV4ZWNTcWwoZmlsZSk7XG4gICAgfVxuICB9XG5cbiAgYXN5bmMgZnVuY3Rpb24gZW5zdXJlRGIoKSB7XG4gICAgY29uc3Qgc3FsID0gYERPICQkXG4gICAgIEJFR0lOXG4gICAgICAgSUYgTk9UIEVYSVNUUyAoU0VMRUNUIDEgRlJPTSBwZ19kYXRhYmFzZSBXSEVSRSBkYXRuYW1lID0gJyR7cGcuZGJ9JykgVEhFTlxuICAgICAgICAgRVhFQ1VURSAnQ1JFQVRFIERBVEFCQVNFICR7cGcuZGJ9JztcbiAgICAgICBFTkQgSUY7XG4gICAgIEVORCQkO2A7XG4gICAgYXdhaXQgc3Bhd25Db21tYW5kKFxuICAgICAgXCJwc3FsXCIsXG4gICAgICBbXG4gICAgICAgIFwiLVhcIixcbiAgICAgICAgXCItdlwiLFxuICAgICAgICBcIk9OX0VSUk9SX1NUT1A9MVwiLFxuICAgICAgICBcIi1oXCIsXG4gICAgICAgIHBnLmhvc3QsXG4gICAgICAgIFwiLXBcIixcbiAgICAgICAgcGcucG9ydCxcbiAgICAgICAgXCItVVwiLFxuICAgICAgICBwZy51c2VyLFxuICAgICAgICBcIi1kXCIsXG4gICAgICAgIFwicG9zdGdyZXNcIixcbiAgICAgICAgXCItY1wiLFxuICAgICAgICBzcWwsXG4gICAgICBdLFxuICAgICAgeyAuLi5wcm9jZXNzLmVudiwgUEdQQVNTV09SRDogcGcucGFzcyB9LFxuICAgICk7XG4gIH1cblxuICBmdW5jdGlvbiB1c2FnZSgpIHtcbiAgICBjb25zb2xlLmxvZyhgXG5Vc2FnZTpcbiAgcG5wbSBkYjphcHBseSAgICAgIyBiYXNlIERETHMgKyBwYXRjaGVzXG4gIHBucG0gZGI6c2VlZCAgICAgICMgc2VlZHMgKHVuaXZlcnNlL3RpbWluZy9zZXNzaW9uL2pvYnMpXG4gIHBucG0gZGI6dmVyaWZ5ICAgICMgcXVpY2sgY2hlY2tzXG4gIHBucG0gZGI6YWxsICAgICAgICMgZW5zdXJlIERCLCBhcHBseSwgc2VlZCwgdmVyaWZ5XG4gIHBucG0gZGI6cHNxbCAgICAgICMgb3BlbiBpbnRlcmFjdGl2ZSBwc3FsIHRvIFBHREFUQUJBU0VcblxuRU5WOiByZWFkIGZyb20gZGIvLmVudi5kYiAoUEdIT1NULCBQR1BPUlQsIFBHREFUQUJBU0UsIFBHVVNFUiwgUEdQQVNTV09SRClcbmAudHJpbSgpKTtcbiAgfVxuXG4gIGNvbnN0IFtjbWQgPSBcIlwiXSA9IGFyZ3Y7XG4gIGF3YWl0IGVuc3VyZVBzcWwoKTtcblxuICBpZiAoY21kID09PSBcImFwcGx5XCIpIHtcbiAgICBhd2FpdCBydW5TdGVwKEJBU0VfU1RFUCk7XG4gICAgYXdhaXQgcnVuU3RlcChQQVRDSF9TVEVQKTtcbiAgICBjb25zb2xlLmxvZyhcIltva10gYXBwbHkgY29tcGxldGVcIik7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgaWYgKGNtZCA9PT0gXCJzZWVkXCIpIHtcbiAgICBhd2FpdCBydW5TdGVwKFNFRURfU1RFUCk7XG4gICAgY29uc29sZS5sb2coXCJbb2tdIHNlZWQgY29tcGxldGVcIik7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgaWYgKGNtZCA9PT0gXCJ2ZXJpZnlcIikge1xuICAgIGF3YWl0IHJ1blN0ZXAoVkVSSUZZX1NURVApO1xuICAgIGNvbnNvbGUubG9nKFwiW29rXSB2ZXJpZnkgY29tcGxldGVcIik7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgaWYgKGNtZCA9PT0gXCJhbGxcIikge1xuICAgIGF3YWl0IGVuc3VyZURiKCk7XG4gICAgYXdhaXQgcnVuU3RlcChCQVNFX1NURVApO1xuICAgIGF3YWl0IHJ1blN0ZXAoUEFUQ0hfU1RFUCk7XG4gICAgYXdhaXQgcnVuU3RlcChTRUVEX1NURVApO1xuICAgIGF3YWl0IHJ1blN0ZXAoVkVSSUZZX1NURVApO1xuICAgIGNvbnNvbGUubG9nKFwiW29rXSBhbGwgZG9uZVwiKTtcbiAgICByZXR1cm47XG4gIH1cblxuICBpZiAoY21kID09PSBcInBzcWxcIikge1xuICAgIGF3YWl0IHNwYXduQ29tbWFuZChcbiAgICAgIFwicHNxbFwiLFxuICAgICAgW1wiLWhcIiwgcGcuaG9zdCwgXCItcFwiLCBwZy5wb3J0LCBcIi1VXCIsIHBnLnVzZXIsIFwiLWRcIiwgcGcuZGJdLFxuICAgICAgeyAuLi5wcm9jZXNzLmVudiwgUEdQQVNTV09SRDogcGcucGFzcyB9LFxuICAgICk7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgdXNhZ2UoKTtcbiAgdGhyb3cgbmV3IEVycm9yKGBVbmtub3duIGRiIGNvbW1hbmQgXCIke2NtZH1cImApO1xufVxuXG5hc3luYyBmdW5jdGlvbiBtYXliZVJ1bkRiVG9vbEZyb21DbGkoKSB7XG4gIGlmICh0eXBlb2YgcHJvY2VzcyA9PT0gXCJ1bmRlZmluZWRcIiB8fCAhcHJvY2Vzcy5hcmd2Py5bMV0pIHJldHVybjtcbiAgdHJ5IHtcbiAgICBjb25zdCB7IHBhdGhUb0ZpbGVVUkwgfSA9IGF3YWl0IGltcG9ydChcIm5vZGU6dXJsXCIpO1xuICAgIGlmIChpbXBvcnQubWV0YS51cmwgIT09IHBhdGhUb0ZpbGVVUkwocHJvY2Vzcy5hcmd2WzFdISkuaHJlZikgcmV0dXJuO1xuICB9IGNhdGNoIHtcbiAgICByZXR1cm47XG4gIH1cblxuICB0cnkge1xuICAgIGF3YWl0IHJ1bkRiVG9vbChwcm9jZXNzLmFyZ3Yuc2xpY2UoMikpO1xuICB9IGNhdGNoIChlcnIpIHtcbiAgICBjb25zb2xlLmVycm9yKGVycik7XG4gICAgcHJvY2Vzcy5leGl0Q29kZSA9IDE7XG4gIH1cbn1cblxudm9pZCBtYXliZVJ1bkRiVG9vbEZyb21DbGkoKTtcbiJdLCJuYW1lcyI6WyJkYiIsImdldFBvb2wiLCJxdWVyeSIsIndpdGhDbGllbnQiLCJSQVdfVEFCTEUiLCJwcm9jZXNzIiwiZW52IiwiTUFUUklYX1RBQkxFIiwiYXNJZGVudCIsIm5hbWUiLCJwYXJ0cyIsIlN0cmluZyIsInNwbGl0IiwiZmlsdGVyIiwiQm9vbGVhbiIsImxlbmd0aCIsIkVycm9yIiwibWFwIiwicGFydCIsInRlc3QiLCJqb2luIiwiVEFCTEUiLCJSQVdfU1RBR0VfVEFCTEUiLCJNQVRSSVhfU1RBR0VfVEFCTEUiLCJSQVdfQ09NTUlUX1RBQkxFIiwiTUFUUklYX0NPTU1JVF9UQUJMRSIsIlNUQUdFX1RBQkxFX0NBTkRJREFURVMiLCJBcnJheSIsImZyb20iLCJTZXQiLCJNQVRSSVhfVEFCTEVfQ0FORElEQVRFUyIsInNwbGl0UXVhbGlmaWVkTmFtZSIsInNjaGVtYSIsInJlbGF0aW9uIiwicG9wIiwiZW5zdXJlTWF0cml4VGFibGVzIiwiY2xpZW50IiwiZmluZEV4aXN0aW5nVGFibGUiLCJjYW5kaWRhdGVzIiwicmF3Iiwicm93cyIsImtpbmQiLCJpZGVudCIsImNhY2hlZFN0YWdlSW5mbyIsImNhY2hlZE1hdHJpeEluZm8iLCJlbnN1cmVTdGFnZUluZm8iLCJpbmZvIiwiZW5zdXJlTWF0cml4SW5mbyIsImRlZHVwZVVwcGVyIiwieHMiLCJvdXQiLCJzZWVuIiwieCIsInVwIiwidHJpbSIsInRvVXBwZXJDYXNlIiwiaGFzIiwiYWRkIiwicHVzaCIsImdldE1hdHJpeFN0YWdlVGFibGVJZGVudCIsInVzZUNsaWVudCIsImNvbm5lY3QiLCJyZWxlYXNlIiwiZ2V0TWF0cml4VmFsdWVzVGFibGVJZGVudCIsInVwc2VydE1hdHJpeFJvd3MiLCJ2YWx1ZXMiLCJjaHVua3MiLCJyIiwiaSIsImoiLCJ0c19tcyIsIm1hdHJpeF90eXBlIiwiYmFzZSIsInF1b3RlIiwidmFsdWUiLCJKU09OIiwic3RyaW5naWZ5IiwibWV0YSIsInNxbCIsImdldExhdGVzdEJ5VHlwZSIsImNvaW5zIiwiTnVtYmVyIiwidmFscyIsImdldFByZXZWYWx1ZSIsImJlZm9yZVRzIiwiZ2V0TGF0ZXN0VHNGb3JUeXBlIiwidiIsImdldE5lYXJlc3RUc0F0T3JCZWZvcmUiLCJnZXRTbmFwc2hvdEJ5VHlwZSIsImdldFByZXZTbmFwc2hvdEJ5VHlwZSIsImNvdW50Um93c0F0IiwibiIsIm9wZW5pbmdDYWNoZSIsIk1hcCIsImtleVN0ciIsImsiLCJ3aW5kb3ciLCJhcHBTZXNzaW9uSWQiLCJnZXRPcGVuaW5nRnJvbURiIiwicTEiLCJyMSIsInByaWNlIiwidHMiLCJxMiIsInIyIiwiZW5zdXJlT3BlbmluZyIsIm9wdHMiLCJjayIsImhpdCIsImdldCIsIm9wZW5pbmdQcmljZSIsIm9wZW5pbmdUcyIsInJvdyIsInNldCIsImNsZWFyT3BlbmluZ0NhY2hlIiwiY2xlYXIiLCJkZWxldGUiLCJjZWxsc09mIiwiYiIsInEiLCJpc05hTiIsInN0YWdlTWF0cml4R3JpZCIsIm1hdHJpeFR5cGUiLCJ0c01zIiwiZXh0ZXJuYWwiLCJvayIsInN0YWdlZCIsIm1ldGFKc29uIiwic3RhZ2VJbmZvIiwidGV4dCIsIl8iLCJwYXJhbXMiLCJjb21taXRNYXRyaXhHcmlkIiwibWFuYWdlVHgiLCJtYXRyaXhUYWJsZSIsInN0YWdlUm93cyIsInN0YWdlZENlbGxzIiwicm93Q291bnQiLCJjb2luc0Zyb21TdGFnZSIsImVsaWdpYmxlQ29pbnMiLCJleHBlY3RlZENlbGxzIiwiTWF0aCIsIm1heCIsInN0YWdlZFBhaXJzIiwibWlzc2luZ0NvdW50IiwiZXhwZWN0ZWRfY2VsbHMiLCJzdGFnZWRfY2VsbHMiLCJtaXNzaW5nX2NvdW50IiwiY29tcGxldGUiLCJlcnIiLCJtYXBQcmV2QmVuY2htYXJrIiwicHJldiIsIm0iLCJwZXJzaXN0TGl2ZU1hdHJpY2VzU2xpY2UiLCJiZW5jaG1hcmsiLCJwY3QyNGgiLCJpZGVtUHJlZml4Iiwic291cmNlIiwiaWRlbSIsInByZXZNYXAiLCJpZE9iaiIsIm5vdyIsImFicyIsIkJBU0VfU1RFUCIsImZpbGVzIiwiUEFUQ0hfU1RFUCIsIlNFRURfU1RFUCIsIlZFUklGWV9TVEVQIiwic3Bhd25Db21tYW5kIiwiY21kIiwiYXJncyIsInNwYXduIiwiUHJvbWlzZSIsInJlc29sdmUiLCJyZWplY3QiLCJjaGlsZCIsInN0ZGlvIiwib24iLCJjb2RlIiwicnVuRGJUb29sIiwiYXJndiIsInNsaWNlIiwiZnMiLCJkb3RlbnYiLCJhbGwiLCJST09UIiwiY3dkIiwicm9vdCIsIkVOVl9GSUxFIiwiZXhpc3RzU3luYyIsImNvbmZpZyIsInBhdGgiLCJwZyIsImhvc3QiLCJQR0hPU1QiLCJwb3J0IiwiUEdQT1JUIiwiUEdEQVRBQkFTRSIsInVzZXIiLCJQR1VTRVIiLCJwYXNzIiwiUEdQQVNTV09SRCIsImZpbGVFeGlzdHMiLCJmaWxlIiwiZW5zdXJlUHNxbCIsImV4ZWNTcWwiLCJmdWxsIiwicnVuU3RlcCIsInN0ZXAiLCJjb25zb2xlIiwibG9nIiwiZW5zdXJlRGIiLCJ1c2FnZSIsIm1heWJlUnVuRGJUb29sRnJvbUNsaSIsInBhdGhUb0ZpbGVVUkwiLCJ1cmwiLCJocmVmIiwiZXJyb3IiLCJleGl0Q29kZSJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./src/core/db/db.ts\n");

/***/ }),

/***/ "(rsc)/./src/core/db/pool_server.ts":
/*!************************************!*\
  !*** ./src/core/db/pool_server.ts ***!
  \************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   DEFAULT_SEARCH_PATH: () => (/* binding */ DEFAULT_SEARCH_PATH),\n/* harmony export */   TABLES: () => (/* binding */ TABLES),\n/* harmony export */   appendAppLedger: () => (/* binding */ appendAppLedger),\n/* harmony export */   appendTransferLedger: () => (/* binding */ appendTransferLedger),\n/* harmony export */   db: () => (/* binding */ db),\n/* harmony export */   getAppLedgerSince: () => (/* binding */ getAppLedgerSince),\n/* harmony export */   getDb: () => (/* binding */ getDb),\n/* harmony export */   getPool: () => (/* binding */ getPool),\n/* harmony export */   listTransferLegs: () => (/* binding */ listTransferLegs),\n/* harmony export */   query: () => (/* binding */ query),\n/* harmony export */   serverDb: () => (/* binding */ serverDb),\n/* harmony export */   withClient: () => (/* binding */ withClient)\n/* harmony export */ });\n/* harmony import */ var pg__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! pg */ \"pg\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([pg__WEBPACK_IMPORTED_MODULE_0__]);\npg__WEBPACK_IMPORTED_MODULE_0__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n/**\n * Unified PG pool + convenience helpers + lightweight ledgers.\n * This replaces the old pool/server/ledger trio with a single source of truth.\n */ /*  Environment helpers  */ function asBool(v, fallback = false) {\n    if (v == null) return fallback;\n    const s = String(v).trim().toLowerCase();\n    return s === \"1\" || s === \"true\" || s === \"yes\" || s === \"on\";\n}\n/*  Pool configuration  */ const useUrl = !!process.env.DATABASE_URL;\nconst baseConfig = useUrl ? {\n    connectionString: String(process.env.DATABASE_URL)\n} : {\n    host: String(process.env.PGHOST ?? \"localhost\"),\n    port: Number(process.env.PGPORT ?? 1026),\n    user: String(process.env.PGUSER ?? \"postgres\"),\n    password: String(process.env.PGPASSWORD ?? \"gus\"),\n    database: String(process.env.PGDATABASE ?? \"cryptopie\")\n};\nconst poolConfig = {\n    ...baseConfig,\n    max: Number(process.env.DB_POOL_MAX ?? process.env.PGPOOL_MAX ?? 10),\n    idleTimeoutMillis: Number(process.env.DB_IDLE_MS ?? 45000),\n    connectionTimeoutMillis: Number(process.env.DB_CONN_TIMEOUT_MS ?? 5000),\n    ssl: asBool(process.env.DB_SSL ?? process.env.PGSSL) ? {\n        rejectUnauthorized: false\n    } : undefined\n};\nconst SESSION_STATEMENT_TIMEOUT = Number(process.env.DB_STATEMENT_TIMEOUT_MS ?? 15000);\nconst SESSION_IDLE_TX_TIMEOUT = Number(process.env.DB_IDLE_TX_TIMEOUT_MS ?? 15000);\nconst SESSION_TZ = String(process.env.DB_TIMEZONE ?? \"UTC\").replace(/'/g, \"''\");\nconst DEFAULT_SEARCH_PATH = [\n    \"settings\",\n    \"market\",\n    \"docs\",\n    \"matrices\",\n    \"str_aux\",\n    \"cin_aux\",\n    \"mea_dynamics\",\n    \"ingest\",\n    \"ops\",\n    \"public\"\n].join(\", \");\nfunction ensurePool() {\n    if (!global.__core_pg_pool__) {\n        const pool = new pg__WEBPACK_IMPORTED_MODULE_0__.Pool(poolConfig);\n        pool.on(\"connect\", (client)=>{\n            const bootstrap = [\n                `SET statement_timeout = ${SESSION_STATEMENT_TIMEOUT}`,\n                `SET idle_in_transaction_session_timeout = ${SESSION_IDLE_TX_TIMEOUT}`,\n                `SET TIME ZONE '${SESSION_TZ}'`,\n                `SET search_path = ${DEFAULT_SEARCH_PATH}`\n            ];\n            for (const statement of bootstrap){\n                void client.query(statement).catch(()=>{\n                /* ignore bootstrap failures so the pool stays usable */ });\n            }\n        });\n        global.__core_pg_pool__ = pool;\n    }\n    return global.__core_pg_pool__;\n}\nfunction getPool() {\n    return ensurePool();\n}\nfunction getDb() {\n    return ensurePool();\n}\n/*  Query helpers  */ async function withClient(fn) {\n    const client = await ensurePool().connect();\n    try {\n        return await fn(client);\n    } finally{\n        client.release();\n    }\n}\nasync function query(text, params) {\n    return ensurePool().query(text, params);\n}\nconst db = ensurePool();\nconst serverDb = {\n    query (text, params) {\n        return ensurePool().query(text, params);\n    }\n};\n/*  Table constants  */ const TABLES = {\n    matrices: process.env.MATRIX_TABLE || \"matrices.dyn_values\",\n    matricesStage: process.env.MATRIX_STAGE_TABLE || \"matrices.dyn_values_stage\",\n    ledger: process.env.APP_LEDGER_TABLE || \"ops.app_ledger\",\n    transfers: process.env.TRANSFER_LEDGER_TABLE || \"ops.transfer_ledger\"\n};\n/** Safe insert; ignores missing table or duplicate key. */ async function appendAppLedger(e) {\n    const sql = `\n    INSERT INTO ${TABLES.ledger}\n      (topic, event, payload, session_id, idempotency_key, ts_epoch_ms)\n    VALUES ($1,$2,$3,$4,$5,$6)\n    ON CONFLICT (idempotency_key) DO NOTHING\n  `;\n    try {\n        await query(sql, [\n            e.topic,\n            e.event,\n            e.payload ?? null,\n            e.session_id ?? null,\n            e.idempotency_key ?? null,\n            e.ts_epoch_ms\n        ]);\n    } catch (err) {\n        if (err?.code === \"42P01\") {\n            console.warn(\"appendAppLedger: ledger table missing (ops.app_ledger). Skipping log.\");\n            return;\n        }\n        throw err;\n    }\n}\nasync function getAppLedgerSince(sinceMs, topic) {\n    try {\n        const { rows } = await query(`SELECT * FROM ${TABLES.ledger}\n        WHERE ts_epoch_ms >= $1\n          AND ($2::text IS NULL OR topic = $2)\n     ORDER BY ts_epoch_ms ASC`, [\n            sinceMs,\n            topic ?? null\n        ]);\n        return rows;\n    } catch (err) {\n        if (err?.code === \"42P01\") {\n            console.warn(\"getAppLedgerSince: ledger table missing (ops.app_ledger).\");\n            return [];\n        }\n        throw err;\n    }\n}\n/*  Transfer ledger helpers  */ async function appendTransferLedger(row) {\n    const q = `\n    INSERT INTO ${TABLES.transfers} (\n      app_session_id, cycle_ts, leg_seq, route_id, intent_id,\n      from_symbol, to_symbol, qty_from, qty_to,\n      price_from_usdt, price_to_usdt, fee_usdt, exec_ts, tx_id\n    )\n    VALUES (\n      $1,$2,$3,$4,$5,$6,$7,$8,$9,$10,$11,COALESCE($12,0),$13,$14\n    )\n    ON CONFLICT (app_session_id, cycle_ts, leg_seq) DO NOTHING\n  `;\n    try {\n        await query(q, [\n            row.app_session_id,\n            row.cycle_ts,\n            row.leg_seq,\n            row.route_id ?? null,\n            row.intent_id ?? null,\n            row.from_symbol,\n            row.to_symbol,\n            row.qty_from,\n            row.qty_to,\n            row.price_from_usdt,\n            row.price_to_usdt,\n            row.fee_usdt ?? 0,\n            row.exec_ts,\n            row.tx_id ?? null\n        ]);\n    } catch (err) {\n        if (err?.code === \"42P01\") {\n            console.warn(\"appendTransferLedger: transfer_ledger table missing (ops.transfer_ledger).\");\n            return;\n        }\n        throw err;\n    }\n}\nasync function listTransferLegs(app_session_id, opts) {\n    const { rows } = await query(`SELECT * FROM ${TABLES.transfers}\n      WHERE app_session_id = $1\n        AND ($2::bigint IS NULL OR cycle_ts < $2)\n   ORDER BY cycle_ts DESC, leg_seq DESC\n      LIMIT $3`, [\n        app_session_id,\n        opts?.before ?? null,\n        opts?.limit ?? 200\n    ]);\n    return rows;\n}\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QixDQUFDLEVBQ1g7UUFBQ3FCO1FBQWdCZSxNQUFNQyxVQUFVO1FBQU1ELE1BQU1FLFNBQVM7S0FBSTtJQUU1RCxPQUFPckI7QUFDVCIsInNvdXJjZXMiOlsiSDpcXFVzZXJzXFxHdXNcXHNvdXJjZVxccmVwb1xcZHluYW1pY3NcXGR5bmFtaWNzLWJcXGNyeXB0b3BpLWR5bmFtaWNzXFxzcmNcXGNvcmVcXGRiXFxwb29sX3NlcnZlci50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBQb29sLCB0eXBlIFBvb2xDbGllbnQsIHR5cGUgUXVlcnlSZXN1bHQsIHR5cGUgUXVlcnlSZXN1bHRSb3cgfSBmcm9tIFwicGdcIjtcblxuLyoqXG4gKiBVbmlmaWVkIFBHIHBvb2wgKyBjb252ZW5pZW5jZSBoZWxwZXJzICsgbGlnaHR3ZWlnaHQgbGVkZ2Vycy5cbiAqIFRoaXMgcmVwbGFjZXMgdGhlIG9sZCBwb29sL3NlcnZlci9sZWRnZXIgdHJpbyB3aXRoIGEgc2luZ2xlIHNvdXJjZSBvZiB0cnV0aC5cbiAqL1xuXG4vKiDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIAgRW52aXJvbm1lbnQgaGVscGVycyDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIAgKi9cbmZ1bmN0aW9uIGFzQm9vbCh2OiB1bmtub3duLCBmYWxsYmFjayA9IGZhbHNlKTogYm9vbGVhbiB7XG4gIGlmICh2ID09IG51bGwpIHJldHVybiBmYWxsYmFjaztcbiAgY29uc3QgcyA9IFN0cmluZyh2KS50cmltKCkudG9Mb3dlckNhc2UoKTtcbiAgcmV0dXJuIHMgPT09IFwiMVwiIHx8IHMgPT09IFwidHJ1ZVwiIHx8IHMgPT09IFwieWVzXCIgfHwgcyA9PT0gXCJvblwiO1xufVxuXG4vKiDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIAgUG9vbCBjb25maWd1cmF0aW9uIOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgCAqL1xuY29uc3QgdXNlVXJsID0gISFwcm9jZXNzLmVudi5EQVRBQkFTRV9VUkw7XG5jb25zdCBiYXNlQ29uZmlnID0gdXNlVXJsXG4gID8geyBjb25uZWN0aW9uU3RyaW5nOiBTdHJpbmcocHJvY2Vzcy5lbnYuREFUQUJBU0VfVVJMKSB9XG4gIDoge1xuICAgICAgaG9zdDogU3RyaW5nKHByb2Nlc3MuZW52LlBHSE9TVCA/PyBcImxvY2FsaG9zdFwiKSxcbiAgICAgIHBvcnQ6IE51bWJlcihwcm9jZXNzLmVudi5QR1BPUlQgPz8gMTAyNiksXG4gICAgICB1c2VyOiBTdHJpbmcocHJvY2Vzcy5lbnYuUEdVU0VSID8/IFwicG9zdGdyZXNcIiksXG4gICAgICBwYXNzd29yZDogU3RyaW5nKHByb2Nlc3MuZW52LlBHUEFTU1dPUkQgPz8gXCJndXNcIiksXG4gICAgICBkYXRhYmFzZTogU3RyaW5nKHByb2Nlc3MuZW52LlBHREFUQUJBU0UgPz8gXCJjcnlwdG9waWVcIiksXG4gICAgfTtcblxuY29uc3QgcG9vbENvbmZpZyA9IHtcbiAgLi4uYmFzZUNvbmZpZyxcbiAgbWF4OiBOdW1iZXIocHJvY2Vzcy5lbnYuREJfUE9PTF9NQVggPz8gcHJvY2Vzcy5lbnYuUEdQT09MX01BWCA/PyAxMCksXG4gIGlkbGVUaW1lb3V0TWlsbGlzOiBOdW1iZXIocHJvY2Vzcy5lbnYuREJfSURMRV9NUyA/PyA0NV8wMDApLFxuICBjb25uZWN0aW9uVGltZW91dE1pbGxpczogTnVtYmVyKHByb2Nlc3MuZW52LkRCX0NPTk5fVElNRU9VVF9NUyA/PyA1XzAwMCksXG4gIHNzbDogYXNCb29sKHByb2Nlc3MuZW52LkRCX1NTTCA/PyBwcm9jZXNzLmVudi5QR1NTTClcbiAgICA/IHsgcmVqZWN0VW5hdXRob3JpemVkOiBmYWxzZSBhcyBjb25zdCB9XG4gICAgOiB1bmRlZmluZWQsXG59O1xuXG5jb25zdCBTRVNTSU9OX1NUQVRFTUVOVF9USU1FT1VUID0gTnVtYmVyKHByb2Nlc3MuZW52LkRCX1NUQVRFTUVOVF9USU1FT1VUX01TID8/IDE1XzAwMCk7XG5jb25zdCBTRVNTSU9OX0lETEVfVFhfVElNRU9VVCA9IE51bWJlcihwcm9jZXNzLmVudi5EQl9JRExFX1RYX1RJTUVPVVRfTVMgPz8gMTVfMDAwKTtcbmNvbnN0IFNFU1NJT05fVFogPSBTdHJpbmcocHJvY2Vzcy5lbnYuREJfVElNRVpPTkUgPz8gXCJVVENcIikucmVwbGFjZSgvJy9nLCBcIicnXCIpO1xuZXhwb3J0IGNvbnN0IERFRkFVTFRfU0VBUkNIX1BBVEggPSBbXG4gIFwic2V0dGluZ3NcIixcbiAgXCJtYXJrZXRcIixcbiAgXCJkb2NzXCIsXG4gIFwibWF0cmljZXNcIixcbiAgXCJzdHJfYXV4XCIsXG4gIFwiY2luX2F1eFwiLFxuICBcIm1lYV9keW5hbWljc1wiLFxuICBcImluZ2VzdFwiLFxuICBcIm9wc1wiLFxuICBcInB1YmxpY1wiLFxuXS5qb2luKFwiLCBcIik7XG5cbi8qIOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgCBQb29sIHNpbmdsZXRvbiDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIAgKi9cbmRlY2xhcmUgZ2xvYmFsIHtcbiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXZhclxuICB2YXIgX19jb3JlX3BnX3Bvb2xfXzogUG9vbCB8IHVuZGVmaW5lZDtcbn1cblxuZnVuY3Rpb24gZW5zdXJlUG9vbCgpOiBQb29sIHtcbiAgaWYgKCFnbG9iYWwuX19jb3JlX3BnX3Bvb2xfXykge1xuICAgIGNvbnN0IHBvb2wgPSBuZXcgUG9vbChwb29sQ29uZmlnIGFzIGFueSk7XG4gICAgcG9vbC5vbihcImNvbm5lY3RcIiwgKGNsaWVudDogUG9vbENsaWVudCkgPT4ge1xuICAgICAgY29uc3QgYm9vdHN0cmFwID0gW1xuICAgICAgICBgU0VUIHN0YXRlbWVudF90aW1lb3V0ID0gJHtTRVNTSU9OX1NUQVRFTUVOVF9USU1FT1VUfWAsXG4gICAgICAgIGBTRVQgaWRsZV9pbl90cmFuc2FjdGlvbl9zZXNzaW9uX3RpbWVvdXQgPSAke1NFU1NJT05fSURMRV9UWF9USU1FT1VUfWAsXG4gICAgICAgIGBTRVQgVElNRSBaT05FICcke1NFU1NJT05fVFp9J2AsXG4gICAgICAgIGBTRVQgc2VhcmNoX3BhdGggPSAke0RFRkFVTFRfU0VBUkNIX1BBVEh9YCxcbiAgICAgIF07XG4gICAgICBmb3IgKGNvbnN0IHN0YXRlbWVudCBvZiBib290c3RyYXApIHtcbiAgICAgICAgdm9pZCBjbGllbnQucXVlcnkoc3RhdGVtZW50KS5jYXRjaCgoKSA9PiB7XG4gICAgICAgICAgLyogaWdub3JlIGJvb3RzdHJhcCBmYWlsdXJlcyBzbyB0aGUgcG9vbCBzdGF5cyB1c2FibGUgKi9cbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfSk7XG4gICAgZ2xvYmFsLl9fY29yZV9wZ19wb29sX18gPSBwb29sO1xuICB9XG4gIHJldHVybiBnbG9iYWwuX19jb3JlX3BnX3Bvb2xfXyE7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRQb29sKCk6IFBvb2wge1xuICByZXR1cm4gZW5zdXJlUG9vbCgpO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGdldERiKCk6IFBvb2wge1xuICByZXR1cm4gZW5zdXJlUG9vbCgpO1xufVxuXG4vKiDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIAgUXVlcnkgaGVscGVycyDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIAgKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiB3aXRoQ2xpZW50PFQ+KGZuOiAoY2xpZW50OiBQb29sQ2xpZW50KSA9PiBQcm9taXNlPFQ+KTogUHJvbWlzZTxUPiB7XG4gIGNvbnN0IGNsaWVudCA9IGF3YWl0IGVuc3VyZVBvb2woKS5jb25uZWN0KCk7XG4gIHRyeSB7XG4gICAgcmV0dXJuIGF3YWl0IGZuKGNsaWVudCk7XG4gIH0gZmluYWxseSB7XG4gICAgY2xpZW50LnJlbGVhc2UoKTtcbiAgfVxufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gcXVlcnk8VCBleHRlbmRzIFF1ZXJ5UmVzdWx0Um93ID0gUXVlcnlSZXN1bHRSb3c+KFxuICB0ZXh0OiBzdHJpbmcsXG4gIHBhcmFtcz86IGFueVtdLFxuKTogUHJvbWlzZTxRdWVyeVJlc3VsdDxUPj4ge1xuICByZXR1cm4gZW5zdXJlUG9vbCgpLnF1ZXJ5PFQ+KHRleHQsIHBhcmFtcyk7XG59XG5cbmV4cG9ydCBjb25zdCBkYjogUG9vbCA9IGVuc3VyZVBvb2woKTtcbmV4cG9ydCBjb25zdCBzZXJ2ZXJEYiA9IHtcbiAgcXVlcnk8VCA9IGFueT4odGV4dDogc3RyaW5nLCBwYXJhbXM/OiBhbnlbXSkge1xuICAgIHJldHVybiBlbnN1cmVQb29sKCkucXVlcnk8VD4odGV4dCwgcGFyYW1zKTtcbiAgfSxcbn07XG5cbi8qIOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgCBUYWJsZSBjb25zdGFudHMg4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSAICovXG5leHBvcnQgY29uc3QgVEFCTEVTID0ge1xuICBtYXRyaWNlczogcHJvY2Vzcy5lbnYuTUFUUklYX1RBQkxFIHx8IFwibWF0cmljZXMuZHluX3ZhbHVlc1wiLFxuICBtYXRyaWNlc1N0YWdlOiBwcm9jZXNzLmVudi5NQVRSSVhfU1RBR0VfVEFCTEUgfHwgXCJtYXRyaWNlcy5keW5fdmFsdWVzX3N0YWdlXCIsXG4gIGxlZGdlcjogcHJvY2Vzcy5lbnYuQVBQX0xFREdFUl9UQUJMRSB8fCBcIm9wcy5hcHBfbGVkZ2VyXCIsXG4gIHRyYW5zZmVyczogcHJvY2Vzcy5lbnYuVFJBTlNGRVJfTEVER0VSX1RBQkxFIHx8IFwib3BzLnRyYW5zZmVyX2xlZGdlclwiLFxufSBhcyBjb25zdDtcblxuLyog4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSAIExlZGdlciBoZWxwZXJzIOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgCAqL1xuZXhwb3J0IHR5cGUgQXBwTGVkZ2VyRXZlbnQgPSB7XG4gIHRvcGljOiBzdHJpbmc7ICAgICAgICAgICAgICAvLyBlLmcuIFwicGlwZWxpbmVcIlxuICBldmVudDogc3RyaW5nOyAgICAgICAgICAgICAgLy8gZS5nLiBcImR5bl9tYXRyaXhfdXBzZXJ0XCJcbiAgcGF5bG9hZD86IHVua25vd247XG4gIHNlc3Npb25faWQ/OiBzdHJpbmc7XG4gIGlkZW1wb3RlbmN5X2tleT86IHN0cmluZztcbiAgdHNfZXBvY2hfbXM6IG51bWJlcjtcbn07XG5cbi8qKiBTYWZlIGluc2VydDsgaWdub3JlcyBtaXNzaW5nIHRhYmxlIG9yIGR1cGxpY2F0ZSBrZXkuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gYXBwZW5kQXBwTGVkZ2VyKGU6IEFwcExlZGdlckV2ZW50KTogUHJvbWlzZTx2b2lkPiB7XG4gIGNvbnN0IHNxbCA9IGBcbiAgICBJTlNFUlQgSU5UTyAke1RBQkxFUy5sZWRnZXJ9XG4gICAgICAodG9waWMsIGV2ZW50LCBwYXlsb2FkLCBzZXNzaW9uX2lkLCBpZGVtcG90ZW5jeV9rZXksIHRzX2Vwb2NoX21zKVxuICAgIFZBTFVFUyAoJDEsJDIsJDMsJDQsJDUsJDYpXG4gICAgT04gQ09ORkxJQ1QgKGlkZW1wb3RlbmN5X2tleSkgRE8gTk9USElOR1xuICBgO1xuICB0cnkge1xuICAgIGF3YWl0IHF1ZXJ5KHNxbCwgW1xuICAgICAgZS50b3BpYyxcbiAgICAgIGUuZXZlbnQsXG4gICAgICBlLnBheWxvYWQgPz8gbnVsbCxcbiAgICAgIGUuc2Vzc2lvbl9pZCA/PyBudWxsLFxuICAgICAgZS5pZGVtcG90ZW5jeV9rZXkgPz8gbnVsbCxcbiAgICAgIGUudHNfZXBvY2hfbXMsXG4gICAgXSk7XG4gIH0gY2F0Y2ggKGVycjogYW55KSB7XG4gICAgaWYgKGVycj8uY29kZSA9PT0gXCI0MlAwMVwiKSB7XG4gICAgICBjb25zb2xlLndhcm4oXCJhcHBlbmRBcHBMZWRnZXI6IGxlZGdlciB0YWJsZSBtaXNzaW5nIChvcHMuYXBwX2xlZGdlcikuIFNraXBwaW5nIGxvZy5cIik7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHRocm93IGVycjtcbiAgfVxufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0QXBwTGVkZ2VyU2luY2Uoc2luY2VNczogbnVtYmVyLCB0b3BpYz86IHN0cmluZykge1xuICB0cnkge1xuICAgIGNvbnN0IHsgcm93cyB9ID0gYXdhaXQgcXVlcnkoXG4gICAgICBgU0VMRUNUICogRlJPTSAke1RBQkxFUy5sZWRnZXJ9XG4gICAgICAgIFdIRVJFIHRzX2Vwb2NoX21zID49ICQxXG4gICAgICAgICAgQU5EICgkMjo6dGV4dCBJUyBOVUxMIE9SIHRvcGljID0gJDIpXG4gICAgIE9SREVSIEJZIHRzX2Vwb2NoX21zIEFTQ2AsXG4gICAgICBbc2luY2VNcywgdG9waWMgPz8gbnVsbF0sXG4gICAgKTtcbiAgICByZXR1cm4gcm93cztcbiAgfSBjYXRjaCAoZXJyOiBhbnkpIHtcbiAgICBpZiAoZXJyPy5jb2RlID09PSBcIjQyUDAxXCIpIHtcbiAgICAgIGNvbnNvbGUud2FybihcImdldEFwcExlZGdlclNpbmNlOiBsZWRnZXIgdGFibGUgbWlzc2luZyAob3BzLmFwcF9sZWRnZXIpLlwiKTtcbiAgICAgIHJldHVybiBbXTtcbiAgICB9XG4gICAgdGhyb3cgZXJyO1xuICB9XG59XG5cbi8qIOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgCBUcmFuc2ZlciBsZWRnZXIgaGVscGVycyDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIAgKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBhcHBlbmRUcmFuc2ZlckxlZGdlcihyb3c6IHtcbiAgYXBwX3Nlc3Npb25faWQ6IHN0cmluZztcbiAgY3ljbGVfdHM6IG51bWJlcjtcbiAgbGVnX3NlcTogbnVtYmVyO1xuICByb3V0ZV9pZD86IHN0cmluZyB8IG51bGw7XG4gIGludGVudF9pZD86IHN0cmluZyB8IG51bGw7XG4gIGZyb21fc3ltYm9sOiBzdHJpbmc7XG4gIHRvX3N5bWJvbDogc3RyaW5nO1xuICBxdHlfZnJvbTogbnVtYmVyO1xuICBxdHlfdG86IG51bWJlcjtcbiAgcHJpY2VfZnJvbV91c2R0OiBudW1iZXI7XG4gIHByaWNlX3RvX3VzZHQ6IG51bWJlcjtcbiAgZmVlX3VzZHQ/OiBudW1iZXI7XG4gIGV4ZWNfdHM6IG51bWJlcjtcbiAgdHhfaWQ/OiBzdHJpbmcgfCBudWxsO1xufSk6IFByb21pc2U8dm9pZD4ge1xuICBjb25zdCBxID0gYFxuICAgIElOU0VSVCBJTlRPICR7VEFCTEVTLnRyYW5zZmVyc30gKFxuICAgICAgYXBwX3Nlc3Npb25faWQsIGN5Y2xlX3RzLCBsZWdfc2VxLCByb3V0ZV9pZCwgaW50ZW50X2lkLFxuICAgICAgZnJvbV9zeW1ib2wsIHRvX3N5bWJvbCwgcXR5X2Zyb20sIHF0eV90byxcbiAgICAgIHByaWNlX2Zyb21fdXNkdCwgcHJpY2VfdG9fdXNkdCwgZmVlX3VzZHQsIGV4ZWNfdHMsIHR4X2lkXG4gICAgKVxuICAgIFZBTFVFUyAoXG4gICAgICAkMSwkMiwkMywkNCwkNSwkNiwkNywkOCwkOSwkMTAsJDExLENPQUxFU0NFKCQxMiwwKSwkMTMsJDE0XG4gICAgKVxuICAgIE9OIENPTkZMSUNUIChhcHBfc2Vzc2lvbl9pZCwgY3ljbGVfdHMsIGxlZ19zZXEpIERPIE5PVEhJTkdcbiAgYDtcbiAgdHJ5IHtcbiAgICBhd2FpdCBxdWVyeShxLCBbXG4gICAgICByb3cuYXBwX3Nlc3Npb25faWQsXG4gICAgICByb3cuY3ljbGVfdHMsXG4gICAgICByb3cubGVnX3NlcSxcbiAgICAgIHJvdy5yb3V0ZV9pZCA/PyBudWxsLFxuICAgICAgcm93LmludGVudF9pZCA/PyBudWxsLFxuICAgICAgcm93LmZyb21fc3ltYm9sLFxuICAgICAgcm93LnRvX3N5bWJvbCxcbiAgICAgIHJvdy5xdHlfZnJvbSxcbiAgICAgIHJvdy5xdHlfdG8sXG4gICAgICByb3cucHJpY2VfZnJvbV91c2R0LFxuICAgICAgcm93LnByaWNlX3RvX3VzZHQsXG4gICAgICByb3cuZmVlX3VzZHQgPz8gMCxcbiAgICAgIHJvdy5leGVjX3RzLFxuICAgICAgcm93LnR4X2lkID8/IG51bGwsXG4gICAgXSk7XG4gIH0gY2F0Y2ggKGVycjogYW55KSB7XG4gICAgaWYgKGVycj8uY29kZSA9PT0gXCI0MlAwMVwiKSB7XG4gICAgICBjb25zb2xlLndhcm4oXCJhcHBlbmRUcmFuc2ZlckxlZGdlcjogdHJhbnNmZXJfbGVkZ2VyIHRhYmxlIG1pc3NpbmcgKG9wcy50cmFuc2Zlcl9sZWRnZXIpLlwiKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdGhyb3cgZXJyO1xuICB9XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBsaXN0VHJhbnNmZXJMZWdzKFxuICBhcHBfc2Vzc2lvbl9pZDogc3RyaW5nLFxuICBvcHRzPzogeyBiZWZvcmU/OiBudW1iZXI7IGxpbWl0PzogbnVtYmVyIH0sXG4pIHtcbiAgY29uc3QgeyByb3dzIH0gPSBhd2FpdCBxdWVyeShcbiAgICBgU0VMRUNUICogRlJPTSAke1RBQkxFUy50cmFuc2ZlcnN9XG4gICAgICBXSEVSRSBhcHBfc2Vzc2lvbl9pZCA9ICQxXG4gICAgICAgIEFORCAoJDI6OmJpZ2ludCBJUyBOVUxMIE9SIGN5Y2xlX3RzIDwgJDIpXG4gICBPUkRFUiBCWSBjeWNsZV90cyBERVNDLCBsZWdfc2VxIERFU0NcbiAgICAgIExJTUlUICQzYCxcbiAgICBbYXBwX3Nlc3Npb25faWQsIG9wdHM/LmJlZm9yZSA/PyBudWxsLCBvcHRzPy5saW1pdCA/PyAyMDBdLFxuICApO1xuICByZXR1cm4gcm93cztcbn1cblxuZXhwb3J0IHR5cGUgeyBQb29sLCBQb29sQ2xpZW50LCBRdWVyeVJlc3VsdCwgUXVlcnlSZXN1bHRSb3cgfTtcbiJdLCJuYW1lcyI6WyJQb29sIiwiYXNCb29sIiwidiIsImZhbGxiYWNrIiwicyIsIlN0cmluZyIsInRyaW0iLCJ0b0xvd2VyQ2FzZSIsInVzZVVybCIsInByb2Nlc3MiLCJlbnYiLCJEQVRBQkFTRV9VUkwiLCJiYXNlQ29uZmlnIiwiY29ubmVjdGlvblN0cmluZyIsImhvc3QiLCJQR0hPU1QiLCJwb3J0IiwiTnVtYmVyIiwiUEdQT1JUIiwidXNlciIsIlBHVVNFUiIsInBhc3N3b3JkIiwiUEdQQVNTV09SRCIsImRhdGFiYXNlIiwiUEdEQVRBQkFTRSIsInBvb2xDb25maWciLCJtYXgiLCJEQl9QT09MX01BWCIsIlBHUE9PTF9NQVgiLCJpZGxlVGltZW91dE1pbGxpcyIsIkRCX0lETEVfTVMiLCJjb25uZWN0aW9uVGltZW91dE1pbGxpcyIsIkRCX0NPTk5fVElNRU9VVF9NUyIsInNzbCIsIkRCX1NTTCIsIlBHU1NMIiwicmVqZWN0VW5hdXRob3JpemVkIiwidW5kZWZpbmVkIiwiU0VTU0lPTl9TVEFURU1FTlRfVElNRU9VVCIsIkRCX1NUQVRFTUVOVF9USU1FT1VUX01TIiwiU0VTU0lPTl9JRExFX1RYX1RJTUVPVVQiLCJEQl9JRExFX1RYX1RJTUVPVVRfTVMiLCJTRVNTSU9OX1RaIiwiREJfVElNRVpPTkUiLCJyZXBsYWNlIiwiREVGQVVMVF9TRUFSQ0hfUEFUSCIsImpvaW4iLCJlbnN1cmVQb29sIiwiZ2xvYmFsIiwiX19jb3JlX3BnX3Bvb2xfXyIsInBvb2wiLCJvbiIsImNsaWVudCIsImJvb3RzdHJhcCIsInN0YXRlbWVudCIsInF1ZXJ5IiwiY2F0Y2giLCJnZXRQb29sIiwiZ2V0RGIiLCJ3aXRoQ2xpZW50IiwiZm4iLCJjb25uZWN0IiwicmVsZWFzZSIsInRleHQiLCJwYXJhbXMiLCJkYiIsInNlcnZlckRiIiwiVEFCTEVTIiwibWF0cmljZXMiLCJNQVRSSVhfVEFCTEUiLCJtYXRyaWNlc1N0YWdlIiwiTUFUUklYX1NUQUdFX1RBQkxFIiwibGVkZ2VyIiwiQVBQX0xFREdFUl9UQUJMRSIsInRyYW5zZmVycyIsIlRSQU5TRkVSX0xFREdFUl9UQUJMRSIsImFwcGVuZEFwcExlZGdlciIsImUiLCJzcWwiLCJ0b3BpYyIsImV2ZW50IiwicGF5bG9hZCIsInNlc3Npb25faWQiLCJpZGVtcG90ZW5jeV9rZXkiLCJ0c19lcG9jaF9tcyIsImVyciIsImNvZGUiLCJjb25zb2xlIiwid2FybiIsImdldEFwcExlZGdlclNpbmNlIiwic2luY2VNcyIsInJvd3MiLCJhcHBlbmRUcmFuc2ZlckxlZGdlciIsInJvdyIsInEiLCJhcHBfc2Vzc2lvbl9pZCIsImN5Y2xlX3RzIiwibGVnX3NlcSIsInJvdXRlX2lkIiwiaW50ZW50X2lkIiwiZnJvbV9zeW1ib2wiLCJ0b19zeW1ib2wiLCJxdHlfZnJvbSIsInF0eV90byIsInByaWNlX2Zyb21fdXNkdCIsInByaWNlX3RvX3VzZHQiLCJmZWVfdXNkdCIsImV4ZWNfdHMiLCJ0eF9pZCIsImxpc3RUcmFuc2ZlckxlZ3MiLCJvcHRzIiwiYmVmb3JlIiwibGltaXQiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./src/core/db/pool_server.ts\n");

/***/ }),

/***/ "(rsc)/./src/core/features/matrices/liveFromSources.ts":
/*!*******************************************************!*\
  !*** ./src/core/features/matrices/liveFromSources.ts ***!
  \*******************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   liveFromSources: () => (/* binding */ liveFromSources)\n/* harmony export */ });\n/* harmony import */ var _core_sources_binance__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @/core/sources/binance */ \"(rsc)/./src/core/sources/binance.ts\");\n// src/core/features/matrices/liveFromSources.ts\n// Build live benchmark & pct24h using YOUR binance.ts without changing it.\n// We pre-filter symbols with listSymbolsByQuote('USDT') so /24hr bulk never 400s.\n\nconst normCoins = (xs)=>{\n    const out = [];\n    const seen = new Set();\n    for (const x of xs){\n        const u = String(x || \"\").toUpperCase().trim();\n        if (!u || seen.has(u)) continue;\n        seen.add(u);\n        out.push(u);\n    }\n    if (!seen.has(\"USDT\")) out.push(\"USDT\");\n    return out;\n};\nconst makeGrid = (coins, fn)=>{\n    const out = {};\n    for (const b of coins){\n        out[b] = {};\n        for (const q of coins){\n            if (b === q) continue;\n            out[b][q] = fn(b, q);\n        }\n    }\n    return out;\n};\nasync function liveFromSources(requestedCoins) {\n    // normalize + ensure USDT present\n    const seed = normCoins(requestedCoins);\n    // Step 1: Build desired USDT symbols for seed\n    const desired = (0,_core_sources_binance__WEBPACK_IMPORTED_MODULE_0__.usdtSymbolsFor)(seed); // [\"BTCUSDT\",\"ETHUSDT\",...]\n    // Step 2: Ask Binance which USDT symbols actually exist (TRADING)\n    // Keeping this call here (read-only) guarantees no 400s later.\n    const tradableSet = new Set(await (0,_core_sources_binance__WEBPACK_IMPORTED_MODULE_0__.listSymbolsByQuote)(\"USDT\"));\n    // Step 3: Filter desired symbols down to the tradable set before calling bulk 24hr\n    const symbols = desired.filter((s)=>tradableSet.has(s));\n    // If nothing valid (unlikely), return a minimal payload to avoid 500s.\n    if (!symbols.length) {\n        const now = Date.now();\n        return {\n            ok: true,\n            coins: [\n                \"USDT\"\n            ],\n            matrices: {\n                benchmark: {\n                    ts: now,\n                    prevTs: null,\n                    values: {},\n                    flags: {\n                        source: \"binance:empty\"\n                    }\n                },\n                pct24h: {\n                    ts: now,\n                    prevTs: null,\n                    values: {},\n                    flags: {\n                        source: \"binance:empty\"\n                    }\n                }\n            }\n        };\n    }\n    // Step 4: Bulk fetch once using your helper (kept unchanged)\n    const arr = await (0,_core_sources_binance__WEBPACK_IMPORTED_MODULE_0__.fetch24hAll)(symbols);\n    const by = (0,_core_sources_binance__WEBPACK_IMPORTED_MODULE_0__.mapTickerBySymbol)(arr);\n    // Step 5: Build per-coin USDT price & pct24h\n    const price = {\n        USDT: 1\n    };\n    const pct = {\n        USDT: 0\n    }; // percent units\n    for (const sym of symbols){\n        // sym like \"BTCUSDT\" -> coin = \"BTC\"\n        const coin = sym.endsWith(\"USDT\") ? sym.slice(0, -4) : undefined;\n        if (!coin) continue;\n        const t = by[sym];\n        const last = t?.lastPrice != null ? Number(t.lastPrice) : Number(t?.weightedAvgPrice);\n        const pct24 = t?.priceChangePercent != null ? Number(t.priceChangePercent) : NaN;\n        if (Number.isFinite(last)) {\n            price[coin] = last; // coin in USDT\n            pct[coin] = Number.isFinite(pct24) ? pct24 : 0; // still in percent units\n        }\n    }\n    // Keep only coins we actually got a price for (+USDT)\n    const coins = [\n        \"USDT\",\n        ...Object.keys(price).filter((c)=>c !== \"USDT\")\n    ];\n    const now = Date.now();\n    // benchmark = price_b / price_q\n    const benchmark = {\n        ts: now,\n        prevTs: null,\n        values: makeGrid(coins, (b, q)=>{\n            const pb = price[b] ?? (b === \"USDT\" ? 1 : NaN);\n            const pq = price[q] ?? (q === \"USDT\" ? 1 : NaN);\n            if (!Number.isFinite(pb) || !Number.isFinite(pq) || pq === 0) return null;\n            return pb / pq;\n        }),\n        flags: {\n            source: \"binance:usdt-legs\"\n        }\n    };\n    // pct24h(pair) ~ ((1+rb)/(1+rq)) - 1, with rb/rq as DECIMALS from per-coin percent\n    const pct24h = {\n        ts: now,\n        prevTs: null,\n        values: makeGrid(coins, (b, q)=>{\n            const rb = b === \"USDT\" ? 0 : (pct[b] ?? NaN) / 100;\n            const rq = q === \"USDT\" ? 0 : (pct[q] ?? NaN) / 100;\n            if (!Number.isFinite(rb) || !Number.isFinite(rq)) return null;\n            const nb = 1 + rb, nq = 1 + rq;\n            if (nq === 0) return null;\n            return nb / nq - 1;\n        }),\n        flags: {\n            source: \"binance:usdt-legs\"\n        }\n    };\n    return {\n        ok: true,\n        coins,\n        matrices: {\n            benchmark,\n            pct24h\n        }\n    };\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvY29yZS9mZWF0dXJlcy9tYXRyaWNlcy9saXZlRnJvbVNvdXJjZXMudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBQSxnREFBZ0Q7QUFDaEQsMkVBQTJFO0FBQzNFLGtGQUFrRjtBQU9sRDtBQUtoQyxNQUFNSSxZQUFZLENBQUNDO0lBQ2pCLE1BQU1DLE1BQWdCLEVBQUU7SUFDeEIsTUFBTUMsT0FBTyxJQUFJQztJQUNqQixLQUFLLE1BQU1DLEtBQUtKLEdBQUk7UUFDbEIsTUFBTUssSUFBSUMsT0FBT0YsS0FBSyxJQUFJRyxXQUFXLEdBQUdDLElBQUk7UUFDNUMsSUFBSSxDQUFDSCxLQUFLSCxLQUFLTyxHQUFHLENBQUNKLElBQUk7UUFDdkJILEtBQUtRLEdBQUcsQ0FBQ0w7UUFBSUosSUFBSVUsSUFBSSxDQUFDTjtJQUN4QjtJQUNBLElBQUksQ0FBQ0gsS0FBS08sR0FBRyxDQUFDLFNBQVNSLElBQUlVLElBQUksQ0FBQztJQUNoQyxPQUFPVjtBQUNUO0FBRUEsTUFBTVcsV0FBVyxDQUEwQkMsT0FBaUJDO0lBQzFELE1BQU1iLE1BQWlCLENBQUM7SUFDeEIsS0FBSyxNQUFNYyxLQUFLRixNQUFPO1FBQ3JCWixHQUFHLENBQUNjLEVBQUUsR0FBRyxDQUFDO1FBQ1YsS0FBSyxNQUFNQyxLQUFLSCxNQUFPO1lBQ3JCLElBQUlFLE1BQU1DLEdBQUc7WUFDYmYsR0FBRyxDQUFDYyxFQUFFLENBQUNDLEVBQUUsR0FBR0YsR0FBR0MsR0FBR0M7UUFDcEI7SUFDRjtJQUNBLE9BQU9mO0FBQ1Q7QUFFTyxlQUFlZ0IsZ0JBQWdCQyxjQUF3QjtJQUM1RCxrQ0FBa0M7SUFDbEMsTUFBTUMsT0FBT3BCLFVBQVVtQjtJQUV2Qiw4Q0FBOEM7SUFDOUMsTUFBTUUsVUFBVXRCLHFFQUFjQSxDQUFDcUIsT0FBTyw0QkFBNEI7SUFFbEUsa0VBQWtFO0lBQ2xFLCtEQUErRDtJQUMvRCxNQUFNRSxjQUFjLElBQUlsQixJQUFJLE1BQU1SLHlFQUFrQkEsQ0FBQztJQUVyRCxt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UUFBUSxDQUFDTSxPQUFPLENBQUNYLE9BQU9LLFFBQVEsQ0FBQ08sS0FBSyxPQUFPO1lBQ3pELE1BQU1DLEtBQUssSUFBSUYsSUFBSUcsS0FBSyxJQUFJRjtZQUM1QixJQUFJRSxPQUFPLEdBQUcsT0FBTztZQUNyQixPQUFPLEtBQU1BLEtBQU07UUFDckI7UUFDQTlCLE9BQU87WUFBRUMsUUFBUTtRQUFvQjtJQUN2QztJQUVBLE9BQU87UUFDTFAsSUFBSTtRQUNKZjtRQUNBZ0IsVUFBVTtZQUFFQztZQUFXTTtRQUFPO0lBQ2hDO0FBQ0YiLCJzb3VyY2VzIjpbIkg6XFxVc2Vyc1xcR3VzXFxzb3VyY2VcXHJlcG9cXGR5bmFtaWNzXFxkeW5hbWljcy1iXFxjcnlwdG9waS1keW5hbWljc1xcc3JjXFxjb3JlXFxmZWF0dXJlc1xcbWF0cmljZXNcXGxpdmVGcm9tU291cmNlcy50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBzcmMvY29yZS9mZWF0dXJlcy9tYXRyaWNlcy9saXZlRnJvbVNvdXJjZXMudHNcclxuLy8gQnVpbGQgbGl2ZSBiZW5jaG1hcmsgJiBwY3QyNGggdXNpbmcgWU9VUiBiaW5hbmNlLnRzIHdpdGhvdXQgY2hhbmdpbmcgaXQuXHJcbi8vIFdlIHByZS1maWx0ZXIgc3ltYm9scyB3aXRoIGxpc3RTeW1ib2xzQnlRdW90ZSgnVVNEVCcpIHNvIC8yNGhyIGJ1bGsgbmV2ZXIgNDAwcy5cclxuXHJcbmltcG9ydCB7XHJcbiAgbGlzdFN5bWJvbHNCeVF1b3RlLFxyXG4gIGZldGNoMjRoQWxsLFxyXG4gIG1hcFRpY2tlckJ5U3ltYm9sLFxyXG4gIHVzZHRTeW1ib2xzRm9yLFxyXG59IGZyb20gXCJAL2NvcmUvc291cmNlcy9iaW5hbmNlXCI7XHJcblxyXG50eXBlIE1hdFZhbHVlcyA9IFJlY29yZDxzdHJpbmcsIFJlY29yZDxzdHJpbmcsIG51bWJlciB8IG51bGw+PjtcclxudHlwZSBNYXQgPSB7IHRzOiBudW1iZXI7IHByZXZUczogbnVtYmVyIHwgbnVsbDsgdmFsdWVzOiBNYXRWYWx1ZXM7IGZsYWdzPzogYW55IH07XHJcblxyXG5jb25zdCBub3JtQ29pbnMgPSAoeHM6IHN0cmluZ1tdKSA9PiB7XHJcbiAgY29uc3Qgb3V0OiBzdHJpbmdbXSA9IFtdO1xyXG4gIGNvbnN0IHNlZW4gPSBuZXcgU2V0PHN0cmluZz4oKTtcclxuICBmb3IgKGNvbnN0IHggb2YgeHMpIHtcclxuICAgIGNvbnN0IHUgPSBTdHJpbmcoeCB8fCBcIlwiKS50b1VwcGVyQ2FzZSgpLnRyaW0oKTtcclxuICAgIGlmICghdSB8fCBzZWVuLmhhcyh1KSkgY29udGludWU7XHJcbiAgICBzZWVuLmFkZCh1KTsgb3V0LnB1c2godSk7XHJcbiAgfVxyXG4gIGlmICghc2Vlbi5oYXMoXCJVU0RUXCIpKSBvdXQucHVzaChcIlVTRFRcIik7XHJcbiAgcmV0dXJuIG91dDtcclxufTtcclxuXHJcbmNvbnN0IG1ha2VHcmlkID0gPFQgZXh0ZW5kcyBudW1iZXIgfCBudWxsPihjb2luczogc3RyaW5nW10sIGZuOiAoYjpzdHJpbmcscTpzdHJpbmcpPT5UKTogTWF0VmFsdWVzID0+IHtcclxuICBjb25zdCBvdXQ6IE1hdFZhbHVlcyA9IHt9O1xyXG4gIGZvciAoY29uc3QgYiBvZiBjb2lucykge1xyXG4gICAgb3V0W2JdID0ge30gYXMgYW55O1xyXG4gICAgZm9yIChjb25zdCBxIG9mIGNvaW5zKSB7XHJcbiAgICAgIGlmIChiID09PSBxKSBjb250aW51ZTtcclxuICAgICAgb3V0W2JdW3FdID0gZm4oYiwgcSk7XHJcbiAgICB9XHJcbiAgfVxyXG4gIHJldHVybiBvdXQ7XHJcbn07XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gbGl2ZUZyb21Tb3VyY2VzKHJlcXVlc3RlZENvaW5zOiBzdHJpbmdbXSkge1xyXG4gIC8vIG5vcm1hbGl6ZSArIGVuc3VyZSBVU0RUIHByZXNlbnRcclxuICBjb25zdCBzZWVkID0gbm9ybUNvaW5zKHJlcXVlc3RlZENvaW5zKTtcclxuXHJcbiAgLy8gU3RlcCAxOiBCdWlsZCBkZXNpcmVkIFVTRFQgc3ltYm9scyBmb3Igc2VlZFxyXG4gIGNvbnN0IGRlc2lyZWQgPSB1c2R0U3ltYm9sc0ZvcihzZWVkKTsgLy8gW1wiQlRDVVNEVFwiLFwiRVRIVVNEVFwiLC4uLl1cclxuXHJcbiAgLy8gU3RlcCAyOiBBc2sgQmluYW5jZSB3aGljaCBVU0RUIHN5bWJvbHMgYWN0dWFsbHkgZXhpc3QgKFRSQURJTkcpXHJcbiAgLy8gS2VlcGluZyB0aGlzIGNhbGwgaGVyZSAocmVhZC1vbmx5KSBndWFyYW50ZWVzIG5vIDQwMHMgbGF0ZXIuXHJcbiAgY29uc3QgdHJhZGFibGVTZXQgPSBuZXcgU2V0KGF3YWl0IGxpc3RTeW1ib2xzQnlRdW90ZShcIlVTRFRcIikpO1xyXG5cclxuICAvLyBTdGVwIDM6IEZpbHRlciBkZXNpcmVkIHN5bWJvbHMgZG93biB0byB0aGUgdHJhZGFibGUgc2V0IGJlZm9yZSBjYWxsaW5nIGJ1bGsgMjRoclxuICBjb25zdCBzeW1ib2xzID0gZGVzaXJlZC5maWx0ZXIoKHMpID0+IHRyYWRhYmxlU2V0LmhhcyhzKSk7XG5cclxuICAvLyBJZiBub3RoaW5nIHZhbGlkICh1bmxpa2VseSksIHJldHVybiBhIG1pbmltYWwgcGF5bG9hZCB0byBhdm9pZCA1MDBzLlxyXG4gIGlmICghc3ltYm9scy5sZW5ndGgpIHtcclxuICAgIGNvbnN0IG5vdyA9IERhdGUubm93KCk7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICBvazogdHJ1ZSxcclxuICAgICAgY29pbnM6IFtcIlVTRFRcIl0sXHJcbiAgICAgIG1hdHJpY2VzOiB7XHJcbiAgICAgICAgYmVuY2htYXJrOiB7IHRzOiBub3csIHByZXZUczogbnVsbCwgdmFsdWVzOiB7fSwgZmxhZ3M6IHsgc291cmNlOiBcImJpbmFuY2U6ZW1wdHlcIiB9IH0sXHJcbiAgICAgICAgcGN0MjRoOiAgICB7IHRzOiBub3csIHByZXZUczogbnVsbCwgdmFsdWVzOiB7fSwgZmxhZ3M6IHsgc291cmNlOiBcImJpbmFuY2U6ZW1wdHlcIiB9IH0sXHJcbiAgICAgIH1cclxuICAgIH0gYXMgY29uc3Q7XHJcbiAgfVxyXG5cclxuICAvLyBTdGVwIDQ6IEJ1bGsgZmV0Y2ggb25jZSB1c2luZyB5b3VyIGhlbHBlciAoa2VwdCB1bmNoYW5nZWQpXHJcbiAgY29uc3QgYXJyID0gYXdhaXQgZmV0Y2gyNGhBbGwoc3ltYm9scyk7XHJcbiAgY29uc3QgYnkgID0gbWFwVGlja2VyQnlTeW1ib2woYXJyKTtcclxuXHJcbiAgLy8gU3RlcCA1OiBCdWlsZCBwZXItY29pbiBVU0RUIHByaWNlICYgcGN0MjRoXHJcbiAgY29uc3QgcHJpY2U6IFJlY29yZDxzdHJpbmcsIG51bWJlcj4gPSB7IFVTRFQ6IDEgfTtcclxuICBjb25zdCBwY3Q6ICAgUmVjb3JkPHN0cmluZywgbnVtYmVyPiA9IHsgVVNEVDogMCB9OyAvLyBwZXJjZW50IHVuaXRzXHJcblxyXG4gIGZvciAoY29uc3Qgc3ltIG9mIHN5bWJvbHMpIHtcclxuICAgIC8vIHN5bSBsaWtlIFwiQlRDVVNEVFwiIC0+IGNvaW4gPSBcIkJUQ1wiXHJcbiAgICBjb25zdCBjb2luID0gc3ltLmVuZHNXaXRoKFwiVVNEVFwiKSA/IHN5bS5zbGljZSgwLCAtNCkgOiB1bmRlZmluZWQ7XHJcbiAgICBpZiAoIWNvaW4pIGNvbnRpbnVlO1xyXG4gICAgY29uc3QgdCA9IGJ5W3N5bV07XHJcbiAgICBjb25zdCBsYXN0ID0gdD8ubGFzdFByaWNlICE9IG51bGwgPyBOdW1iZXIodC5sYXN0UHJpY2UpIDogTnVtYmVyKHQ/LndlaWdodGVkQXZnUHJpY2UpO1xyXG4gICAgY29uc3QgcGN0MjQgPSB0Py5wcmljZUNoYW5nZVBlcmNlbnQgIT0gbnVsbCA/IE51bWJlcih0LnByaWNlQ2hhbmdlUGVyY2VudCkgOiBOYU47XHJcblxyXG4gICAgaWYgKE51bWJlci5pc0Zpbml0ZShsYXN0KSkge1xyXG4gICAgICBwcmljZVtjb2luXSA9IGxhc3Q7IC8vIGNvaW4gaW4gVVNEVFxyXG4gICAgICBwY3RbY29pbl0gICA9IE51bWJlci5pc0Zpbml0ZShwY3QyNCkgPyBwY3QyNCA6IDA7IC8vIHN0aWxsIGluIHBlcmNlbnQgdW5pdHNcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8vIEtlZXAgb25seSBjb2lucyB3ZSBhY3R1YWxseSBnb3QgYSBwcmljZSBmb3IgKCtVU0RUKVxyXG4gIGNvbnN0IGNvaW5zID0gW1wiVVNEVFwiLCAuLi5PYmplY3Qua2V5cyhwcmljZSkuZmlsdGVyKGMgPT4gYyAhPT0gXCJVU0RUXCIpXTtcclxuXHJcbiAgY29uc3Qgbm93ID0gRGF0ZS5ub3coKTtcclxuXHJcbiAgLy8gYmVuY2htYXJrID0gcHJpY2VfYiAvIHByaWNlX3FcclxuICBjb25zdCBiZW5jaG1hcms6IE1hdCA9IHtcclxuICAgIHRzOiBub3csXHJcbiAgICBwcmV2VHM6IG51bGwsXHJcbiAgICB2YWx1ZXM6IG1ha2VHcmlkKGNvaW5zLCAoYiwgcSkgPT4ge1xyXG4gICAgICBjb25zdCBwYiA9IHByaWNlW2JdID8/IChiID09PSBcIlVTRFRcIiA/IDEgOiBOYU4pO1xyXG4gICAgICBjb25zdCBwcSA9IHByaWNlW3FdID8/IChxID09PSBcIlVTRFRcIiA/IDEgOiBOYU4pO1xyXG4gICAgICBpZiAoIU51bWJlci5pc0Zpbml0ZShwYikgfHwgIU51bWJlci5pc0Zpbml0ZShwcSkgfHwgcHEgPT09IDApIHJldHVybiBudWxsO1xyXG4gICAgICByZXR1cm4gcGIgLyBwcTtcclxuICAgIH0pLFxyXG4gICAgZmxhZ3M6IHsgc291cmNlOiBcImJpbmFuY2U6dXNkdC1sZWdzXCIgfSxcclxuICB9O1xyXG5cclxuICAvLyBwY3QyNGgocGFpcikgfiAoKDErcmIpLygxK3JxKSkgLSAxLCB3aXRoIHJiL3JxIGFzIERFQ0lNQUxTIGZyb20gcGVyLWNvaW4gcGVyY2VudFxyXG4gIGNvbnN0IHBjdDI0aDogTWF0ID0ge1xyXG4gICAgdHM6IG5vdyxcclxuICAgIHByZXZUczogbnVsbCxcclxuICAgIHZhbHVlczogbWFrZUdyaWQoY29pbnMsIChiLCBxKSA9PiB7XHJcbiAgICAgIGNvbnN0IHJiID0gYiA9PT0gXCJVU0RUXCIgPyAwIDogKHBjdFtiXSA/PyBOYU4pIC8gMTAwO1xyXG4gICAgICBjb25zdCBycSA9IHEgPT09IFwiVVNEVFwiID8gMCA6IChwY3RbcV0gPz8gTmFOKSAvIDEwMDtcclxuICAgICAgaWYgKCFOdW1iZXIuaXNGaW5pdGUocmIpIHx8ICFOdW1iZXIuaXNGaW5pdGUocnEpKSByZXR1cm4gbnVsbDtcclxuICAgICAgY29uc3QgbmIgPSAxICsgcmIsIG5xID0gMSArIHJxO1xyXG4gICAgICBpZiAobnEgPT09IDApIHJldHVybiBudWxsO1xyXG4gICAgICByZXR1cm4gKG5iIC8gbnEpIC0gMTtcclxuICAgIH0pLFxyXG4gICAgZmxhZ3M6IHsgc291cmNlOiBcImJpbmFuY2U6dXNkdC1sZWdzXCIgfSxcclxuICB9O1xyXG5cclxuICByZXR1cm4ge1xyXG4gICAgb2s6IHRydWUsXHJcbiAgICBjb2lucyxcclxuICAgIG1hdHJpY2VzOiB7IGJlbmNobWFyaywgcGN0MjRoIH0sXHJcbiAgfSBhcyBjb25zdDtcclxufVxyXG5cclxuIl0sIm5hbWVzIjpbImxpc3RTeW1ib2xzQnlRdW90ZSIsImZldGNoMjRoQWxsIiwibWFwVGlja2VyQnlTeW1ib2wiLCJ1c2R0U3ltYm9sc0ZvciIsIm5vcm1Db2lucyIsInhzIiwib3V0Iiwic2VlbiIsIlNldCIsIngiLCJ1IiwiU3RyaW5nIiwidG9VcHBlckNhc2UiLCJ0cmltIiwiaGFzIiwiYWRkIiwicHVzaCIsIm1ha2VHcmlkIiwiY29pbnMiLCJmbiIsImIiLCJxIiwibGl2ZUZyb21Tb3VyY2VzIiwicmVxdWVzdGVkQ29pbnMiLCJzZWVkIiwiZGVzaXJlZCIsInRyYWRhYmxlU2V0Iiwic3ltYm9scyIsImZpbHRlciIsInMiLCJsZW5ndGgiLCJub3ciLCJEYXRlIiwib2siLCJtYXRyaWNlcyIsImJlbmNobWFyayIsInRzIiwicHJldlRzIiwidmFsdWVzIiwiZmxhZ3MiLCJzb3VyY2UiLCJwY3QyNGgiLCJhcnIiLCJieSIsInByaWNlIiwiVVNEVCIsInBjdCIsInN5bSIsImNvaW4iLCJlbmRzV2l0aCIsInNsaWNlIiwidW5kZWZpbmVkIiwidCIsImxhc3QiLCJsYXN0UHJpY2UiLCJOdW1iZXIiLCJ3ZWlnaHRlZEF2Z1ByaWNlIiwicGN0MjQiLCJwcmljZUNoYW5nZVBlcmNlbnQiLCJOYU4iLCJpc0Zpbml0ZSIsIk9iamVjdCIsImtleXMiLCJjIiwicGIiLCJwcSIsInJiIiwicnEiLCJuYiIsIm5xIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./src/core/features/matrices/liveFromSources.ts\n");

/***/ }),

/***/ "(rsc)/./src/core/features/matrices/opening.ts":
/*!***********************************************!*\
  !*** ./src/core/features/matrices/opening.ts ***!
  \***********************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   fetchOpeningGridFromView: () => (/* binding */ fetchOpeningGridFromView),\n/* harmony export */   getOpeningPairValue: () => (/* binding */ getOpeningPairValue)\n/* harmony export */ });\n/* harmony import */ var _core_db_db__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @/core/db/db */ \"(rsc)/./src/core/db/db.ts\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_core_db_db__WEBPACK_IMPORTED_MODULE_0__]);\n_core_db_db__WEBPACK_IMPORTED_MODULE_0__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n// src/core/features/matrices/opening.ts\n// Opening grid helper backed by market.klines (Binance-ingested data).\n\nconst makeGrid = (n)=>Array.from({\n        length: n\n    }, ()=>Array(n).fill(null));\nconst DEFAULT_WINDOW = \"1h\";\n// Optional helper: pull opening timestamp from strategy helper when available.\nasync function resolveOpeningTs(appSessionId, window) {\n    try {\n        const { rows } = await _core_db_db__WEBPACK_IMPORTED_MODULE_0__.db.query(`select ts_ms from get_session_opening_ts($1::text, $2::text) limit 1`, [\n            appSessionId ?? null,\n            window\n        ]);\n        if (rows?.[0]?.ts_ms) return Number(rows[0].ts_ms);\n    } catch  {\n    // helper may not exist; swallow.\n    }\n    return null;\n}\nasync function fetchOpeningGridFromView(args) {\n    const coins = Array.from(new Set(args.coins.map((c)=>c.toUpperCase())));\n    const n = coins.length;\n    const windowLabel = (args.window ?? DEFAULT_WINDOW).toLowerCase();\n    let openingTs = args.openingTs ?? null;\n    if (!openingTs) {\n        openingTs = await resolveOpeningTs(args.appSessionId ?? null, windowLabel);\n    }\n    const grid = makeGrid(n);\n    const pairSymbols = [];\n    const pairIndex = new Map();\n    for(let i = 0; i < n; i++){\n        for(let j = 0; j < n; j++){\n            if (i === j) continue;\n            const symbol = `${coins[i]}${coins[j]}`;\n            pairSymbols.push(symbol);\n            pairIndex.set(symbol, {\n                i,\n                j\n            });\n        }\n    }\n    if (!pairSymbols.length) {\n        return {\n            ts: openingTs ?? 0,\n            grid\n        };\n    }\n    const startDate = openingTs != null ? new Date(openingTs) : null;\n    const { rows } = await _core_db_db__WEBPACK_IMPORTED_MODULE_0__.db.query(`\n    SELECT symbol, close_price, close_time\n      FROM market.klines\n     WHERE symbol = ANY($1::text[])\n       AND window_label = $2\n       AND ($3::timestamptz IS NULL OR close_time >= $3::timestamptz)\n  ORDER BY symbol, close_time ASC\n    `, [\n        pairSymbols,\n        windowLabel,\n        startDate\n    ]);\n    const seen = new Set();\n    let effectiveTs = openingTs ?? 0;\n    for (const row of rows){\n        const symbol = String(row.symbol ?? \"\").toUpperCase();\n        if (!symbol || seen.has(symbol)) continue;\n        const idx = pairIndex.get(symbol);\n        if (!idx) continue;\n        const price = Number(row.close_price);\n        if (!Number.isFinite(price)) continue;\n        grid[idx.i][idx.j] = price;\n        seen.add(symbol);\n        const tsMs = Date.parse(row.close_time);\n        if (Number.isFinite(tsMs) && tsMs > effectiveTs) {\n            effectiveTs = tsMs;\n        }\n    }\n    // Derive missing entries from inverse if available.\n    for(let i = 0; i < n; i++){\n        for(let j = 0; j < n; j++){\n            if (i === j) continue;\n            if (grid[i][j] != null) continue;\n            const inverse = grid[j][i];\n            if (inverse != null && inverse !== 0) {\n                grid[i][j] = 1 / inverse;\n            }\n        }\n    }\n    return {\n        ts: effectiveTs,\n        grid\n    };\n}\nasync function getOpeningPairValue(args) {\n    const { base, quote } = args;\n    const { grid, ts } = await fetchOpeningGridFromView({\n        coins: [\n            base.toUpperCase(),\n            quote.toUpperCase()\n        ],\n        quote: quote.toUpperCase(),\n        appSessionId: args.appSessionId ?? null,\n        window: args.window ?? DEFAULT_WINDOW,\n        openingTs: args.openingTs\n    });\n    return {\n        ts,\n        price: grid?.[0]?.[1] ?? null\n    };\n}\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvY29yZS9mZWF0dXJlcy9tYXRyaWNlcy9vcGVuaW5nLnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7OztBQUFBLHdDQUF3QztBQUN4Qyx1RUFBdUU7QUFFckM7QUFXbEMsTUFBTUMsV0FBVyxDQUFDQyxJQUNoQkMsTUFBTUMsSUFBSSxDQUFDO1FBQUVDLFFBQVFIO0lBQUUsR0FBRyxJQUFNQyxNQUFNRCxHQUFHSSxJQUFJLENBQUM7QUFFaEQsTUFBTUMsaUJBQWlCO0FBRXZCLCtFQUErRTtBQUMvRSxlQUFlQyxpQkFDYkMsWUFBdUMsRUFDdkNDLE1BQWM7SUFFZCxJQUFJO1FBQ0YsTUFBTSxFQUFFQyxJQUFJLEVBQUUsR0FBRyxNQUFNWCwyQ0FBRUEsQ0FBQ1ksS0FBSyxDQUM3QixDQUFDLG9FQUFvRSxDQUFDLEVBQ3RFO1lBQUNILGdCQUFnQjtZQUFNQztTQUFPO1FBRWhDLElBQUlDLE1BQU0sQ0FBQyxFQUFFLEVBQUVFLE9BQU8sT0FBT0MsT0FBT0gsSUFBSSxDQUFDLEVBQUUsQ0FBQ0UsS0FBSztJQUNuRCxFQUFFLE9BQU07SUFDTixpQ0FBaUM7SUFDbkM7SUFDQSxPQUFPO0FBQ1Q7QUFFTyxlQUFlRSx5QkFDcEJDLElBQWlCO0lBRWpCLE1BQU1DLFFBQVFkLE1BQU1DLElBQUksQ0FBQyxJQUFJYyxJQUFJRixLQUFLQyxLQUFLLENBQUNFLEdBQUcsQ0FBQyxDQUFDQyxJQUFNQSxFQUFFQyxXQUFXO0lBQ3BFLE1BQU1uQixJQUFJZSxNQUFNWixNQUFNO0lBQ3RCLE1BQU1pQixjQUFjLENBQUNOLEtBQUtOLE1BQU0sSUFBSUgsY0FBYSxFQUFHZ0IsV0FBVztJQUUvRCxJQUFJQyxZQUFZUixLQUFLUSxTQUFTLElBQUk7SUFDbEMsSUFBSSxDQUFDQSxXQUFXO1FBQ2RBLFlBQVksTUFBTWhCLGlCQUFpQlEsS0FBS1AsWUFBWSxJQUFJLE1BQU1hO0lBQ2hFO0lBRUEsTUFBTUcsT0FBT3hCLFNBQVNDO0lBQ3RCLE1BQU13QixjQUF3QixFQUFFO0lBQ2hD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c291cmNlXFxyZXBvXFxkeW5hbWljc1xcZHluYW1pY3MtYlxcY3J5cHRvcGktZHluYW1pY3NcXHNyY1xcY29yZVxcZmVhdHVyZXNcXG1hdHJpY2VzXFxvcGVuaW5nLnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIHNyYy9jb3JlL2ZlYXR1cmVzL21hdHJpY2VzL29wZW5pbmcudHNcbi8vIE9wZW5pbmcgZ3JpZCBoZWxwZXIgYmFja2VkIGJ5IG1hcmtldC5rbGluZXMgKEJpbmFuY2UtaW5nZXN0ZWQgZGF0YSkuXG5cbmltcG9ydCB7IGRiIH0gZnJvbSBcIkAvY29yZS9kYi9kYlwiO1xuXG5leHBvcnQgdHlwZSBPcGVuaW5nQXJncyA9IHtcbiAgY29pbnM6IHN0cmluZ1tdOyAgICAgICAgICAgLy8gdXBwZXJjYXNlIGNvaW4gdW5pdmVyc2VcbiAgcXVvdGU/OiBzdHJpbmc7ICAgICAgICAgICAgLy8gZGVmYXVsdCBcIlVTRFRcIlxuICBhcHBTZXNzaW9uSWQ/OiBzdHJpbmcgfCBudWxsO1xuICB3aW5kb3c/OiBzdHJpbmc7ICAgICAgICAgICAvLyBlLmcuIFwiMWhcIlxuICBvcGVuaW5nVHM/OiBudW1iZXI7ICAgICAgICAvLyBvcHRpb25hbCBvdmVycmlkZSAobXMpXG59O1xuXG50eXBlIEdyaWQgPSAobnVtYmVyIHwgbnVsbClbXVtdO1xuY29uc3QgbWFrZUdyaWQgPSAobjogbnVtYmVyKSA9PlxuICBBcnJheS5mcm9tKHsgbGVuZ3RoOiBuIH0sICgpID0+IEFycmF5KG4pLmZpbGwobnVsbCBhcyBudW1iZXIgfCBudWxsKSk7XG5cbmNvbnN0IERFRkFVTFRfV0lORE9XID0gXCIxaFwiO1xuXG4vLyBPcHRpb25hbCBoZWxwZXI6IHB1bGwgb3BlbmluZyB0aW1lc3RhbXAgZnJvbSBzdHJhdGVneSBoZWxwZXIgd2hlbiBhdmFpbGFibGUuXG5hc3luYyBmdW5jdGlvbiByZXNvbHZlT3BlbmluZ1RzKFxuICBhcHBTZXNzaW9uSWQ6IHN0cmluZyB8IG51bGwgfCB1bmRlZmluZWQsXG4gIHdpbmRvdzogc3RyaW5nXG4pOiBQcm9taXNlPG51bWJlciB8IG51bGw+IHtcbiAgdHJ5IHtcbiAgICBjb25zdCB7IHJvd3MgfSA9IGF3YWl0IGRiLnF1ZXJ5PHsgdHNfbXM6IHN0cmluZyB9PihcbiAgICAgIGBzZWxlY3QgdHNfbXMgZnJvbSBnZXRfc2Vzc2lvbl9vcGVuaW5nX3RzKCQxOjp0ZXh0LCAkMjo6dGV4dCkgbGltaXQgMWAsXG4gICAgICBbYXBwU2Vzc2lvbklkID8/IG51bGwsIHdpbmRvd11cbiAgICApO1xuICAgIGlmIChyb3dzPy5bMF0/LnRzX21zKSByZXR1cm4gTnVtYmVyKHJvd3NbMF0udHNfbXMpO1xuICB9IGNhdGNoIHtcbiAgICAvLyBoZWxwZXIgbWF5IG5vdCBleGlzdDsgc3dhbGxvdy5cbiAgfVxuICByZXR1cm4gbnVsbDtcbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGZldGNoT3BlbmluZ0dyaWRGcm9tVmlldyhcbiAgYXJnczogT3BlbmluZ0FyZ3Ncbik6IFByb21pc2U8eyB0czogbnVtYmVyOyBncmlkOiBHcmlkIH0+IHtcbiAgY29uc3QgY29pbnMgPSBBcnJheS5mcm9tKG5ldyBTZXQoYXJncy5jb2lucy5tYXAoKGMpID0+IGMudG9VcHBlckNhc2UoKSkpKTtcbiAgY29uc3QgbiA9IGNvaW5zLmxlbmd0aDtcbiAgY29uc3Qgd2luZG93TGFiZWwgPSAoYXJncy53aW5kb3cgPz8gREVGQVVMVF9XSU5ET1cpLnRvTG93ZXJDYXNlKCk7XG5cbiAgbGV0IG9wZW5pbmdUcyA9IGFyZ3Mub3BlbmluZ1RzID8/IG51bGw7XG4gIGlmICghb3BlbmluZ1RzKSB7XG4gICAgb3BlbmluZ1RzID0gYXdhaXQgcmVzb2x2ZU9wZW5pbmdUcyhhcmdzLmFwcFNlc3Npb25JZCA/PyBudWxsLCB3aW5kb3dMYWJlbCk7XG4gIH1cblxuICBjb25zdCBncmlkID0gbWFrZUdyaWQobik7XG4gIGNvbnN0IHBhaXJTeW1ib2xzOiBzdHJpbmdbXSA9IFtdO1xuICBjb25zdCBwYWlySW5kZXggPSBuZXcgTWFwPHN0cmluZywgeyBpOiBudW1iZXI7IGo6IG51bWJlciB9PigpO1xuXG4gIGZvciAobGV0IGkgPSAwOyBpIDwgbjsgaSsrKSB7XG4gICAgZm9yIChsZXQgaiA9IDA7IGogPCBuOyBqKyspIHtcbiAgICAgIGlmIChpID09PSBqKSBjb250aW51ZTtcbiAgICAgIGNvbnN0IHN5bWJvbCA9IGAke2NvaW5zW2ldfSR7Y29pbnNbal19YDtcbiAgICAgIHBhaXJTeW1ib2xzLnB1c2goc3ltYm9sKTtcbiAgICAgIHBhaXJJbmRleC5zZXQoc3ltYm9sLCB7IGksIGogfSk7XG4gICAgfVxuICB9XG5cbiAgaWYgKCFwYWlyU3ltYm9scy5sZW5ndGgpIHtcbiAgICByZXR1cm4geyB0czogb3BlbmluZ1RzID8/IDAsIGdyaWQgfTtcbiAgfVxuXG4gIGNvbnN0IHN0YXJ0RGF0ZSA9IG9wZW5pbmdUcyAhPSBudWxsID8gbmV3IERhdGUob3BlbmluZ1RzKSA6IG51bGw7XG5cbiAgY29uc3QgeyByb3dzIH0gPSBhd2FpdCBkYi5xdWVyeTx7XG4gICAgc3ltYm9sOiBzdHJpbmc7XG4gICAgY2xvc2VfcHJpY2U6IHN0cmluZztcbiAgICBjbG9zZV90aW1lOiBzdHJpbmc7XG4gIH0+KFxuICAgIGBcbiAgICBTRUxFQ1Qgc3ltYm9sLCBjbG9zZV9wcmljZSwgY2xvc2VfdGltZVxuICAgICAgRlJPTSBtYXJrZXQua2xpbmVzXG4gICAgIFdIRVJFIHN5bWJvbCA9IEFOWSgkMTo6dGV4dFtdKVxuICAgICAgIEFORCB3aW5kb3dfbGFiZWwgPSAkMlxuICAgICAgIEFORCAoJDM6OnRpbWVzdGFtcHR6IElTIE5VTEwgT1IgY2xvc2VfdGltZSA+PSAkMzo6dGltZXN0YW1wdHopXG4gIE9SREVSIEJZIHN5bWJvbCwgY2xvc2VfdGltZSBBU0NcbiAgICBgLFxuICAgIFtwYWlyU3ltYm9scywgd2luZG93TGFiZWwsIHN0YXJ0RGF0ZV1cbiAgKTtcblxuICBjb25zdCBzZWVuID0gbmV3IFNldDxzdHJpbmc+KCk7XG4gIGxldCBlZmZlY3RpdmVUcyA9IG9wZW5pbmdUcyA/PyAwO1xuXG4gIGZvciAoY29uc3Qgcm93IG9mIHJvd3MpIHtcbiAgICBjb25zdCBzeW1ib2wgPSBTdHJpbmcocm93LnN5bWJvbCA/PyBcIlwiKS50b1VwcGVyQ2FzZSgpO1xuICAgIGlmICghc3ltYm9sIHx8IHNlZW4uaGFzKHN5bWJvbCkpIGNvbnRpbnVlO1xuICAgIGNvbnN0IGlkeCA9IHBhaXJJbmRleC5nZXQoc3ltYm9sKTtcbiAgICBpZiAoIWlkeCkgY29udGludWU7XG5cbiAgICBjb25zdCBwcmljZSA9IE51bWJlcihyb3cuY2xvc2VfcHJpY2UpO1xuICAgIGlmICghTnVtYmVyLmlzRmluaXRlKHByaWNlKSkgY29udGludWU7XG5cbiAgICBncmlkW2lkeC5pXVtpZHgual0gPSBwcmljZTtcbiAgICBzZWVuLmFkZChzeW1ib2wpO1xuXG4gICAgY29uc3QgdHNNcyA9IERhdGUucGFyc2Uocm93LmNsb3NlX3RpbWUpO1xuICAgIGlmIChOdW1iZXIuaXNGaW5pdGUodHNNcykgJiYgdHNNcyA+IGVmZmVjdGl2ZVRzKSB7XG4gICAgICBlZmZlY3RpdmVUcyA9IHRzTXM7XG4gICAgfVxuICB9XG5cbiAgLy8gRGVyaXZlIG1pc3NpbmcgZW50cmllcyBmcm9tIGludmVyc2UgaWYgYXZhaWxhYmxlLlxuICBmb3IgKGxldCBpID0gMDsgaSA8IG47IGkrKykge1xuICAgIGZvciAobGV0IGogPSAwOyBqIDwgbjsgaisrKSB7XG4gICAgICBpZiAoaSA9PT0gaikgY29udGludWU7XG4gICAgICBpZiAoZ3JpZFtpXVtqXSAhPSBudWxsKSBjb250aW51ZTtcbiAgICAgIGNvbnN0IGludmVyc2UgPSBncmlkW2pdW2ldO1xuICAgICAgaWYgKGludmVyc2UgIT0gbnVsbCAmJiBpbnZlcnNlICE9PSAwKSB7XG4gICAgICAgIGdyaWRbaV1bal0gPSAxIC8gaW52ZXJzZTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICByZXR1cm4geyB0czogZWZmZWN0aXZlVHMsIGdyaWQgfTtcbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldE9wZW5pbmdQYWlyVmFsdWUoYXJnczoge1xuICBiYXNlOiBzdHJpbmc7XG4gIHF1b3RlOiBzdHJpbmc7XG4gIGFwcFNlc3Npb25JZD86IHN0cmluZyB8IG51bGw7XG4gIHdpbmRvdz86IHN0cmluZztcbiAgb3BlbmluZ1RzPzogbnVtYmVyO1xufSk6IFByb21pc2U8eyB0czogbnVtYmVyIHwgbnVsbDsgcHJpY2U6IG51bWJlciB8IG51bGwgfT4ge1xuICBjb25zdCB7IGJhc2UsIHF1b3RlIH0gPSBhcmdzO1xuICBjb25zdCB7IGdyaWQsIHRzIH0gPSBhd2FpdCBmZXRjaE9wZW5pbmdHcmlkRnJvbVZpZXcoe1xuICAgIGNvaW5zOiBbYmFzZS50b1VwcGVyQ2FzZSgpLCBxdW90ZS50b1VwcGVyQ2FzZSgpXSxcbiAgICBxdW90ZTogcXVvdGUudG9VcHBlckNhc2UoKSxcbiAgICBhcHBTZXNzaW9uSWQ6IGFyZ3MuYXBwU2Vzc2lvbklkID8/IG51bGwsXG4gICAgd2luZG93OiBhcmdzLndpbmRvdyA/PyBERUZBVUxUX1dJTkRPVyxcbiAgICBvcGVuaW5nVHM6IGFyZ3Mub3BlbmluZ1RzLFxuICB9KTtcbiAgcmV0dXJuIHsgdHMsIHByaWNlOiBncmlkPy5bMF0/LlsxXSA/PyBudWxsIH07XG59XG4iXSwibmFtZXMiOlsiZGIiLCJtYWtlR3JpZCIsIm4iLCJBcnJheSIsImZyb20iLCJsZW5ndGgiLCJmaWxsIiwiREVGQVVMVF9XSU5ET1ciLCJyZXNvbHZlT3BlbmluZ1RzIiwiYXBwU2Vzc2lvbklkIiwid2luZG93Iiwicm93cyIsInF1ZXJ5IiwidHNfbXMiLCJOdW1iZXIiLCJmZXRjaE9wZW5pbmdHcmlkRnJvbVZpZXciLCJhcmdzIiwiY29pbnMiLCJTZXQiLCJtYXAiLCJjIiwidG9VcHBlckNhc2UiLCJ3aW5kb3dMYWJlbCIsInRvTG93ZXJDYXNlIiwib3BlbmluZ1RzIiwiZ3JpZCIsInBhaXJTeW1ib2xzIiwicGFpckluZGV4IiwiTWFwIiwiaSIsImoiLCJzeW1ib2wiLCJwdXNoIiwic2V0IiwidHMiLCJzdGFydERhdGUiLCJEYXRlIiwic2VlbiIsImVmZmVjdGl2ZVRzIiwicm93IiwiU3RyaW5nIiwiaGFzIiwiaWR4IiwiZ2V0IiwicHJpY2UiLCJjbG9zZV9wcmljZSIsImlzRmluaXRlIiwiYWRkIiwidHNNcyIsInBhcnNlIiwiY2xvc2VfdGltZSIsImludmVyc2UiLCJnZXRPcGVuaW5nUGFpclZhbHVlIiwiYmFzZSIsInF1b3RlIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./src/core/features/matrices/opening.ts\n");

/***/ }),

/***/ "(rsc)/./src/core/maths/math.ts":
/*!********************************!*\
  !*** ./src/core/maths/math.ts ***!
  \********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   computeFromDbAndLive: () => (/* binding */ computeFromDbAndLive),\n/* harmony export */   computeRefBlock: () => (/* binding */ computeRefBlock),\n/* harmony export */   configureBenchmarkProviders: () => (/* binding */ configureBenchmarkProviders),\n/* harmony export */   newGrid: () => (/* binding */ newGrid)\n/* harmony export */ });\n// math.ts - core grid math for Matrices (DB + Live fusion)\n// Uses providers injected by route.ts (incl. opening.ts) to compute:\n//  id_pct, pct_drv, pct_ref, ref, delta\n/** Simple typed newGrid helper. */ function newGrid(n, fill) {\n    return Array.from({\n        length: n\n    }, ()=>Array.from({\n            length: n\n        }, ()=>fill));\n}\nlet PROV = null;\n/** Called by route.ts to inject DB providers (no global imports here). */ function configureBenchmarkProviders(p) {\n    PROV = p;\n}\nconst safeDiv = (num, den)=>{\n    if (num == null || den == null) return null;\n    if (!Number.isFinite(num) || !Number.isFinite(den) || Math.abs(den) < 1e-300) return null;\n    return num / den;\n};\n/** Reference block (pct_ref + ref) */ function computeRefBlock(args) {\n    const { benchmarkNew, id_pct, refValue } = args;\n    // pct_ref = (bm_new - bm_open)/bm_open\n    const pct_ref = refValue == null ? null : safeDiv(benchmarkNew == null ? null : benchmarkNew - refValue, refValue);\n    // ref = (id_pct + 1) * pct_ref\n    const ref = pct_ref == null ? null : (id_pct == null ? 1 : 1 + id_pct) * pct_ref;\n    return {\n        pct_ref,\n        ref\n    };\n}\n/**\r\n * Main derivation using:\r\n *  - live benchmark grid (now)\r\n *  - prev(benchmark) and prev(id_pct) from DB\r\n *  - opening(first-of-day/session) reference grid from DB (via opening.ts)\r\n *\r\n * Formulas:\r\n *  id_pct  = (bm_new - bm_prev)/bm_prev\r\n *  pct_drv = id_pct_new - id_pct_old\r\n *  pct_ref = (bm_new - bm_open)/bm_open\r\n *  ref     = (id_pct + 1) * pct_ref\r\n *  delta   = bm_new - bm_open * (1 + ref)\r\n */ async function computeFromDbAndLive(input) {\n    if (!PROV) throw new Error(\"Providers not configured. Call configureBenchmarkProviders(...) first.\");\n    const { coins, nowTs, liveBenchmark } = input;\n    const n = coins.length;\n    const id_pct = newGrid(n, null);\n    const pct_drv = newGrid(n, null);\n    const pct_ref = newGrid(n, null);\n    const ref = newGrid(n, null);\n    const delta = newGrid(n, null);\n    // 1) Opening grid (persisted opening from v_dyn_matrices via opening.ts)\n    const opening = await PROV.fetchOpeningGrid(coins, nowTs);\n    const openGrid = opening.grid;\n    // 2) prev(benchmark) and prev(id_pct) per pair\n    for(let i = 0; i < n; i++){\n        const bi = coins[i];\n        for(let j = 0; j < n; j++){\n            if (i === j) continue;\n            const qj = coins[j];\n            const bmNow = liveBenchmark[i][j];\n            // id_pct = (bm_new - bm_prev)/bm_prev\n            const bmPrev = await PROV.getPrev(\"benchmark\", bi, qj, nowTs);\n            const idNow = bmPrev == null ? null : safeDiv(bmNow == null ? null : bmNow - bmPrev, bmPrev);\n            id_pct[i][j] = idNow;\n            // pct_drv = id_pct_new - id_pct_old\n            const prevId = await PROV.getPrev(\"id_pct\", bi, qj, nowTs);\n            pct_drv[i][j] = idNow == null || prevId == null || !Number.isFinite(prevId) ? null : idNow - Number(prevId);\n            // pct_ref/ref with persisted opening\n            const openVal = openGrid[i][j];\n            const { pct_ref: pr, ref: r } = computeRefBlock({\n                benchmarkNew: bmNow,\n                id_pct: idNow,\n                refValue: openVal\n            });\n            pct_ref[i][j] = pr;\n            ref[i][j] = r;\n            // delta = bm_new - bm_open * (1 + ref)\n            delta[i][j] = bmNow == null || openVal == null || r == null ? null : bmNow - openVal * (1 + r);\n        }\n    }\n    return {\n        id_pct,\n        pct_drv,\n        pct_ref,\n        ref,\n        delta\n    };\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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Qy9CLE9BQU9DLFFBQVEsQ0FBQzhCLFVBQ2pELE9BQ0NELFFBQVE5QixPQUFPK0I7WUFFdEIscUNBQXFDO1lBQ3JDLE1BQU1DLFVBQVVYLFFBQVEsQ0FBQ0UsRUFBRSxDQUFDRSxFQUFFO1lBQzlCLE1BQU0sRUFBRWhCLFNBQVN3QixFQUFFLEVBQUV2QixLQUFLd0IsQ0FBQyxFQUFFLEdBQUc5QixnQkFBZ0I7Z0JBQzlDRSxjQUFjcUI7Z0JBQ2RwQixRQUFRdUI7Z0JBQ1J0QixVQUFVd0I7WUFDWjtZQUNBdkIsT0FBTyxDQUFDYyxFQUFFLENBQUNFLEVBQUUsR0FBR1E7WUFDaEJ2QixHQUFHLENBQUNhLEVBQUUsQ0FBQ0UsRUFBRSxHQUFHUztZQUVaLHVDQUF1QztZQUN2Q2hCLEtBQUssQ0FBQ0ssRUFBRSxDQUFDRSxFQUFFLEdBQ1QsU0FBVSxRQUFRTyxXQUFXLFFBQVFFLEtBQUssT0FDdEMsT0FDQ1AsUUFBUUssVUFBVyxLQUFJRSxDQUFBQTtRQUNoQztJQUNGO0lBRUEsT0FBTztRQUFFM0I7UUFBUVU7UUFBU1I7UUFBU0M7UUFBS1E7SUFBTTtBQUNoRCIsInNvdXJjZXMiOlsiSDpcXFVzZXJzXFxHdXNcXHNvdXJjZVxccmVwb1xcZHluYW1pY3NcXGR5bmFtaWNzLWJcXGNyeXB0b3BpLWR5bmFtaWNzXFxzcmNcXGNvcmVcXG1hdGhzXFxtYXRoLnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIG1hdGgudHMgLSBjb3JlIGdyaWQgbWF0aCBmb3IgTWF0cmljZXMgKERCICsgTGl2ZSBmdXNpb24pXHJcbi8vIFVzZXMgcHJvdmlkZXJzIGluamVjdGVkIGJ5IHJvdXRlLnRzIChpbmNsLiBvcGVuaW5nLnRzKSB0byBjb21wdXRlOlxyXG4vLyAgaWRfcGN0LCBwY3RfZHJ2LCBwY3RfcmVmLCByZWYsIGRlbHRhXHJcblxyXG5leHBvcnQgdHlwZSBOdW0gPSBudW1iZXIgfCBudWxsO1xyXG5cclxuLyoqIFNpbXBsZSB0eXBlZCBuZXdHcmlkIGhlbHBlci4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIG5ld0dyaWQ8VD4objogbnVtYmVyLCBmaWxsOiBUKTogVFtdW10ge1xyXG4gIHJldHVybiBBcnJheS5mcm9tKHsgbGVuZ3RoOiBuIH0sICgpID0+IEFycmF5LmZyb20oeyBsZW5ndGg6IG4gfSwgKCkgPT4gZmlsbCkpO1xyXG59XHJcblxyXG50eXBlIFByb3ZpZGVyR2V0UHJldiA9IChcclxuICBtYXRyaXhfdHlwZTogXCJiZW5jaG1hcmtcIiB8IFwiaWRfcGN0XCIsXHJcbiAgYmFzZTogc3RyaW5nLFxyXG4gIHF1b3RlOiBzdHJpbmcsXHJcbiAgYmVmb3JlVHM6IG51bWJlclxyXG4pID0+IFByb21pc2U8bnVtYmVyIHwgbnVsbD47XHJcblxyXG4vKipcclxuICogT3BlbmluZyBncmlkIHByb3ZpZGVyICh3aXJlZCB0byBvcGVuaW5nLnRzIGJ5IHRoZSBBUEkgcm91dGUpLlxyXG4gKiBSZXR1cm5zIGFuIE54TiBncmlkIG9mIG9wZW5pbmcgYmVuY2htYXJrIHZhbHVlcyBmb3IgdGhlIHNhbWUgY29pbiB1bml2ZXJzZS5cclxuICovXHJcbnR5cGUgUHJvdmlkZXJPcGVuaW5nR3JpZCA9IChcclxuICBjb2luczogc3RyaW5nW10sXHJcbiAgbm93VHM6IG51bWJlclxyXG4pID0+IFByb21pc2U8eyB0czogbnVtYmVyOyBncmlkOiAobnVtYmVyIHwgbnVsbClbXVtdIH0+O1xyXG5cclxudHlwZSBQcm92aWRlcnMgPSB7XHJcbiAgZ2V0UHJldjogUHJvdmlkZXJHZXRQcmV2O1xyXG4gIGZldGNoT3BlbmluZ0dyaWQ6IFByb3ZpZGVyT3BlbmluZ0dyaWQ7XHJcbn07XHJcblxyXG5sZXQgUFJPVjogUHJvdmlkZXJzIHwgbnVsbCA9IG51bGw7XHJcblxyXG4vKiogQ2FsbGVkIGJ5IHJvdXRlLnRzIHRvIGluamVjdCBEQiBwcm92aWRlcnMgKG5vIGdsb2JhbCBpbXBvcnRzIGhlcmUpLiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gY29uZmlndXJlQmVuY2htYXJrUHJvdmlkZXJzKHA6IFByb3ZpZGVycykge1xyXG4gIFBST1YgPSBwO1xyXG59XHJcblxyXG5jb25zdCBzYWZlRGl2ID0gKG51bTogbnVtYmVyIHwgbnVsbCwgZGVuOiBudW1iZXIgfCBudWxsKTogbnVtYmVyIHwgbnVsbCA9PiB7XHJcbiAgaWYgKG51bSA9PSBudWxsIHx8IGRlbiA9PSBudWxsKSByZXR1cm4gbnVsbDtcclxuICBpZiAoIU51bWJlci5pc0Zpbml0ZShudW0pIHx8ICFOdW1iZXIuaXNGaW5pdGUoZGVuKSB8fCBNYXRoLmFicyhkZW4pIDwgMWUtMzAwKSByZXR1cm4gbnVsbDtcclxuICByZXR1cm4gbnVtIC8gZGVuO1xyXG59O1xyXG5cclxuLyoqIFJlZmVyZW5jZSBibG9jayAocGN0X3JlZiArIHJlZikgKi9cclxuZXhwb3J0IGZ1bmN0aW9uIGNvbXB1dGVSZWZCbG9jayhhcmdzOiB7XHJcbiAgYmVuY2htYXJrTmV3OiBudW1iZXIgfCBudWxsOyAgLy8gYm1fbmV3XHJcbiAgaWRfcGN0OiBudW1iZXIgfCBudWxsOyAgICAgICAgLy8gZGVjaW1hbCwgZS5nLiAwLjAxMjNcclxuICByZWZWYWx1ZTogbnVtYmVyIHwgbnVsbDsgICAgICAvLyBibV9vcGVuXHJcbn0pOiB7IHBjdF9yZWY6IG51bWJlciB8IG51bGw7IHJlZjogbnVtYmVyIHwgbnVsbCB9IHtcclxuICBjb25zdCB7IGJlbmNobWFya05ldywgaWRfcGN0LCByZWZWYWx1ZSB9ID0gYXJncztcclxuXHJcbiAgLy8gcGN0X3JlZiA9IChibV9uZXcgLSBibV9vcGVuKS9ibV9vcGVuXHJcbiAgY29uc3QgcGN0X3JlZiA9IChyZWZWYWx1ZSA9PSBudWxsKVxyXG4gICAgPyBudWxsXHJcbiAgICA6IHNhZmVEaXYoXHJcbiAgICAgICAgKGJlbmNobWFya05ldyA9PSBudWxsID8gbnVsbCA6IGJlbmNobWFya05ldyAtIHJlZlZhbHVlKSxcclxuICAgICAgICByZWZWYWx1ZVxyXG4gICAgICApO1xyXG5cclxuICAvLyByZWYgPSAoaWRfcGN0ICsgMSkgKiBwY3RfcmVmXHJcbiAgY29uc3QgcmVmID1cclxuICAgIChwY3RfcmVmID09IG51bGwpXHJcbiAgICAgID8gbnVsbFxyXG4gICAgICA6ICgoaWRfcGN0ID09IG51bGwgPyAxIDogKDEgKyBpZF9wY3QpKSAqIHBjdF9yZWYpO1xyXG5cclxuICByZXR1cm4geyBwY3RfcmVmLCByZWYgfTtcclxufVxyXG5cclxuZXhwb3J0IHR5cGUgQ29tcHV0ZUlucHV0ID0ge1xyXG4gIGNvaW5zOiBzdHJpbmdbXTsgICAgICAgICAgICAgICAgICAgIC8vIHVwcGVyY2FzZSB1bml2ZXJzZSAoaW5jbHVkZXMgVVNEVClcclxuICBub3dUczogbnVtYmVyOyAgICAgICAgICAgICAgICAgICAgICAvLyB0aW1lc3RhbXAgZm9yIFwicHJldlwiIGxvb2t1cHNcclxuICBsaXZlQmVuY2htYXJrOiAobnVtYmVyIHwgbnVsbClbXVtdOyAvLyBOeE4gbGl2ZSBibSBncmlkIChmcm9tIGxpdmVGcm9tU291cmNlcy50cylcclxufTtcclxuXHJcbmV4cG9ydCB0eXBlIENvbXB1dGVPdXRwdXQgPSB7XHJcbiAgaWRfcGN0OiAobnVtYmVyIHwgbnVsbClbXVtdO1xyXG4gIHBjdF9kcnY6IChudW1iZXIgfCBudWxsKVtdW107XHJcbiAgcGN0X3JlZjogKG51bWJlciB8IG51bGwpW11bXTtcclxuICByZWY6IChudW1iZXIgfCBudWxsKVtdW107XHJcbiAgZGVsdGE6IChudW1iZXIgfCBudWxsKVtdW107XHJcbn07XHJcblxyXG4vKipcclxuICogTWFpbiBkZXJpdmF0aW9uIHVzaW5nOlxyXG4gKiAgLSBsaXZlIGJlbmNobWFyayBncmlkIChub3cpXHJcbiAqICAtIHByZXYoYmVuY2htYXJrKSBhbmQgcHJldihpZF9wY3QpIGZyb20gREJcclxuICogIC0gb3BlbmluZyhmaXJzdC1vZi1kYXkvc2Vzc2lvbikgcmVmZXJlbmNlIGdyaWQgZnJvbSBEQiAodmlhIG9wZW5pbmcudHMpXHJcbiAqXHJcbiAqIEZvcm11bGFzOlxyXG4gKiAgaWRfcGN0ICA9IChibV9uZXcgLSBibV9wcmV2KS9ibV9wcmV2XHJcbiAqICBwY3RfZHJ2ID0gaWRfcGN0X25ldyAtIGlkX3BjdF9vbGRcclxuICogIHBjdF9yZWYgPSAoYm1fbmV3IC0gYm1fb3BlbikvYm1fb3BlblxyXG4gKiAgcmVmICAgICA9IChpZF9wY3QgKyAxKSAqIHBjdF9yZWZcclxuICogIGRlbHRhICAgPSBibV9uZXcgLSBibV9vcGVuICogKDEgKyByZWYpXHJcbiAqL1xyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gY29tcHV0ZUZyb21EYkFuZExpdmUoaW5wdXQ6IENvbXB1dGVJbnB1dCk6IFByb21pc2U8Q29tcHV0ZU91dHB1dD4ge1xyXG4gIGlmICghUFJPVikgdGhyb3cgbmV3IEVycm9yKFwiUHJvdmlkZXJzIG5vdCBjb25maWd1cmVkLiBDYWxsIGNvbmZpZ3VyZUJlbmNobWFya1Byb3ZpZGVycyguLi4pIGZpcnN0LlwiKTtcclxuXHJcbiAgY29uc3QgeyBjb2lucywgbm93VHMsIGxpdmVCZW5jaG1hcmsgfSA9IGlucHV0O1xyXG4gIGNvbnN0IG4gPSBjb2lucy5sZW5ndGg7XHJcblxyXG4gIGNvbnN0IGlkX3BjdCA9IG5ld0dyaWQ8TnVtPihuLCBudWxsKTtcclxuICBjb25zdCBwY3RfZHJ2ID0gbmV3R3JpZDxOdW0+KG4sIG51bGwpO1xyXG4gIGNvbnN0IHBjdF9yZWYgPSBuZXdHcmlkPE51bT4obiwgbnVsbCk7XHJcbiAgY29uc3QgcmVmID0gbmV3R3JpZDxOdW0+KG4sIG51bGwpO1xyXG4gIGNvbnN0IGRlbHRhID0gbmV3R3JpZDxOdW0+KG4sIG51bGwpO1xyXG5cclxuICAvLyAxKSBPcGVuaW5nIGdyaWQgKHBlcnNpc3RlZCBvcGVuaW5nIGZyb20gdl9keW5fbWF0cmljZXMgdmlhIG9wZW5pbmcudHMpXHJcbiAgY29uc3Qgb3BlbmluZyA9IGF3YWl0IFBST1YuZmV0Y2hPcGVuaW5nR3JpZChjb2lucywgbm93VHMpO1xyXG4gIGNvbnN0IG9wZW5HcmlkID0gb3BlbmluZy5ncmlkO1xyXG5cclxuICAvLyAyKSBwcmV2KGJlbmNobWFyaykgYW5kIHByZXYoaWRfcGN0KSBwZXIgcGFpclxyXG4gIGZvciAobGV0IGkgPSAwOyBpIDwgbjsgaSsrKSB7XHJcbiAgICBjb25zdCBiaSA9IGNvaW5zW2ldITtcclxuICAgIGZvciAobGV0IGogPSAwOyBqIDwgbjsgaisrKSB7XHJcbiAgICAgIGlmIChpID09PSBqKSBjb250aW51ZTtcclxuICAgICAgY29uc3QgcWogPSBjb2luc1tqXSE7XHJcblxyXG4gICAgICBjb25zdCBibU5vdyA9IGxpdmVCZW5jaG1hcmtbaV1bal07XHJcblxyXG4gICAgICAvLyBpZF9wY3QgPSAoYm1fbmV3IC0gYm1fcHJldikvYm1fcHJldlxyXG4gICAgICBjb25zdCBibVByZXYgPSBhd2FpdCBQUk9WLmdldFByZXYoXCJiZW5jaG1hcmtcIiwgYmksIHFqLCBub3dUcyk7XHJcbiAgICAgIGNvbnN0IGlkTm93ID0gKGJtUHJldiA9PSBudWxsKVxyXG4gICAgICAgID8gbnVsbFxyXG4gICAgICAgIDogc2FmZURpdigoYm1Ob3cgPT0gbnVsbCA/IG51bGwgOiBibU5vdyAtIGJtUHJldiksIGJtUHJldik7XHJcbiAgICAgIGlkX3BjdFtpXVtqXSA9IGlkTm93O1xyXG5cclxuICAgICAgLy8gcGN0X2RydiA9IGlkX3BjdF9uZXcgLSBpZF9wY3Rfb2xkXHJcbiAgICAgIGNvbnN0IHByZXZJZCA9IGF3YWl0IFBST1YuZ2V0UHJldihcImlkX3BjdFwiLCBiaSwgcWosIG5vd1RzKTtcclxuICAgICAgcGN0X2RydltpXVtqXSA9XHJcbiAgICAgICAgKGlkTm93ID09IG51bGwgfHwgcHJldklkID09IG51bGwgfHwgIU51bWJlci5pc0Zpbml0ZShwcmV2SWQpKVxyXG4gICAgICAgICAgPyBudWxsXHJcbiAgICAgICAgICA6IChpZE5vdyAtIE51bWJlcihwcmV2SWQpKTtcclxuXHJcbiAgICAgIC8vIHBjdF9yZWYvcmVmIHdpdGggcGVyc2lzdGVkIG9wZW5pbmdcclxuICAgICAgY29uc3Qgb3BlblZhbCA9IG9wZW5HcmlkW2ldW2pdO1xyXG4gICAgICBjb25zdCB7IHBjdF9yZWY6IHByLCByZWY6IHIgfSA9IGNvbXB1dGVSZWZCbG9jayh7XHJcbiAgICAgICAgYmVuY2htYXJrTmV3OiBibU5vdyxcclxuICAgICAgICBpZF9wY3Q6IGlkTm93LFxyXG4gICAgICAgIHJlZlZhbHVlOiBvcGVuVmFsXHJcbiAgICAgIH0pO1xyXG4gICAgICBwY3RfcmVmW2ldW2pdID0gcHI7XHJcbiAgICAgIHJlZltpXVtqXSA9IHI7XHJcblxyXG4gICAgICAvLyBkZWx0YSA9IGJtX25ldyAtIGJtX29wZW4gKiAoMSArIHJlZilcclxuICAgICAgZGVsdGFbaV1bal0gPVxyXG4gICAgICAgIChibU5vdyA9PSBudWxsIHx8IG9wZW5WYWwgPT0gbnVsbCB8fCByID09IG51bGwpXHJcbiAgICAgICAgICA/IG51bGxcclxuICAgICAgICAgIDogKGJtTm93IC0gb3BlblZhbCAqICgxICsgcikpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcmV0dXJuIHsgaWRfcGN0LCBwY3RfZHJ2LCBwY3RfcmVmLCByZWYsIGRlbHRhIH07XHJcbn1cclxuXHJcbiJdLCJuYW1lcyI6WyJuZXdHcmlkIiwibiIsImZpbGwiLCJBcnJheSIsImZyb20iLCJsZW5ndGgiLCJQUk9WIiwiY29uZmlndXJlQmVuY2htYXJrUHJvdmlkZXJzIiwicCIsInNhZmVEaXYiLCJudW0iLCJkZW4iLCJOdW1iZXIiLCJpc0Zpbml0ZSIsIk1hdGgiLCJhYnMiLCJjb21wdXRlUmVmQmxvY2siLCJhcmdzIiwiYmVuY2htYXJrTmV3IiwiaWRfcGN0IiwicmVmVmFsdWUiLCJwY3RfcmVmIiwicmVmIiwiY29tcHV0ZUZyb21EYkFuZExpdmUiLCJpbnB1dCIsIkVycm9yIiwiY29pbnMiLCJub3dUcyIsImxpdmVCZW5jaG1hcmsiLCJwY3RfZHJ2IiwiZGVsdGEiLCJvcGVuaW5nIiwiZmV0Y2hPcGVuaW5nR3JpZCIsIm9wZW5HcmlkIiwiZ3JpZCIsImkiLCJiaSIsImoiLCJxaiIsImJtTm93IiwiYm1QcmV2IiwiZ2V0UHJldiIsImlkTm93IiwicHJldklkIiwib3BlblZhbCIsInByIiwiciJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./src/core/maths/math.ts\n");

/***/ }),

/***/ "(rsc)/./src/core/sources/binance.ts":
/*!*************************************!*\
  !*** ./src/core/sources/binance.ts ***!
  \*************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   fetch24hAll: () => (/* binding */ fetch24hAll),\n/* harmony export */   fetch24hForSymbols: () => (/* binding */ fetch24hForSymbols),\n/* harmony export */   fetchBookTicker: () => (/* binding */ fetchBookTicker),\n/* harmony export */   fetchKlines: () => (/* binding */ fetchKlines),\n/* harmony export */   fetchOrderBook: () => (/* binding */ fetchOrderBook),\n/* harmony export */   fetchOrderBooksForCoins: () => (/* binding */ fetchOrderBooksForCoins),\n/* harmony export */   fetchOrderBooksForSymbols: () => (/* binding */ fetchOrderBooksForSymbols),\n/* harmony export */   fetchTicker24h: () => (/* binding */ fetchTicker24h),\n/* harmony export */   fetchTicker24hNum: () => (/* binding */ fetchTicker24hNum),\n/* harmony export */   fetchTickersForCoins: () => (/* binding */ fetchTickersForCoins),\n/* harmony export */   getSettingsCoins: () => (/* binding */ getSettingsCoins),\n/* harmony export */   listSymbolsByQuote: () => (/* binding */ listSymbolsByQuote),\n/* harmony export */   mapTickerBySymbol: () => (/* binding */ mapTickerBySymbol),\n/* harmony export */   usdtSymbolsFor: () => (/* binding */ usdtSymbolsFor)\n/* harmony export */ });\n/* harmony import */ var _core_sources_binanceClient__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @/core/sources/binanceClient */ \"(rsc)/./src/core/sources/binanceClient.ts\");\n/* harmony import */ var _lib_settings_server__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/lib/settings/server */ \"(rsc)/./src/lib/settings/server.ts\");\n// src/core/sources/binance.ts\n// Public REST adapter with ticker, klines and orderbook; settings-aware.\n\n\nconst num = (x, d = NaN)=>{\n    const n = Number(x);\n    return Number.isFinite(n) ? n : d;\n};\nasync function fetch24hAll(symbols) {\n    if (!symbols?.length) return [];\n    const qs = new URLSearchParams({\n        symbols: JSON.stringify(symbols)\n    });\n    const arr = await (0,_core_sources_binanceClient__WEBPACK_IMPORTED_MODULE_0__.fetchJson)(`/api/v3/ticker/24hr?${qs.toString()}`);\n    return (Array.isArray(arr) ? arr : []).map((t)=>({\n            symbol: String(t.symbol),\n            weightedAvgPrice: t.weightedAvgPrice,\n            lastPrice: t.lastPrice,\n            priceChangePercent: t.priceChangePercent,\n            priceChange: t.priceChange,\n            openPrice: t.openPrice\n        }));\n}\nfunction mapTickerBySymbol(arr) {\n    const out = {};\n    for (const t of arr)out[t.symbol] = t;\n    return out;\n}\nfunction normCoins(list) {\n    const set = new Set(), out = [];\n    for (const c of list ?? []){\n        const u = String(c || \"\").trim().toUpperCase();\n        if (!u || set.has(u)) continue;\n        set.add(u);\n        out.push(u);\n    }\n    if (!set.has(\"USDT\")) out.push(\"USDT\");\n    return out;\n}\nasync function getSettingsCoins() {\n    const s = await (0,_lib_settings_server__WEBPACK_IMPORTED_MODULE_1__.getAll)();\n    const from = normCoins(s.coinUniverse?.length ? s.coinUniverse : []);\n    return from.length ? from : normCoins([\n        \"BTC\",\n        \"ETH\",\n        \"BNB\",\n        \"SOL\",\n        \"ADA\",\n        \"XRP\",\n        \"PEPE\",\n        \"USDT\"\n    ]);\n}\nfunction usdtSymbolsFor(coins) {\n    return coins.filter((c)=>c !== \"USDT\").map((c)=>`${c}USDT`);\n}\n// Bulk USDT view used for triangulation (kept as-is, but now types are richer).\nasync function fetchTickersForCoins(coins) {\n    const uni = normCoins(coins ?? await getSettingsCoins());\n    const by = mapTickerBySymbol(await fetch24hAll(usdtSymbolsFor(uni)));\n    const out = {\n        USDT: {\n            price: 1,\n            pct24h: 0\n        }\n    };\n    for (const c of uni){\n        if (c === \"USDT\") continue;\n        const t = by[`${c}USDT`];\n        const price = t?.lastPrice != null ? Number(t.lastPrice) : Number(t?.weightedAvgPrice);\n        const pct = t?.priceChangePercent != null ? Number(t.priceChangePercent) : NaN;\n        if (Number.isFinite(price)) out[c] = {\n            price,\n            pct24h: Number.isFinite(pct) ? pct : 0\n        };\n    }\n    return out;\n}\nasync function fetchTicker24h(symbol) {\n    return (0,_core_sources_binanceClient__WEBPACK_IMPORTED_MODULE_0__.fetchJson)(\"/api/v3/ticker/24hr\", {\n        symbol: symbol.toUpperCase()\n    });\n}\n/** Normalized numeric helper: last, pct24h (percent units), delta (absolute) & open */ async function fetchTicker24hNum(symbol) {\n    const t = await fetchTicker24h(symbol);\n    const last = num(t.lastPrice, NaN);\n    const pct = num(t.priceChangePercent, NaN); // percent units\n    let delta = num(t.priceChange, NaN);\n    // robust open and delta if delta missing\n    let open = num(t.openPrice, NaN);\n    if (!Number.isFinite(open) && Number.isFinite(last) && Number.isFinite(pct)) {\n        const r = pct / 100;\n        open = last / (1 + r);\n    }\n    if (!Number.isFinite(delta) && Number.isFinite(last) && Number.isFinite(open)) {\n        delta = last - open;\n    }\n    return {\n        symbol: t.symbol,\n        last: Number.isFinite(last) ? last : null,\n        pct24h: Number.isFinite(pct) ? pct : null,\n        delta: Number.isFinite(delta) ? delta : null,\n        open: Number.isFinite(open) ? open : null\n    };\n}\nasync function fetchKlines(symbol, interval, limit = 128) {\n    return (0,_core_sources_binanceClient__WEBPACK_IMPORTED_MODULE_0__.fetchJson)(\"/api/v3/klines\", {\n        symbol,\n        interval,\n        limit\n    });\n}\nasync function fetchOrderBook(symbol, limit = 100) {\n    const depth = await (0,_core_sources_binanceClient__WEBPACK_IMPORTED_MODULE_0__.fetchJson)(\"/api/v3/depth\", {\n        symbol,\n        limit\n    });\n    const ts = Date.now();\n    const bestBid = num(depth.bids[0]?.[0]);\n    const bestAsk = num(depth.asks[0]?.[0]);\n    const mid = Number.isFinite(bestBid) && Number.isFinite(bestAsk) ? (bestBid + bestAsk) / 2 : NaN;\n    const bidVol = depth.bids.reduce((s, [_, q])=>s + num(q, 0), 0);\n    const askVol = depth.asks.reduce((s, [_, q])=>s + num(q, 0), 0);\n    return {\n        depth,\n        ts,\n        bestBid,\n        bestAsk,\n        mid,\n        bidVol,\n        askVol\n    };\n}\nasync function fetchOrderBooksForSymbols(symbols, limit = 100) {\n    const out = {};\n    await Promise.all((symbols ?? []).map(async (s)=>{\n        const sym = String(s || \"\").toUpperCase();\n        const { mid, bidVol, askVol } = await fetchOrderBook(sym, limit);\n        out[sym] = {\n            mid,\n            bidVol,\n            askVol\n        };\n    }));\n    return out;\n}\nasync function fetchOrderBooksForCoins(coins, limit = 100) {\n    const list = Array.isArray(coins) ? coins.map((c)=>String(c || '').toUpperCase()).filter(Boolean) : [];\n    const symbols = usdtSymbolsFor(list);\n    const books = await fetchOrderBooksForSymbols(symbols, limit);\n    const out = {};\n    for (const coin of list){\n        if (coin === \"USDT\") {\n            out[coin] = {\n                mid: 1,\n                bidVol: 0,\n                askVol: 0\n            };\n            continue;\n        }\n        const entry = books[`${coin}USDT`];\n        out[coin] = entry ?? {\n            mid: NaN,\n            bidVol: 0,\n            askVol: 0\n        };\n    }\n    if (!out.USDT) {\n        out.USDT = {\n            mid: 1,\n            bidVol: 0,\n            askVol: 0\n        };\n    }\n    return out;\n}\nasync function fetchBookTicker(symbol) {\n    const j = await (0,_core_sources_binanceClient__WEBPACK_IMPORTED_MODULE_0__.fetchJson)(\"/api/v3/ticker/bookTicker\", {\n        symbol\n    });\n    const bidPrice = num(j.bidPrice), askPrice = num(j.askPrice);\n    const mid = Number.isFinite(bidPrice) && Number.isFinite(askPrice) ? (bidPrice + askPrice) / 2 : NaN;\n    return {\n        bidPrice,\n        askPrice,\n        mid\n    };\n}\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ({\n    fetch24hAll,\n    mapTickerBySymbol,\n    fetchTickersForCoins,\n    getSettingsCoins,\n    usdtSymbolsFor,\n    fetchKlines,\n    fetchOrderBook,\n    fetchOrderBooksForSymbols,\n    fetchOrderBooksForCoins,\n    fetchBookTicker,\n    fetchTicker24h,\n    fetchTicker24hNum\n});\n// src/sources/binance.ts\n// Minimal helpers to list symbols and fetch 24h stats.\n// Adjust base URL or fetch wrapper to your project conventions if needed.\nconst BASE = \"https://api.binance.com\";\nasync function listSymbolsByQuote(quote = \"USDT\") {\n    const r = await fetch(`${BASE}/api/v3/exchangeInfo`, {\n        cache: \"no-store\"\n    });\n    if (!r.ok) throw new Error(`exchangeInfo ${r.status}`);\n    const info = await r.json();\n    const syms = info.symbols.filter((s)=>s.status === \"TRADING\" && s.quoteAsset.toUpperCase() === quote.toUpperCase()).map((s)=>s.symbol).sort();\n    // de-dup\n    const out = [];\n    for (const s of syms)if (!out.length || out[out.length - 1] !== s) out.push(s);\n    return out;\n}\n// If you already have a project-specific fetch24h for one symbol, reuse it inside here.\nasync function fetch24hForSymbols(symbols) {\n    // Batch with Promise.all over /api/v3/ticker/24hr?symbol=XXXX\n    // (Binance also supports /ticker/24hr without symbol returning ALL, but it's heavy;\n    // if you prefer that, you can fetch once and filter.)\n    const qs = symbols.map((s)=>fetch(`${BASE}/api/v3/ticker/24hr?symbol=${s}`, {\n            cache: \"no-store\"\n        }).then((r)=>{\n            if (!r.ok) throw new Error(`24hr ${s} ${r.status}`);\n            return r.json();\n        }).catch((e)=>({\n                symbol: s,\n                _err: String(e)\n            })));\n    return Promise.all(qs);\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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V0FBVyxJQUN0RmxCLEdBQUcsQ0FBQ3VCLENBQUFBLElBQUtBLEVBQUVyQixNQUFNLEVBQ2pCbUYsSUFBSTtJQUNQLFNBQVM7SUFDVCxNQUFNM0UsTUFBZ0IsRUFBRTtJQUN4QixLQUFLLE1BQU1hLEtBQUs0RCxLQUFNLElBQUksQ0FBQ3pFLElBQUluQixNQUFNLElBQUltQixHQUFHLENBQUNBLElBQUluQixNQUFNLEdBQUcsRUFBRSxLQUFLZ0MsR0FBR2IsSUFBSVcsSUFBSSxDQUFDRTtJQUM3RSxPQUFPYjtBQUNUO0FBRUEsd0ZBQXdGO0FBQ2pGLGVBQWU0RSxtQkFBbUJoRyxPQUFpQjtJQUN4RCw4REFBOEQ7SUFDOUQsb0ZBQW9GO0lBQ3BGLHNEQUFzRDtJQUN0RCxNQUFNRSxLQUFLRixRQUFRVSxHQUFHLENBQUN1QixDQUFBQSxJQUFLcUQsTUFBTSxHQUFHSCxLQUFLLDJCQUEyQixFQUFFbEQsR0FBRyxFQUFFO1lBQUVzRCxPQUFPO1FBQVcsR0FDN0ZVLElBQUksQ0FBQzlDLENBQUFBO1lBQ0osSUFBSSxDQUFDQSxFQUFFcUMsRUFBRSxFQUFFLE1BQU0sSUFBSUMsTUFBTSxDQUFDLEtBQUssRUFBRXhELEVBQUUsQ0FBQyxFQUFFa0IsRUFBRXVDLE1BQU0sRUFBRTtZQUNsRCxPQUFPdkMsRUFBRXlDLElBQUk7UUFDZixHQUNDTSxLQUFLLENBQUNDLENBQUFBLElBQU07Z0JBQUV2RixRQUFRcUI7Z0JBQUdtRSxNQUFNdkYsT0FBT3NGO1lBQUc7SUFDNUMsT0FBTzVCLFFBQVFDLEdBQUcsQ0FBQ3RFO0FBQ3JCIiwic291cmNlcyI6WyJIOlxcVXNlcnNcXEd1c1xcc291cmNlXFxyZXBvXFxkeW5hbWljc1xcZHluYW1pY3MtYlxcY3J5cHRvcGktZHluYW1pY3NcXHNyY1xcY29yZVxcc291cmNlc1xcYmluYW5jZS50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBzcmMvY29yZS9zb3VyY2VzL2JpbmFuY2UudHNcclxuLy8gUHVibGljIFJFU1QgYWRhcHRlciB3aXRoIHRpY2tlciwga2xpbmVzIGFuZCBvcmRlcmJvb2s7IHNldHRpbmdzLWF3YXJlLlxyXG5cclxuaW1wb3J0IHsgZmV0Y2hKc29uIH0gZnJvbSBcIkAvY29yZS9zb3VyY2VzL2JpbmFuY2VDbGllbnRcIjtcclxuaW1wb3J0IHsgZ2V0QWxsIGFzIGdldFNldHRpbmdzIH0gZnJvbSBcIkAvbGliL3NldHRpbmdzL3NlcnZlclwiO1xyXG5cclxudHlwZSBJbnRlcnZhbCA9IFwiMW1cInxcIjNtXCJ8XCI1bVwifFwiMTVtXCJ8XCIzMG1cInxcIjFoXCJ8XCIyaFwifFwiNGhcInxcIjZoXCJ8XCI4aFwifFwiMTJoXCJ8XCIxZFwiO1xyXG5cclxuY29uc3QgbnVtID0gKHg6IGFueSwgZD1OYU4pID0+IHsgY29uc3QgbiA9IE51bWJlcih4KTsgcmV0dXJuIE51bWJlci5pc0Zpbml0ZShuKSA/IG4gOiBkOyB9O1xyXG5cclxuLy8gLS0tLSAyNGggdGlja2VyIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcbmV4cG9ydCB0eXBlIFRpY2tlcjI0aCA9IHtcclxuICBzeW1ib2w6IHN0cmluZztcclxuICB3ZWlnaHRlZEF2Z1ByaWNlPzogc3RyaW5nO1xyXG4gIGxhc3RQcmljZT86IHN0cmluZztcclxuICBwcmljZUNoYW5nZVBlcmNlbnQ/OiBzdHJpbmc7IC8vIHBlcmNlbnQgdW5pdHMgKGUuZy4gXCIwLjkzOTdcIilcclxuICBwcmljZUNoYW5nZT86IHN0cmluZzsgICAgICAgIC8vIGFic29sdXRlIGRlbHRhIChzYW1lIHVuaXRzIGFzIGxhc3RQcmljZSlcclxuICBvcGVuUHJpY2U/OiBzdHJpbmc7XHJcbn07XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZmV0Y2gyNGhBbGwoc3ltYm9sczogc3RyaW5nW10pOiBQcm9taXNlPFRpY2tlcjI0aFtdPiB7XHJcbiAgaWYgKCFzeW1ib2xzPy5sZW5ndGgpIHJldHVybiBbXTtcclxuICBjb25zdCBxcyA9IG5ldyBVUkxTZWFyY2hQYXJhbXMoeyBzeW1ib2xzOiBKU09OLnN0cmluZ2lmeShzeW1ib2xzKSB9KTtcclxuICBjb25zdCBhcnIgPSBhd2FpdCBmZXRjaEpzb248YW55W10+KGAvYXBpL3YzL3RpY2tlci8yNGhyPyR7cXMudG9TdHJpbmcoKX1gKTtcclxuICByZXR1cm4gKEFycmF5LmlzQXJyYXkoYXJyKSA/IGFyciA6IFtdKS5tYXAodCA9PiAoe1xyXG4gICAgc3ltYm9sOiBTdHJpbmcodC5zeW1ib2wpLFxyXG4gICAgd2VpZ2h0ZWRBdmdQcmljZTogdC53ZWlnaHRlZEF2Z1ByaWNlLFxyXG4gICAgbGFzdFByaWNlOiB0Lmxhc3RQcmljZSxcclxuICAgIHByaWNlQ2hhbmdlUGVyY2VudDogdC5wcmljZUNoYW5nZVBlcmNlbnQsXHJcbiAgICBwcmljZUNoYW5nZTogdC5wcmljZUNoYW5nZSxcclxuICAgIG9wZW5QcmljZTogdC5vcGVuUHJpY2UsXHJcbiAgfSkpO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gbWFwVGlja2VyQnlTeW1ib2woYXJyOiBUaWNrZXIyNGhbXSk6IFJlY29yZDxzdHJpbmcsIFRpY2tlcjI0aD4ge1xyXG4gIGNvbnN0IG91dDogUmVjb3JkPHN0cmluZywgVGlja2VyMjRoPiA9IHt9O1xyXG4gIGZvciAoY29uc3QgdCBvZiBhcnIpIG91dFt0LnN5bWJvbF0gPSB0O1xyXG4gIHJldHVybiBvdXQ7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIG5vcm1Db2lucyhsaXN0Pzogc3RyaW5nW10pIHtcclxuICBjb25zdCBzZXQgPSBuZXcgU2V0PHN0cmluZz4oKSwgb3V0OiBzdHJpbmdbXSA9IFtdO1xyXG4gIGZvciAoY29uc3QgYyBvZiBsaXN0ID8/IFtdKSB7XHJcbiAgICBjb25zdCB1ID0gU3RyaW5nKGN8fFwiXCIpLnRyaW0oKS50b1VwcGVyQ2FzZSgpO1xyXG4gICAgaWYgKCF1IHx8IHNldC5oYXModSkpIGNvbnRpbnVlOyBzZXQuYWRkKHUpOyBvdXQucHVzaCh1KTtcclxuICB9XHJcbiAgaWYgKCFzZXQuaGFzKFwiVVNEVFwiKSkgb3V0LnB1c2goXCJVU0RUXCIpO1xyXG4gIHJldHVybiBvdXQ7XHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRTZXR0aW5nc0NvaW5zKCk6IFByb21pc2U8c3RyaW5nW10+IHtcclxuICBjb25zdCBzID0gYXdhaXQgZ2V0U2V0dGluZ3MoKTtcclxuICBjb25zdCBmcm9tID0gbm9ybUNvaW5zKHMuY29pblVuaXZlcnNlPy5sZW5ndGggPyBzLmNvaW5Vbml2ZXJzZSA6IFtdKTtcclxuICByZXR1cm4gZnJvbS5sZW5ndGggPyBmcm9tIDogbm9ybUNvaW5zKFtcIkJUQ1wiLFwiRVRIXCIsXCJCTkJcIixcIlNPTFwiLFwiQURBXCIsXCJYUlBcIixcIlBFUEVcIixcIlVTRFRcIl0pO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gdXNkdFN5bWJvbHNGb3IoY29pbnM6IHN0cmluZ1tdKSB7XHJcbiAgcmV0dXJuIGNvaW5zLmZpbHRlcihjID0+IGMgIT09IFwiVVNEVFwiKS5tYXAoYyA9PiBgJHtjfVVTRFRgKTtcclxufVxyXG5cclxuLy8gQnVsayBVU0RUIHZpZXcgdXNlZCBmb3IgdHJpYW5ndWxhdGlvbiAoa2VwdCBhcy1pcywgYnV0IG5vdyB0eXBlcyBhcmUgcmljaGVyKS5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGZldGNoVGlja2Vyc0ZvckNvaW5zKGNvaW5zPzogc3RyaW5nW10pIHtcclxuICBjb25zdCB1bmkgPSBub3JtQ29pbnMoY29pbnMgPz8gKGF3YWl0IGdldFNldHRpbmdzQ29pbnMoKSkpO1xyXG4gIGNvbnN0IGJ5ID0gbWFwVGlja2VyQnlTeW1ib2woYXdhaXQgZmV0Y2gyNGhBbGwodXNkdFN5bWJvbHNGb3IodW5pKSkpO1xyXG4gIGNvbnN0IG91dDogUmVjb3JkPHN0cmluZyx7IHByaWNlOm51bWJlcjsgcGN0MjRoOm51bWJlciB9PiA9IHsgVVNEVDogeyBwcmljZToxLCBwY3QyNGg6MCB9IH07XHJcbiAgZm9yIChjb25zdCBjIG9mIHVuaSkge1xyXG4gICAgaWYgKGMgPT09IFwiVVNEVFwiKSBjb250aW51ZTtcclxuICAgIGNvbnN0IHQgPSBieVtgJHtjfVVTRFRgXTtcclxuICAgIGNvbnN0IHByaWNlID0gdD8ubGFzdFByaWNlICE9IG51bGwgPyBOdW1iZXIodC5sYXN0UHJpY2UpIDogTnVtYmVyKHQ/LndlaWdodGVkQXZnUHJpY2UpO1xyXG4gICAgY29uc3QgcGN0ID0gdD8ucHJpY2VDaGFuZ2VQZXJjZW50ICE9IG51bGwgPyBOdW1iZXIodC5wcmljZUNoYW5nZVBlcmNlbnQpIDogTmFOO1xyXG4gICAgaWYgKE51bWJlci5pc0Zpbml0ZShwcmljZSkpIG91dFtjXSA9IHsgcHJpY2UsIHBjdDI0aDogTnVtYmVyLmlzRmluaXRlKHBjdCkgPyBwY3QgOiAwIH07XHJcbiAgfVxyXG4gIHJldHVybiBvdXQ7XHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBmZXRjaFRpY2tlcjI0aChzeW1ib2w6IHN0cmluZyk6IFByb21pc2U8VGlja2VyMjRoPiB7XHJcbiAgcmV0dXJuIGZldGNoSnNvbjxUaWNrZXIyNGg+KFwiL2FwaS92My90aWNrZXIvMjRoclwiLCB7IHN5bWJvbDogc3ltYm9sLnRvVXBwZXJDYXNlKCkgfSk7XHJcbn1cclxuXHJcbi8qKiBOb3JtYWxpemVkIG51bWVyaWMgaGVscGVyOiBsYXN0LCBwY3QyNGggKHBlcmNlbnQgdW5pdHMpLCBkZWx0YSAoYWJzb2x1dGUpICYgb3BlbiAqL1xyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZmV0Y2hUaWNrZXIyNGhOdW0oc3ltYm9sOiBzdHJpbmcpOiBQcm9taXNlPHtcclxuICBzeW1ib2w6IHN0cmluZztcclxuICBsYXN0OiBudW1iZXIgfCBudWxsO1xyXG4gIHBjdDI0aDogbnVtYmVyIHwgbnVsbDsgIC8vIGUuZy4gMC45Mzk3XHJcbiAgZGVsdGE6IG51bWJlciB8IG51bGw7ICAgLy8gYWJzb2x1dGUgcHJpY2VDaGFuZ2VcclxuICBvcGVuOiBudW1iZXIgfCBudWxsO1xyXG59PiB7XHJcbiAgY29uc3QgdCA9IGF3YWl0IGZldGNoVGlja2VyMjRoKHN5bWJvbCk7XHJcbiAgY29uc3QgbGFzdCA9IG51bSh0Lmxhc3RQcmljZSwgTmFOKTtcclxuICBjb25zdCBwY3QgID0gbnVtKHQucHJpY2VDaGFuZ2VQZXJjZW50LCBOYU4pOyAvLyBwZXJjZW50IHVuaXRzXHJcbiAgbGV0IGRlbHRhICA9IG51bSh0LnByaWNlQ2hhbmdlLCBOYU4pO1xyXG4gIC8vIHJvYnVzdCBvcGVuIGFuZCBkZWx0YSBpZiBkZWx0YSBtaXNzaW5nXHJcbiAgbGV0IG9wZW4gPSBudW0odC5vcGVuUHJpY2UsIE5hTik7XHJcbiAgaWYgKCFOdW1iZXIuaXNGaW5pdGUob3BlbikgJiYgTnVtYmVyLmlzRmluaXRlKGxhc3QpICYmIE51bWJlci5pc0Zpbml0ZShwY3QpKSB7XHJcbiAgICBjb25zdCByID0gcGN0IC8gMTAwO1xyXG4gICAgb3BlbiA9IGxhc3QgLyAoMSArIHIpO1xyXG4gIH1cclxuICBpZiAoIU51bWJlci5pc0Zpbml0ZShkZWx0YSkgJiYgTnVtYmVyLmlzRmluaXRlKGxhc3QpICYmIE51bWJlci5pc0Zpbml0ZShvcGVuKSkge1xyXG4gICAgZGVsdGEgPSBsYXN0IC0gb3BlbjtcclxuICB9XHJcbiAgcmV0dXJuIHtcclxuICAgIHN5bWJvbDogdC5zeW1ib2wsXHJcbiAgICBsYXN0OiBOdW1iZXIuaXNGaW5pdGUobGFzdCkgPyBsYXN0IDogbnVsbCxcclxuICAgIHBjdDI0aDogTnVtYmVyLmlzRmluaXRlKHBjdCkgPyBwY3QgOiBudWxsLFxyXG4gICAgZGVsdGE6IE51bWJlci5pc0Zpbml0ZShkZWx0YSkgPyBkZWx0YSA6IG51bGwsXHJcbiAgICBvcGVuOiBOdW1iZXIuaXNGaW5pdGUob3BlbikgPyBvcGVuIDogbnVsbCxcclxuICB9O1xyXG59XHJcblxyXG4vLyAtLS0tIGtsaW5lcyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuZXhwb3J0IHR5cGUgUmF3S2xpbmUgPSBbbnVtYmVyLHN0cmluZyxzdHJpbmcsc3RyaW5nLHN0cmluZyxzdHJpbmcsbnVtYmVyLHN0cmluZyxudW1iZXIsc3RyaW5nLHN0cmluZyxzdHJpbmddO1xyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZmV0Y2hLbGluZXMoc3ltYm9sOiBzdHJpbmcsIGludGVydmFsOiBJbnRlcnZhbCwgbGltaXQ9MTI4KTogUHJvbWlzZTxSYXdLbGluZVtdPiB7XHJcbiAgcmV0dXJuIGZldGNoSnNvbjxSYXdLbGluZVtdPihcIi9hcGkvdjMva2xpbmVzXCIsIHsgc3ltYm9sLCBpbnRlcnZhbCwgbGltaXQgfSk7XHJcbn1cclxuXHJcbi8vIC0tLS0gb3JkZXJib29rICsgYm9va1RpY2tlciAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG50eXBlIERlcHRoTGV2ZWwgPSBbc3RyaW5nLHN0cmluZ107XHJcbmV4cG9ydCB0eXBlIERlcHRoU25hcHNob3QgPSB7IGxhc3RVcGRhdGVJZDpudW1iZXI7IGJpZHM6RGVwdGhMZXZlbFtdOyBhc2tzOkRlcHRoTGV2ZWxbXSB9O1xyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGZldGNoT3JkZXJCb29rKHN5bWJvbDogc3RyaW5nLCBsaW1pdDogNXwxMHwyMHw1MHwxMDB8NTAwfDEwMDAgPSAxMDApIHtcclxuICBjb25zdCBkZXB0aCA9IGF3YWl0IGZldGNoSnNvbjxEZXB0aFNuYXBzaG90PihcIi9hcGkvdjMvZGVwdGhcIiwgeyBzeW1ib2wsIGxpbWl0IH0pO1xyXG4gIGNvbnN0IHRzID0gRGF0ZS5ub3coKTtcclxuICBjb25zdCBiZXN0QmlkID0gbnVtKGRlcHRoLmJpZHNbMF0/LlswXSk7XHJcbiAgY29uc3QgYmVzdEFzayA9IG51bShkZXB0aC5hc2tzWzBdPy5bMF0pO1xyXG4gIGNvbnN0IG1pZCA9IE51bWJlci5pc0Zpbml0ZShiZXN0QmlkKSAmJiBOdW1iZXIuaXNGaW5pdGUoYmVzdEFzaykgPyAoYmVzdEJpZCArIGJlc3RBc2spLzIgOiBOYU47XHJcbiAgY29uc3QgYmlkVm9sID0gZGVwdGguYmlkcy5yZWR1Y2UoKHMsIFtfLHFdKSA9PiBzICsgbnVtKHEsMCksIDApO1xyXG4gIGNvbnN0IGFza1ZvbCA9IGRlcHRoLmFza3MucmVkdWNlKChzLCBbXyxxXSkgPT4gcyArIG51bShxLDApLCAwKTtcclxuICByZXR1cm4geyBkZXB0aCwgdHMsIGJlc3RCaWQsIGJlc3RBc2ssIG1pZCwgYmlkVm9sLCBhc2tWb2wgfTtcclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGZldGNoT3JkZXJCb29rc0ZvclN5bWJvbHMoXHJcbiAgc3ltYm9sczogc3RyaW5nW10sXHJcbiAgbGltaXQ6IDV8MTB8MjB8NTB8MTAwfDUwMHwxMDAwID0gMTAwXHJcbikge1xyXG4gIGNvbnN0IG91dDogUmVjb3JkPHN0cmluZyx7IG1pZDpudW1iZXI7IGJpZFZvbDpudW1iZXI7IGFza1ZvbDpudW1iZXIgfT4gPSB7fTtcclxuICBhd2FpdCBQcm9taXNlLmFsbChcclxuICAgIChzeW1ib2xzID8/IFtdKS5tYXAoYXN5bmMgKHMpID0+IHtcclxuICAgICAgY29uc3Qgc3ltID0gU3RyaW5nKHMgfHwgXCJcIikudG9VcHBlckNhc2UoKTtcclxuICAgICAgY29uc3QgeyBtaWQsIGJpZFZvbCwgYXNrVm9sIH0gPSBhd2FpdCBmZXRjaE9yZGVyQm9vayhzeW0sIGxpbWl0KTtcclxuICAgICAgb3V0W3N5bV0gPSB7IG1pZCwgYmlkVm9sLCBhc2tWb2wgfTtcclxuICAgIH0pXHJcbiAgKTtcclxuICByZXR1cm4gb3V0O1xyXG59XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZmV0Y2hPcmRlckJvb2tzRm9yQ29pbnMoXHJcbiAgY29pbnM6IHN0cmluZ1tdLFxyXG4gIGxpbWl0OiA1IHwgMTAgfCAyMCB8IDUwIHwgMTAwIHwgNTAwIHwgMTAwMCA9IDEwMFxyXG4pIHtcclxuICBjb25zdCBsaXN0ID0gQXJyYXkuaXNBcnJheShjb2lucykgPyBjb2lucy5tYXAoKGMpID0+IFN0cmluZyhjIHx8ICcnKS50b1VwcGVyQ2FzZSgpKS5maWx0ZXIoQm9vbGVhbikgOiBbXTtcclxuICBjb25zdCBzeW1ib2xzID0gdXNkdFN5bWJvbHNGb3IobGlzdCk7XHJcbiAgY29uc3QgYm9va3MgPSBhd2FpdCBmZXRjaE9yZGVyQm9va3NGb3JTeW1ib2xzKHN5bWJvbHMsIGxpbWl0KTtcclxuICBjb25zdCBvdXQ6IFJlY29yZDxzdHJpbmcsIHsgbWlkOiBudW1iZXI7IGJpZFZvbDogbnVtYmVyOyBhc2tWb2w6IG51bWJlciB9PiA9IHt9O1xyXG4gIGZvciAoY29uc3QgY29pbiBvZiBsaXN0KSB7XHJcbiAgICBpZiAoY29pbiA9PT0gXCJVU0RUXCIpIHtcclxuICAgICAgb3V0W2NvaW5dID0geyBtaWQ6IDEsIGJpZFZvbDogMCwgYXNrVm9sOiAwIH07XHJcbiAgICAgIGNvbnRpbnVlO1xyXG4gICAgfVxyXG4gICAgY29uc3QgZW50cnkgPSBib29rc1tgJHtjb2lufVVTRFRgXTtcclxuICAgIG91dFtjb2luXSA9IGVudHJ5ID8/IHsgbWlkOiBOYU4sIGJpZFZvbDogMCwgYXNrVm9sOiAwIH07XHJcbiAgfVxyXG4gIGlmICghb3V0LlVTRFQpIHtcclxuICAgIG91dC5VU0RUID0geyBtaWQ6IDEsIGJpZFZvbDogMCwgYXNrVm9sOiAwIH07XHJcbiAgfVxyXG4gIHJldHVybiBvdXQ7XHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBmZXRjaEJvb2tUaWNrZXIoc3ltYm9sOiBzdHJpbmcpIHtcclxuICBjb25zdCBqID0gYXdhaXQgZmV0Y2hKc29uPHsgYmlkUHJpY2U6c3RyaW5nOyBhc2tQcmljZTpzdHJpbmcgfT4oXCIvYXBpL3YzL3RpY2tlci9ib29rVGlja2VyXCIsIHsgc3ltYm9sIH0pO1xyXG4gIGNvbnN0IGJpZFByaWNlID0gbnVtKGouYmlkUHJpY2UpLCBhc2tQcmljZSA9IG51bShqLmFza1ByaWNlKTtcclxuICBjb25zdCBtaWQgPSBOdW1iZXIuaXNGaW5pdGUoYmlkUHJpY2UpJiZOdW1iZXIuaXNGaW5pdGUoYXNrUHJpY2UpID8gKGJpZFByaWNlK2Fza1ByaWNlKS8yIDogTmFOO1xyXG4gIHJldHVybiB7IGJpZFByaWNlLCBhc2tQcmljZSwgbWlkIH07XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IHtcclxuICBmZXRjaDI0aEFsbCwgbWFwVGlja2VyQnlTeW1ib2wsIGZldGNoVGlja2Vyc0ZvckNvaW5zLCBnZXRTZXR0aW5nc0NvaW5zLCB1c2R0U3ltYm9sc0ZvcixcclxuICBmZXRjaEtsaW5lcywgZmV0Y2hPcmRlckJvb2ssIGZldGNoT3JkZXJCb29rc0ZvclN5bWJvbHMsIGZldGNoT3JkZXJCb29rc0ZvckNvaW5zLCBmZXRjaEJvb2tUaWNrZXIsXHJcbiAgZmV0Y2hUaWNrZXIyNGgsIGZldGNoVGlja2VyMjRoTnVtLFxyXG59O1xyXG5cclxuLy8gc3JjL3NvdXJjZXMvYmluYW5jZS50c1xyXG4vLyBNaW5pbWFsIGhlbHBlcnMgdG8gbGlzdCBzeW1ib2xzIGFuZCBmZXRjaCAyNGggc3RhdHMuXHJcbi8vIEFkanVzdCBiYXNlIFVSTCBvciBmZXRjaCB3cmFwcGVyIHRvIHlvdXIgcHJvamVjdCBjb252ZW50aW9ucyBpZiBuZWVkZWQuXHJcblxyXG5jb25zdCBCQVNFID0gXCJodHRwczovL2FwaS5iaW5hbmNlLmNvbVwiO1xyXG5cclxudHlwZSBFeFN5bWJvbCA9IHtcclxuICBzeW1ib2w6IHN0cmluZztcclxuICBzdGF0dXM6IHN0cmluZztcclxuICBiYXNlQXNzZXQ6IHN0cmluZztcclxuICBxdW90ZUFzc2V0OiBzdHJpbmc7XHJcbn07XHJcbnR5cGUgRXhjaGFuZ2VJbmZvID0geyBzeW1ib2xzOiBFeFN5bWJvbFtdIH07XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gbGlzdFN5bWJvbHNCeVF1b3RlKHF1b3RlID0gXCJVU0RUXCIpOiBQcm9taXNlPHN0cmluZ1tdPiB7XHJcbiAgY29uc3QgciA9IGF3YWl0IGZldGNoKGAke0JBU0V9L2FwaS92My9leGNoYW5nZUluZm9gLCB7IGNhY2hlOiBcIm5vLXN0b3JlXCIgfSk7XHJcbiAgaWYgKCFyLm9rKSB0aHJvdyBuZXcgRXJyb3IoYGV4Y2hhbmdlSW5mbyAke3Iuc3RhdHVzfWApO1xyXG4gIGNvbnN0IGluZm8gPSAoYXdhaXQgci5qc29uKCkpIGFzIEV4Y2hhbmdlSW5mbztcclxuICBjb25zdCBzeW1zID0gaW5mby5zeW1ib2xzXHJcbiAgICAuZmlsdGVyKHMgPT4gcy5zdGF0dXMgPT09IFwiVFJBRElOR1wiICYmIHMucXVvdGVBc3NldC50b1VwcGVyQ2FzZSgpID09PSBxdW90ZS50b1VwcGVyQ2FzZSgpKVxyXG4gICAgLm1hcChzID0+IHMuc3ltYm9sKVxyXG4gICAgLnNvcnQoKTtcclxuICAvLyBkZS1kdXBcclxuICBjb25zdCBvdXQ6IHN0cmluZ1tdID0gW107XHJcbiAgZm9yIChjb25zdCBzIG9mIHN5bXMpIGlmICghb3V0Lmxlbmd0aCB8fCBvdXRbb3V0Lmxlbmd0aCAtIDFdICE9PSBzKSBvdXQucHVzaChzKTtcclxuICByZXR1cm4gb3V0O1xyXG59XHJcblxyXG4vLyBJZiB5b3UgYWxyZWFkeSBoYXZlIGEgcHJvamVjdC1zcGVjaWZpYyBmZXRjaDI0aCBmb3Igb25lIHN5bWJvbCwgcmV1c2UgaXQgaW5zaWRlIGhlcmUuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBmZXRjaDI0aEZvclN5bWJvbHMoc3ltYm9sczogc3RyaW5nW10pOiBQcm9taXNlPGFueVtdPiB7XHJcbiAgLy8gQmF0Y2ggd2l0aCBQcm9taXNlLmFsbCBvdmVyIC9hcGkvdjMvdGlja2VyLzI0aHI/c3ltYm9sPVhYWFhcclxuICAvLyAoQmluYW5jZSBhbHNvIHN1cHBvcnRzIC90aWNrZXIvMjRociB3aXRob3V0IHN5bWJvbCByZXR1cm5pbmcgQUxMLCBidXQgaXQncyBoZWF2eTtcclxuICAvLyBpZiB5b3UgcHJlZmVyIHRoYXQsIHlvdSBjYW4gZmV0Y2ggb25jZSBhbmQgZmlsdGVyLilcclxuICBjb25zdCBxcyA9IHN5bWJvbHMubWFwKHMgPT4gZmV0Y2goYCR7QkFTRX0vYXBpL3YzL3RpY2tlci8yNGhyP3N5bWJvbD0ke3N9YCwgeyBjYWNoZTogXCJuby1zdG9yZVwiIH0pXHJcbiAgICAudGhlbihyID0+IHtcclxuICAgICAgaWYgKCFyLm9rKSB0aHJvdyBuZXcgRXJyb3IoYDI0aHIgJHtzfSAke3Iuc3RhdHVzfWApO1xyXG4gICAgICByZXR1cm4gci5qc29uKCk7XHJcbiAgICB9KVxyXG4gICAgLmNhdGNoKGUgPT4gKHsgc3ltYm9sOiBzLCBfZXJyOiBTdHJpbmcoZSkgfSkpKTtcclxuICByZXR1cm4gUHJvbWlzZS5hbGwocXMpO1xyXG59XHJcblxyXG5cclxuXHJcbiJdLCJuYW1lcyI6WyJmZXRjaEpzb24iLCJnZXRBbGwiLCJnZXRTZXR0aW5ncyIsIm51bSIsIngiLCJkIiwiTmFOIiwibiIsIk51bWJlciIsImlzRmluaXRlIiwiZmV0Y2gyNGhBbGwiLCJzeW1ib2xzIiwibGVuZ3RoIiwicXMiLCJVUkxTZWFyY2hQYXJhbXMiLCJKU09OIiwic3RyaW5naWZ5IiwiYXJyIiwidG9TdHJpbmciLCJBcnJheSIsImlzQXJyYXkiLCJtYXAiLCJ0Iiwic3ltYm9sIiwiU3RyaW5nIiwid2VpZ2h0ZWRBdmdQcmljZSIsImxhc3RQcmljZSIsInByaWNlQ2hhbmdlUGVyY2VudCIsInByaWNlQ2hhbmdlIiwib3BlblByaWNlIiwibWFwVGlja2VyQnlTeW1ib2wiLCJvdXQiLCJub3JtQ29pbnMiLCJsaXN0Iiwic2V0IiwiU2V0IiwiYyIsInUiLCJ0cmltIiwidG9VcHBlckNhc2UiLCJoYXMiLCJhZGQiLCJwdXNoIiwiZ2V0U2V0dGluZ3NDb2lucyIsInMiLCJmcm9tIiwiY29pblVuaXZlcnNlIiwidXNkdFN5bWJvbHNGb3IiLCJjb2lucyIsImZpbHRlciIsImZldGNoVGlja2Vyc0ZvckNvaW5zIiwidW5pIiwiYnkiLCJVU0RUIiwicHJpY2UiLCJwY3QyNGgiLCJwY3QiLCJmZXRjaFRpY2tlcjI0aCIsImZldGNoVGlja2VyMjRoTnVtIiwibGFzdCIsImRlbHRhIiwib3BlbiIsInIiLCJmZXRjaEtsaW5lcyIsImludGVydmFsIiwibGltaXQiLCJmZXRjaE9yZGVyQm9vayIsImRlcHRoIiwidHMiLCJEYXRlIiwibm93IiwiYmVzdEJpZCIsImJpZHMiLCJiZXN0QXNrIiwiYXNrcyIsIm1pZCIsImJpZFZvbCIsInJlZHVjZSIsIl8iLCJxIiwiYXNrVm9sIiwiZmV0Y2hPcmRlckJvb2tzRm9yU3ltYm9scyIsIlByb21pc2UiLCJhbGwiLCJzeW0iLCJmZXRjaE9yZGVyQm9va3NGb3JDb2lucyIsIkJvb2xlYW4iLCJib29rcyIsImNvaW4iLCJlbnRyeSIsImZldGNoQm9va1RpY2tlciIsImoiLCJiaWRQcmljZSIsImFza1ByaWNlIiwiQkFTRSIsImxpc3RTeW1ib2xzQnlRdW90ZSIsInF1b3RlIiwiZmV0Y2giLCJjYWNoZSIsIm9rIiwiRXJyb3IiLCJzdGF0dXMiLCJpbmZvIiwianNvbiIsInN5bXMiLCJxdW90ZUFzc2V0Iiwic29ydCIsImZldGNoMjRoRm9yU3ltYm9scyIsInRoZW4iLCJjYXRjaCIsImUiLCJfZXJyIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./src/core/sources/binance.ts\n");

/***/ }),

/***/ "(rsc)/./src/core/sources/binanceClient.ts":
/*!*******************************************!*\
  !*** ./src/core/sources/binanceClient.ts ***!
  \*******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   fetchJson: () => (/* binding */ fetchJson)\n/* harmony export */ });\n// src/core/sources/binanceClient.ts\n// Lightweight helper for Binance public REST calls used across the pipeline.\nconst DEFAULT_BASE = process.env.BINANCE_BASE_URL?.trim() || \"https://api.binance.com\";\nfunction buildUrl(path, query) {\n    const url = path.startsWith(\"http\") ? new URL(path) : new URL(path, DEFAULT_BASE);\n    if (query) {\n        for (const [key, value] of Object.entries(query)){\n            if (value === undefined || value === null) continue;\n            url.searchParams.set(key, String(value));\n        }\n    }\n    return url;\n}\nasync function fetchJson(path, query, init) {\n    const url = buildUrl(path, query);\n    const response = await fetch(url.toString(), {\n        method: \"GET\",\n        headers: {\n            Accept: \"application/json\",\n            ...init?.headers ?? {}\n        },\n        ...init\n    });\n    if (!response.ok) {\n        const text = await response.text().catch(()=>\"<no-body>\");\n        throw new Error(`binance ${url.pathname} -> ${response.status} ${text}`);\n    }\n    return await response.json();\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvY29yZS9zb3VyY2VzL2JpbmFuY2VDbGllbnQudHMiLCJtYXBwaW5ncyI6Ijs7OztBQUFBLG9DQUFvQztBQUNwQyw2RUFBNkU7QUFFN0UsTUFBTUEsZUFBZUMsUUFBUUMsR0FBRyxDQUFDQyxnQkFBZ0IsRUFBRUMsVUFBVTtBQUU3RCxTQUFTQyxTQUFTQyxJQUFZLEVBQUVDLEtBQW1EO0lBQ2pGLE1BQU1DLE1BQU1GLEtBQUtHLFVBQVUsQ0FBQyxVQUFVLElBQUlDLElBQUlKLFFBQVEsSUFBSUksSUFBSUosTUFBTU47SUFDcEUsSUFBSU8sT0FBTztRQUNULEtBQUssTUFBTSxDQUFDSSxLQUFLQyxNQUFNLElBQUlDLE9BQU9DLE9BQU8sQ0FBQ1AsT0FBUTtZQUNoRCxJQUFJSyxVQUFVRyxhQUFhSCxVQUFVLE1BQU07WUFDM0NKLElBQUlRLFlBQVksQ0FBQ0MsR0FBRyxDQUFDTixLQUFLTyxPQUFPTjtRQUNuQztJQUNGO0lBQ0EsT0FBT0o7QUFDVDtBQUVPLGVBQWVXLFVBQ3BCYixJQUFZLEVBQ1pDLEtBQW1ELEVBQ25EYSxJQUFrQjtJQUVsQixNQUFNWixNQUFNSCxTQUFTQyxNQUFNQztJQUMzQixNQUFNYyxXQUFXLE1BQU1DLE1BQU1kLElBQUllLFFBQVEsSUFBSTtRQUMzQ0MsUUFBUTtRQUNSQyxTQUFTO1lBQUVDLFFBQVE7WUFBb0IsR0FBSU4sTUFBTUssV0FBVyxDQUFDLENBQUM7UUFBRTtRQUNoRSxHQUFHTCxJQUFJO0lBQ1Q7SUFFQSxJQUFJLENBQUNDLFNBQVNNLEVBQUUsRUFBRTtRQUNoQixNQUFNQyxPQUFPLE1BQU1QLFNBQVNPLElBQUksR0FBR0MsS0FBSyxDQUFDLElBQU07UUFDL0MsTUFBTSxJQUFJQyxNQUFNLENBQUMsUUFBUSxFQUFFdEIsSUFBSXVCLFFBQVEsQ0FBQyxJQUFJLEVBQUVWLFNBQVNXLE1BQU0sQ0FBQyxDQUFDLEVBQUVKLE1BQU07SUFDekU7SUFFQSxPQUFRLE1BQU1QLFNBQVNZLElBQUk7QUFDN0IiLCJzb3VyY2VzIjpbIkg6XFxVc2Vyc1xcR3VzXFxzb3VyY2VcXHJlcG9cXGR5bmFtaWNzXFxkeW5hbWljcy1iXFxjcnlwdG9waS1keW5hbWljc1xcc3JjXFxjb3JlXFxzb3VyY2VzXFxiaW5hbmNlQ2xpZW50LnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIHNyYy9jb3JlL3NvdXJjZXMvYmluYW5jZUNsaWVudC50c1xuLy8gTGlnaHR3ZWlnaHQgaGVscGVyIGZvciBCaW5hbmNlIHB1YmxpYyBSRVNUIGNhbGxzIHVzZWQgYWNyb3NzIHRoZSBwaXBlbGluZS5cblxuY29uc3QgREVGQVVMVF9CQVNFID0gcHJvY2Vzcy5lbnYuQklOQU5DRV9CQVNFX1VSTD8udHJpbSgpIHx8IFwiaHR0cHM6Ly9hcGkuYmluYW5jZS5jb21cIjtcblxuZnVuY3Rpb24gYnVpbGRVcmwocGF0aDogc3RyaW5nLCBxdWVyeT86IFJlY29yZDxzdHJpbmcsIHN0cmluZyB8IG51bWJlciB8IHVuZGVmaW5lZD4pIHtcbiAgY29uc3QgdXJsID0gcGF0aC5zdGFydHNXaXRoKFwiaHR0cFwiKSA/IG5ldyBVUkwocGF0aCkgOiBuZXcgVVJMKHBhdGgsIERFRkFVTFRfQkFTRSk7XG4gIGlmIChxdWVyeSkge1xuICAgIGZvciAoY29uc3QgW2tleSwgdmFsdWVdIG9mIE9iamVjdC5lbnRyaWVzKHF1ZXJ5KSkge1xuICAgICAgaWYgKHZhbHVlID09PSB1bmRlZmluZWQgfHwgdmFsdWUgPT09IG51bGwpIGNvbnRpbnVlO1xuICAgICAgdXJsLnNlYXJjaFBhcmFtcy5zZXQoa2V5LCBTdHJpbmcodmFsdWUpKTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIHVybDtcbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGZldGNoSnNvbjxUID0gdW5rbm93bj4oXG4gIHBhdGg6IHN0cmluZyxcbiAgcXVlcnk/OiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmcgfCBudW1iZXIgfCB1bmRlZmluZWQ+LFxuICBpbml0PzogUmVxdWVzdEluaXQsXG4pOiBQcm9taXNlPFQ+IHtcbiAgY29uc3QgdXJsID0gYnVpbGRVcmwocGF0aCwgcXVlcnkpO1xuICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKHVybC50b1N0cmluZygpLCB7XG4gICAgbWV0aG9kOiBcIkdFVFwiLFxuICAgIGhlYWRlcnM6IHsgQWNjZXB0OiBcImFwcGxpY2F0aW9uL2pzb25cIiwgLi4uKGluaXQ/LmhlYWRlcnMgPz8ge30pIH0sXG4gICAgLi4uaW5pdCxcbiAgfSk7XG5cbiAgaWYgKCFyZXNwb25zZS5vaykge1xuICAgIGNvbnN0IHRleHQgPSBhd2FpdCByZXNwb25zZS50ZXh0KCkuY2F0Y2goKCkgPT4gXCI8bm8tYm9keT5cIik7XG4gICAgdGhyb3cgbmV3IEVycm9yKGBiaW5hbmNlICR7dXJsLnBhdGhuYW1lfSAtPiAke3Jlc3BvbnNlLnN0YXR1c30gJHt0ZXh0fWApO1xuICB9XG5cbiAgcmV0dXJuIChhd2FpdCByZXNwb25zZS5qc29uKCkpIGFzIFQ7XG59XHJcbiJdLCJuYW1lcyI6WyJERUZBVUxUX0JBU0UiLCJwcm9jZXNzIiwiZW52IiwiQklOQU5DRV9CQVNFX1VSTCIsInRyaW0iLCJidWlsZFVybCIsInBhdGgiLCJxdWVyeSIsInVybCIsInN0YXJ0c1dpdGgiLCJVUkwiLCJrZXkiLCJ2YWx1ZSIsIk9iamVjdCIsImVudHJpZXMiLCJ1bmRlZmluZWQiLCJzZWFyY2hQYXJhbXMiLCJzZXQiLCJTdHJpbmciLCJmZXRjaEpzb24iLCJpbml0IiwicmVzcG9uc2UiLCJmZXRjaCIsInRvU3RyaW5nIiwibWV0aG9kIiwiaGVhZGVycyIsIkFjY2VwdCIsIm9rIiwidGV4dCIsImNhdGNoIiwiRXJyb3IiLCJwYXRobmFtZSIsInN0YXR1cyIsImpzb24iXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./src/core/sources/binanceClient.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/markets/pairs.ts":
/*!**********************************!*\
  !*** ./src/lib/markets/pairs.ts ***!
  \**********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   crossPairsFromCoins: () => (/* binding */ crossPairsFromCoins),\n/* harmony export */   dedupeCoins: () => (/* binding */ dedupeCoins),\n/* harmony export */   normalizeCoin: () => (/* binding */ normalizeCoin),\n/* harmony export */   pairsFromSettings: () => (/* binding */ pairsFromSettings),\n/* harmony export */   usdtLegsFromCoins: () => (/* binding */ usdtLegsFromCoins)\n/* harmony export */ });\n// src/lib/markets/pairs.ts\n// Shared, deterministic pair helpers used by both UI and API.\nconst QUOTE_SUFFIXES = [\n    \"USDT\",\n    \"USDC\",\n    \"FDUSD\",\n    \"TUSD\",\n    \"BUSD\"\n];\n/**\n * Normalizes a token symbol:\n * - Uppercase\n * - Remove non A-Z characters\n * - Strip known quote suffixes so cross combos never double-append quotes\n */ const normalizeCoin = (c)=>{\n    const upper = String(c || \"\").toUpperCase().replace(/[^A-Z]/g, \"\");\n    if (!upper) return \"\";\n    for (const suffix of QUOTE_SUFFIXES){\n        if (upper === suffix) return upper;\n        if (upper.endsWith(suffix) && upper.length > suffix.length) {\n            return upper.slice(0, -suffix.length);\n        }\n    }\n    return upper;\n};\nfunction dedupeCoins(bases) {\n    return Array.from(new Set((bases ?? []).map(normalizeCoin))).filter(Boolean);\n}\nfunction usdtLegsFromCoins(bases) {\n    const uniq = dedupeCoins(bases).filter((c)=>c && c !== \"USDT\");\n    return uniq.map((b)=>`${b}USDT`);\n}\n// Ordered permutations A->B (A !== B). No verification here.\nfunction crossPairsFromCoins(bases) {\n    const coins = dedupeCoins(bases).filter((c)=>c && c !== \"USDT\");\n    const out = [];\n    for(let i = 0; i < coins.length; i++){\n        for(let j = 0; j < coins.length; j++){\n            if (i === j) continue;\n            out.push(`${coins[i]}${coins[j]}`);\n        }\n    }\n    return out;\n}\n/**\n * Async builder with optional preview verification.\n * - If `verify` is provided, we filter USDT + cross by it.\n * - If not, we return only USDT legs (no synthetic crosses on the client).\n */ async function pairsFromSettings(bases, opts) {\n    const preferVerifiedUsdt = opts?.preferVerifiedUsdt ?? true;\n    const usdtCand = usdtLegsFromCoins(bases);\n    const crossCand = crossPairsFromCoins(bases);\n    if (!opts?.verify) {\n        return {\n            usdt: usdtCand,\n            cross: [],\n            all: usdtCand.slice()\n        };\n    }\n    const verified = await opts.verify([\n        ...usdtCand,\n        ...crossCand\n    ]);\n    const has = (s)=>verified.has(s.toUpperCase());\n    const usdt = verified.size && preferVerifiedUsdt ? usdtCand.filter(has) : usdtCand;\n    const cross = crossCand.filter(has);\n    const all = Array.from(new Set([\n        ...usdt,\n        ...cross\n    ]));\n    return {\n        usdt,\n        cross,\n        all\n    };\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvbGliL21hcmtldHMvcGFpcnMudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFBQSwyQkFBMkI7QUFDM0IsOERBQThEO0FBSTlELE1BQU1BLGlCQUFpQjtJQUFDO0lBQVE7SUFBUTtJQUFTO0lBQVE7Q0FBTztBQUVoRTs7Ozs7Q0FLQyxHQUNNLE1BQU1DLGdCQUFnQixDQUFDQztJQUM1QixNQUFNQyxRQUFRQyxPQUFPRixLQUFLLElBQUlHLFdBQVcsR0FBR0MsT0FBTyxDQUFDLFdBQVc7SUFDL0QsSUFBSSxDQUFDSCxPQUFPLE9BQU87SUFDbkIsS0FBSyxNQUFNSSxVQUFVUCxlQUFnQjtRQUNuQyxJQUFJRyxVQUFVSSxRQUFRLE9BQU9KO1FBQzdCLElBQUlBLE1BQU1LLFFBQVEsQ0FBQ0QsV0FBV0osTUFBTU0sTUFBTSxHQUFHRixPQUFPRSxNQUFNLEVBQUU7WUFDMUQsT0FBT04sTUFBTU8sS0FBSyxDQUFDLEdBQUcsQ0FBQ0gsT0FBT0UsTUFBTTtRQUN0QztJQUNGO0lBQ0EsT0FBT047QUFDVCxFQUFFO0FBRUssU0FBU1EsWUFBWUMsS0FBZTtJQUN6QyxPQUFPQyxNQUFNQyxJQUFJLENBQUMsSUFBSUMsSUFBSSxDQUFDSCxTQUFTLEVBQUUsRUFBRUksR0FBRyxDQUFDZixpQkFBaUJnQixNQUFNLENBQUNDO0FBQ3RFO0FBRU8sU0FBU0Msa0JBQWtCUCxLQUFlO0lBQy9DLE1BQU1RLE9BQU9ULFlBQVlDLE9BQU9LLE1BQU0sQ0FBQyxDQUFDZixJQUFNQSxLQUFLQSxNQUFNO0lBQ3pELE9BQU9rQixLQUFLSixHQUFHLENBQUMsQ0FBQ0ssSUFBTSxHQUFHQSxFQUFFLElBQUksQ0FBQztBQUNuQztBQUVBLDZEQUE2RDtBQUN0RCxTQUFTQyxvQkFBb0JWLEtBQWU7SUFDakQsTUFBTVcsUUFBUVosWUFBWUMsT0FBT0ssTUFBTSxDQUFDLENBQUNmLElBQU1BLEtBQUtBLE1BQU07SUFDMUQsTUFBTXNCLE1BQWdCLEVBQUU7SUFDeEIsSUFBSyxJQUFJQyxJQUFJLEdBQUdBLElBQUlGLE1BQU1kLE1BQU0sRUFBRWdCLElBQUs7UUFDckMsSUFBSyxJQUFJQyxJQUFJLEdBQUdBLElBQUlILE1BQU1kLE1BQU0sRUFBRWlCLElBQUs7WUFDckMsSUFBSUQsTUFBTUMsR0FBRztZQUNiRixJQUFJRyxJQUFJLENBQUMsR0FBR0osS0FBSyxDQUFDRSxFQUFFLEdBQUdGLEtBQUssQ0FBQ0csRUFBRSxFQUFFO1FBQ25DO0lBQ0Y7SUFDQSxPQUFPRjtBQUNUO0FBRUE7Ozs7Q0FJQyxHQUNNLGVBQWVJLGtCQUNwQmhCLEtBQWUsRUFDZmlCLElBR0M7SUFFRCxNQUFNQyxxQkFBcUJELE1BQU1DLHNCQUFzQjtJQUV2RCxNQUFNQyxXQUFXWixrQkFBa0JQO0lBQ25DLE1BQU1vQixZQUFZVixvQkFBb0JWO0lBRXRDLElBQUksQ0FBQ2lCLE1BQU1JLFFBQVE7UUFDakIsT0FBTztZQUFFQyxNQUFNSDtZQUFVSSxPQUFPLEVBQUU7WUFBRUMsS0FBS0wsU0FBU3JCLEtBQUs7UUFBRztJQUM1RDtJQUVBLE1BQU0yQixXQUFXLE1BQU1SLEtBQUtJLE1BQU0sQ0FBQztXQUFJRjtXQUFhQztLQUFVO0lBQzlELE1BQU1NLE1BQU0sQ0FBQ0MsSUFBY0YsU0FBU0MsR0FBRyxDQUFDQyxFQUFFbEMsV0FBVztJQUVyRCxNQUFNNkIsT0FDSkcsU0FBU0csSUFBSSxJQUFJVixxQkFBcUJDLFNBQVNkLE1BQU0sQ0FBQ3FCLE9BQU9QO0lBQy9ELE1BQU1JLFFBQVFILFVBQVVmLE1BQU0sQ0FBQ3FCO0lBQy9CLE1BQU1GLE1BQU12QixNQUFNQyxJQUFJLENBQUMsSUFBSUMsSUFBSTtXQUFJbUI7V0FBU0M7S0FBTTtJQUNsRCxPQUFPO1FBQUVEO1FBQU1DO1FBQU9DO0lBQUk7QUFDNUIiLCJzb3VyY2VzIjpbIkg6XFxVc2Vyc1xcR3VzXFxzb3VyY2VcXHJlcG9cXGR5bmFtaWNzXFxkeW5hbWljcy1iXFxjcnlwdG9waS1keW5hbWljc1xcc3JjXFxsaWJcXG1hcmtldHNcXHBhaXJzLnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIHNyYy9saWIvbWFya2V0cy9wYWlycy50c1xuLy8gU2hhcmVkLCBkZXRlcm1pbmlzdGljIHBhaXIgaGVscGVycyB1c2VkIGJ5IGJvdGggVUkgYW5kIEFQSS5cblxuZXhwb3J0IHR5cGUgUGFpckF2YWlsYWJpbGl0eSA9IHsgdXNkdDogc3RyaW5nW107IGNyb3NzOiBzdHJpbmdbXTsgYWxsOiBzdHJpbmdbXSB9O1xuXG5jb25zdCBRVU9URV9TVUZGSVhFUyA9IFtcIlVTRFRcIiwgXCJVU0RDXCIsIFwiRkRVU0RcIiwgXCJUVVNEXCIsIFwiQlVTRFwiXSBhcyBjb25zdDtcblxuLyoqXG4gKiBOb3JtYWxpemVzIGEgdG9rZW4gc3ltYm9sOlxuICogLSBVcHBlcmNhc2VcbiAqIC0gUmVtb3ZlIG5vbiBBLVogY2hhcmFjdGVyc1xuICogLSBTdHJpcCBrbm93biBxdW90ZSBzdWZmaXhlcyBzbyBjcm9zcyBjb21ib3MgbmV2ZXIgZG91YmxlLWFwcGVuZCBxdW90ZXNcbiAqL1xuZXhwb3J0IGNvbnN0IG5vcm1hbGl6ZUNvaW4gPSAoYzogc3RyaW5nKTogc3RyaW5nID0+IHtcbiAgY29uc3QgdXBwZXIgPSBTdHJpbmcoYyB8fCBcIlwiKS50b1VwcGVyQ2FzZSgpLnJlcGxhY2UoL1teQS1aXS9nLCBcIlwiKTtcbiAgaWYgKCF1cHBlcikgcmV0dXJuIFwiXCI7XG4gIGZvciAoY29uc3Qgc3VmZml4IG9mIFFVT1RFX1NVRkZJWEVTKSB7XG4gICAgaWYgKHVwcGVyID09PSBzdWZmaXgpIHJldHVybiB1cHBlcjtcbiAgICBpZiAodXBwZXIuZW5kc1dpdGgoc3VmZml4KSAmJiB1cHBlci5sZW5ndGggPiBzdWZmaXgubGVuZ3RoKSB7XG4gICAgICByZXR1cm4gdXBwZXIuc2xpY2UoMCwgLXN1ZmZpeC5sZW5ndGgpO1xuICAgIH1cbiAgfVxuICByZXR1cm4gdXBwZXI7XG59O1xuXG5leHBvcnQgZnVuY3Rpb24gZGVkdXBlQ29pbnMoYmFzZXM6IHN0cmluZ1tdKTogc3RyaW5nW10ge1xuICByZXR1cm4gQXJyYXkuZnJvbShuZXcgU2V0KChiYXNlcyA/PyBbXSkubWFwKG5vcm1hbGl6ZUNvaW4pKSkuZmlsdGVyKEJvb2xlYW4pO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gdXNkdExlZ3NGcm9tQ29pbnMoYmFzZXM6IHN0cmluZ1tdKTogc3RyaW5nW10ge1xuICBjb25zdCB1bmlxID0gZGVkdXBlQ29pbnMoYmFzZXMpLmZpbHRlcigoYykgPT4gYyAmJiBjICE9PSBcIlVTRFRcIik7XG4gIHJldHVybiB1bmlxLm1hcCgoYikgPT4gYCR7Yn1VU0RUYCk7XG59XG5cbi8vIE9yZGVyZWQgcGVybXV0YXRpb25zIEEtPkIgKEEgIT09IEIpLiBObyB2ZXJpZmljYXRpb24gaGVyZS5cbmV4cG9ydCBmdW5jdGlvbiBjcm9zc1BhaXJzRnJvbUNvaW5zKGJhc2VzOiBzdHJpbmdbXSk6IHN0cmluZ1tdIHtcbiAgY29uc3QgY29pbnMgPSBkZWR1cGVDb2lucyhiYXNlcykuZmlsdGVyKChjKSA9PiBjICYmIGMgIT09IFwiVVNEVFwiKTtcbiAgY29uc3Qgb3V0OiBzdHJpbmdbXSA9IFtdO1xuICBmb3IgKGxldCBpID0gMDsgaSA8IGNvaW5zLmxlbmd0aDsgaSsrKSB7XG4gICAgZm9yIChsZXQgaiA9IDA7IGogPCBjb2lucy5sZW5ndGg7IGorKykge1xuICAgICAgaWYgKGkgPT09IGopIGNvbnRpbnVlO1xuICAgICAgb3V0LnB1c2goYCR7Y29pbnNbaV19JHtjb2luc1tqXX1gKTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIG91dDtcbn1cblxuLyoqXG4gKiBBc3luYyBidWlsZGVyIHdpdGggb3B0aW9uYWwgcHJldmlldyB2ZXJpZmljYXRpb24uXG4gKiAtIElmIGB2ZXJpZnlgIGlzIHByb3ZpZGVkLCB3ZSBmaWx0ZXIgVVNEVCArIGNyb3NzIGJ5IGl0LlxuICogLSBJZiBub3QsIHdlIHJldHVybiBvbmx5IFVTRFQgbGVncyAobm8gc3ludGhldGljIGNyb3NzZXMgb24gdGhlIGNsaWVudCkuXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBwYWlyc0Zyb21TZXR0aW5ncyhcbiAgYmFzZXM6IHN0cmluZ1tdLFxuICBvcHRzPzoge1xuICAgIHZlcmlmeT86IChzeW1ib2xzOiBzdHJpbmdbXSkgPT4gUHJvbWlzZTxTZXQ8c3RyaW5nPj47XG4gICAgcHJlZmVyVmVyaWZpZWRVc2R0PzogYm9vbGVhbjsgLy8gZGVmYXVsdCB0cnVlXG4gIH1cbik6IFByb21pc2U8UGFpckF2YWlsYWJpbGl0eT4ge1xuICBjb25zdCBwcmVmZXJWZXJpZmllZFVzZHQgPSBvcHRzPy5wcmVmZXJWZXJpZmllZFVzZHQgPz8gdHJ1ZTtcblxuICBjb25zdCB1c2R0Q2FuZCA9IHVzZHRMZWdzRnJvbUNvaW5zKGJhc2VzKTtcbiAgY29uc3QgY3Jvc3NDYW5kID0gY3Jvc3NQYWlyc0Zyb21Db2lucyhiYXNlcyk7XG5cbiAgaWYgKCFvcHRzPy52ZXJpZnkpIHtcbiAgICByZXR1cm4geyB1c2R0OiB1c2R0Q2FuZCwgY3Jvc3M6IFtdLCBhbGw6IHVzZHRDYW5kLnNsaWNlKCkgfTtcbiAgfVxuXG4gIGNvbnN0IHZlcmlmaWVkID0gYXdhaXQgb3B0cy52ZXJpZnkoWy4uLnVzZHRDYW5kLCAuLi5jcm9zc0NhbmRdKTtcbiAgY29uc3QgaGFzID0gKHM6IHN0cmluZykgPT4gdmVyaWZpZWQuaGFzKHMudG9VcHBlckNhc2UoKSk7XG5cbiAgY29uc3QgdXNkdCA9XG4gICAgdmVyaWZpZWQuc2l6ZSAmJiBwcmVmZXJWZXJpZmllZFVzZHQgPyB1c2R0Q2FuZC5maWx0ZXIoaGFzKSA6IHVzZHRDYW5kO1xuICBjb25zdCBjcm9zcyA9IGNyb3NzQ2FuZC5maWx0ZXIoaGFzKTtcbiAgY29uc3QgYWxsID0gQXJyYXkuZnJvbShuZXcgU2V0KFsuLi51c2R0LCAuLi5jcm9zc10pKTtcbiAgcmV0dXJuIHsgdXNkdCwgY3Jvc3MsIGFsbCB9O1xufVxuIl0sIm5hbWVzIjpbIlFVT1RFX1NVRkZJWEVTIiwibm9ybWFsaXplQ29pbiIsImMiLCJ1cHBlciIsIlN0cmluZyIsInRvVXBwZXJDYXNlIiwicmVwbGFjZSIsInN1ZmZpeCIsImVuZHNXaXRoIiwibGVuZ3RoIiwic2xpY2UiLCJkZWR1cGVDb2lucyIsImJhc2VzIiwiQXJyYXkiLCJmcm9tIiwiU2V0IiwibWFwIiwiZmlsdGVyIiwiQm9vbGVhbiIsInVzZHRMZWdzRnJvbUNvaW5zIiwidW5pcSIsImIiLCJjcm9zc1BhaXJzRnJvbUNvaW5zIiwiY29pbnMiLCJvdXQiLCJpIiwiaiIsInB1c2giLCJwYWlyc0Zyb21TZXR0aW5ncyIsIm9wdHMiLCJwcmVmZXJWZXJpZmllZFVzZHQiLCJ1c2R0Q2FuZCIsImNyb3NzQ2FuZCIsInZlcmlmeSIsInVzZHQiLCJjcm9zcyIsImFsbCIsInZlcmlmaWVkIiwiaGFzIiwicyIsInNpemUiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/markets/pairs.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/settings/schema.ts":
/*!************************************!*\
  !*** ./src/lib/settings/schema.ts ***!
  \************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   AppSettings: () => (/* binding */ AppSettings),\n/* harmony export */   DEFAULT_SETTINGS: () => (/* binding */ DEFAULT_SETTINGS),\n/* harmony export */   SETTINGS_VERSION: () => (/* binding */ SETTINGS_VERSION),\n/* harmony export */   isAppSettings: () => (/* binding */ isAppSettings),\n/* harmony export */   mergeAppSettings: () => (/* binding */ mergeAppSettings),\n/* harmony export */   migrateSettings: () => (/* binding */ migrateSettings),\n/* harmony export */   normalizeCoinUniverse: () => (/* binding */ normalizeCoinUniverse)\n/* harmony export */ });\n// src/lib/settings/schema.ts\nconst SETTINGS_VERSION = 1;\nconst DEFAULT_SETTINGS = {\n    version: SETTINGS_VERSION,\n    coinUniverse: [],\n    profile: {\n        nickname: \"\",\n        email: \"\",\n        binanceKeyId: \"\"\n    },\n    stats: {\n        histogramLen: 64,\n        bmDecimals: 4,\n        idPctDecimals: 6\n    },\n    timing: {\n        autoRefresh: true,\n        autoRefreshMs: 40000,\n        secondaryEnabled: true,\n        secondaryCycles: 3,\n        strCycles: {\n            m30: 45,\n            h1: 90,\n            h3: 270\n        }\n    },\n    clustering: {\n        clusters: [\n            {\n                id: \"cl-1\",\n                name: \"Cluster 1\",\n                coins: []\n            }\n        ]\n    },\n    params: {\n        values: {\n            eta: 0.02,\n            epsilon: 0.2,\n            iota: 0.5\n        }\n    }\n};\n// ---------- internal helpers ----------\nconst toUpperArray = (value)=>{\n    if (!Array.isArray(value)) return [];\n    const seen = new Set();\n    const result = [];\n    for (const entry of value){\n        const upper = String(entry ?? \"\").trim().toUpperCase();\n        if (!upper || seen.has(upper)) continue;\n        seen.add(upper);\n        result.push(upper);\n    }\n    if (!seen.has(\"USDT\")) result.push(\"USDT\");\n    return result;\n};\nconst toNumber = (value, fallback)=>{\n    const parsed = Number(value);\n    return Number.isFinite(parsed) ? parsed : fallback;\n};\nconst clamp = (value, min, max)=>Math.min(max, Math.max(min, value));\nconst toClusterArray = (value)=>{\n    if (!Array.isArray(value)) return DEFAULT_SETTINGS.clustering.clusters;\n    return value.map((entry, index)=>{\n        const obj = entry && typeof entry === \"object\" ? entry : {};\n        return {\n            id: String(obj.id ?? `cl-${index + 1}`),\n            name: String(obj.name ?? `Cluster ${index + 1}`),\n            coins: toUpperArray(obj.coins)\n        };\n    });\n};\nconst toParams = (value)=>{\n    if (!value || typeof value !== \"object\") return {\n        ...DEFAULT_SETTINGS.params.values\n    };\n    const result = {\n        ...DEFAULT_SETTINGS.params.values\n    };\n    for (const [key, raw] of Object.entries(value)){\n        const parsed = Number(raw);\n        if (Number.isFinite(parsed)) result[key] = parsed;\n    }\n    return result;\n};\n// ---------- public migration (existing) ----------\nfunction migrateSettings(input) {\n    const s = input && typeof input === \"object\" ? input : {};\n    const statsSource = s.stats && typeof s.stats === \"object\" ? s.stats : {};\n    const timingSource = s.timing && typeof s.timing === \"object\" ? s.timing : {};\n    const timingCycles = timingSource.strCycles && typeof timingSource.strCycles === \"object\" ? timingSource.strCycles : {};\n    const out = {\n        version: SETTINGS_VERSION,\n        coinUniverse: toUpperArray(s.coinUniverse),\n        profile: {\n            nickname: String(s.profile?.nickname ?? \"\"),\n            email: String(s.profile?.email ?? \"\"),\n            binanceKeyId: String(s.profile?.binanceKeyId ?? \"\")\n        },\n        stats: {\n            histogramLen: Math.max(16, toNumber(statsSource.histogramLen, DEFAULT_SETTINGS.stats.histogramLen)),\n            bmDecimals: clamp(toNumber(statsSource.bmDecimals, DEFAULT_SETTINGS.stats.bmDecimals), 0, 6),\n            idPctDecimals: clamp(toNumber(statsSource.idPctDecimals, DEFAULT_SETTINGS.stats.idPctDecimals), 0, 8)\n        },\n        timing: {\n            autoRefresh: Boolean(timingSource.autoRefresh ?? DEFAULT_SETTINGS.timing.autoRefresh),\n            autoRefreshMs: Math.max(500, toNumber(timingSource.autoRefreshMs, DEFAULT_SETTINGS.timing.autoRefreshMs)),\n            secondaryEnabled: Boolean(timingSource.secondaryEnabled ?? DEFAULT_SETTINGS.timing.secondaryEnabled),\n            secondaryCycles: clamp(toNumber(timingSource.secondaryCycles, DEFAULT_SETTINGS.timing.secondaryCycles), 1, 10),\n            strCycles: {\n                m30: Math.max(1, toNumber(timingCycles.m30, DEFAULT_SETTINGS.timing.strCycles.m30)),\n                h1: Math.max(1, toNumber(timingCycles.h1, DEFAULT_SETTINGS.timing.strCycles.h1)),\n                h3: Math.max(1, toNumber(timingCycles.h3, DEFAULT_SETTINGS.timing.strCycles.h3))\n            }\n        },\n        clustering: {\n            clusters: toClusterArray(s.clustering?.clusters)\n        },\n        params: {\n            values: toParams(s.params?.values)\n        }\n    };\n    if (out.coinUniverse.length === 0) {\n        out.coinUniverse = [\n            ...DEFAULT_SETTINGS.coinUniverse\n        ];\n    }\n    return out;\n}\n/** Normalize coins from a string (comma/space-separated) or array; ensures USDT present and uppercase+deduped. */ function normalizeCoinUniverse(input) {\n    if (Array.isArray(input)) return toUpperArray(input);\n    if (typeof input === \"string\") {\n        const parts = input.split(/[,\\s]+/).map((s)=>s.trim()).filter(Boolean);\n        return toUpperArray(parts);\n    }\n    return toUpperArray([]);\n}\n/** Type guard to check if an object already looks like an AppSettings after migration. */ function isAppSettings(x) {\n    return !!x && typeof x === \"object\" && \"version\" in x && \"coinUniverse\" in x;\n}\n/**\n * Factory  create a normalized AppSettings object.\n * - If you pass nothing, you get migrated DEFAULT_SETTINGS.\n * - If you pass a deep-partial or any unknown, it is migrated safely.\n */ function AppSettings(input) {\n    return migrateSettings(input ?? DEFAULT_SETTINGS);\n}\n/** Merge a base AppSettings with a deep-partial patch, then normalize. */ function mergeAppSettings(base, patch) {\n    // shallow-merge at top level; nested objects are re-validated by migrateSettings\n    return migrateSettings({\n        ...base,\n        ...patch\n    });\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QzlDLElBQUksT0FBT0EsVUFBVSxVQUFVO1FBQzdCLE1BQU1TLFFBQVFULE1BQU1VLEtBQUssQ0FBQyxVQUFVbkIsR0FBRyxDQUFDVSxDQUFBQSxJQUFLQSxFQUFFekIsSUFBSSxJQUFJbUMsTUFBTSxDQUFDTDtRQUM5RCxPQUFPeEMsYUFBYTJDO0lBQ3RCO0lBQ0EsT0FBTzNDLGFBQWEsRUFBRTtBQUN4QjtBQUVBLHdGQUF3RixHQUNqRixTQUFTOEMsY0FBY0MsQ0FBVTtJQUN0QyxPQUFPLENBQUMsQ0FBQ0EsS0FBSyxPQUFPQSxNQUFNLFlBQVksYUFBY0EsS0FBYSxrQkFBbUJBO0FBQ3ZGO0FBRUE7Ozs7Q0FJQyxHQUNNLFNBQVNDLFlBQVlkLEtBQTBDO0lBQ3BFLE9BQU9ELGdCQUFnQkMsU0FBU2hFO0FBQ2xDO0FBRUEsd0VBQXdFLEdBQ2pFLFNBQVMrRSxpQkFBaUJDLElBQWlCLEVBQUVDLEtBQStCO0lBQ2pGLGlGQUFpRjtJQUNqRixPQUFPbEIsZ0JBQWdCO1FBQUUsR0FBR2lCLElBQUk7UUFBRSxHQUFHQyxLQUFLO0lBQUM7QUFDN0MiLCJzb3VyY2VzIjpbIkg6XFxVc2Vyc1xcR3VzXFxzb3VyY2VcXHJlcG9cXGR5bmFtaWNzXFxkeW5hbWljcy1iXFxjcnlwdG9waS1keW5hbWljc1xcc3JjXFxsaWJcXHNldHRpbmdzXFxzY2hlbWEudHMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gc3JjL2xpYi9zZXR0aW5ncy9zY2hlbWEudHNcbmV4cG9ydCB0eXBlIENsdXN0ZXIgPSB7IGlkOiBzdHJpbmc7IG5hbWU6IHN0cmluZzsgY29pbnM6IHN0cmluZ1tdIH07XG5cbmV4cG9ydCB0eXBlIEFwcFNldHRpbmdzID0ge1xuICB2ZXJzaW9uOiBudW1iZXI7XG4gIGNvaW5Vbml2ZXJzZTogc3RyaW5nW107XG4gIHByb2ZpbGU6IHsgbmlja25hbWU6IHN0cmluZzsgZW1haWw6IHN0cmluZzsgYmluYW5jZUtleUlkOiBzdHJpbmcgfTtcbiAgc3RhdHM6IHsgaGlzdG9ncmFtTGVuOiBudW1iZXI7IGJtRGVjaW1hbHM6IG51bWJlcjsgaWRQY3REZWNpbWFsczogbnVtYmVyIH07XG4gIHRpbWluZzoge1xuICAgIGF1dG9SZWZyZXNoOiBib29sZWFuOyAgICAgICAgICAgLy8gPC0tIHJlcXVpcmVkIGZsYWdcbiAgICBhdXRvUmVmcmVzaE1zOiBudW1iZXI7XG4gICAgc2Vjb25kYXJ5RW5hYmxlZDogYm9vbGVhbjtcbiAgICBzZWNvbmRhcnlDeWNsZXM6IG51bWJlcjsgICAgICAgIC8vIDEuLjEwXG4gICAgc3RyQ3ljbGVzOiB7IG0zMDogbnVtYmVyOyBoMTogbnVtYmVyOyBoMzogbnVtYmVyIH07XG4gIH07XG4gIGNsdXN0ZXJpbmc6IHtcbiAgICBjbHVzdGVyczogQ2x1c3RlcltdO1xuICB9O1xuICBwYXJhbXM6IHsgdmFsdWVzOiBSZWNvcmQ8c3RyaW5nLCBudW1iZXI+IH07XG59O1xuXG5leHBvcnQgY29uc3QgU0VUVElOR1NfVkVSU0lPTiA9IDE7XG5cbmV4cG9ydCBjb25zdCBERUZBVUxUX1NFVFRJTkdTOiBBcHBTZXR0aW5ncyA9IHtcbiAgdmVyc2lvbjogU0VUVElOR1NfVkVSU0lPTixcbiAgY29pblVuaXZlcnNlOiBbXSxcbiAgcHJvZmlsZTogeyBuaWNrbmFtZTogXCJcIiwgZW1haWw6IFwiXCIsIGJpbmFuY2VLZXlJZDogXCJcIiB9LFxuICBzdGF0czogeyBoaXN0b2dyYW1MZW46IDY0LCBibURlY2ltYWxzOiA0LCBpZFBjdERlY2ltYWxzOiA2IH0sXG4gIHRpbWluZzoge1xuICAgIGF1dG9SZWZyZXNoOiB0cnVlLFxuICAgIGF1dG9SZWZyZXNoTXM6IDQwXzAwMCxcbiAgICBzZWNvbmRhcnlFbmFibGVkOiB0cnVlLFxuICAgIHNlY29uZGFyeUN5Y2xlczogMyxcbiAgICBzdHJDeWNsZXM6IHsgbTMwOiA0NSwgaDE6IDkwLCBoMzogMjcwIH0sXG4gIH0sXG4gIGNsdXN0ZXJpbmc6IHsgY2x1c3RlcnM6IFt7IGlkOiBcImNsLTFcIiwgbmFtZTogXCJDbHVzdGVyIDFcIiwgY29pbnM6IFtdIH1dIH0sXG4gIHBhcmFtczogeyB2YWx1ZXM6IHsgZXRhOiAwLjAyLCBlcHNpbG9uOiAwLjIsIGlvdGE6IDAuNSB9IH0sXG4gIFxufTtcblxuLy8gLS0tLS0tLS0tLSBpbnRlcm5hbCBoZWxwZXJzIC0tLS0tLS0tLS1cbmNvbnN0IHRvVXBwZXJBcnJheSA9ICh2YWx1ZTogdW5rbm93bik6IHN0cmluZ1tdID0+IHtcbiAgaWYgKCFBcnJheS5pc0FycmF5KHZhbHVlKSkgcmV0dXJuIFtdO1xuICBjb25zdCBzZWVuID0gbmV3IFNldDxzdHJpbmc+KCk7XG4gIGNvbnN0IHJlc3VsdDogc3RyaW5nW10gPSBbXTtcbiAgZm9yIChjb25zdCBlbnRyeSBvZiB2YWx1ZSkge1xuICAgIGNvbnN0IHVwcGVyID0gU3RyaW5nKGVudHJ5ID8/IFwiXCIpLnRyaW0oKS50b1VwcGVyQ2FzZSgpO1xuICAgIGlmICghdXBwZXIgfHwgc2Vlbi5oYXModXBwZXIpKSBjb250aW51ZTtcbiAgICBzZWVuLmFkZCh1cHBlcik7XG4gICAgcmVzdWx0LnB1c2godXBwZXIpO1xuICB9XG4gIGlmICghc2Vlbi5oYXMoXCJVU0RUXCIpKSByZXN1bHQucHVzaChcIlVTRFRcIik7XG4gIHJldHVybiByZXN1bHQ7XG59O1xuXG5jb25zdCB0b051bWJlciA9ICh2YWx1ZTogdW5rbm93biwgZmFsbGJhY2s6IG51bWJlcik6IG51bWJlciA9PiB7XG4gIGNvbnN0IHBhcnNlZCA9IE51bWJlcih2YWx1ZSk7XG4gIHJldHVybiBOdW1iZXIuaXNGaW5pdGUocGFyc2VkKSA/IHBhcnNlZCA6IGZhbGxiYWNrO1xufTtcblxuY29uc3QgY2xhbXAgPSAodmFsdWU6IG51bWJlciwgbWluOiBudW1iZXIsIG1heDogbnVtYmVyKTogbnVtYmVyID0+XG4gIE1hdGgubWluKG1heCwgTWF0aC5tYXgobWluLCB2YWx1ZSkpO1xuXG5jb25zdCB0b0NsdXN0ZXJBcnJheSA9ICh2YWx1ZTogdW5rbm93bik6IENsdXN0ZXJbXSA9PiB7XG4gIGlmICghQXJyYXkuaXNBcnJheSh2YWx1ZSkpIHJldHVybiBERUZBVUxUX1NFVFRJTkdTLmNsdXN0ZXJpbmcuY2x1c3RlcnM7XG4gIHJldHVybiB2YWx1ZS5tYXAoKGVudHJ5LCBpbmRleCkgPT4ge1xuICAgIGNvbnN0IG9iaiA9IChlbnRyeSAmJiB0eXBlb2YgZW50cnkgPT09IFwib2JqZWN0XCIpID8gZW50cnkgYXMgUmVjb3JkPHN0cmluZywgdW5rbm93bj4gOiB7fTtcbiAgICByZXR1cm4ge1xuICAgICAgaWQ6IFN0cmluZyhvYmouaWQgPz8gYGNsLSR7aW5kZXggKyAxfWApLFxuICAgICAgbmFtZTogU3RyaW5nKG9iai5uYW1lID8/IGBDbHVzdGVyICR7aW5kZXggKyAxfWApLFxuICAgICAgY29pbnM6IHRvVXBwZXJBcnJheShvYmouY29pbnMpLFxuICAgIH07XG4gIH0pO1xufTtcblxuY29uc3QgdG9QYXJhbXMgPSAodmFsdWU6IHVua25vd24pOiBSZWNvcmQ8c3RyaW5nLCBudW1iZXI+ID0+IHtcbiAgaWYgKCF2YWx1ZSB8fCB0eXBlb2YgdmFsdWUgIT09IFwib2JqZWN0XCIpIHJldHVybiB7IC4uLkRFRkFVTFRfU0VUVElOR1MucGFyYW1zLnZhbHVlcyB9O1xuICBjb25zdCByZXN1bHQ6IFJlY29yZDxzdHJpbmcsIG51bWJlcj4gPSB7IC4uLkRFRkFVTFRfU0VUVElOR1MucGFyYW1zLnZhbHVlcyB9O1xuICBmb3IgKGNvbnN0IFtrZXksIHJhd10gb2YgT2JqZWN0LmVudHJpZXModmFsdWUpKSB7XG4gICAgY29uc3QgcGFyc2VkID0gTnVtYmVyKHJhdyk7XG4gICAgaWYgKE51bWJlci5pc0Zpbml0ZShwYXJzZWQpKSByZXN1bHRba2V5XSA9IHBhcnNlZDtcbiAgfVxuICByZXR1cm4gcmVzdWx0O1xufTtcblxuLy8gLS0tLS0tLS0tLSBwdWJsaWMgbWlncmF0aW9uIChleGlzdGluZykgLS0tLS0tLS0tLVxuZXhwb3J0IGZ1bmN0aW9uIG1pZ3JhdGVTZXR0aW5ncyhpbnB1dDogdW5rbm93bik6IEFwcFNldHRpbmdzIHtcbiAgY29uc3QgcyA9IChpbnB1dCAmJiB0eXBlb2YgaW5wdXQgPT09IFwib2JqZWN0XCIpID8gKGlucHV0IGFzIFJlY29yZDxzdHJpbmcsIHVua25vd24+KSA6IHt9O1xuXG4gIGNvbnN0IHN0YXRzU291cmNlID0gKHMuc3RhdHMgJiYgdHlwZW9mIHMuc3RhdHMgPT09IFwib2JqZWN0XCIpID8gcy5zdGF0cyBhcyBSZWNvcmQ8c3RyaW5nLCB1bmtub3duPiA6IHt9O1xuICBjb25zdCB0aW1pbmdTb3VyY2UgPSAocy50aW1pbmcgJiYgdHlwZW9mIHMudGltaW5nID09PSBcIm9iamVjdFwiKSA/IHMudGltaW5nIGFzIFJlY29yZDxzdHJpbmcsIHVua25vd24+IDoge307XG4gIGNvbnN0IHRpbWluZ0N5Y2xlcyA9ICh0aW1pbmdTb3VyY2Uuc3RyQ3ljbGVzICYmIHR5cGVvZiB0aW1pbmdTb3VyY2Uuc3RyQ3ljbGVzID09PSBcIm9iamVjdFwiKVxuICAgID8gdGltaW5nU291cmNlLnN0ckN5Y2xlcyBhcyBSZWNvcmQ8c3RyaW5nLCB1bmtub3duPlxuICAgIDoge307XG5cbiAgY29uc3Qgb3V0OiBBcHBTZXR0aW5ncyA9IHtcbiAgICB2ZXJzaW9uOiBTRVRUSU5HU19WRVJTSU9OLFxuICAgIGNvaW5Vbml2ZXJzZTogdG9VcHBlckFycmF5KHMuY29pblVuaXZlcnNlKSxcbiAgICBwcm9maWxlOiB7XG4gICAgICBuaWNrbmFtZTogU3RyaW5nKChzLnByb2ZpbGUgYXMgUmVjb3JkPHN0cmluZywgdW5rbm93bj4gfCB1bmRlZmluZWQpPy5uaWNrbmFtZSA/PyBcIlwiKSxcbiAgICAgIGVtYWlsOiBTdHJpbmcoKHMucHJvZmlsZSBhcyBSZWNvcmQ8c3RyaW5nLCB1bmtub3duPiB8IHVuZGVmaW5lZCk/LmVtYWlsID8/IFwiXCIpLFxuICAgICAgYmluYW5jZUtleUlkOiBTdHJpbmcoKHMucHJvZmlsZSBhcyBSZWNvcmQ8c3RyaW5nLCB1bmtub3duPiB8IHVuZGVmaW5lZCk/LmJpbmFuY2VLZXlJZCA/PyBcIlwiKSxcbiAgICB9LFxuICAgIHN0YXRzOiB7XG4gICAgICBoaXN0b2dyYW1MZW46IE1hdGgubWF4KDE2LCB0b051bWJlcihzdGF0c1NvdXJjZS5oaXN0b2dyYW1MZW4sIERFRkFVTFRfU0VUVElOR1Muc3RhdHMuaGlzdG9ncmFtTGVuKSksXG4gICAgICBibURlY2ltYWxzOiBjbGFtcCh0b051bWJlcihzdGF0c1NvdXJjZS5ibURlY2ltYWxzLCBERUZBVUxUX1NFVFRJTkdTLnN0YXRzLmJtRGVjaW1hbHMpLCAwLCA2KSxcbiAgICAgIGlkUGN0RGVjaW1hbHM6IGNsYW1wKHRvTnVtYmVyKHN0YXRzU291cmNlLmlkUGN0RGVjaW1hbHMsIERFRkFVTFRfU0VUVElOR1Muc3RhdHMuaWRQY3REZWNpbWFscyksIDAsIDgpLFxuICAgIH0sXG4gICAgdGltaW5nOiB7XG4gICAgICBhdXRvUmVmcmVzaDogQm9vbGVhbih0aW1pbmdTb3VyY2UuYXV0b1JlZnJlc2ggPz8gREVGQVVMVF9TRVRUSU5HUy50aW1pbmcuYXV0b1JlZnJlc2gpLFxuICAgICAgYXV0b1JlZnJlc2hNczogTWF0aC5tYXgoNTAwLCB0b051bWJlcih0aW1pbmdTb3VyY2UuYXV0b1JlZnJlc2hNcywgREVGQVVMVF9TRVRUSU5HUy50aW1pbmcuYXV0b1JlZnJlc2hNcykpLFxuICAgICAgc2Vjb25kYXJ5RW5hYmxlZDogQm9vbGVhbih0aW1pbmdTb3VyY2Uuc2Vjb25kYXJ5RW5hYmxlZCA/PyBERUZBVUxUX1NFVFRJTkdTLnRpbWluZy5zZWNvbmRhcnlFbmFibGVkKSxcbiAgICAgIHNlY29uZGFyeUN5Y2xlczogY2xhbXAodG9OdW1iZXIodGltaW5nU291cmNlLnNlY29uZGFyeUN5Y2xlcywgREVGQVVMVF9TRVRUSU5HUy50aW1pbmcuc2Vjb25kYXJ5Q3ljbGVzKSwgMSwgMTApLFxuICAgICAgc3RyQ3ljbGVzOiB7XG4gICAgICAgIG0zMDogTWF0aC5tYXgoMSwgdG9OdW1iZXIodGltaW5nQ3ljbGVzLm0zMCwgREVGQVVMVF9TRVRUSU5HUy50aW1pbmcuc3RyQ3ljbGVzLm0zMCkpLFxuICAgICAgICBoMTogTWF0aC5tYXgoMSwgdG9OdW1iZXIodGltaW5nQ3ljbGVzLmgxLCBERUZBVUxUX1NFVFRJTkdTLnRpbWluZy5zdHJDeWNsZXMuaDEpKSxcbiAgICAgICAgaDM6IE1hdGgubWF4KDEsIHRvTnVtYmVyKHRpbWluZ0N5Y2xlcy5oMywgREVGQVVMVF9TRVRUSU5HUy50aW1pbmcuc3RyQ3ljbGVzLmgzKSksXG4gICAgICB9LFxuICAgIH0sXG4gICAgY2x1c3RlcmluZzogeyBjbHVzdGVyczogdG9DbHVzdGVyQXJyYXkoKHMuY2x1c3RlcmluZyBhcyBSZWNvcmQ8c3RyaW5nLCB1bmtub3duPiB8IHVuZGVmaW5lZCk/LmNsdXN0ZXJzKSB9LFxuICAgIHBhcmFtczogeyB2YWx1ZXM6IHRvUGFyYW1zKChzLnBhcmFtcyBhcyBSZWNvcmQ8c3RyaW5nLCB1bmtub3duPiB8IHVuZGVmaW5lZCk/LnZhbHVlcykgfSxcbiAgfTtcblxuICBpZiAob3V0LmNvaW5Vbml2ZXJzZS5sZW5ndGggPT09IDApIHtcbiAgICBvdXQuY29pblVuaXZlcnNlID0gWy4uLkRFRkFVTFRfU0VUVElOR1MuY29pblVuaXZlcnNlXTtcbiAgfVxuXG4gIHJldHVybiBvdXQ7XG59XG5cbi8vIC0tLS0tLS0tLS0gTkVXOiBwdWJsaWMsIGVyZ29ub21pYyBoZWxwZXJzIC0tLS0tLS0tLS1cbi8qKiBEZWVwIHBhcnRpYWwgdHlwZSBmb3IgZXJnb25vbWljIHBhdGNoaW5nL2NyZWF0aW9uLiAqL1xuZXhwb3J0IHR5cGUgRGVlcFBhcnRpYWw8VD4gPSB7XG4gIFtLIGluIGtleW9mIFRdPzogVFtLXSBleHRlbmRzIG9iamVjdCA/IERlZXBQYXJ0aWFsPFRbS10+IDogVFtLXTtcbn07XG5cbi8qKiBOb3JtYWxpemUgY29pbnMgZnJvbSBhIHN0cmluZyAoY29tbWEvc3BhY2Utc2VwYXJhdGVkKSBvciBhcnJheTsgZW5zdXJlcyBVU0RUIHByZXNlbnQgYW5kIHVwcGVyY2FzZStkZWR1cGVkLiAqL1xuZXhwb3J0IGZ1bmN0aW9uIG5vcm1hbGl6ZUNvaW5Vbml2ZXJzZShpbnB1dDogc3RyaW5nIHwgc3RyaW5nW10gfCB1bmtub3duKTogc3RyaW5nW10ge1xuICBpZiAoQXJyYXkuaXNBcnJheShpbnB1dCkpIHJldHVybiB0b1VwcGVyQXJyYXkoaW5wdXQpO1xuICBpZiAodHlwZW9mIGlucHV0ID09PSBcInN0cmluZ1wiKSB7XG4gICAgY29uc3QgcGFydHMgPSBpbnB1dC5zcGxpdCgvWyxcXHNdKy8pLm1hcChzID0+IHMudHJpbSgpKS5maWx0ZXIoQm9vbGVhbik7XG4gICAgcmV0dXJuIHRvVXBwZXJBcnJheShwYXJ0cyk7XG4gIH1cbiAgcmV0dXJuIHRvVXBwZXJBcnJheShbXSk7XG59XG5cbi8qKiBUeXBlIGd1YXJkIHRvIGNoZWNrIGlmIGFuIG9iamVjdCBhbHJlYWR5IGxvb2tzIGxpa2UgYW4gQXBwU2V0dGluZ3MgYWZ0ZXIgbWlncmF0aW9uLiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGlzQXBwU2V0dGluZ3MoeDogdW5rbm93bik6IHggaXMgQXBwU2V0dGluZ3Mge1xuICByZXR1cm4gISF4ICYmIHR5cGVvZiB4ID09PSBcIm9iamVjdFwiICYmIFwidmVyc2lvblwiIGluICh4IGFzIGFueSkgJiYgXCJjb2luVW5pdmVyc2VcIiBpbiAoeCBhcyBhbnkpO1xufVxuXG4vKipcbiAqIEZhY3Rvcnkg4oCUIGNyZWF0ZSBhIG5vcm1hbGl6ZWQgQXBwU2V0dGluZ3Mgb2JqZWN0LlxuICogLSBJZiB5b3UgcGFzcyBub3RoaW5nLCB5b3UgZ2V0IG1pZ3JhdGVkIERFRkFVTFRfU0VUVElOR1MuXG4gKiAtIElmIHlvdSBwYXNzIGEgZGVlcC1wYXJ0aWFsIG9yIGFueSB1bmtub3duLCBpdCBpcyBtaWdyYXRlZCBzYWZlbHkuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBBcHBTZXR0aW5ncyhpbnB1dD86IERlZXBQYXJ0aWFsPEFwcFNldHRpbmdzPiB8IHVua25vd24pOiBBcHBTZXR0aW5ncyB7XG4gIHJldHVybiBtaWdyYXRlU2V0dGluZ3MoaW5wdXQgPz8gREVGQVVMVF9TRVRUSU5HUyk7XG59XG5cbi8qKiBNZXJnZSBhIGJhc2UgQXBwU2V0dGluZ3Mgd2l0aCBhIGRlZXAtcGFydGlhbCBwYXRjaCwgdGhlbiBub3JtYWxpemUuICovXG5leHBvcnQgZnVuY3Rpb24gbWVyZ2VBcHBTZXR0aW5ncyhiYXNlOiBBcHBTZXR0aW5ncywgcGF0Y2g6IERlZXBQYXJ0aWFsPEFwcFNldHRpbmdzPik6IEFwcFNldHRpbmdzIHtcbiAgLy8gc2hhbGxvdy1tZXJnZSBhdCB0b3AgbGV2ZWw7IG5lc3RlZCBvYmplY3RzIGFyZSByZS12YWxpZGF0ZWQgYnkgbWlncmF0ZVNldHRpbmdzXG4gIHJldHVybiBtaWdyYXRlU2V0dGluZ3MoeyAuLi5iYXNlLCAuLi5wYXRjaCB9KTtcbn1cbiJdLCJuYW1lcyI6WyJTRVRUSU5HU19WRVJTSU9OIiwiREVGQVVMVF9TRVRUSU5HUyIsInZlcnNpb24iLCJjb2luVW5pdmVyc2UiLCJwcm9maWxlIiwibmlja25hbWUiLCJlbWFpbCIsImJpbmFuY2VLZXlJZCIsInN0YXRzIiwiaGlzdG9ncmFtTGVuIiwiYm1EZWNpbWFscyIsImlkUGN0RGVjaW1hbHMiLCJ0aW1pbmciLCJhdXRvUmVmcmVzaCIsImF1dG9SZWZyZXNoTXMiLCJzZWNvbmRhcnlFbmFibGVkIiwic2Vjb25kYXJ5Q3ljbGVzIiwic3RyQ3ljbGVzIiwibTMwIiwiaDEiLCJoMyIsImNsdXN0ZXJpbmciLCJjbHVzdGVycyIsImlkIiwibmFtZSIsImNvaW5zIiwicGFyYW1zIiwidmFsdWVzIiwiZXRhIiwiZXBzaWxvbiIsImlvdGEiLCJ0b1VwcGVyQXJyYXkiLCJ2YWx1ZSIsIkFycmF5IiwiaXNBcnJheSIsInNlZW4iLCJTZXQiLCJyZXN1bHQiLCJlbnRyeSIsInVwcGVyIiwiU3RyaW5nIiwidHJpbSIsInRvVXBwZXJDYXNlIiwiaGFzIiwiYWRkIiwicHVzaCIsInRvTnVtYmVyIiwiZmFsbGJhY2siLCJwYXJzZWQiLCJOdW1iZXIiLCJpc0Zpbml0ZSIsImNsYW1wIiwibWluIiwibWF4IiwiTWF0aCIsInRvQ2x1c3RlckFycmF5IiwibWFwIiwiaW5kZXgiLCJvYmoiLCJ0b1BhcmFtcyIsImtleSIsInJhdyIsIk9iamVjdCIsImVudHJpZXMiLCJtaWdyYXRlU2V0dGluZ3MiLCJpbnB1dCIsInMiLCJzdGF0c1NvdXJjZSIsInRpbWluZ1NvdXJjZSIsInRpbWluZ0N5Y2xlcyIsIm91dCIsIkJvb2xlYW4iLCJsZW5ndGgiLCJub3JtYWxpemVDb2luVW5pdmVyc2UiLCJwYXJ0cyIsInNwbGl0IiwiZmlsdGVyIiwiaXNBcHBTZXR0aW5ncyIsIngiLCJBcHBTZXR0aW5ncyIsIm1lcmdlQXBwU2V0dGluZ3MiLCJiYXNlIiwicGF0Y2giXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/settings/schema.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/settings/server.ts":
/*!************************************!*\
  !*** ./src/lib/settings/server.ts ***!
  \************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getAll: () => (/* binding */ getAll),\n/* harmony export */   resolveCoinsFromSettings: () => (/* binding */ resolveCoinsFromSettings),\n/* harmony export */   serializeSettingsCookie: () => (/* binding */ serializeSettingsCookie),\n/* harmony export */   setAll: () => (/* binding */ setAll)\n/* harmony export */ });\n/* harmony import */ var private_next_rsc_server_reference__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! private-next-rsc-server-reference */ \"(rsc)/./node_modules/.pnpm/next@15.5.2_@playwright+tes_b7e6c280e9a1b4309347c0bf0ab476d5/node_modules/next/dist/build/webpack/loaders/next-flight-loader/server-reference.js\");\n/* harmony import */ var private_next_rsc_action_encryption__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! private-next-rsc-action-encryption */ \"(rsc)/./node_modules/.pnpm/next@15.5.2_@playwright+tes_b7e6c280e9a1b4309347c0bf0ab476d5/node_modules/next/dist/server/app-render/encryption.js\");\n/* harmony import */ var private_next_rsc_action_encryption__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(private_next_rsc_action_encryption__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var next_headers__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/headers */ \"(rsc)/./node_modules/.pnpm/next@15.5.2_@playwright+tes_b7e6c280e9a1b4309347c0bf0ab476d5/node_modules/next/dist/api/headers.js\");\n/* harmony import */ var _schema__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./schema */ \"(rsc)/./src/lib/settings/schema.ts\");\n/* harmony import */ var _markets_pairs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../markets/pairs */ \"(rsc)/./src/lib/markets/pairs.ts\");\n/* harmony import */ var private_next_rsc_action_validate__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! private-next-rsc-action-validate */ \"(rsc)/./node_modules/.pnpm/next@15.5.2_@playwright+tes_b7e6c280e9a1b4309347c0bf0ab476d5/node_modules/next/dist/build/webpack/loaders/next-flight-loader/action-validate.js\");\n// src/lib/settings/server.ts\n/* __next_internal_action_entry_do_not_use__ {\"00532f31c65bd9d7119874b7c000efa42c3a9e2e3a\":\"getAll\",\"00696b0d07c16ebe05246c326940d3b9133dac036c\":\"resolveCoinsFromSettings\",\"402b519d81502a95cf319ddb5b60bce32907aa6f08\":\"setAll\",\"40f9a1c8f3a3ab5d85ba51065396bf00a061db869e\":\"serializeSettingsCookie\"} */ \n\n\n\n\nconst COOKIE_KEY = \"appSettings\";\nconst LEGACY_COOKIE_KEYS = [\n    \"cp_settings_v1\"\n];\nconst ONE_YEAR = 60 * 60 * 24 * 365;\n// normalize list and guarantee USDT\nfunction normCoins(input) {\n    const arr = Array.isArray(input) ? input : [];\n    const seen = new Set();\n    const out = [];\n    for (const raw of arr){\n        const coin = (0,_markets_pairs__WEBPACK_IMPORTED_MODULE_4__.normalizeCoin)(raw);\n        if (!coin || seen.has(coin)) continue;\n        seen.add(coin);\n        out.push(coin);\n    }\n    if (!seen.has(\"USDT\")) {\n        seen.add(\"USDT\");\n        out.push(\"USDT\");\n    }\n    return out;\n}\nfunction safeParseJSON(v) {\n    if (!v) return null;\n    try {\n        return JSON.parse(v);\n    } catch  {\n        return null;\n    }\n}\nasync function getAll() {\n    const jar = await (0,next_headers__WEBPACK_IMPORTED_MODULE_2__.cookies)();\n    const raw = jar.get(COOKIE_KEY)?.value;\n    const parsed = safeParseJSON(raw);\n    const s = (0,_schema__WEBPACK_IMPORTED_MODULE_3__.migrateSettings)(parsed ?? _schema__WEBPACK_IMPORTED_MODULE_3__.DEFAULT_SETTINGS);\n    s.coinUniverse = normCoins(s.coinUniverse);\n    return s;\n}\nasync function serializeSettingsCookie(nextValue) {\n    // Merge against current cookie so partial/stale payloads cannot wipe fields\n    const current = await getAll();\n    const merged = (0,_schema__WEBPACK_IMPORTED_MODULE_3__.migrateSettings)({\n        ...current,\n        ...nextValue\n    });\n    const normalized = {\n        ...merged,\n        coinUniverse: normCoins(merged.coinUniverse)\n    };\n    const value = JSON.stringify(normalized);\n    const cookie = {\n        name: COOKIE_KEY,\n        value,\n        options: {\n            httpOnly: false,\n            sameSite: \"lax\",\n            path: \"/\",\n            maxAge: ONE_YEAR\n        }\n    };\n    return {\n        settings: normalized,\n        cookie\n    };\n}\nasync function setAll(nextValue) {\n    const jar = await (0,next_headers__WEBPACK_IMPORTED_MODULE_2__.cookies)();\n    const { settings, cookie } = await serializeSettingsCookie(nextValue);\n    jar.set(cookie.name, cookie.value, cookie.options);\n    // cleanup legacy names\n    const mutable = jar;\n    if (mutable.delete) {\n        for (const legacy of LEGACY_COOKIE_KEYS){\n            if (legacy !== cookie.name) mutable.delete(legacy);\n        }\n    }\n    return settings;\n}\n/** Convenience: normalized coin universe from the cookie. */ async function resolveCoinsFromSettings() {\n    const s = await getAll();\n    return s.coinUniverse.length ? s.coinUniverse : normCoins(_schema__WEBPACK_IMPORTED_MODULE_3__.DEFAULT_SETTINGS.coinUniverse);\n}\n\n(0,private_next_rsc_action_validate__WEBPACK_IMPORTED_MODULE_5__.ensureServerEntryExports)([\n    getAll,\n    serializeSettingsCookie,\n    setAll,\n    resolveCoinsFromSettings\n]);\n(0,private_next_rsc_server_reference__WEBPACK_IMPORTED_MODULE_0__.registerServerReference)(getAll, \"00532f31c65bd9d7119874b7c000efa42c3a9e2e3a\", null);\n(0,private_next_rsc_server_reference__WEBPACK_IMPORTED_MODULE_0__.registerServerReference)(serializeSettingsCookie, \"40f9a1c8f3a3ab5d85ba51065396bf00a061db869e\", null);\n(0,private_next_rsc_server_reference__WEBPACK_IMPORTED_MODULE_0__.registerServerReference)(setAll, \"402b519d81502a95cf319ddb5b60bce32907aa6f08\", null);\n(0,private_next_rsc_server_reference__WEBPACK_IMPORTED_MODULE_0__.registerServerReference)(resolveCoinsFromSettings, \"00696b0d07c16ebe05246c326940d3b9133dac036c\", null);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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Ozs7SUF2RHNCTjtJQVNBTztJQTJCQWM7SUFnQkFLOztBQXBEQTFCLDBGQUFBQSxDQUFBQTtBQVNBTywwRkFBQUEsQ0FBQUE7QUEyQkFjLDBGQUFBQSxDQUFBQTtBQWdCQUssMEZBQUFBLENBQUFBIiwic291cmNlcyI6WyJIOlxcVXNlcnNcXEd1c1xcc291cmNlXFxyZXBvXFxkeW5hbWljc1xcZHluYW1pY3MtYlxcY3J5cHRvcGktZHluYW1pY3NcXHNyY1xcbGliXFxzZXR0aW5nc1xcc2VydmVyLnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIHNyYy9saWIvc2V0dGluZ3Mvc2VydmVyLnRzXHJcblwidXNlIHNlcnZlclwiO1xuXG5pbXBvcnQgeyBjb29raWVzIH0gZnJvbSBcIm5leHQvaGVhZGVyc1wiO1xuaW1wb3J0IHsgREVGQVVMVF9TRVRUSU5HUywgbWlncmF0ZVNldHRpbmdzLCB0eXBlIEFwcFNldHRpbmdzIH0gZnJvbSBcIi4vc2NoZW1hXCI7XG5pbXBvcnQgeyBub3JtYWxpemVDb2luIH0gZnJvbSBcIi4uL21hcmtldHMvcGFpcnNcIjtcblxuY29uc3QgQ09PS0lFX0tFWSA9IFwiYXBwU2V0dGluZ3NcIjtcbmNvbnN0IExFR0FDWV9DT09LSUVfS0VZUyA9IFtcImNwX3NldHRpbmdzX3YxXCJdO1xuY29uc3QgT05FX1lFQVIgPSA2MCAqIDYwICogMjQgKiAzNjU7XG5cbi8vIG5vcm1hbGl6ZSBsaXN0IGFuZCBndWFyYW50ZWUgVVNEVFxuZnVuY3Rpb24gbm9ybUNvaW5zKGlucHV0OiB1bmtub3duKTogc3RyaW5nW10ge1xuICBjb25zdCBhcnIgPSBBcnJheS5pc0FycmF5KGlucHV0KSA/IGlucHV0IDogW107XG4gIGNvbnN0IHNlZW4gPSBuZXcgU2V0PHN0cmluZz4oKTtcbiAgY29uc3Qgb3V0OiBzdHJpbmdbXSA9IFtdO1xuICBmb3IgKGNvbnN0IHJhdyBvZiBhcnIpIHtcbiAgICBjb25zdCBjb2luID0gbm9ybWFsaXplQ29pbihyYXcgYXMgc3RyaW5nKTtcbiAgICBpZiAoIWNvaW4gfHwgc2Vlbi5oYXMoY29pbikpIGNvbnRpbnVlO1xuICAgIHNlZW4uYWRkKGNvaW4pO1xuICAgIG91dC5wdXNoKGNvaW4pO1xuICB9XG4gIGlmICghc2Vlbi5oYXMoXCJVU0RUXCIpKSB7XG4gICAgc2Vlbi5hZGQoXCJVU0RUXCIpO1xuICAgIG91dC5wdXNoKFwiVVNEVFwiKTtcbiAgfVxuICByZXR1cm4gb3V0O1xufVxuXG5mdW5jdGlvbiBzYWZlUGFyc2VKU09OKHY6IHN0cmluZyB8IHVuZGVmaW5lZCB8IG51bGwpOiBhbnkgfCBudWxsIHtcbiAgaWYgKCF2KSByZXR1cm4gbnVsbDtcbiAgdHJ5IHsgcmV0dXJuIEpTT04ucGFyc2Uodik7IH0gY2F0Y2ggeyByZXR1cm4gbnVsbDsgfVxufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0QWxsKCk6IFByb21pc2U8QXBwU2V0dGluZ3M+IHtcbiAgY29uc3QgamFyID0gYXdhaXQgY29va2llcygpO1xuICBjb25zdCByYXcgPSBqYXIuZ2V0KENPT0tJRV9LRVkpPy52YWx1ZTtcbiAgY29uc3QgcGFyc2VkID0gc2FmZVBhcnNlSlNPTihyYXcpO1xuICBjb25zdCBzID0gbWlncmF0ZVNldHRpbmdzKHBhcnNlZCA/PyBERUZBVUxUX1NFVFRJTkdTKTtcbiAgcy5jb2luVW5pdmVyc2UgPSBub3JtQ29pbnMocy5jb2luVW5pdmVyc2UpO1xuICByZXR1cm4gcztcbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHNlcmlhbGl6ZVNldHRpbmdzQ29va2llKG5leHRWYWx1ZTogdW5rbm93bik6IFByb21pc2U8e1xuICBzZXR0aW5nczogQXBwU2V0dGluZ3M7XG4gIGNvb2tpZTogeyBuYW1lOiBzdHJpbmc7IHZhbHVlOiBzdHJpbmc7IG9wdGlvbnM6IFBhcmFtZXRlcnM8QXdhaXRlZDxSZXR1cm5UeXBlPHR5cGVvZiBjb29raWVzPj5bXCJzZXRcIl0+WzJdIH07XG59PiB7XG4gIC8vIE1lcmdlIGFnYWluc3QgY3VycmVudCBjb29raWUgc28gcGFydGlhbC9zdGFsZSBwYXlsb2FkcyBjYW5ub3Qgd2lwZSBmaWVsZHNcbiAgY29uc3QgY3VycmVudCA9IGF3YWl0IGdldEFsbCgpO1xuICBjb25zdCBtZXJnZWQgPSBtaWdyYXRlU2V0dGluZ3MoeyAuLi5jdXJyZW50LCAuLi4obmV4dFZhbHVlIGFzIGFueSkgfSk7XG5cbiAgY29uc3Qgbm9ybWFsaXplZDogQXBwU2V0dGluZ3MgPSB7XG4gICAgLi4ubWVyZ2VkLFxuICAgIGNvaW5Vbml2ZXJzZTogbm9ybUNvaW5zKG1lcmdlZC5jb2luVW5pdmVyc2UpLFxuICB9O1xuXG4gIGNvbnN0IHZhbHVlID0gSlNPTi5zdHJpbmdpZnkobm9ybWFsaXplZCk7XG4gIGNvbnN0IGNvb2tpZSA9IHtcbiAgICBuYW1lOiBDT09LSUVfS0VZLFxuICAgIHZhbHVlLFxuICAgIG9wdGlvbnM6IHtcbiAgICAgIGh0dHBPbmx5OiBmYWxzZSxcbiAgICAgIHNhbWVTaXRlOiBcImxheFwiIGFzIGNvbnN0LFxuICAgICAgcGF0aDogXCIvXCIsXG4gICAgICBtYXhBZ2U6IE9ORV9ZRUFSLFxuICAgIH0sXG4gIH07XG4gIHJldHVybiB7IHNldHRpbmdzOiBub3JtYWxpemVkLCBjb29raWUgfTtcbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHNldEFsbChuZXh0VmFsdWU6IHVua25vd24pOiBQcm9taXNlPEFwcFNldHRpbmdzPiB7XG4gIGNvbnN0IGphciA9IGF3YWl0IGNvb2tpZXMoKTtcbiAgY29uc3QgeyBzZXR0aW5ncywgY29va2llIH0gPSBhd2FpdCBzZXJpYWxpemVTZXR0aW5nc0Nvb2tpZShuZXh0VmFsdWUpO1xuICBqYXIuc2V0KGNvb2tpZS5uYW1lLCBjb29raWUudmFsdWUsIGNvb2tpZS5vcHRpb25zKTtcblxuICAvLyBjbGVhbnVwIGxlZ2FjeSBuYW1lc1xuICBjb25zdCBtdXRhYmxlID0gamFyIGFzIHVua25vd24gYXMgeyBkZWxldGU/OiAobmFtZTogc3RyaW5nKSA9PiB2b2lkIH07XG4gIGlmIChtdXRhYmxlLmRlbGV0ZSkge1xuICAgIGZvciAoY29uc3QgbGVnYWN5IG9mIExFR0FDWV9DT09LSUVfS0VZUykge1xuICAgICAgaWYgKGxlZ2FjeSAhPT0gY29va2llLm5hbWUpIG11dGFibGUuZGVsZXRlKGxlZ2FjeSk7XG4gICAgfVxuICB9XG4gIHJldHVybiBzZXR0aW5ncztcbn1cblxuLyoqIENvbnZlbmllbmNlOiBub3JtYWxpemVkIGNvaW4gdW5pdmVyc2UgZnJvbSB0aGUgY29va2llLiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHJlc29sdmVDb2luc0Zyb21TZXR0aW5ncygpOiBQcm9taXNlPHN0cmluZ1tdPiB7XG4gIGNvbnN0IHMgPSBhd2FpdCBnZXRBbGwoKTtcbiAgcmV0dXJuIHMuY29pblVuaXZlcnNlLmxlbmd0aCA/IHMuY29pblVuaXZlcnNlIDogbm9ybUNvaW5zKERFRkFVTFRfU0VUVElOR1MuY29pblVuaXZlcnNlKTtcbn1cbiJdLCJuYW1lcyI6WyJjb29raWVzIiwiREVGQVVMVF9TRVRUSU5HUyIsIm1pZ3JhdGVTZXR0aW5ncyIsIm5vcm1hbGl6ZUNvaW4iLCJDT09LSUVfS0VZIiwiTEVHQUNZX0NPT0tJRV9LRVlTIiwiT05FX1lFQVIiLCJub3JtQ29pbnMiLCJpbnB1dCIsImFyciIsIkFycmF5IiwiaXNBcnJheSIsInNlZW4iLCJTZXQiLCJvdXQiLCJyYXciLCJjb2luIiwiaGFzIiwiYWRkIiwicHVzaCIsInNhZmVQYXJzZUpTT04iLCJ2IiwiSlNPTiIsInBhcnNlIiwiZ2V0QWxsIiwiamFyIiwiZ2V0IiwidmFsdWUiLCJwYXJzZWQiLCJzIiwiY29pblVuaXZlcnNlIiwic2VyaWFsaXplU2V0dGluZ3NDb29raWUiLCJuZXh0VmFsdWUiLCJjdXJyZW50IiwibWVyZ2VkIiwibm9ybWFsaXplZCIsInN0cmluZ2lmeSIsImNvb2tpZSIsIm5hbWUiLCJvcHRpb25zIiwiaHR0cE9ubHkiLCJzYW1lU2l0ZSIsInBhdGgiLCJtYXhBZ2UiLCJzZXR0aW5ncyIsInNldEFsbCIsInNldCIsIm11dGFibGUiLCJkZWxldGUiLCJsZWdhY3kiLCJyZXNvbHZlQ29pbnNGcm9tU2V0dGluZ3MiLCJsZW5ndGgiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/settings/server.ts\n");

/***/ }),

/***/ "(ssr)/./node_modules/.pnpm/next@15.5.2_@playwright+tes_b7e6c280e9a1b4309347c0bf0ab476d5/node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true!":
/*!**************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/next@15.5.2_@playwright+tes_b7e6c280e9a1b4309347c0bf0ab476d5/node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true! ***!
  \**************************************************************************************************************************************************************************************/
/***/ (() => {



/***/ }),

/***/ "../app-render/action-async-storage.external":
/*!*******************************************************************************!*\
  !*** external "next/dist/server/app-render/action-async-storage.external.js" ***!
  \*******************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/action-async-storage.external.js");

/***/ }),

/***/ "../app-render/after-task-async-storage.external":
/*!***********************************************************************************!*\
  !*** external "next/dist/server/app-render/after-task-async-storage.external.js" ***!
  \***********************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/after-task-async-storage.external.js");

/***/ }),

/***/ "../app-render/work-async-storage.external":
/*!*****************************************************************************!*\
  !*** external "next/dist/server/app-render/work-async-storage.external.js" ***!
  \*****************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/work-async-storage.external.js");

/***/ }),

/***/ "../app-render/work-unit-async-storage.external":
/*!**********************************************************************************!*\
  !*** external "next/dist/server/app-render/work-unit-async-storage.external.js" ***!
  \**********************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/work-unit-async-storage.external.js");

/***/ }),

/***/ "crypto":
/*!*************************!*\
  !*** external "crypto" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("crypto");

/***/ }),

/***/ "fs":
/*!*********************!*\
  !*** external "fs" ***!
  \*********************/
/***/ ((module) => {

"use strict";
module.exports = require("fs");

/***/ }),

/***/ "module":
/*!*************************!*\
  !*** external "module" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("module");

/***/ }),

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "next/dist/shared/lib/no-fallback-error.external":
/*!******************************************************************!*\
  !*** external "next/dist/shared/lib/no-fallback-error.external" ***!
  \******************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/shared/lib/no-fallback-error.external");

/***/ }),

/***/ "next/dist/shared/lib/router/utils/app-paths":
/*!**************************************************************!*\
  !*** external "next/dist/shared/lib/router/utils/app-paths" ***!
  \**************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/shared/lib/router/utils/app-paths");

/***/ }),

/***/ "node:child_process":
/*!*************************************!*\
  !*** external "node:child_process" ***!
  \*************************************/
/***/ ((module) => {

"use strict";
module.exports = require("node:child_process");

/***/ }),

/***/ "node:fs":
/*!**************************!*\
  !*** external "node:fs" ***!
  \**************************/
/***/ ((module) => {

"use strict";
module.exports = require("node:fs");

/***/ }),

/***/ "node:path":
/*!****************************!*\
  !*** external "node:path" ***!
  \****************************/
/***/ ((module) => {

"use strict";
module.exports = require("node:path");

/***/ }),

/***/ "node:url":
/*!***************************!*\
  !*** external "node:url" ***!
  \***************************/
/***/ ((module) => {

"use strict";
module.exports = require("node:url");

/***/ }),

/***/ "os":
/*!*********************!*\
  !*** external "os" ***!
  \*********************/
/***/ ((module) => {

"use strict";
module.exports = require("os");

/***/ }),

/***/ "path":
/*!***********************!*\
  !*** external "path" ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = require("path");

/***/ }),

/***/ "pg":
/*!*********************!*\
  !*** external "pg" ***!
  \*********************/
/***/ ((module) => {

"use strict";
module.exports = import("pg");;

/***/ }),

/***/ "util":
/*!***********************!*\
  !*** external "util" ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = require("util");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next@15.5.2_@playwright+tes_b7e6c280e9a1b4309347c0bf0ab476d5"], () => (__webpack_exec__("(rsc)/./node_modules/.pnpm/next@15.5.2_@playwright+tes_b7e6c280e9a1b4309347c0bf0ab476d5/node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fmatrices%2Flatest%2Froute&page=%2Fapi%2Fmatrices%2Flatest%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fmatrices%2Flatest%2Froute.ts&appDir=H%3A%5CUsers%5CGus%5Csource%5Crepo%5Cdynamics%5Cdynamics-b%5Ccryptopi-dynamics%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=H%3A%5CUsers%5CGus%5Csource%5Crepo%5Cdynamics%5Cdynamics-b%5Ccryptopi-dynamics&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=!")));
module.exports = __webpack_exports__;

})();